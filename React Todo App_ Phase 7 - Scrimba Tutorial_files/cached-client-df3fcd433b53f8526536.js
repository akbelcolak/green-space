(function(t){var e={}
function i(n){if(e[n])return e[n].exports
var r=e[n]={i:n,l:false,exports:{}}
t[n].call(r.exports,r,r.exports,i)
r.l=true
return r.exports}i.m=t
i.c=e
i.i=function(t){return t}
i.d=function(t,e,n){if(!i.o(t,e)){Object.defineProperty(t,e,{configurable:false,enumerable:true,get:n})}}
i.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t}
i.d(e,"a",e)
return e}
i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
i.p=""
return i(i.s=285)})([function(t,e,i){t.exports=i(246)},function(t,e,i){var n=i(0),r=n.createElement
var o=i(252).Stack
var s=i(97).Menu
var a=i(251).MenuItem
var u=i(54),c=u.Button,p=u.IconButton
var l=i(253),h=l.TextField,d=l.TextArea,f=l.SelectField
var m=i(250).ListItem
var y=i(98).Popover
var g=i(249).Dialog
var v=i(96).Indicator
var _=i(95).Form
var b=i(100).Snackbar
var x=i(254).Tile
var w=i(35).Icon
var T=i(99).Queue
var S=i(248).Actionable
var k=i(56)
var A={}
var C={}
var E=function(t,e){if(t.indexOf("\n")==-1&&e.indexOf("<p>")==0){return e.slice(3,e.lastIndexOf("</p>"))}else{return e}}
var D=function(t){var e
return A[t]||(A[t]=E(t,k(t)))}
var P=function(t){var e
return C[t]||(C[t]=n.toCamelCase("set-"+t))}
var $=function(t){let e=this
let i=e.uxa().action()
if(i){e.trigger("uxa:action",i)}if(typeof i=="string"||i instanceof String){t.halt().silence()
return e.trigger(i,e.uxa().contextData())}else if(i instanceof Array){t.halt().silence()
return e.trigger(i[0],i.slice(1))}else if(i instanceof Function){t.halt().silence()
return i.call(e,t)}else{return t._responder=null}}
function L(t){this._owner=t
this._options={}
this}L.prototype.__md={watch:"mdDidSet",name:"md"}
L.prototype.md=function(t){return this._md}
L.prototype.setMd=function(t){var e=this.md()
if(t!=e){this._md=t}if(t!=e){this.mdDidSet&&this.mdDidSet(t,e,this.__md)}return this}
L.prototype.__action={watch:"actionDidSet",name:"action"}
L.prototype.action=function(t){return this._action}
L.prototype.setAction=function(t){var e=this.action()
if(t!=e){this._action=t}if(t!=e){this.actionDidSet&&this.actionDidSet(t,e,this.__action)}return this}
L.prototype.open=function(t,e){if(e===undefined)e={}
return o.show(t,this._owner,e)}
L.prototype.menu=function(t){return this}
L.prototype.confirm=function(t){var e=this
return new Promise(function(i,n){var o
var s=function(){return i(true)}
var a=function(){return i(false)}
var u=(o=(o=r(g)).setContent(o.$.A||r("span",o.$,"A",o),2)).on$(0,["uxadismiss",a],e).on$(1,["uxasubmit",s],e).end((o.$.A.setNestedAttr("uxa","md",t).end(),true))
return e.open(u)})}
L.prototype.flash=function(t,e){if(t instanceof Error){t=t.message
e="dark"}if(typeof t=="string"||t instanceof String){t=r(b).setFlag(0,e||"dark").setNestedAttr("uxa","md",t).end()}if(t instanceof b){this.open(t)}return this}
L.prototype.set=function(t,e){return this[P(t)](e)}
L.prototype.mdDidSet=function(t){return this._owner.dom().innerHTML=D(t)}
L.prototype.actionDidSet=function(t,e){this._owner.ontap=$
return this}
L.prototype.contextData=function(){var t=null
var e=this._owner
while(e){if(t=e.data()){return t}e=e.parent()}return null}
L.prototype.queue=function(){return this._queue||(this._queue=new T(this._owner))}
n.extendTag("element",function(t){t.prototype.uxa=function(){return this._uxa||(this._uxa=new L(this))}
t.prototype.uxaSetAttribute=function(t,e){return this.uxa().set(t,e)}})
n.Event.prototype.uxa=function(){return this.target().uxa()}
var O=e.UXA=new L(null)
var c=e.Button=c
var p=e.IconButton=p
var s=e.Menu=s
var a=e.MenuItem=a
var h=e.TextField=h
var d=e.TextArea=d
var f=e.SelectField=f
var m=e.ListItem=m
a=e.MenuItem=a
var y=e.Popover=y
var g=e.Dialog=g
var _=e.Form=_
var v=e.Indicator=v
var b=e.Snackbar=b
var x=e.Tile=x
var w=e.Icon=w
var S=e.Actionable=S
if(true){window.UXA=O}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=e.VERSION=2
var s=e.SPIV=2
var a=e.MSG={AUTH:1,PUSH:2,STATS:3,PING:4,PONG:5,CHANGE:6,STATE:7,PREPARE:8,RECSTART:9,RECSTOP:10,CALLBACK:11,PUBLISH:12,CONNECTED:13,FORK:15,AUTOSAVE:16,RECREVERT:17,ROLLBACK:18,JOIN:20,LEAVE:21,SYNC:22,SYNCED:23,ERROR:24,ALERT:25,SID:26,TRACKING:27,VIEWSTATE:28,STREAMAPPEND:100,STREAMSTATE:101,STREAMRANGE:102,STREAMGETRANGE:103,STREAMTRIM:104,STREAMERROR:105,STREAMFLATTEN:106,CASTLOCK:110,OK:200,UNAUTHORIZED:401,ERR_NOTFOUND:404,REQUEST_TIMEOUT:408,ERR_PAYLOAD_TOO_LARGE:413,ERR_LOCKED:423,ERR_OUT_OF_RANGE:416,RELOAD_STYLES:1e3,UPDATES_AVAILABLE:1001}
var u=e.ACTION_MAP={}
var c=e.WIDGET_TYPE_MAP={}
var p=e.GRANT={SHOW:1,EDIT:2}
var l=e.DIRTY={SIZE:1,LAYOUT:2}
var h=e.ACTION={}
if(true){window.PROTOCOL_ACTION=h}var d=e.WIDGET={CREATE:15,FLAG:17,UNFLAG:18,UPDATE:20,APPEND:21,CONFIGURE:25,BATCH:27,LAYOUT:28}
d.FLAGS={Created:1,Enabled:2,Deleted:4}
var f=e.CAST=Object.create(d)
var m=e.FILE=Object.create(d)
var y=e.LAYOUT=Object.create(d)
var g=e.AGENT=Object.create(d)
var v=e.POINTER=Object.create(d)
var _=e.SIMULATOR=Object.create(d)
var b=e.CONSOLE=Object.create(d)
var x=e.STREAM={}
var w=e.DOM={}
var T=e.KEYS=h.KEY_TYPES=["state","pointer","layout","selection","file","focus","hover","active","enabled","visible","busy","fontSize","width","height","resizing","baseStyle","area","externaljs","colspan","hoverEntry","viewbox","class","style","title","log","info","warn","error","alert","meta","function","element","instance","udef","more","array","div","p","h1","h2","h3","h4","h5","h6","span","b","i","u","get","post","put","options","left","top","contentLeft","contentTop","contentWidth","contentheight","scrollTop","scrollLeft","scrollWidth","scrollHeight","lineHeight","maxWidth","maxHeight"]
for(let t=0,e=r(T),i=e.length;t<i;t++){T[e[t].toUpperCase()]=t}var S=e.SCON={parsedURICache:{},clone:function(t){return JSON.parse(JSON.stringify(t))},compare:function(t,e){return JSON.stringify(t)==JSON.stringify(e)},keyToRef:function(t){return T.indexOf(t)>=0?T.indexOf(t):t},refToKey:function(t){return typeof t=="number"?T[t]||t:t},paths:{},strToPath:function(t){if(this[t]){return this[t]}let e=t.split(".")
e=e.map(function(t){if(/^\-?\d+$/.test(t)){return parseInt(t)}return t})
return this[t]=n(e)==1?e[0]:e},pathToStr:function(t){return t instanceof Array?t.join("."):String(t)},decodeURI:function(t){var e
if(!(typeof t=="string"||t instanceof String)){return null}let i=this.parsedURICache[t]
if(i){return i}let n=t.match(/(scrimba\:\/\/)?(c[\w\-]+)(\@(\d+))?/)
let o={cid:n[2],index:n[4]}
var e=r(t.substr(n[0].length).split("#"))
let s=e[0],a=e[1]
o.path=s
if(a){o.rangeString=a
o.selection=this.decodeRangeString(a)}return this.parsedURICache[t]=o},decodeRangeString:function(t){let e=t.match(/L(\d+)(\:(\d+))?(-L?(\d+)(\:(\d+))?)?/).map(function(t){return t?parseInt(t):null})
let i=e[1],n=e[3],r=e[5],o=e[7]
if(!r){return[i,n||1,i,n||1,!n]}return[i,n||1,r,o||1,!n&&!o]}}
function k(){}e.LCRange=k
k.lclcToArray=function(t,e,i,n){if(i==t&&n==e||i==null&&n==null){return[t,e]}else if(i==t){return[t,e,n-e]}else{return[t,e,n-e,i-t]}}
k.rangeToArray=function(t){var e=[t.startLineNumber,t.startColumn,t.endColumn-t.startColumn,t.endLineNumber-t.startLineNumber]
if(e[3]==0){e.pop()
if(e[2]==0){e.pop()}}return e}
k.selectionToArray=function(t){var e=[t.selectionStartLineNumber,t.selectionStartColumn,t.positionColumn-t.selectionStartColumn,t.positionLineNumber-t.selectionStartLineNumber]
if(e[3]==0){e.pop()
if(e[2]==0){e.pop()}}return e}
h.SET=1
h.PATCH=2
h.WIDGET_CREATE=d.CREATE=3
h.LCINSERT=m.LCINSERT=4
h.LCDELETE=m.LCDELETE=5
h.LCEDIT=m.LCEDIT=6
h.LCSELECTION=m.LCSELECTION=7
h.LAYOUT=8
h.BROWSER_LAYOUT=9
h.NODE_LAYOUT=10
h.POINTER_UPDATE=12
h.CONSOLE_LOG=b.LOG=16
h.CONSOLE_CLEAR=b.CLEAR=17
h.CONSOLE_VAL_EXPAND=b.VAL_EXPAND=18
h.DOM_MUTATE=w.MUTATE=21
h.DOM_EVENT=w.EVENT=22
h.DOM_SCROLL=w.SCROLL=23
h.DOM_SELECTION=w.SELECTION=24
h.DOM_FOCUSIN=w.FOCUSIN=25
h.DOM_HOVERIN=w.HOVERIN=26
h.DOM_ACTIVEIN=w.ACTIVEIN=27
h.PAGE_LOAD=28
h.PAGE_LOADED=29
h.PAGE_LOG=30
h.PAGE_REQUEST=31
h.PAGE_HISTORY=32
h.RECSTART=f.RECSTART=33
h.RECSTOP=f.RECSTOP=34
h.PING=f.PING=35
h.SNAPSHOT=f.SNAPSHOT=36
h.FORK=f.FORK=37
h.BRANCH=f.BRANCH=38
h.TRIM=39
h.PAGE_UNLOAD=50
h.LOCK=100
h.UNLOCK=101
h.FS_RENAME=110
h.FS_REMOVE=111
h.FS_MOVE=112
h.WIDGET_FLAG=d.FLAG=126
h.WIDGET_UNFLAG=d.UNFLAG=127
h.WIDGET_APPEND=d.APPEND=128
h.SIM_BUILD=_.BUILD=200
h.SIM_RESULT=_.RESULT=201
h.DOM_FOCUSOUT=w.FOCUSOUT=202
h.DOM_HOVEROUT=w.HOVEROUT=203
h.DOM_ACTIVEOUT=w.ACTIVEOUT=204
h.DOM_INSERT=w.INSERT=206
h.DOM_RESET=w.RESET=207
h.LCSCROLL=m.SCROLL=210
f.WORKSPACE=-1
f.CONSOLE=-2
f.SIMULATOR=-3
f.INSPECTOR=-4
f.AGENT=-5
f.STREAM=-6
f.BROWSER=-7
f.FS=-8
f.PRIMARY_EDITOR=-9
f.EXPLORER_PANEL=-10
f.DEPENDENCIES_PANEL=-11
f.SLIDES=-12
f.SIDEBAR=-13
x.TRIM=50
b.LOG_TYPES={LOG:60,WARN:61,ERROR:62,RESULT:63,INFO:71,META:72,META_ERROR:73}
b.TYPES={MARKER:"~",NULL:1,UNDEFINED:2,ELEMENT:3,FUNCTION:4,INSTANCE:5,ERROR:6}
v.STATEFLAGS={LEFT_BUTTON:1,RIGHT_BUTTON:2,MIDDLE_BUTTON:4,HIDDEN:8,TRANSITION:16,HIGHLIGHT:32,CTRL:64,ALT:128,SHIFT:256}
v.FLAGS={Created:1,Enabled:2,Deleted:4,Visible:8}
v.STYLES={DEFAULT:0,ROW:1,SMALL_FLIPPED:2}
var A=e.POINTERMASK={LEFT_BUTTON:1,RIGHT_BUTTON:2,MIDDLE_BUTTON:4}
var C=e.LAYOUTMASK={SCALED:1,BOUNDLESS:2}
w.MUTS={RESET:1,INSERT:2,REMOVE:3,INIT:4,INSERT_AFTER:5,INSERT_ADJACENT:6,SETATTR:10,SETPROP:11,SETTEXT:12,POS:["beforebegin","afterbegin","beforeend","afterend"],NAMES:{class:1,value:2,checked:3,style:4},NAME_MAP:{1:"class",2:"value",3:"checked",4:"style"}}
var E=i(9)
var D=e.Bufferish=E.Decoder.prototype.bufferish
function P(t,e){this._socket=e
if(false){}else{this._data=new Uint8Array(t)}var i=new E.Decoder
i.write(this._data)
this._params=i.fetch()
if(typeof this._params=="number"||this._params instanceof Number){let t=i.offset
this._ref=this._params
this._data=true&&this._data.subarray(t)
this._params=i.fetch()
this._offset=i.offset-t}else{this._offset=i.offset}this.CODE=this._params[0]
this[1]=this._params[1]
this[2]=this._params[2]
this[3]=this._params[3]
this[4]=this._params[4]
this}e.Packet=P
P.prototype.params=function(t){return this._params}
P.prototype.setParams=function(t){this._params=t
return this}
P.prototype.socket=function(t){return this._socket}
P.prototype.setSocket=function(t){this._socket=t
return this}
P.prototype.data=function(t){return this._data}
P.prototype.setData=function(t){this._data=t
return this}
P.prototype.payloadSize=function(){return this._data.byteLength-this._offset}
P.prototype.retain=function(){if(false){}return this}
P.prototype.payload=function(){if(false){}else{return this._payload||(this._payload=this._data.subarray(this._offset))}}
P.prototype.reply=function(t){if(this._ref){t=D.concat([E.encode(this._ref),t])}this.socket().send(t)
return this}
P.prototype.sid=function(){return this.socket().sid}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(2),a=s.WIDGET,u=s.SCON,c=s.ACTION,p=s.WIDGET_TYPE_MAP
var l=i(85).Widgets
var h=i(193).WidgetOptions
var d=i(19).StreamAction
var f=a.FLAGS
function m(t,e,i){this.__={}
this._owner=t
this._id=e.id
this._data=e
this._state={v:0}
this._event=i
this._branch=i&&i.branch()||this.space().branch()
this._isLocal=!this.event()||this.event().LOCAL
this.setup()
this}e.Widget=m
m.prototype.id=function(t){return this._id}
m.prototype.setId=function(t){this._id=t
return this}
m.prototype.owner=function(t){return this._owner}
m.prototype.setOwner=function(t){this._owner=t
return this}
m.prototype.data=function(t){return this._data}
m.prototype.setData=function(t){this._data=t
return this}
m.prototype.state=function(t){return this._state}
m.prototype.setState=function(t){this._state=t
return this}
m.prototype.localData=function(t){return this._localData}
m.prototype.setLocalData=function(t){this._localData=t
return this}
m.prototype.isLocal=function(t){return this._isLocal}
m.prototype.setIsLocal=function(t){this._isLocal=t
return this}
m.prototype.event=function(t){return this._event}
m.prototype.setEvent=function(t){this._event=t
return this}
m.register=function(t,e){var i
p[t]||(p[t]=this)
return l.register(t,this)}
m.load=function(t,e,i){return t.widgets().get(e.id)||t.widgets().create(e.type,e,i)}
m.option=function(t,e){if(e===undefined)e={}
var i=this.prototype
var o=i._schema_
e.name=t
if(!i.hasOwnProperty("_schema_")){i._schema_=[]
if(o){for(let t=0,e=n(o),i=e.length,r;t<i;t++){r=e[t]
this.option(r.name,r)}}o=i._schema_}if(o[t]){o[t]=e
return}o.push(e)
o[t]=e
i[t]=function(e){return this.options().get(t,e)}
i[r.toCamelCase("set-"+t)]=function(i){this.options().set(t,i,e)
return this}
return e}
m.register("widget")
m.prototype.id=function(){return this._id}
m.prototype.key=function(){return this.id()}
m.prototype.v=function(){return this._options?this._options._v:0}
m.prototype.options=function(){return this._options||(this._options=new h(this))}
m.prototype.optionsDidUpdate=function(t){return this}
m.prototype.delay=function(t,e,i){var n=this,r
n._timeouts||(n._timeouts={})
clearTimeout(n._timeouts[t])
if(!i){i=n._timeouts[r=t+"FN"]||(n._timeouts[r]=function(){return n[t]()})}if(e!=-1){n._timeouts[t]=setTimeout(i,e)}return n}
m.prototype.async=function(t){var e=this
e._asyncTriggers||(e._asyncTriggers={})
var i=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()})
r.TICKER.add(i)
return e}
m.prototype.__uid=function(){if(this._owner==this.space()){return this.id()}if(this._wid){return this._wid}var t=this
var e=this._wid=[]
while(t instanceof m){e.unshift(t.id())
t=t._owner}return this._wid}
m.prototype.__lookup=function(t,e){if(e===undefined)e=0
var i
if(t instanceof Array){i=this.getChildById(t[e++])
return e==t.length?i:i.__lookup(t,e)}return this.getChildById(t)}
m.prototype.getChildById=function(t){return this.widgets().get(t)}
m.prototype.setup=function(){return this}
m.prototype.space=function(){return this._space||(this._space=this._owner&&this._owner.space())}
m.prototype.branch=function(){return this._branch}
m.prototype.root_=function(){return this.space()}
m.prototype.client=function(){return this.space().client()}
m.prototype.api=function(){return this.space().api()}
m.prototype.tick_=function(){return this}
m.prototype.widgets=function(){return this._widgets||(this._widgets=new l(this))}
m.prototype.isEnabled=function(){return true}
m.prototype.getAttribute=function(t){return this.data()[t]}
m.prototype.setAttribute=function(t,e){this.data()[t]=e
return this}
m.prototype.configure=function(t){this.options().set(t)
return this}
m.prototype.commitAdd=function(){return this.mount_()}
m.prototype.revertAdd=function(){return this.unmount_()}
m.prototype.commitDel=function(){return this.unmount_()}
m.prototype.revertDel=function(){return this.mount_()}
m.prototype.mount_=function(){this.owner().widgets().add(this,this._id)
return this}
m.prototype.unmount_=function(){this.owner().widgets().remove(this)
return this}
m.prototype.preload=function(){return this}
m.prototype.node=function(){return this._node||(this._node=o("div"))}
m.prototype.title=function(){return"Widget"}
m.prototype.marker=function(){return null}
m.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.api()).log.apply(t,[].concat(["widget:"+this.TYPE],Array.from(n)))}
m.prototype.push_=function(t,e,i){if(!i){i=this.state()}let n=this.action(t,e,i)
return this.root_().__push(n,i)}
m.prototype.batch_=function(t,e){if(!e){e=this.state()}for(let i=0,r=n(t),o=r.length,s;i<o;i++){s=r[i]
this.push_(s[0],s[1],e)}return this}
m.prototype.action=function(t,e,i){return d.type(t).build(e,i,this)}
m.prototype.append=function(t,e,i,n){return this}
m.prototype.apply=function(t,e,i,n){return i?false:true}
m.prototype.revert=function(t,e,i,n){return i?false:true}
m.prototype.destroy_=function(){console.warn("destroy widget")
return this.owner().widgets().remove(this)}
m.prototype.persist_=function(){return this}
m.prototype.synced_=function(){this._options&&this._options.synced_&&this._options.synced_()
return this}
m.prototype.focus_=function(){return this.space().agent()&&(this.space().agent().setFocus(this),this)}
m.prototype.blur_=function(){var t
if(this.isFocused()){console.log("try to blur widget!",this)
return this.space().agent().setFocus(t=this.space().agent().prevFocus()),t}}
m.prototype.isFocused=function(){return this.space().agent()&&this.space().agent().focus()==this}
m.prototype.toggleFocus=function(){return this.isFocused()?this.blur_():this.focus_()}
m.prototype.serialize=function(t,e){var i
this.persist_()
var n=u.clone(this.data())
i=n.state,delete n.state,i
if(t.local&&this._options&&this._options._overrides){for(let t=this._options._overrides,e,i=0,r=Object.keys(t),o=r.length,s;i<o;i++){s=r[i]
e=t[s]
n[s]=e}}if(this._widgets){n.widgets=this._widgets.map(function(i){return i.serialize(t,i,e)}).filter(function(t){return t})}return n}
m.prototype.deserialize=function(t,e){var i=this.data()
for(let e,n=0,r=Object.keys(i),o=r.length,s;n<o;n++){s=r[n]
e=i[s]
if(t[s]===undefined){t[s]=e}}this._data=t
if(this._options){this._options._v++}e.items.push(this)
this.owner().widgets().add(this,this._id)
if(t.widgets){this.deserializeWidgets(t.widgets,e)}return this}
m.prototype.deserializeWidgets=function(t,e){e.stack.push(this)
for(let i=0,r=n(t),o=r.length,s;i<o;i++){s=r[i]
m.load(this,s,e.event).deserialize(s,e)}return e.stack.pop()}
m.prototype.deserialized=function(){this.commitAdd()
return this}
m.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return r.emit(this,t,n)}
m.prototype.on=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.listen.apply(r,[].concat([this,t],Array.from(o)))}
m.prototype.un=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.unlisten.apply(r,[].concat([this,t],Array.from(o)))}
m.prototype.createWidget=function(t,e){if(e===undefined)e={}
t.id=this.widgets().getNextId()
return this.push_(a.CREATE,[this.__uid(),t],e)}
m.prototype.isLocal=function(){return this._isLocal}
m.prototype.dispose=function(){return this}
m.prototype.valueOf=function(t){return this.__uid()}},function(t,e){var i=function(t,e){for(let i,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
i=e[s]
t[s]=i}return}
var n=e.MASK={NEVER:0,ALWAYS:1,OWN:2,NOTNIL:4}
var r=e.ACCESS={NONE:0,READ:1,WRITE:2,INS:4,PUT:8,DEL:16,ALL:1|2|4|8|16,read:1,write:2,ins:4,put:8,edit:8,del:16}
function o(t){Object.defineProperty(this,"_cache",{value:{},enumerable:false})
i(this,t)
this}e.Resource=o
o.canPut=function(t,e,i){console.log("canPut",t.id,i&&i.uid)
if(i&&e.uid&&i.uid!=e.uid&&!i.isMod){return false}return true}
o.prototype.notifyChannels=function(t){return"all"}
o.prototype.patch=function(t){i(this,t)
return this}
o.prototype.db=function(){return this._db||App.api().db()}
o.prototype.api=function(){return this._db.api()}
o.prototype.isLocal=function(){return this.v==-1||this.v==-2}
o.prototype.isPersisted=function(){return this.v>=-1}
o.prototype.permissions=function(t){if(t&&(this.uid==t.id||t.isMod())){return r.ALL}else if(this.privacy=="private"){return r.NONE}else{return r.READ}}
o.prototype.can=function(t,e){return this.permissions(t)&(r[e]||e)}
o.prototype.update=function(t){if(true){if(!this.can(this.api().user(),r.WRITE)){return this}}t.id=this.id
return this._store.put(t)}
o.prototype.save=function(t){if(this.isLocal()){if(t){i(this,t)}return this._store.ins(this)}else{return t?this.update(t):Promise.resolve(this)}}
o.prototype.del=function(t){if(t===undefined)t=false
if(t&&this.isLocal()){this._store.del(this)}return this}
o.prototype.saveLocal=function(){return this._store.saveLocal(this)}
o.prototype.fetch=async function(){var t=await this._store.fetch(this)
return t}
o.prototype.dependsOn=function(){return null}
o.prototype.toJSON=function(){return this.serialize()}
o.prototype.beforeSerialize=function(){return null}
o.prototype.serialize=function(t){var e=this.constructor._serializer
this.beforeSerialize()
var i
if(false){}if(true){e=null}var r={}
var o=this.id
for(let t=this,s,a=0,u=Object.keys(t),c=u.length,p;a<c;a++){p=u[a]
s=t[p]
if(e&&e[p]!==undefined){if(s===undefined){s=null}if(e[p]==n.NEVER){continue}if(e[p]&n.OWN){if(!(o==i||this.uid&&this.uid==i)){continue}}}else if(p[0]=="_"||s==undefined){continue}r[p]=s}return r}},function(t,e,i){var n=i(0)
var r=n.defineTag("UserAvatar","span",function(t){t.prototype.__s={default:100,name:"s"}
t.prototype.s=function(t){return this._s}
t.prototype.setS=function(t){this._s=t
return this}
t.prototype._s=100
t.prototype.src=function(){if(this.data()){return"url('"+this.data().avatarUrl(this.s())+"')"}else{return"none"}}
t.prototype.render=function(){return this.$open(0).flag("Avatar").flagIf("anon",!this.data()).css("background-image",this.src()).synced()}})
e.UserAvatar=r},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("Page","main",function(t){t.prototype.isBusy=function(t){return this._isBusy}
t.prototype.setIsBusy=function(t){this._isBusy=t
return this}
t.prototype.__status={default:200,watch:"statusDidSet",name:"status"}
t.prototype.status=function(t){return this._status}
t.prototype.setStatus=function(t){var e=this.status()
if(t!=e){this._status=t}if(t!=e){this.statusDidSet&&this.statusDidSet(t,e,this.__status)}return this}
t.prototype._status=200
t.prototype.params=function(t){return this._params}
t.prototype.setParams=function(t){this._params=t
return this}
t.prototype.isLoaded=function(t){return this._isLoaded}
t.prototype.setIsLoaded=function(t){this._isLoaded=t
return this}
t.prototype.ref_=function(t,e){e["_"+t]=this
this._owner=e
return this}
t.prototype.load=function(t){return Promise.resolve(this)}
t.prototype.name=function(){return this.constructor._name}
t.prototype.render=function(){return this}
t.prototype.path=function(){return[]}
t.prototype.tools=function(){return null}
t.prototype.masthead=function(){return null}
t.prototype.title=function(){return"Learn to Code with Interactive Tutorials | Scrimba"}
t.prototype.desc=function(){return"Scrimba is a fun and fast way of learning to code! Our interactive courses and tutorials will teach you React, Vue, Angular, JavaScript,Â HTML, CSS, and more."}
t.prototype.image=function(){return"https://scrimba.com/static/art/maincover.png"}
t.prototype.footer=function(){let t=this.$$||(this.$$={}),e
return(e=this._footer=this._footer||(e=r("div",this)).flag("footer").flag("SiteFooter").flag("wide").setContent(e.$.A||r("div",e.$,"A",e).flag("grid").setContent([r("div",e.$,"B","A").flag("i1").setContent(e.$.C||r("div",e.$,"C","B").setContent(["Built with",e.$.D||r("a",e.$,"D","C").setHref("http://imba.io/").setTarget("_blank").setText("Imba")],2),2),r("div",e.$,"E","A").flag("i2").setContent(e.$.F||r("div",e.$,"F","E").setContent(["Created by",r("a",e.$,"G","F").setHref("https://twitter.com/sindreaars").setTarget("_blank").setText("@sindreaars"),"and",r("a",e.$,"H","F").setHref("https://twitter.com/perborgen").setTarget("_blank").setText("@perborgen")],2),2),r("div",e.$,"I","A").flag("i3").setContent([r("a",e.$,"J","I").setHref("https://github.com/scrimba/community/blob/master/TERMS.md").setTarget("_blank").setText("Terms"),r("a",e.$,"K","I").setHref("https://github.com/scrimba/community/blob/master/DOCS.md").setTarget("_blank").setText("Docs"),r("a",e.$,"L","I").setHref("https://spectrum.chat/scrimba/").setTarget("_blank").setText("Community"),r("a",e.$,"M","I").setHref("/about").setText("About")],2)],2),2)).end((e.$.D.end(),e.$.G.end(),e.$.H.end(),e.$.J.end(),e.$.K.end(),e.$.L.end(),e.$.M.end(),true))}
t.prototype.tick=function(){if(this.uxa().queue().idle()&&this.status()==200){this.render()}return this}
t.prototype.commit=function(){if(this.status()==404||this.status()==403){return this}if(this.isLoaded()){this.render()}return this}
t.prototype.mount=function(){App.setScrollTop(0)
return this}
t.prototype.onbeforenavigate=function(t){return this}})
e.Page=o},function(t,e,i){var n=e.global=i(259)
var r=e.hasBuffer=n&&!!n.isBuffer
var o=e.hasArrayBuffer="undefined"!==typeof ArrayBuffer
var s=e.isArray=i(36)
e.isArrayBuffer=o?g:b
var a=e.isBuffer=r?n.isBuffer:b
var u=e.isView=o?ArrayBuffer.isView||x("ArrayBuffer","buffer"):b
e.alloc=f
e.concat=m
e.from=d
var c=e.Array=i(261)
var p=e.Buffer=i(262)
var l=e.Uint8Array=i(263)
var h=e.prototype=i(57)
function d(t){if(typeof t==="string"){return v.call(this,t)}else{return _(this).from(t)}}function f(t){return _(this).alloc(t)}function m(t,i){if(!i){i=0
Array.prototype.forEach.call(t,s)}var n=this!==e&&this||t[0]
var r=f.call(n,i)
var o=0
Array.prototype.forEach.call(t,a)
return r
function s(t){i+=t.length}function a(t){o+=h.copy.call(t,r,o)}}var y=x("ArrayBuffer")
function g(t){return t instanceof ArrayBuffer||y(t)}function v(t){var e=t.length*3
var i=f.call(this,e)
var n=h.write.call(i,t)
if(e!==n){i=h.slice.call(i,0,n)}return i}function _(t){return a(t)?p:u(t)?l:s(t)?c:r?p:o?l:c}function b(){return false}function x(t,e){t="[object "+t+"]"
return function(i){return i!=null&&{}.toString.call(e?i[e]:i)===t}}},function(t,e){var i={VERSION:"1.4.8"}
i.setTimeout=function(t,e){return setTimeout(function(){e()
return i.commit()},t)}
i.setInterval=function(t,e){return setInterval(function(){e()
return i.commit()},t)}
i.clearInterval=function(t){return clearInterval(t)}
i.clearTimeout=function(t){return clearTimeout(t)}
i.subclass=function(t,e){for(let i in e){let n
n=e[i]
if(e.hasOwnProperty(i)){t[i]=n}}t.prototype=Object.create(e.prototype)
t.__super__=t.prototype.__super__=e.prototype
t.prototype.initialize=t.prototype.constructor=t
return t}
i.iterable=function(t){return t?t.toArray?t.toArray():t:[]}
i.await=function(t){if(t instanceof Array){console.warn("await (Array) is deprecated - use await Promise.all(Array)")
return Promise.all(t)}else if(t&&t.then){return t}else{return Promise.resolve(t)}}
var n=/-./g
var r={}
i.toCamelCase=function(t){if(t.indexOf("-")>=0){return t.replace(n,function(t){return t.charAt(1).toUpperCase()})}else{return t}}
i.toSetter=function(t){return r[t]||(r[t]=i.toCamelCase("set-"+t))}
i.indexOf=function(t,e){return e&&e.indexOf?e.indexOf(t):[].indexOf.call(t,e)}
i.len=function(t){return t&&(t.len instanceof Function?t.len.call(t):t.length)||0}
i.prop=function(t,e,i){if(t.defineProperty){return t.defineProperty(e,i)}return}
i.attr=function(t,e,n){if(n===undefined)n={}
if(t.defineAttribute){return t.defineAttribute(e,n)}let r=i.toCamelCase(e)
let o=i.toCamelCase("set-"+e)
let s=t.prototype
if(n.dom){s[r]=function(){return this.dom()[e]}
s[o]=function(t){if(t!=this[e]()){this.dom()[e]=t}return this}}else{s[r]=function(){return this.getAttribute(e)}
s[o]=function(t){this.setAttribute(e,t)
return this}}return}
i.propDidSet=function(t,e,i,n){let r=e.watch
if(r instanceof Function){r.call(t,i,n,e)}else if((typeof r=="string"||r instanceof String)&&t[r]){t[r](i,n,e)}return}
var o=function(t,e,i){var n,r,o
while((n=i)&&(i=i.next)){if(r=i.listener){if(i.path&&r[i.path]){o=e?r[i.path].apply(r,e):r[i.path]()}else{o=e?r.apply(i,e):r.call(i)}}if(i.times&&--i.times<=0){n.next=i.next
i.listener=null}}return}
i.listen=function(t,e,i,n){var r,o,s
r=t.__listeners__||(t.__listeners__={})
o=r[e]||(r[e]={})
s=o.tail||(o.tail=o.next={})
s.listener=i
s.path=n
o.tail=s.next={}
return s}
i.once=function(t,e,n){var r=i.listen(t,e,n)
r.times=1
return r}
i.unlisten=function(t,e,i,n){var r,o
var s=t.__listeners__
if(!s){return}if(r=s[e]){while((o=r)&&(r=r.next)){if(r==i||r.listener==i){o.next=r.next
r.listener=null
break}}}return}
i.emit=function(t,e,i){var n
if(n=t.__listeners__){if(n[e]){o(e,i,n[e])}if(n.all){o(e,[e,i],n.all)}}return}
i.observeProperty=function(t,e,n,r,o){if(o&&typeof o=="object"){i.unlisten(o,"all",t,n)}if(r&&typeof r=="object"){i.listen(r,"all",t,n)}return this}
t.exports=i},function(t,e,i){e.encode=i(104).encode
e.decode=i(102).decode
e.Encoder=i(266).Encoder
e.Decoder=i(265).Decoder
e.createCodec=i(269).createCodec
e.codec=i(264).codec},function(t,e,i){var n={},r=i(0)
var o=i(9)
var s=e.TYPES={ENTER:0,LEAVE:1,VISIBILITY:2,PLAYSTATE:10,BRANCH:11,SELECTION:12,COPY:13,CREATE_BRANCH:14}
var a=e.TYPE_NAME={}
a[s.ENTER]="enter"
a[s.LEAVE]="leave"
a[s.VISIBILITY]="visibility"
a[s.PLAYSTATE]="playstate"
a[s.BRANCH]="branch"
a[s.SELECTION]="selection"
a[s.COPY]="copy"
e.encode=n.encode=function(t,e){if(e===undefined)e=[]
var i=[Date.now(),t].concat(e)
return o.encode(i)}
function u(t){this._packet=t}u.prototype.timestamp=function(){return this._packet[0]}
u.prototype.code=function(){return this._packet[1]}
u.prototype.params=function(){return this._packet.slice(2)}
u.prototype.date=function(){return this._date||(this._date=new Date(this.timestamp()))}
u.prototype.name=function(){return a[this.code()]}
var c={}
u.handles=function(t){c[t]=this
return this}
u.decode=function(t){var e=c[t[1]]||u
return new e(t)}
function p(){return u.apply(this,arguments)}r.subclass(p,u)
p.handles(s.PLAYSTATE)
p.prototype.playState=function(){return this.params()[0]}
p.prototype.timeOffset=function(){return this.params()[1]}
p.prototype.playRate=function(){return this.params()[2]}
function l(){return u.apply(this,arguments)}r.subclass(l,u)
l.handles(s.VISIBILITY)
l.prototype.isVisible=function(){return this.params()[0]}
function h(t){this._data=new Uint8Array(t)
this._decoder=new o.Decoder
this._decoder.write(this._data)}e.Decoder=h
h.prototype.fetch=function(){if(this._decoder.offset<this._data.byteLength){var t=this._decoder.fetch()
return this.decode(t)}}
h.prototype.decode=function(t){return u.decode(t)}
h.prototype.fetchAll=function(){var t
var e=[]
while(t=this.fetch()){e.push(t)}return e}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0)
function s(t,e){this._owner=t
this._array=[]
this._im={}
for(let t=0,i=r(e),n=i.length;t<n;t++){this.add(i[t])}this}e.List=s
s.prototype.array=function(t){return this._array}
s.prototype.setArray=function(t){this._array=t
return this}
s.prototype.add=function(t,e){if(!this.has(t)){this._array.push(t)
this.register(t,e)
this.emit("add",t)}return t}
s.prototype.register=function(t,e){if(e!=undefined){this._im[e]=t}else if(t.key instanceof Function){if(null){}this._im[e=t.key()]=t}return e}
s.prototype.deregister=function(t){if(t&&t.key instanceof Function){this._im[t.key()]=null}return this}
s.prototype.getNextId=function(){var t=this._nextId||(this._nextId=0)
while(++t<1e4){if(!this._im[t]){return this._nextId=t}t++}return null}
s.prototype.at=function(t){return this._array[t]}
s.prototype.first=function(){return this.at(0)}
s.prototype.last=function(){return this.at(n(this)-1)}
s.prototype.push=function(t){return this.add(t)}
s.prototype.pop=function(){return this.remove(this.last())}
s.prototype.shift=function(){return this.remove(this.first())}
s.prototype.splice=function(t,e){var i=arguments,n=i.length
var o=new Array(n>2?n-2:0)
while(n>2)o[--n-2]=i[n]
for(let t=0,e=r(o),i=e.length;t<i;t++){this.register(e[t])}this._array.splice.apply(this._array,[].concat([t,e],Array.from(o)))
return this}
s.prototype.remove=function(t){if(this._im[t]){t=this._im[t]}var e=this.indexOf(t)
if(e>=0){this._array.splice(e,1)
this.deregister(t)
this.emit("remove",t)}return this}
s.prototype.delete=function(t){return this.remove(t)}
s.prototype.move=function(t,e){var i=this.indexOf(t)
if(i>=0){this._array[i]=null
this._array.splice(e,0,t)
this._array.splice(this._array.indexOf(null),1)}else{console.log("List.splice at",e,0,t)
this._array.splice(e,0,t)
this.register(t)}return this}
s.prototype.has=function(t){return this.indexOf(t)>=0||this._im[t]}
s.prototype.get=function(t){if(this._im[t]){return this._im[t]}}
s.prototype.map=function(t){return this.toArray().map(t)}
s.prototype.forEach=function(t){return this.toArray().forEach(t)}
s.prototype.first=function(t){if(t){return this.filter(t)[0]}else{return this._array[0]}}
s.prototype.filter=function(t){return this.toArray().filter(t)}
s.prototype.any=function(t){return this.filter(t).length>0}
s.prototype.indexOf=function(t){return this._array.indexOf(t)}
s.prototype.load=function(t){this._array=t instanceof Array?t:t.toArray()
return this}
s.prototype.eachReversed=function(t){var e=n(this)
while(e>0){t(this._array[--e],e)}return this}
s.prototype.toArray=function(){return this._array}
s.prototype.toClonedArray=function(){return this._array.slice(0)}
s.prototype.len=function(){return this._array.length}
s.prototype.lookup=function(t,e){return this}
s.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return o.emit(this,t,n)}
s.prototype.on=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.listen.apply(o,[].concat([this,t],Array.from(r)))}
s.prototype.un=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.unlisten.apply(o,[].concat([this,t],Array.from(r)))}
s.prototype.toJSON=function(){return this._array}
function a(){return s.apply(this,arguments)}o.subclass(a,s)
e.ModelList=a},function(t,e){var i={}
e.delay=i.delay=function(t){if(t===undefined)t=1e3
return new Promise(function(e,i){return setTimeout(e,t)})}
e.msToStr=i.msToStr=function(t,e){t||(t=0)
t=Math.round(t)
var i=t<0
if(t<0){t=-t}var n=Math.floor(t%6e4/1e3)
var r=Math.floor((t-n*1e3)/6e4)
if(n==60){n=0
r++}var o=""+r+":"+("0"+n).slice(-2)
if(e){o=o+"."+("000"+t%1e3).slice(-3)}if(i){o="-"+o}return o}
e.refreshPseudoClass=i.refreshPseudoClass=function(t,e,i,n){var r=document.body
var o=[]
if(n){if(i&&i.classList){i.classList.remove(n)}if(e&&e.classList){e.classList.add(n)}}while(i&&i!=r&&(!e||!i.contains(e))){if(i.classList){i.classList.remove(t)}i=i.parentNode}while(e&&e!=r&&r.contains(e)){if(e.classList){o.push(e)
e.classList.add(t)}e=e.parentNode}return o}
e.callClosest=i.callClosest=function(t,e,i){if(i===undefined)i=[]
if(!t){return}t=t._dom||t
while(t){if(t._tag&&t._tag[e]instanceof Function){return t._tag[e].apply(t._tag,i)}t=t.parentNode}return null}},function(t,e,i){var n=i(0),r=n.createElement
var o=i(5).UserAvatar
var s=i(14),a=s.TimeAgo,u=s.Duration,c=s.ShortCount,p=s.Format
var l=i(33).Tile
var h=i(1).IconButton
var d=i(48).CastPreview
var f=i(88).CastMenu
var m=n.defineTag("Progress",function(t){t.prototype.__value={watch:"valueDidSet",name:"value"}
t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){var e=this.value()
if(t!=e){this._value=t}if(t!=e){this.valueDidSet&&this.valueDidSet(t,e,this.__value)}return this}
t.prototype.valueDidSet=function(t){let e=parseInt(Math.min(1,Math.max(.05,t))*100)
return this.css("width",e+"%")}})
var y=n.defineTag("Completed",function(t){t.prototype.__value={watch:"valueDidSet",name:"value"}
t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){var e=this.value()
if(t!=e){this._value=t}if(t!=e){this.valueDidSet&&this.valueDidSet(t,e,this.__value)}return this}
t.prototype.valueDidSet=function(t){if(t>.95){return this.css("opacity",1)}}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||r("span",t,0,this).flag("check").dataset("icon","circlecheck"),2).synced((t[0].end(),true))}})
var g=n.defineTag("CastListItem",function(t){t.prototype.__progress={watch:"progressDidSet",name:"progress"}
t.prototype.progress=function(t){return this._progress}
t.prototype.setProgress=function(t){var e=this.progress()
if(t!=e){this._progress=t}if(t!=e){this.progressDidSet&&this.progressDidSet(t,e,this.__progress)}return this}
t.prototype.__showTime={default:true,name:"showTime"}
t.prototype.showTime=function(t){return this._showTime}
t.prototype.setShowTime=function(t){this._showTime=t
return this}
t.prototype._showTime=true
t.prototype.number=function(t){return this._number}
t.prototype.setNumber=function(t){this._number=t
return this}
t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.membership=function(t){return this._membership}
t.prototype.setMembership=function(t){this._membership=t
return this}
t.prototype.cast=function(){return this.data()}
t.prototype.playlist=function(){return this.context()}
t.prototype.url=function(){var t
if(this.playlist()){return"/p/"+this.playlist().id+"/"+this.data().id}else if((t=this.data())&&t.pid){return"/p/"+this.data().pid+"/"+this.data().id}else{return"/c/"+this.data().id}}
t.prototype.title=function(){var t
return this.data().title||(t=this.data().parent())&&t.title}
t.prototype.onclick=function(){if(!(!this.membership()&&this.data().privacy=="internal")){return this.trigger("castopen",[this.data(),this.playlist()])}}
t.prototype.pad=function(t){var e=t+""
if(e.length<2){e="0"+e}return e}
t.prototype.desc=function(){return""+this.title()}
t.prototype.previewText=function(){if(this.data().privacy=="public"&&!this.membership()){return"Preview"}else{return""}}
t.prototype.render=function(){var t=this.$
if(!(this.data().v>0&&(!this.data().CODE||this.data().CODE==200))){return}var e=this.cast().viewing(this.api().uid())
var i=e&&e.progress
var n=this.api().get(this.data().uid)
var o=n?n.name||n.username:"User"
var s=this.pad(this.number())
var a=""
if(!this.membership()&&this.data().privacy=="internal"){a="hide"}return this.$open(0).setFlag(-1,this.data().id).setFlag(-2,this.data().type).setFlag(-3,this.data().privacy).setFlag(-4,a).setChildren([(t[0]||r("div",t,0,this).flag("main").setContent([r("div",t,1,0).flag("play").setContent(t[2]||r("i",t,2,1).flag("sicon").dataset("name","circleplay"),2),r("span",t,3,0).flag("number"),r("span",t,4,0).flag("text"),r("div",t,5,0).flag("flex"),r("span",t,6,0).flag("preview"),r(y,t,7,0),r("span",t,8,0).flag("duration").flag("c1").flag("muted")],2)).end((t[2].end(),t[3].setText(""+s),t[4].setNestedAttr("uxa","md",this.desc()).end(),t[6].setContent(this.previewText(),3),t[7].setValue(e&&e.progress,1).end(),t[8].setContent(p.duration(this.data().duration),3),true)),e&&e.progress<.95?(t[9]||r(m,t,9,this)).setValue(e&&e.progress,1).end():void 0],1).synced()}})
e.CastListItem=g
var v=n.defineTag("CastTile",l,function(t){t.reg("c")
t.Renderer=function(t,e,i){let n,o=this.$$||(this.$$={}),s
return(o[s="key$"+e]||r(v,o,s,this)).setData(t).setContext(i).end()}
t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.cast=function(){return this.data()}
t.prototype.playlist=function(){return this.context()}
t.prototype.url=function(){var t
if(this.playlist()){return"/p/"+this.playlist().id+"/"+this.data().id}else if((t=this.data())&&t.pid){return"/p/"+this.data().pid+"/"+this.data().id}else{return"/c/"+this.data().id}}
t.prototype.canEdit=function(){return this.data().uid==this.api().uid()||this.api().isMod()}
t.prototype.showMenu=function(t){return t.uxa().open(r(f).bindData(this,"data",[]).setContext(this.context()).end())}
t.prototype.abstract=function(){let t=this.data().description||""
return t.slice(0,t.indexOf("\n\n"))}
t.prototype.desc=function(){return"# ["+this.data().title+"]("+this.url()+")\n"+this.abstract()}
t.prototype.render=function(){var t=this.$
var e=this.cast()
var i=e.viewing(this.api().uid())
if(!(e.v>0&&(!this.data().CODE||this.data().CODE==200))){return}var n=i&&i.progress
var o=this.api().get(this.data().uid)
var s=this.options()
var a=o?o.name||o.username:"User"
return this.$open(0).setFlag(-1,this.data().id).setFlag(-2,this.data().type).setFlag(-3,this.data().privacy).setFlag(-4,this.data().topic_id).flagIf("mine",this.data().uid==this.api().uid()).flagIf("draft",this.data().isDraft()).setChildren(t.$=t.$||[r(d,t,0,this).flag("figure"),r(m,t,1,this),r("div",t,2,this).flag("summary").flag("abs").setContent([r("div",t,3,2).flag("title").setContent(t[4]||r("a",t,4,3),2),r("div",t,5,2).flag("credits").flag("muted").flag("bullets")],2)],2).synced((t[0].bindData(this,"data",[]).setType(this.data().type).end(),t[1].setValue(i&&i.progress,1).end(),t[4].setHref(this.url()).setContent(this.data().isFork()?this.data().parent()&&this.data().parent().title:this.data().title,3).end(),t[5].setContent([this.data().isDraft()?t[6]||r("span",t,6,5).flag("pill").flag("draft").setText("DRAFT"):void 0,(t[7]||r("span",t,7,5).flag("pill").flag("type")).setFlag(0,this.data().type),(t[8]||r("span",t,8,5).flag("user")).setContent(o?(t[9]||r("a",t,9,8)).setHref(o.url()).setContent(a,3).end():void 0,3),this.data().duration?(t[10]||r("span",t,10,5).flag("duration")).setContent(p.duration(this.data().duration),3):void 0,this.data().published_at?(t[11]||r("span",t,11,5).flag("age")).setContent(p.timeAgo(this.data().published_at),3):void 0,this.data().can(this.api().user(),"edit")?(t[12]||r("span",t,12,5).setContent(t[13]||r("span",t,13,12).flag("tool").dataset("icon","mcog").on$(0,["tap","stop","showMenu"],this),2)).end((t[13].end(),true)):void 0],1),true))}})
e.CastTile=v},function(t,e,i){var n=i(0)
var r=i(118)
var o=i(18)
var s=n.defineTag("Format","span",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.dataDidSet=function(t){var e
return this.setText(e=this.format(t)),e}
t.prototype.format=function(t){return t}
t.timeAgo=function(t){return t?new r(new Date(t)).timeAgo():""}
t.duration=function(t){return t!=undefined?o.msToStr(t):""}
t.count=function(t,e,i){if(e===undefined)e=""
if(i===undefined)i=""
var n=t>1e4?(Math.round(t/100)/10).toFixed(1).replace(".0","")+"k "+e:t==1?"1 "+i:""+t+" "+e
return n[n.length-1]==" "?n.slice(0,-1):n}})
e.Format=s
var a=n.defineTag("TimeAgo",s,function(t){t.prototype.format=function(t){var e
return this.setText(e=t?new r(new Date(t)).timeAgo():""),e}})
e.TimeAgo=a
var u=n.defineTag("Duration",s,function(t){t.prototype.format=function(t){var e
return this.setText(e=t!=undefined?o.msToStr(t):""),e}})
e.Duration=u
var c=n.defineTag("ShortCount",s,function(t){t.prototype.singular=function(t){return this._singular}
t.prototype.setSingular=function(t){this._singular=t
return this}
t.prototype.plural=function(t){return this._plural}
t.prototype.setPlural=function(t){this._plural=t
return this}
t.prototype.format=function(t){if(t>1e4){return(Math.round(t/100)/10).toFixed(1).replace(".0","")+"k "+this.plural()}else if(t==1){return"1 "+this.singular()}else{return""+t+" "+this.plural()}}})
e.ShortCount=c},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
var o=i(28).Struct
function s(t){this._v=0
this._data=t}r.subclass(s,o)
e.Dimensions=s
s.RESIZING=1
s.MOVING=2
s.PIN_TOP=4
s.PIN_RIGHT=8
s.PIN_BOTTOM=16
s.PIN_LEFT=32
s.desc(["left","top","width","height","scrollLeft","scrollTop","scrollWidth","scrollHeight","vw","vh","scaleX","scaleY","targetRef","mask"])
s.prototype.anchorX=function(){return this.left()/(this.vw()-this.width())}
s.prototype.anchorY=function(){return this.top()/(this.vh()-this.height())}
s.prototype.round=function(){for(let t=0,e=n(this._data),i=e.length;t<i;t++){this._data[t]=Math.round(e[t])}return this}
s.prototype.right=function(){return this.vw()-this.left()-this.width()}
s.prototype.bottom=function(){return this.vh()-this.top()-this.height()}
s.prototype.resizeParent=function(t,e){if(t==this.vw()&&e==this.vh()){return this}var i=this.anchorX(),n=this.anchorY()
var r=Math.round((t-this.width())*i)
var o=Math.round((e-this.height())*n)
if(i>1){r=t-(this.vw()-this.left())}else if(i<0){r=this.left()}if(n>1){o=e-(this.vh()-this.top())}else if(n<0){o=this.top()}return this.set({left:r,top:o,vw:t,vh:e})}
s.prototype.resize=function(t,e,i){if(i===undefined)i=0
var n=this.anchorX()
var r=this.anchorY()
if(i&s.PIN_TOP){r=0}else if(i&s.PIN_BOTTOM){r=1}if(i&s.PIN_LEFT){n=0}else if(i&s.PIN_RIGHT){n=1}var o=n>.9||n<.1
var a=r>.9||r<.1
var u=this.vw()*n-t*n
var c=this.vh()*r-e*r
if(o){u=this.left()+(this.width()-t)*Math.round(n)}if(a){c=this.top()+(this.height()-e)*Math.round(r)}return this.set({left:u,top:c,width:t,height:e})}
s.prototype.ensureInsideParent=function(t){if(t===undefined)t=30
if(this.left()+this.width()<t){this.set({left:t-this.width()})}else if(this.left()>this.vw()-t){this.set({left:this.vw()-t})}if(this.top()>this.vh()-t){this.set({top:this.vh()-t})}else if(this.top()<t){this.set({top:t})}return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createTagMap,a=r.createElement
var u=i(1).IconButton
var c=i(20).ScrimbaGesture
var p=r.defineTag("Item",function(t){t.prototype.__startCol={watch:"startColDidSet",name:"startCol"}
t.prototype.startCol=function(t){return this._startCol}
t.prototype.setStartCol=function(t){var e=this.startCol()
if(t!=e){this._startCol=t}if(t!=e){this.startColDidSet&&this.startColDidSet(t,e,this.__startCol)}return this}
t.prototype.__col={watch:"colDidSet",name:"col"}
t.prototype.col=function(t){return this._col}
t.prototype.setCol=function(t){var e=this.col()
if(t!=e){this._col=t}if(t!=e){this.colDidSet&&this.colDidSet(t,e,this.__col)}return this}
t.prototype.startColDidSet=function(t){this.setCol(t)
return this.flagIf("late",t>7)}
t.prototype.colDidSet=function(t,e){if(e==null){this.flag("abs")}this.css({transform:"translate3d("+t*100+"%,0px,0px)"})
return this}})
var l=r.defineTag("CarouselBody")
var h=r.defineTag("Pager",function(t){t.prototype.ontouchstart=function(){return this}})
var d=r.defineTag("Pagebar",function(t){t.prototype.ontouchstart=function(t){let e=t._box=this.dom().getBoundingClientRect()
let i=(t.x()-e.left)/e.width
c.wrap(t,{type:"seek"})
return this}
t.prototype.ontouchupdate=function(t){let e=this.parent().count()
let i=Math.max(0,Math.min((t.x()-t._box.left)/t._box.width,1))
let n=Math.max(1,Math.ceil(i/(1/e)))
return this.parent().gotoPage(n-1,{dur:50})}})
function f(){return c.apply(this,arguments)}r.subclass(f,c)
f.prototype.ontouchupdate=function(t){if(!this._started&&Math.abs(t.dx())>7){this.onstart(t)
this._started=true}if(this._started){this.onupdate(t)}return this}
var m=r.defineTag("Carousel",function(t){t.prototype.__offset={default:0,name:"offset"}
t.prototype.offset=function(t){return this._offset}
t.prototype.setOffset=function(t){this._offset=t
return this}
t.prototype._offset=0
t.prototype.__limit={default:1e4,name:"limit"}
t.prototype.limit=function(t){return this._limit}
t.prototype.setLimit=function(t){this._limit=t
return this}
t.prototype._limit=1e4
t.prototype.renderer=function(t){return this._renderer}
t.prototype.setRenderer=function(t){this._renderer=t
return this}
t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.__rows={default:1,name:"rows"}
t.prototype.rows=function(t){return this._rows}
t.prototype.setRows=function(t){this._rows=t
return this}
t.prototype._rows=1
t.prototype.__count={watch:"countDidSet",name:"count"}
t.prototype.count=function(t){return this._count}
t.prototype.setCount=function(t){var e=this.count()
if(t!=e){this._count=t}if(t!=e){this.countDidSet&&this.countDidSet(t,e,this.__count)}return this}
t.prototype.__colOffset={watch:"colOffsetDidSet",name:"colOffset"}
t.prototype.colOffset=function(t){return this._colOffset}
t.prototype.setColOffset=function(t){var e=this.colOffset()
if(t!=e){this._colOffset=t}if(t!=e){this.colOffsetDidSet&&this.colOffsetDidSet(t,e,this.__colOffset)}return this}
t.prototype.colOffsetTarget=function(t){return this._colOffsetTarget}
t.prototype.setColOffsetTarget=function(t){this._colOffsetTarget=t
return this}
t.prototype.__infinite={default:true,name:"infinite"}
t.prototype.infinite=function(t){return this._infinite}
t.prototype.setInfinite=function(t){this._infinite=t
return this}
t.prototype._infinite=true
t.prototype.__hideFirstPager={default:true,name:"hideFirstPager"}
t.prototype.hideFirstPager=function(t){return this._hideFirstPager}
t.prototype.setHideFirstPager=function(t){this._hideFirstPager=t
return this}
t.prototype._hideFirstPager=true
t.prototype.build=function(){this._colOffset=this._colOffsetTarget=0
this._count=0
return t.prototype.__super__.build.apply(this,arguments)}
t.prototype.body=function(){var t=this.$$||(this.$$={}),e=this,i
let r=false?true:e.limit()
let o=0;(i=e._body=e._body||(i=a(l,e)).flag("body")).setContent(function t(i){var s=i.$iter()
for(let t=0,u=n(e.data()),c=u.length,l;t<c;t++){l=u[t]
if(t>=r){continue}s.push((i[t]||a(p,i,t)).setStartCol(t).setContent(e._renderer(l,l.id,e.context(),o++),3).end())}return s}(i.$["A"]||s(i.$,"A",e._body)),5).end()
e.setCount(o)
return e._body}
t.prototype.ontouchstart=function(t){if(this._count>this.cols()){return f.wrap(t,{handler:this,type:"pan"})}}
t.prototype.onpanstart=function(t){t._colOffset=this.colOffset()
t._dx0=t.dx()
return this.flag("_panning")}
t.prototype.onpanupdate=function(t){return this.scrollTo(t._colOffset-(t.dx()-t._dx0)/this.colWidth())}
t.prototype.onpanend=function(t){var e=this
let i=e.colOffset()-t._colOffset
let n=Math.round(e.colOffset()+Math.max(-.5,Math.min(i,.5)))
e.gotoPage(n,{ease:"easeInOutCubic"})
return setTimeout(function(){return e.unflag("_panning")},20)}
t.prototype.ontaplink=function(t){if(this.hasFlag("_panning")){return t.prevent()}}
t.prototype.gotoPage=function(t,e){var i=this
if(!e||e.constructor!==Object)e={}
var n=e.dur!==undefined?e.dur:-1
var r=e.ease!==undefined?e.ease:"easeOutCubic"
var o=i.colOffset()
var s=i.isInfinite()?t:Math.max(0,Math.min(t,i._count-i.cols()))
if(s<0){s=0}if(s==i._colOffsetTarget){return i}i._colOffsetTarget=s
if(n==-1){n=250+Math.abs(s-o)*100}var a=function(t){return i.scrollTo(t)}
i.anim().animate(o,s,n,a,r,function(){return i.render()})
return i}
t.prototype.scrollForward=function(){return this.gotoPage(this.currentPage()+1)}
t.prototype.scrollBack=function(){return this.gotoPage(this.currentPage()-1)}
t.prototype.scrollWidth=function(){return this.colWidth()*Math.ceil(this._count/this.rows())}
t.prototype.scrollTo=function(t){this.setColOffset(t)
return this}
t.prototype.isInfinite=function(){return this._count>4&&this.infinite()}
t.prototype.colOffsetDidSet=function(t,e){return this.draw()}
t.prototype.countDidSet=function(){return this.scheduler().mark()}
t.prototype.tick=function(){this.draw()
return this}
t.prototype.mount=function(){return this.draw()}
t.prototype.draw=function(){let t=this.colOffset()
let e=this.dom().offsetWidth||0
let i=this._body.dom().offsetWidth||0
let n=Math.round(e/i)
let r=this.rows()
if(this._count<=n){t=0}let o="translateX("+(t*-100).toFixed(6)+"%)"
this._body.css({transform:o})
if(n==0||i==0||this.count()==0){return}let s=Math.round(t)
let a=Math.max(Math.round(t-1),0)
if(s>0){this.setHideFirstPager(false)}if(s==0&&a==0){this.setHideFirstPager(true)}let u=a+Math.min(n+2,this._count)
let c=a
this.flagIf("tiny",i<250)
let p=this._body.dom().children
if(t==this._colOffsetTarget){this._colOffsetTarget=null}if(s==this._firstCol){return this}this._firstCol=s
while(c<u){let t=c%this._count
let e=p[t]
if(e){e._tag.setCol(c)}c++}this.flag("abs")
this.flagIf("no-scroll",n>=this._count)
if(this._track){let t=100
let e=1/this._count
let i=s%this._count
let n=t/this._count*(s%this._count)
this._track.css({width:(e*100).toFixed(2)+"%",transform:"translate3d("+n+"px,0px,0px)"})}return}
t.prototype.currentPage=function(){return Math.round(this.colOffset())}
t.prototype.gridWidth=function(){return this.dom().offsetWidth||0}
t.prototype.colWidth=function(){return this._body.dom().offsetWidth||0}
t.prototype.cols=function(){return Math.round(this.gridWidth()/this.colWidth())}
t.prototype.render=function(){var t=this.$,e
return this.$open(0).setChildren([(t[0]||a("div",t,0,this).flag("carousel-container")).setContent(this.body(),3),!this.hideFirstPager()?(t[1]||a(h,t,1,this).flag("pager").flag("prev").dataset("icon","mleft").on$(0,["tap","prevent","scrollBack"],this)).end():void 0,(t[2]||a(h,t,2,this).flag("pager").flag("next").dataset("icon","mright").on$(0,["tap","prevent","scrollForward"],this)).end(),(e=t[3]||(e=a(d,t,3,this)).setContent(this._track=this._track||a("div",e).flag("track"),2)).end()],1).synced()}})
e.Carousel=m},function(t,e,i){var n=i(0)
function r(t,e){var i=this
i._target=t
i._path=e
i._time=0
i._timeout=null
i._trigger=function(){return i.trigger()}
i}e.Delay=r
r.prototype.data=function(t){return this._data}
r.prototype.setData=function(t){this._data=t
return this}
r.delay=function(t,e,i,n){var o=t.__delays_||(t.__delays_={})
var s=o[e]||(o[e]=new r(t,e))
i==-1?s.cancel():s.delay(i)
return s}
r.prototype.async=function(t){var e=this
e._asyncTriggers||(e._asyncTriggers={})
var i=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()})
n.TICKER.add(i)
return e}
r.prototype.delay=function(t){let e=Date.now()+t
if(this._timeout&&e>=this._time){this._time=e}else{this._time=e
if(this._timeout){clearTimeout(this._timeout)}this._timeout=setTimeout(this._trigger,t)}return this}
r.prototype.cancel=function(){clearTimeout(this._timeout)
this._timeout=null
this._time=null
return this}
r.prototype.trigger=function(){clearTimeout(this._timeout)
this._timeout=null
if(this._time){let t=this._time-Date.now()
if(t>3){return this.delay(t)}}if(this._target instanceof Function){this._target(this)}else{this._target[this._path](this)}return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r={}
var o=i(9)
var s=o.Decoder.prototype.bufferish
e.mpconcat=r.mpconcat=function(t){return s.concat(t)}
e.mpencode=r.mpencode=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
var r=new o.Encoder({})
for(let t=0,e=n(i),o=e.length;t<o;t++){r.write(e[t])}return r.read()}
e.delay=r.delay=function(t){if(t===undefined)t=1e3
return new Promise(function(e,i){return setTimeout(e,t)})}
e.msToStr=r.msToStr=function(t,e){var i=Math.floor(t%6e4/1e3)
var n=Math.floor((t-i*1e3)/6e4)
if(i==60){i=0
n++}var r=""+n+":"+("0"+i).slice(-2)
if(e){r=r+"."+("000"+t%1e3).slice(-3)}return r}
e.uuid=r.uuid=function(t,e){e=t=""
while(t++<36){e+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-"}return e}
e.rndstr=r.rndstr=function(t){if(t===undefined)t=16
return r.uuid().replace(/\-/g,"").substr(0,t)}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0)
var s=i(2),a=s.ACTION_MAP,u=s.ACTION,c=s.WIDGET,p=s.CAST,l=s.KEYS,h=s.SCON
var d=i(28).Struct
function f(t,e){this._params=t
this._branch=e
this._offset=0
this._prev=null
this._next=null
this._receivedAt=Date.now()
this}e.StreamAction=f
f.seed=function(t){var e=new this([],t._owner)
e._index=-1
e._byteOffset=1
return e}
f.handles=function(t,e){if(e===undefined)e={}
a[t]=this
this._type=this.prototype._type=t
this._options=e
this._strategy=e.strategy
this._diff=e.diff
return this}
f.type=function(t){return a[t]}
f.deserialize=function(t,e){var i=a[t[0]]||this
return new i(t,e)}
f.build=function(t,e,i){if(!(t instanceof Array)){t=this.paramify(t)}return new this(t,null)}
f.encode=function(t,e,i,n){if(this._strategy=="dedupe"){let e=JSON.stringify(t)
if(i._dupes[e]!=null){return[i._dupes[e]]}}return t}
f.decode=function(t,e,i,n){var r
if(this._strategy=="dedupe"){if(t.length==1){t=i._actions[t[0]]._params}else{var o=JSON.stringify(t);(r=i._dupes)[o]==null?r[o]=n:r[o]}}return new this(t)}
f.schema=function(t){this.prototype._schema=this._schema=t
this._defaults=[]
var e=function(t){return function(){return this._params[t]}}
for(let i=0,n=r(t),o=n.length;i<o;i++){this._defaults.push(0)
this.prototype[n[i]]=e(i)}return this}
f.paramify=function(t){if(!this._schema){throw"A"+this.prototype._type+" does not support paramify"}var e=this._defaults.slice()
for(let i,n=0,r=Object.keys(t),o=r.length,s;n<o;n++){s=r[n]
i=t[s]
let o=this._schema.indexOf(s)
e[o]=i}return e}
f.prototype.offset=function(t){return this._offset}
f.prototype.setOffset=function(t){this._offset=t
return this}
f.prototype.type=function(t){return this._type}
f.prototype.setType=function(t){this._type=t
return this}
f.prototype.params=function(t){return this._params}
f.prototype.setParams=function(t){this._params=t
return this}
f.prototype.index=function(t){return this._index}
f.prototype.setIndex=function(t){this._index=t
return this}
f.prototype.byteEnd=function(t){return this._byteEnd}
f.prototype.setByteEnd=function(t){this._byteEnd=t
return this}
f.prototype.receivedAt=function(t){return this._receivedAt}
f.prototype.setReceivedAt=function(t){this._receivedAt=t
return this}
f.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.branch()).log.apply(t,[].concat(["action:"+this.constructor.name],Array.from(n)))}
f.prototype.addToStream=function(t){this._stream=t
this._branch||(this._branch=t._owner)
this._prev=t._tail
this._parent=t._lastActions[this._type]
this._offset=t._lastTimeOffset
return this.INDEX=this._index=n(t)}
f.prototype.commitToStream=function(t){if(this._prev){this._prev._next=this}t.lastActions()[this._type]=this
t.actions().push(this)
this._byteEnd=t.byteLength()
return this}
f.prototype.removeFromStream=function(t){t._lastActions[this._type]=this._parent
t.actions().pop()
return this}
f.prototype.timeOffset=function(){return this._offset}
f.prototype.branch=function(){return this._branch||this._stream._owner}
f.prototype.space=function(){return this.branch().space()}
f.prototype.data=function(){return this._params[1]}
f.prototype.toString=function(){return"A#"+this.INDEX}
f.prototype.toStruct=function(){return this._params}
f.prototype.addSubAction=function(t,e){t._branch=this.branch()
this._children||(this._children=[])
this._children.push(t)
t.commitWithCursor(e)
return t}
f.prototype.encode=function(t){return this.constructor.encode(this._params,this._parent?this._parent._params:null,t,this._index)}
f.prototype.target=function(){return this._branch.__lookup(this._params[0])||this._branch.space()}
f.prototype.isEnabled=function(){return true}
f.prototype.isSignificant=function(){return false}
f.prototype.commitWithCursor=function(t){t._stack.unshift(this)
this.commit(t)
t._stack.shift()
return this}
f.prototype.revertWithCursor=function(t){t._stack.unshift(this)
if(this._children){var e=this._children.length
while(e>0){this._children[--e].revertWithCursor(t)}this._children=null}this.revert(t)
t._stack.shift()
return this}
f.prototype.commit=function(t){var e
if(e=this.target()){t.markTarget(e)
e.apply(this)}return this}
f.prototype.revert=function(t){var e
if(e=this.target()){t.markTarget(e)
e.revert(this)}return this}
f.prototype.discard=function(){return this}
function m(){return f.apply(this,arguments)}o.subclass(m,f)
e.CreateWidget=m
m.handles(u.WIDGET_CREATE,["target","config"])
m.prototype.isSignificant=function(){return true}
m.prototype.widget=function(){return this._widget||(this._widget=this.target().widgets().create(this.data().type,this.data(),this))}
m.prototype.commit=function(t){this.widget().commitAdd()
return t.markTarget(this.target())}
m.prototype.revert=function(t){this.widget().revertAdd()
t.markTarget(this.target())
return this}
function y(t,e){this._params=t
this._branch=e
this._offset=0
this._prev=null
this._next=null
this}o.subclass(y,f)
e.Snapshot=y
y.handles(p.SNAPSHOT,["data"])
y.prototype.commit=function(){if(!this.branch().space().isDeserialized()){this.branch().space().deserialize(this._params[0],this)}return this}
y.prototype.revert=function(){return this}
function g(){return y.apply(this,arguments)}o.subclass(g,y)
e.BranchAction=g
g.handles(p.BRANCH)
g.prototype.commit=function(){if(this.branch()==this.branch().space().trunk()){g.prototype.__super__.commit.apply(this,arguments)}return this}
function v(){return g.apply(this,arguments)}o.subclass(v,g)
e.ForkAction=v
v.handles(u.FORK)
function _(){return f.apply(this,arguments)}o.subclass(_,f)
e.PingAction=_
_.handles(u.PING)
function b(){return f.apply(this,arguments)}o.subclass(b,f)
e.ConfigSet=b
b.handles(u.SET,[])
b.decode=function(t,e,i,n){if(e){if(t.length<2){t.unshift(e[1])}if(t.length<3){t.unshift(e[0])}}return new this(t)}
b.encode=function(t,e){if(e&&e.length==t.length){if(t[0]==e[0]){if(t[1]==e[1]){return[t[2]]}else{return[t[1],t[2]]}}}return t}
b.prototype.key=function(){return l[this._params[1]]||this._params[1]}
b.prototype.commit=function(t){var e
var i=this.key()
if(e=this.target()){t.markTarget(e)
this._revertValue||(this._revertValue=e._data[i])
e._data[i]=this._params[2]
return e.options()._v++}}
b.prototype.revert=function(t){var e
if(e=this.target()){t.markTarget(e)
e._data[this.key()]=this._revertValue
e.options()._v++}return this}
function x(){return f.apply(this,arguments)}o.subclass(x,f)
e.Patch=x
x.handles(u.PATCH)
x.prototype.key=function(){return l[this._params[1]]||this._params[1]}
x.prototype.data=function(){return this._params[2]}
x.prototype.commit=function(t){var e
var i=this.key(),n=this.data()
if(e=this.target()){t.markTarget(e)
this._revertValue=e._data[i]
this._value||(this._value=d.decode(this._revertValue||n,n))
e._data[i]=this._value
return e.options()._v++}}
x.prototype.revert=function(t){var e
if(e=this.target()){t.markTarget(e)
e._data[this.key()]=this._revertValue
e.options()._v++}return this}
function w(){return f.apply(this,arguments)}o.subclass(w,f)
function T(){return w.apply(this,arguments)}o.subclass(T,w)
e.TextEdit=T
T.handles(u.LCEDIT)
T.prototype.isSignificant=function(){return true}
T.prototype.data=function(){return this._params[1]}
T.prototype.selAfter=function(){return this._params[2]}
T.prototype.selBefore=function(){return this._selBefore}
T.prototype.commit=function(t){var e=this.target()
this._selBefore=e._selState
t.markTarget(e)
e.model().apply(this.data(),this.LOCAL)
if(this.selAfter()){e._selState=this.selAfter()}e.async("modified")
return this.LOCAL=null}
T.prototype.revert=function(t){t.markTarget(this.target())
this.target().model().undo(this.data())
if(this.selBefore()){return this.target()._selState=this.selBefore()}}
function S(){return T.apply(this,arguments)}o.subclass(S,T)
e.TextInsert=S
S.handles(u.LCINSERT)
S.decode=function(t,e,i){if(typeof t=="string"){var n=e[4]||[e[1],e[2]+e[3].length]
t=[e[0],n[0],n[1],t]}return new this(t)}
S.encode=function(t,e){if(!e){return t}var i=e[4]||[e[1],e[2]+e[3].length]
if(i.length==2&&i[0]==t[1]&&i[1]==t[2]){if(!t[4]){return t[3]}}return t}
S.prototype.encode=function(t){var e=this._parent&&this._parent._params
var i=this._params
if(e&&!i[4]){var n=this._parent.selAfter()
if(n.length==2&&n[0]==i[1]&&n[1]==i[2]){return i[3]}}return i}
S.prototype.data=function(){if(this._data){return this._data}let t=this._params
let e=[[t[1],t[2]],t[3]]
return this._data=[e]}
S.prototype.selAfter=function(){return this._selAfter||(this._selAfter=this._params[4]||[this._params[1],this._params[2]+this._params[3].length])}
function k(){return T.apply(this,arguments)}o.subclass(k,T)
e.TextDelete=k
k.handles(u.LCDELETE)
k.prototype.range=function(){return this._range||(this._range=this._params.slice(1,5))}
k.prototype.data=function(){return this._data||(this._data=[[this.range()]])}
k.prototype.selAfter=function(){return this._selAfter||(this._selAfter=this._params[5]||this._params.slice(1,3))}
function A(){return w.apply(this,arguments)}o.subclass(A,w)
e.TextSelection=A
A.handles(u.LCSELECTION)
A.decode=function(t,e,i,n){if(e&&t.length<3){t=e.slice(0,-t.length).concat(t)}return new this(t)}
A.encode=function(t,e){if(e&&e.length==t.length){let i=0
while(i<e.length){if(e[i]!=t[i]){break}i++}let n=t.slice(i)
if(n.length<3){return n}}return t}
A.prototype.selAfter=function(){return this._selAfter||(this._selAfter=this._params.slice(1))}
A.prototype.commit=function(t){this._selBefore=this.target()._selState
return this.target()._selState=this.selAfter()}
A.prototype.revert=function(){return this.target()._selState=this._selBefore}
function C(){return f.apply(this,arguments)}o.subclass(C,f)
e.TextScroll=C
C.handles(u.LCSCROLL)
function E(){return f.apply(this,arguments)}o.subclass(E,f)
e.NodeLayoutAction=E
E.handles(u.NODE_LAYOUT)
E.prototype.sref=function(){return this._params[0]}
E.prototype.layout=function(){return this._params[1]}
E.prototype.commit=function(){this._rev=this._stream.layouts()[this.sref()]
this._stream.layouts()[this.sref()]=this.layout()
return this}
E.prototype.revert=function(){return this._stream.layouts()[this.sref()]=this._rev}
function D(){return f.apply(this,arguments)}o.subclass(D,f)
e.PointerUpdate=D
D.handles(u.POINTER_UPDATE)
D.schema(["x","y","flags","hover","angle","pressure"])
D.decode=function(t,e,i,n){if(e){t[0]+=e[0]
t[1]+=e[1]
var r=t.length
while(r<e.length){t[r]=e[r++]}}return new this(t)}
D.encode=function(t,e,i,n){if(!e){return t}if(String(t[3])==String(e[3])){t[3]=e[3]}var r=t.slice()
r[0]=t[0]-e[0]
r[1]=t[1]-e[1]
var o=e.length-1
while(o>1&&e[o]==t[o]){r.pop()
o--}return r}
D.prototype.addToStream=function(t){D.prototype.__super__.addToStream.apply(this,arguments)
this._parent&&(this._parent._nextFrame=this)
return}
D.prototype.nextFrame=function(){return this._nextFrame}
D.prototype.prevFrame=function(){return this._parent}
D.prototype.view=function(){return this._branch._space._view._pointer}
D.prototype.target=function(t){return this._target}
D.prototype.setTarget=function(t){this._target=t
return this}
D.prototype.target=function(){return this._target||(this._target=this.originalTarget())}
D.prototype.sref=function(){return this._sref||(this._sref=this.originalSref())}
D.prototype.setSref=function(t){this._sref=t
this._target=this._branch._space._view.lookup(t)
this
return this}
D.prototype.originalTarget=function(){return this._originalTarget||(this._originalTarget=this._branch._space._view.lookup(this.originalSref()))}
D.prototype.originalSref=function(){return this._params[3]}
D.prototype.targetLayout=function(){return this._branch._stream.layouts()[this.sref()]}
D.prototype.commit=function(){var t
if(t=this.view()){t.setKeyframe(this)}return this}
D.prototype.revert=function(){var t
if(t=this.view()){t.setKeyframe(this._parent)}return this}
function P(){return f.apply(this,arguments)}o.subclass(P,f)
e.FSRenameAction=P
P.handles(u.FS_RENAME)
P.prototype.target=function(){return this._branch.__lookup(this._params[0])}
P.prototype.commit=function(){this.target().setName(this._params[1])
return this}
function $(){return f.apply(this,arguments)}o.subclass($,f)
e.FSMoveAction=$
$.handles(u.FS_MOVE)
$.prototype.target=function(){return this._branch.__lookup(this._params[0])}
$.prototype.commit=function(){this._prevDir||(this._prevDir=this.target().parentDir())
this._targetDir=this._branch.__lookup(this._params[1])
this.log("FSMoveAction",this._params)
this._prevDir.entries().remove(this.target())
this.target().setParent(this._targetDir)
this._targetDir.entries().add(this.target())
return this}
$.prototype.revert=function(){this.log("FSMoveAction.revert")
this._targetDir.entries().remove(this.target())
this.target().setParent(this._prevDir)
return this._prevDir.entries().add(this.target())}
function L(){return f.apply(this,arguments)}o.subclass(L,f)
e.FSRemoveAction=L
L.handles(u.FS_REMOVE)
L.prototype.target=function(){return this._target||(this._target=this._branch.__lookup(this._params[0]))}
L.prototype.commit=function(){return this.target().commitDel()}
L.prototype.revert=function(){return this.target().revertDel()}
function O(){return f.apply(this,arguments)}o.subclass(O,f)
e.SimAction=O
O.prototype.target=function(){return this._branch._space.simulator()}
function M(){return O.apply(this,arguments)}o.subclass(M,O)
e.SimBuild=M
M.handles(u.SIM_BUILD)
function I(){return O.apply(this,arguments)}o.subclass(I,O)
e.SimResult=I
I.handles(u.SIM_RESULT)
function R(){return f.apply(this,arguments)}o.subclass(R,f)
R.prototype.target=function(){return this._branch._space._console}
R.prototype.data=function(){return this._params}
R.prototype.commit=function(t){t.markTarget(this.target())
return this.target().apply(this)}
R.prototype.revert=function(t){t.markTarget(this.target())
return this.target().revert(this)}
R.prototype.isEnabled=function(){return true}
function N(){return R.apply(this,arguments)}o.subclass(N,R)
e.ConsoleClear=N
N.handles(u.CONSOLE_CLEAR)
function F(){return R.apply(this,arguments)}o.subclass(F,R)
e.ConsoleLog=F
F.handles(u.CONSOLE_LOG)
function B(){return R.apply(this,arguments)}o.subclass(B,R)
e.ConsoleValExpand=B
B.handles(u.CONSOLE_VAL_EXPAND)
var z=i(31).PlayerPage
function U(){return f.apply(this,arguments)}o.subclass(U,f)
e.PageAction=U
U.prototype.page=function(){return this._page||(this._page=this._stream._lastPage)}
U.prototype.browser=function(){return this.branch().space().browser()}
U.prototype.commitToStream=function(t){U.prototype.__super__.commitToStream.apply(this,arguments)
return this.page()}
U.prototype.isEnabled=function(){return true}
U.prototype.baseURI=function(){return this.browser().baseURI(this.index())}
function V(){return U.apply(this,arguments)}o.subclass(V,U)
e.PageRequest=V
V.handles(u.PAGE_REQUEST)
V.prototype.page=function(){return this._page||(this._page=this._stream._lastPage=new z(this,{url:this.url()}))}
V.prototype.url=function(){return this._params[1]}
V.prototype.commit=function(){var t
this.browser().setPage(this.page())
if(this.url()){this.browser().setUrl(t=this.url()),t}return this}
V.prototype.revert=function(){return this}
function j(){return U.apply(this,arguments)}o.subclass(j,U)
e.PageLoad=j
j.handles(u.PAGE_LOAD)
j.prototype.page=function(){if(this._page){return this._page}this._page=this._stream._lastPage
if(!this._page||this._page.loadAction()){this._page=this._stream._lastPage=new z(this,{url:this.url()})}this._page.setLoadAction(this)
return this._page}
j.prototype.url=function(){return this._params[1]}
j.prototype.commit=function(t){var e
this.page().setStatus(this._params[0])
this.browser().setPage(this.page())
return this.browser().setUrl(e=this.url()),e}
j.prototype.revert=function(t){this.page().setStatus(null)
return this}
function q(){return U.apply(this,arguments)}o.subclass(q,U)
e.PageLoaded=q
q.handles(u.PAGE_LOADED,{strategy:"dedupe"})
q.prototype.commit=function(t){if(!this._applied){this._applied=true
this.page().applyInitialState(this._params)
this.page().syncStyleSheets(this.branch().space().files())}this.browser().setPage(this.page())
this.page().setLoaded(this)
return this}
q.prototype.revert=function(){this.page().setLoaded(null)
return this}
function H(){return U.apply(this,arguments)}o.subclass(H,U)
e.PageLogAction=H
H.handles(u.PAGE_LOG,{strategy:"dedupe"})
H.prototype.commit=function(t){this._page.logs().push(this._params)
if(!t.skipping()){this.space().emit("log",this)}return this}
H.prototype.revert=function(){let t=this._page.logs().pop()
if(t!=this._params){console.warn("PageLogAction reverted incorrectly?",this._params,t)}return this}
function W(){return U.apply(this,arguments)}o.subclass(W,U)
e.PageHistoryAction=W
W.handles(u.PAGE_HISTORY)
W.prototype.commit=function(t){this.browser().setUrl(this.url())
return this}
W.prototype.action=function(){return this._params[0]}
W.prototype.url=function(){return this._params[2]}
W.prototype.revert=function(){console.log("page history revert",this._params)
return this}
function G(){return f.apply(this,arguments)}o.subclass(G,f)
e.DOMAction=G
G.prototype.commitToStream=function(t){G.prototype.__super__.commitToStream.apply(this,arguments)
this._target=t._lastPage
return this}
G.prototype.target=function(){return this._target||(this._target=this.space().simulator()._player.bridge())}
G.prototype.browser=function(){return this.branch().space().browser()}
G.prototype.node=function(t){return this._node||(this._node=this.target().nodeForPath(t==undefined?this._params[0]:t))}
G.prototype.isEnabled=function(){return true}
function Y(){return G.apply(this,arguments)}o.subclass(Y,G)
e.DOMReset=Y
Y.handles(u.DOM_RESET)
Y.prototype.commit=function(){this.target().setFocusNode(null)
this.target().setActiveNode(null)
this.target().setHoverNode(null)
this._rev||(this._rev=[].slice.call(this.target().root().childNodes))
this.target().setSelection(null)
this.target().root().innerHTML=""
return this.target().reindexNodes()}
Y.prototype.revert=function(){var t=this.target().root()
for(let e=0,i=r(this._rev),n=i.length;e<n;e++){t.appendChild(i[e])}this.target().setSelection(null)
return this.target().reindexNodes()}
function K(){return G.apply(this,arguments)}o.subclass(K,G)
e.DOMMutate=K
K.handles(u.DOM_MUTATE)
K.prototype.commit=function(){try{this.target().applyMutations(this._params)}catch(t){this.log("mutate errored",t)
this._error=t
this.target().setErrored(this)}return this}
K.prototype.revert=function(){this.target().revertMutations(this._params,this)
return this}
function J(){return G.apply(this,arguments)}o.subclass(J,G)
e.DOMSelection=J
J.handles(u.DOM_SELECTION)
J.prototype.commit=function(){var t=null
if(this._params.length){this._params.NODE||(this._params.NODE=this.node())
t=this._params}this._rev=this.target().selection()
return this.target().setSelection(t),t}
J.prototype.revert=function(){return this.target().setSelection(this._rev),this._rev}
function X(){return G.apply(this,arguments)}o.subclass(X,G)
e.DOMScroll=X
X.handles(u.DOM_SCROLL)
X.prototype.commit=function(){var t
if(t=this.node()){this._rev||(this._rev=[null,t.scrollLeft,t.scrollTop])
t.scrollLeft=this._params[1]
return t.scrollTop=this._params[2]}}
X.prototype.revert=function(){if(this._rev){this.node().scrollLeft=this._rev[1]
return this.node().scrollTop=this._rev[2]}}
function Z(){return G.apply(this,arguments)}o.subclass(Z,G)
e.DOMFocusIn=Z
Z.handles(u.DOM_FOCUSIN,["domtarget"])
Z.prototype.commit=function(){var t
this._rev=this.target().focusNode()
return this.target().setFocusNode(t=this.node()),t}
Z.prototype.revert=function(){return this.target().setFocusNode(this._rev),this._rev}
function Q(){return G.apply(this,arguments)}o.subclass(Q,G)
e.DOMHoverIn=Q
Q.handles(u.DOM_HOVERIN,["domtarget"])
Q.prototype.commit=function(){var t
this._rev=this.target().hoverNode()
return this.target().setHoverNode(t=this.node()),t}
Q.prototype.revert=function(){return this.target().setHoverNode(this._rev),this._rev}
function tt(){return G.apply(this,arguments)}o.subclass(tt,G)
e.DOMActiveIn=tt
tt.handles(u.DOM_ACTIVEIN,["domtarget"])
tt.prototype.commit=function(){var t
this._rev=this.target().activeNode()
return this.target().setActiveNode(t=this.node()),t}
tt.prototype.revert=function(){return this.target().setActiveNode(this._rev),this._rev}
function et(){return f.apply(this,arguments)}o.subclass(et,f)
e.RecStart=et
et.handles(u.RECSTART)
et.prototype.__stop={watch:"stopDidSet",name:"stop"}
et.prototype.stop=function(t){return this._stop}
et.prototype.setStop=function(t){var e=this.stop()
if(t!=e){this._stop=t}if(t!=e){this.stopDidSet&&this.stopDidSet(t,e,this.__stop)}return this}
et.prototype.audio=function(t){return this._audio}
et.prototype.setAudio=function(t){this._audio=t
return this}
et.prototype.commitToStream=function(t){var e
if(this._parent){(e=this._parent.stop())||(this._parent.setStop(this),this)}t.recordings().push(this)
return et.prototype.__super__.commitToStream.apply(this,arguments)}
et.prototype.removeFromStream=function(t){if(this._parent&&this._parent.stop()==this){this._parent.setStop(null)}t.recordings().pop()
return et.prototype.__super__.removeFromStream.apply(this,arguments)}
et.prototype.stopDidSet=function(t,e){if(t){this._duration=t.timeOffset()-this.timeOffset()
try{this._audio={offset:this.timeOffset(),fid:this._params[1].audiofile.id,span:this._duration}
this.branch()._stream.audio().add(this._audio)}catch(t){true}}else if(this._audio){this.branch()._stream.audio().remove(this._audio)}return this}
function it(){return f.apply(this,arguments)}o.subclass(it,f)
e.RecStop=it
it.handles(u.RECSTOP)
it.prototype.recording=function(t){return this._recording}
it.prototype.setRecording=function(t){this._recording=t
return this}
it.prototype.commitToStream=function(t){var e
if(this._recording=t.recordings().last()){(e=this._recording.stop())||(this._recording.setStop(this),this)}return it.prototype.__super__.commitToStream.apply(this,arguments)}
it.prototype.removeFromStream=function(t){if(this._recording&&this._recording.stop()==this){this._recording.setStop(null)}return it.prototype.__super__.removeFromStream.apply(this,arguments)}
function nt(){return f.apply(this,arguments)}o.subclass(nt,f)
e.TrimAction=nt
nt.handles(u.TRIM)
function rt(){return f.apply(this,arguments)}o.subclass(rt,f)
e.LockAction=rt
rt.handles(u.LOCK)
rt.prototype.sid=function(){return this._params[0]}
rt.prototype.uid=function(){return this._params[1]}
rt.prototype.commitToStream=function(t){rt.prototype.__super__.commitToStream.apply(this,arguments)
t.setCurrentLock(this)
return this}
function ot(){return f.apply(this,arguments)}o.subclass(ot,f)
e.LayoutAction=ot
ot.handles(u.LAYOUT)
ot.decode=function(t,e){return new this(e?d.decode(e,t):t)}
ot.encode=function(t,e){return e?d.diff(e,t)||[0]:t}
ot.prototype.target=function(){return this._branch.__lookup(this._params[12])}
ot.prototype.commit=function(){var t
if(t=this.target()){this._prevValue=t._data.layout
t._data.layout=this._params}return}
ot.prototype.revert=function(){this.target()._data.layout=this._prevValue
return}
function st(){return ot.apply(this,arguments)}o.subclass(st,ot)
e.BrowserLayoutAction=st
st.handles(u.BROWSER_LAYOUT)
function at(){return f.apply(this,arguments)}o.subclass(at,f)
e.WidgetAppend=at
at.handles(u.WIDGET_APPEND)
function ut(){return f.apply(this,arguments)}o.subclass(ut,f)
e.WidgetFlag=ut
ut.handles(u.WIDGET_FLAG,["target","int_flag"])
function ct(){return f.apply(this,arguments)}o.subclass(ct,f)
e.WidgetUnflag=ct
ct.handles(u.WIDGET_UNFLAG,["target","int_flag"])},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
function o(t,e){var i=this
o.Active.push(i)
i._catcher=function(t){t.preventDefault()
return t.stopPropagation()}
i._options=e
i._touch=t
i._type=e.type||"gesture"
i._handler=e.handler||t.target()
document.addEventListener("selectstart",i._catcher,true)
i._checkForMultitouch=setTimeout(function(){if(r.Touch.count()>1&&!t._cancelled){t._active=false
return i.ontouchcancel(t)}},300)
i.delegate("on"+i._type+"init")
i}r.subclass(o,r.TouchGesture)
e.ScrimbaGesture=o
o.prototype.prevCursor=function(t){return this._prevCursor}
o.prototype.setPrevCursor=function(t){this._prevCursor=t
return this}
o.prototype.cursor=function(t){return this._cursor}
o.prototype.setCursor=function(t){this._cursor=t
return this}
o.prototype.type=function(t){return this._type}
o.prototype.setType=function(t){this._type=t
return this}
o.prototype.box=function(t){return this._box}
o.prototype.setBox=function(t){this._box=t
return this}
o.prototype.options=function(t){return this._options}
o.prototype.setOptions=function(t){this._options=t
return this}
o.prototype.touch=function(t){return this._touch}
o.prototype.setTouch=function(t){this._touch=t
return this}
o.prototype.handler=function(t){return this._handler}
o.prototype.setHandler=function(t){this._handler=t
return this}
o.Active=[]
o.options=function(t,e){if(e===undefined)e={}
var i=t.sourceTarget().closest("[data-gesture]")
e.type||(e.type=i&&i.dataset("gesture"))
e.handler||(e.handler=i)
e.cursor||(e.cursor=window.getComputedStyle(t.sourceTarget().dom()).cursor)
if(e.type){let t=e.type.split(",")
e.type=t[0]
for(let i=0,r=n(t),o=r.length;i<o;i++){e[r[i]]||(e[r[i]]=true)}}return e}
o.wrap=function(t,e){if(e===undefined)e={}
var i=t.sourceTarget().closest("[data-gesture]")
e.type||(e.type=i&&i.dataset("gesture"))
e.handler||(e.handler=i)
e.cursor||(e.cursor=window.getComputedStyle(t.sourceTarget().dom()).cursor)
if(r.Touch.count()>1){return}if(e.type){let i=e.type.split(",")
e.type=i[0]
for(let t=0,r=n(i),o=r.length;t<o;t++){e[r[t]]||(e[r[t]]=true)}return t.extend(new this(t,e))}}
o.prototype.dx=function(){return this._touch.dx()}
o.prototype.dy=function(){return this._touch.dy()}
o.prototype.x=function(){return this._touch.x()}
o.prototype.y=function(){return this._touch.y()}
o.prototype.clamp=function(t,e,i,n){if(n===undefined)n=1
return Math.min(Math.max(Math.round(e/n)*n,t),i)}
o.prototype.target=function(){return this._touch.target()}
o.prototype.onstart=function(t){var e,i
this._started=true
document.body.classList.add("touching");(e=this.target())&&e.flag&&e.flag("gesturing")
if(this.setCursor(i=this._options.cursor),i){this.setPrevCursor(document.body.style.cursor)
document.body.style.cursor=this.cursor()}return this.delegate("on"+this._type+"start")}
o.prototype.onupdate=function(t){return this.delegate("on"+this._type+"update")}
o.prototype.ontouchupdate=function(t){if(!this._started){this.onstart(t)
this._started=true}if(this._started){this.onupdate(t)}return this}
o.prototype.ontouchend=function(t){var e
if(this._started){(e=this.target())&&e.unflag&&e.unflag("gesturing")
this.delegate("on"+this._type+"end")}this.teardown(t)
return this}
o.prototype.ontouchcancel=function(t){var e
if(this._started){(e=this.target())&&e.unflag&&e.unflag("gesturing")
this.delegate("on"+this._type+"cancel")}this.teardown(t)
return this}
o.prototype.delegate=function(t){if(this[t]){return this[t](this)}else if(this._handler&&this._handler[t]){return this._handler[t](this)}else if(this.target()[t]){return this.target()[t](this)}}
o.prototype.teardown=function(){let t=o.Active.indexOf(this)
if(t>=0){o.Active.splice(t,1)}clearTimeout(this._checkForMultitouch)
document.body.style.cursor=this.prevCursor()||""
document.body.classList.remove("touching")
return document.removeEventListener("selectstart",this._catcher,true)}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
var o=r.defineTag("InterfaceView",function(t){t.prototype.__hovered={watch:"hoveredDidSet",name:"hovered"}
t.prototype.hovered=function(t){return this._hovered}
t.prototype.setHovered=function(t){var e=this.hovered()
if(t!=e){this._hovered=t}if(t!=e){this.hoveredDidSet&&this.hoveredDidSet(t,e,this.__hovered)}return this}
t.prototype.__enabled={watch:"enabledDidSet",name:"enabled"}
t.prototype.enabled=function(t){return this._enabled}
t.prototype.setEnabled=function(t){var e=this.enabled()
if(t!=e){this._enabled=t}if(t!=e){this.enabledDidSet&&this.enabledDidSet(t,e,this.__enabled)}return this}
t.prototype.__transitionTime={default:250,name:"transitionTime"}
t.prototype.transitionTime=function(t){return this._transitionTime}
t.prototype.setTransitionTime=function(t){this._transitionTime=t
return this}
t.prototype._transitionTime=250
t.prototype.space=function(){return this.data()}
t.prototype.branch=function(){return this.data().branch()}
t.prototype.timeline=function(){return this.data().timeline()}
t.prototype.enabledDidSet=function(t){var e=this
if(true){e.flag("transitioning")
e.dom().offsetTop
clearTimeout(e._transitioner)
e._transitioner=setTimeout(function(){return e.unflag("transitioning")},e.transitionTime())}e.flag("enabled",t)
e.flag("disabled",!t)
return t?e.reveal():e.conceal()}
t.prototype.invalidated=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
let r=this._guard||[]
this._guard=i
for(let t=0,e=n(i),o=e.length;t<o;t++){if(i[t]!=r[t]){this._version=(this._version||0)+1
return true}}return false}
t.prototype.reveal=function(){return this}
t.prototype.conceal=function(){return this}
t.prototype.commit=function(){if(this.enabled())this.render()
return this}
t.prototype.exec=function(t){return this.space().actions().exec(t)}})
e.InterfaceView=o},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("SidebarPanel",function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.name=function(t){return this._name}
t.prototype.setName=function(t){this._name=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||r("header",t,0,this).setContent(t[1]||r("div",t,1,0).flag("title"),2),2).synced((t[1].setContent(this.name(),3),true))}})
e.SidebarPanel=o
var s=n.defineTag("SidebarEntry")
e.SidebarEntry=s},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("Select","select",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.dataDidSet=function(t){return this._newValue=t}
t.prototype.commit=function(){t.prototype.__super__.commit.apply(this,arguments)
if(this._newValue!=undefined){this.dom().value=this._newValue
this._newValue=undefined}return this}
t.prototype.value=function(){var e=t.prototype.__super__.value.apply(this,arguments)
return e=="--"?null:e}})
e.Select=o
var s=n.defineTag("Radio","label",function(t){t.prototype.desc=function(t){return this._desc}
t.prototype.setDesc=function(t){this._desc=t
return this}
t.prototype.name=function(t){return this._name}
t.prototype.setName=function(t){this._name=t
return this}
t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){this._value=t
return this}
t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[r("input",t,0,this).setType("radio"),r("span",t,1,this).flag("radio")],2).synced((t[0].setName(this.name()).setValue(this.value(),1).end(),t[1].setContent([t[2]||r("span",t,2,1).flag("radio-icon"),this.label()?(t[3]||r("span",t,3,1).flag("label")).setContent(this.label(),3):void 0,this.desc()?(t[4]||r("span",t,4,1).flag("desc")).setContent(this.desc(),3):void 0],1),true))}})
e.Radio=s
var a=n.defineTag("Option",function(t){t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){this._value=t
return this}
t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.render=function(){return this.$open(0).setChildren(this.label()||this.value(),3).synced()}})},function(t,e,i){var n=i(0),r=n.createElement
var o=i(5).UserAvatar
var s=i(14),a=s.TimeAgo,u=s.Duration,c=s.ShortCount,p=s.Format
var l=i(33).Tile
var h=i(1).IconButton
var d=i(32).CoverArt
var f=n.defineTag("GroupTile",l,function(t){t.reg("g")
t.Renderer=function(t,e,i){let n,o=this.$$||(this.$$={}),s
return(o[s="key$"+e]||r(f,o,s,this)).setData(t).setContext(i).end()}
t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.url=function(){return"/g/"+this.data().id}
t.prototype.canEdit=function(){return this.data().uid==this.api().uid()||this.api().isMod()}
t.prototype.render=function(){var t=this.$
return this.$open(0).setFlag(-1,this.data().id).setFlag(-2,this.data().type).setFlag(-3,this.data().topic_id).flagIf("mine",this.data().uid==this.api().uid()).setChildren([this.data().coverart?(t[0]||r(d,t,0,this).flag("art").flag("figure")).bindData(this,"data",[]).end():void 0,(t[1]||r("div",t,1,this).flag("summary").flag("abs").setContent(t[2]||r("div",t,2,1).flag("title").setContent(t[3]||r("a",t,3,2),2),2)).end((t[3].setHref(this.url()).setContent(this.data().title,3).end(),true))],1).synced()}})
e.GroupTile=f},function(t,e,i){var n=i(0),r=n.createElement
var o=i(23).Radio
var s=n.defineTag("PrivacyField",function(t){t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([this.label()?(t[0]||r("label",t,0,this)).setContent(this.label(),3):void 0,(t[1]||r("div",t,1,this).flag("Radios").flag("group").setContent([r(o,t,2,1).setName("privacy").setValue("private",1).setLabel("Private"),r(o,t,3,1).setName("privacy").setValue("unlisted",1).setLabel("Secret"),r(o,t,4,1).setName("privacy").setValue("public",1).setLabel("Public")],2)).end((t[2].end(),t[3].end(),t[4].end(),true))],1).synced()}})
e.PrivacyField=s},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0)
var o=i(4),s=o.Resource,a=o.MASK,u=o.ACCESS
var c=i(27).StreamBuffer
var p=i(2),l=p.MSG,h=p.VERSION
if(false){}function d(){return s.apply(this,arguments)}r.subclass(d,s)
e.Cast=d
d._serializer={featured_at:a.ALWAYS,archived_at:a.ALWAYS,search_vector:a.NEVER,preview:a.NEVER}
d.prototype.dependsOn=function(){return[this.owner(),this.type=="fork"?this.parent():null]}
d.prototype.isPublic=function(){return!this.archived_at&&this.privacy=="public"}
d.prototype.isPublished=function(){return!!this.published_at}
d.prototype.isTutorial=function(){return this.type=="tutorial"}
d.prototype.isDraft=function(){return this.isTutorial()&&!this.published_at}
d.prototype.isFork=function(){return this.type=="fork"}
d.prototype.isNote=function(){return this.type=="note"}
d.prototype.isForkable=function(){return this.spiv==h&&this.type!="fork"}
d.prototype.hasMember=function(t){return this.uid==t||this.members&&this.members.indexOf(t)>=0}
d.prototype.permissions=function(t){if(t&&(this.hasMember(t.id)||t.isMod())){return u.ALL}else if(this.privacy=="private"){return u.NONE}else{return u.READ}}
d.prototype.owner=function(){return this.db().get(this.uid)}
d.prototype.parent=function(){return this.parent_id?this.db().get(this.parent_id):null}
d.prototype.group=function(){return this.gid?this.db().get(this.gid):null}
d.prototype.playlist=function(){return this.pid?this.db().get(this.pid):null}
d.prototype.viewing=function(t){if(true&&t==null){t=this.db().api().uid()}if(!t){return}let e="y"+this.id+"-"+t
return this.db().viewings().has(e)?this.db().viewings().get(e):null}
d.prototype.trunk=function(){return this.isFork()||this.isNote()?this.parent():this}
d.prototype.branches=function(){var t=this
return t._cache.branches||(t._cache.branches=t.db().casts().sel(function(e){return e.parent_id==t.id&&!e.archived_at}))}
d.prototype.notes=function(){return this._cache.notes||(this._cache.notes=this.branches().sel(function(t){return t.type=="note"}))}
d.prototype.usernotes=function(t){var e
if(!t){return[]}return this._cache[e="notes"+t]||(this._cache[e]=this.branches().sel(function(e){return e.type=="note"&&e.uid==t}))}
d.prototype.forks=function(){return this._cache.forks||(this._cache.forks=this.branches().sel(function(t){return t.type=="fork"}))}
d.prototype.messages=function(){var t=this
return t._cache.messages||(t._cache.messages=t.db().messages().sel({sort:"-ts"},function(e){return e.cid==t.id}))}
d.prototype.questions=function(){var t=this
return t._cache.questions||(t._cache.questions=t.db().messages().sel({sort:"-ts"},function(e){return e.cid==t.id&&e.parent_id==null}))}
d.prototype.topic=function(){return this.topic_id&&this.db().get(this.topic_id)}
d.prototype.feature=function(){return this.update({featured_at:new Date})}
d.prototype.unfeature=function(){return this.update({featured_at:null})}
d.prototype.destroy=function(){return this.update({archived_at:new Date})}
d.prototype.stream=function(){return this._cache.stream||(this._cache.stream=new c(null,this))}
d.prototype.buffer=function(){return this.stream()}
d.prototype.fulltext=function(){return this._cache.fulltext||(this._cache.fulltext=(""+this.title+this.description).toLowerCase())}
d.prototype.url=function(t){if(t){return"/p/"+t.id+"/"+this.id}else{return"/c/"+this.id}}
d.prototype.onpacket=function(t){switch(t.CODE){case l.STREAMAPPEND:{var e=t[2]
var i=this.buffer().add(t.payload(),e)
if(i instanceof Error){console.log("missingrange",i.start,i.end)
t.reply([l.STREAMGETRANGE,this.id,i.start,i.end])}break}case l.STREAMTRIM:{let e=t[2]
console.warn("streamtrim!",t,e)
i=this.buffer().trim(e)
if(t.payload()&&t.payload().length>0){this.buffer().add(t.payload(),e)}break}case l.STREAMRANGE:{e=t[2]
i=this.buffer().add(t.payload(),e)
break}}return this}
d.prototype.integrity=function(){return this._cache.integrity||(this._cache.integrity={})}
d.prototype.checkIntegrity=async function(){var t=await this._db.api().rpc("castCheckIntegrity",[this.id])
return this}
d.prototype.channelRef=function(){return""+this.id+"."+this.v+(this.buffer().FETCHING?"":"."+n(this.buffer()))}
d.prototype.fetchStreamBuffer=function(t,e){var i=this
if(e===undefined)e=0
return new Promise(async function(r,o){i.buffer().FETCHING=true
var s
if(false){}else{if(t.uid()!=i.uid&&i.pub&&i.pub.actions&&window.fetch&&e==0){let t="/cast/"+i.pub.actions
s=window.fetch(t).then(function(t){return t.arrayBuffer()})}else{s=t.rpc("streamRead",[i.id,e,-1],{type:"arraybuffer",raw:true})}}var a=await s
var u=new Uint8Array(a)
if(u.length>1){i.buffer().add(u,e)
if(true){i.buffer()._verifiedOffset=n(i.buffer())
t.touch()}}i.buffer().FETCHING=false
return r(i.buffer())})}
d.prototype.open=function(t){if(t===undefined)t=null
if(App.router().path()!=this.url()){return App.router().go(this.url())}}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0)
var s=i(9)
var a=s.Decoder.prototype.bufferish
var u=new s.Decoder({})
function c(t,e){this.start=t
this.end=e
this}o.subclass(c,Error)
e.StreamMissingRangeError=c
function p(t){this._buffer=t
this._offsets={}
this._chunks=[]
this._holes=null
this}e.StreamFragments=p
p.prototype.add=function(t,e){var i=t.length
if(!this._last){this._chunks.push(this._last=[t,e,e+i])
return new c(this._buffer.size(),e-1)}let n=this._last[1]
let r=this._last[2]
if(e==r){this._last[0]=a.concat([this._last[0],t])
this._last[2]+=i
return true}else if(e>r){this._chunks.push(this._last=[t,e,e+i])
return new c(r,e-1)}else if(e==n){console.log("already received this fragment",e,i,this._last)
if(e+i>r){console.log("got a longer fragment now")}return true}else{console.log("fragment cannot even be handled")
return true}}
p.prototype.pull=function(t){var e=this._chunks[0]
if(e){if(e[1]==t){return this._chunks.shift()[0]}else if(e[2]<=t){this._chunks.shift()
return this.pull(t)}}return null}
p.prototype.len=function(){return this._chunks.length}
function l(t,e){this._model=e
this._decoder=new s.Decoder({})
this._decoder.buffer=this._buffer=t||null
this._readyState=0
this._fragments=new p(this)
this._version=0
this._size=0
this._verifiedOffset=0
this}e.StreamBuffer=l
l.OK=3
l.FRAGMENTED=4
l.decode=function(t,e){if(e===undefined)e=true
var i=new s.Decoder({})
i.write(t)
var n=[]
while(i.offset<t.byteLength){let t=i.offset
let r=i.fetch()
if(e&&r instanceof Array){r.START=t
r.END=i.offset}n.push(r)}return n}
l.encode=function(t,e){if(e===undefined)e=0
var i=new s.Encoder({})
for(let e=0,n=r(t),o=n.length;e<o;e++){i.write(n[e])}var n=i.read()
n.PROTOCOL=e
return n}
l.concat=function(t){return a.concat(t)}
l.alloc=function(t){return a.alloc(t)}
l.prototype.buffer=function(t){return this._buffer}
l.prototype.setBuffer=function(t){this._buffer=t
return this}
l.prototype.readyState=function(t){return this._readyState}
l.prototype.setReadyState=function(t){this._readyState=t
return this}
l.prototype.state=function(){if(n(this._fragments)){return"fragmented"}else{return"synced"}}
l.prototype.id=function(){return this._model.id+":stream"}
l.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return o.emit(this,t,n)}
l.prototype.on=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.listen.apply(o,[].concat([this,t],Array.from(r)))}
l.prototype.un=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.unlisten.apply(o,[].concat([this,t],Array.from(r)))}
l.prototype.write=function(t,e){if(e===undefined)e=0
return this}
l.prototype.resize=function(t){let e=this._buffer
if(this._buffer.length<t){this._buffer=a.alloc(t)
this._buffer.set(e,0)}return this._buffer}
l.prototype.set=function(t,e){let i=t.length
if(e+i>=this._buffer.length){this.resize(e+i+1e4)}this._buffer.set(t,e)
this._size=e+i
return this}
l.prototype.add=function(t,e){if(e===undefined)e=0
if(t instanceof Array){t=s.encode(t)}var i=t.length
if(this._buffer){var n=this._size
if(e==0&&n==1){this._buffer=t
this._size=i}else if(e==n){this.set(t,e)}else if(e<n){if(n>=e+i){return true}let r=e
while(r++<n-1){if(this._buffer[r]!=t[r-e]){console.warn("the buffer is incorrect!!",e,r,n,this,t)
return false}}return this.add(t.subarray(r-e),n)}else{return this._fragments.add(t,e)}}else if(e==0){this._buffer=t
this._size=i}else{return this._fragments.add(t,e)}this._decoder.buffer=this._buffer
this.emit("add",this)
this.repair()
return true}
l.prototype.repair=function(){var t=this._size
var e=this._fragments.pull(t)
if(e){return this.add(e,t)}}
l.prototype.len=function(){return this.size()}
l.prototype.size=function(){return this._size}
l.prototype.slice=function(t,e){return e?this._buffer.slice(t,e):this._buffer.slice(t,this._size)}
l.prototype.trim=function(t){if(n(this)>t){this._buffer=this._buffer.slice(0,t)
this._size=t
this._fragments=new p(this)
this._verifiedOffset=Math.min(this._verifiedOffset,t)
this._version++
this.emit("trim",t,this)}return this}
l.prototype.toJSON=function(){var t=l.decode(this._buffer,false)
return t}},function(t,e){function i(t){return t?t.toArray?t.toArray():t:[]}function n(t){this._v=0
this._data=t}e.Struct=n
n.diff=function(t,e,i){if(i===undefined)i=true
if(t==e){return null}if(!t){return[0].concat(e)}var n=[0]
var r=0
var o=t.length
var s=e.length
if(o<1){return[0].concat(e)}if(s>o){o=s}while(r<o){let o=t[r]
let s=e[r]
if(o==s){r++
continue}let a=s
if(i){let t=typeof o
let e=typeof s
if(e==t&&e=="number"){a=s-(o||0)}}n[0]=n[0]|1<<r
n.push(a)
r++}return n[0]==0?null:n}
n.patch=function(t,e,i){if(i===undefined)i=true
if(!e){return t}if(!t){return e.slice(1)}var n=e[0]
if(n==0&&e.length==1){return t}var r=0
var o=0
var s=t.length
while(r<s||n>=1<<r){if(n==0||n&1<<r){var a=e[++o]
if(i){var u=typeof a
var c=typeof t[r]
if(u==c&&u=="number"){a=(t[r]||0)+(a||0)}}t[r]=a}r++}return t}
n.decode=function(t,e,i){if(i===undefined)i=true
return this.patch(t.slice(),e,i)}
n.diffold=function(t,e){if(t==e){return null}if(!t){return e}var i=this.encode(t,e)
if(i.length>1){return i}return null}
n.desc=function(t){this.prototype._map=this._map=t
this._defaults=[]
var e=function(t){return function(){return this._data[t]}}
for(let n=0,r=i(t),o=r.length;n<o;n++){this._defaults.push(0)
this.prototype[r[n]]=e(n)}return this}
n.build=function(t,e){if(e===undefined)e=null
if(t instanceof this){return t}if(t instanceof Array){return new this(t)}else if(t instanceof Object){return new this(this._defaults.slice()).set(t)}else{return new this(this._defaults.slice())}}
n.fromObject=function(t){return this}
n.equals=function(t,e){return t===e||JSON.stringify(t&&t._data||t)==JSON.stringify(e&&e._data||e)}
n.prototype.wrap=function(t){if(t instanceof this.constructor){t=t._data}if(this._data!=t){this._data=t
this._v++}return this}
n.prototype.clone=function(){return new this.constructor(this._data.slice())}
n.prototype.equals=function(t){return this.constructor.equals(this,t)}
n.prototype.set=function(t,e){if(t instanceof Object){for(let e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.set(o,e)}return this}let i=this._map.indexOf(t)
if(i>=0){this._data[i]=e}return this}
n.prototype.toObject=function(){var t={}
for(let e=0,n=i(this._map),r=n.length;e<r;e++){t[n[e]]=this._data[e]}return t}
n.prototype.toArray=function(){return this._data}
n.prototype.valueOf=function(){return this._data}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
var o=i(109)
var s=i(283)
var a=i(108)
function u(){this._loaders={}
this._buffers={}
this._waveforms={}
this._volume=1
this._muted=false
this._media=[]
this}e.AudioManager=u
u.instance=function(){return this._instance||(this._instance=new this)}
u.prototype.__outputLatency={default:0,name:"outputLatency"}
u.prototype.outputLatency=function(t){return this._outputLatency}
u.prototype.setOutputLatency=function(t){this._outputLatency=t
return this}
u.prototype._outputLatency=0
u.prototype.enumerateDevices=function(){var t=this
return t._enumerator||(t._enumerator=window.navigator.mediaDevices.enumerateDevices().then(function(e){t._devices=e.filter(function(t){return t.kind=="audioinput"})
t._enumerator=null
return r.Scheduler.event(t)}))}
u.prototype.devices=function(){var t=this
if(!t._devices){t._devices=[]
window.navigator.mediaDevices.ondevicechange=function(e){return t.enumerateDevices()}
t.enumerateDevices()}return t._devices}
u.prototype.canRecordAudio=function(){return window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia&&window.MediaRecorder}
u.prototype.mute=function(){this._muted=true
return this.updateGain()}
u.prototype.unmute=function(){this._muted=false
this.updateGain()
return this}
u.prototype.getMuted=function(){return this._muted}
u.prototype.getVolume=function(){return this._volume}
u.prototype.setVolume=function(t){this._volume=t
return this.updateGain()}
u.prototype.getRealVolume=function(){return this.getMuted()?0:this.getVolume()}
u.prototype.updateGain=function(){var t=this.getRealVolume()
if(this._context){this.gainNode().gain.value=t}for(let e=0,i=n(this._media),r=i.length;e<r;e++){i[e].volume=t}return this}
u.prototype.urlForId=function(t){let e=this._audioElement||(this._audioElement=document.createElement("audio"))
let i="/cdn/"+t
let n=""
if(e.canPlayType('audio/ogg;codecs="opus"')){return""+i.replace(".ogg","")+".ogg"+n}else if(e.canPlayType('audio/webm;codecs="opus"')){return""+i.replace(".webm","")+".webm"+n}else if(e.canPlayType("audio/mp4")){return""+i+".m4a"+n}else{return""+i+".mp3"+n}}
u.prototype.loadBufferForId=function(t){var e=this
return e._loaders[t]||(e._loaders[t]=new Promise(async function(i){var n=SDB.get(t)
var r=await n.fetchAsArrayBuffer(e.urlForId(t))
var o=function(t){console.log("error from decodeAudioData",t)
return i(null)}
e.context().decodeAudioData(r,function(n){e._buffers[t]=n
return i(n)},o)
return}))}
u.prototype.waveformForAudioBuffer=function(t){return new Promise(function(e){var i=function(t,i,n){return e(i)}
var n=a({scale:512,amplitude_scale:1},i)
return n(t)})}
u.prototype.waveformForId=function(t){var e=this
var i=t+".dat"
return e._loaders[i]||(e._loaders[i]=new Promise(async function(n){var r=await SDB.cacheGet(i)
CCA=r&&r.body
if(r){n(o.create(r.body))
return}var s=await e.loadBufferForId(t)
if(!s||s instanceof Error){return n(null)}var a=await e.waveformForAudioBuffer(s)
var u=a.adapter.data.buffer
await SDB.cacheSet(i,{body:u})
return n(a)}))}
u.prototype.durationForBlob=function(t,e){if(e===undefined)e=36e5
return new Promise(function(i){var n=new Audio
var r=false
var o=function(){var t=n.duration
console.log("checkDuration",t)
if(t!=Infinity&&!r){n.ondurationchange=null
n.onloadeddata=null
r=true
return i(t*1e3)}}
n.ondurationchange=o
n.onloadeddata=o
n.src=URL.createObjectURL(t)
n.load()
n.currentTime=e/1e3*1.5
n.onerror=function(t){console.log("error!",t)
if(!r){r=true
return i(0)}}
return})}
u.prototype.audioBufferFromBlob=function(t){var e=this
return new Promise(function(i,n){var r=new FileReader
r.onload=function(){let t=this.result
return e.context().decodeAudioData(t,i,n)}
return r.readAsArrayBuffer(t)})}
u.prototype.durationForAudioElement=function(t,e){if(e===undefined)e=36e5
return new Promise(function(i){var n=false
var r=function(){var e=t.duration
console.log("checkDuration",e)
if(e!=Infinity&&!Number.isNaN(e)&&!n){n=true
t.ondurationchange=null
t.onloadeddata=null
t.currentTime=0
return i(e*1e3)}}
t.ondurationchange=r
t.onloadeddata=r
t.onerror=function(t){console.log("error!",t)
if(!n){n=true
return i(0)}}
t.load()
t.currentTime=e/1e3*1.5
r()
return})}
u.prototype.context=function(){return this._context||(this._context=new(window.AudioContext||window.webkitAudioContext))}
u.prototype.output=function(){return this.context().destination}
u.prototype.gainNode=function(){if(!this._gainNode){this._gainNode=this.context().createGain()
this._gainNode.connect(this.output())
this._gainNode.gain.value=this.getRealVolume()}return this._gainNode}
u.prototype.sourceForMedia=function(t){return t._mediaSource||(t._mediaSource=this.context().createMediaElementSource(t))}
u.prototype.registerMedia=function(t){t.volume=this.getRealVolume()
if(this._media.indexOf(t)<0){this._media.push(t)}return this}
u.prototype.deregisterMedia=function(t){var e=this._media.indexOf(t)
if(e>=0){this._media.splice(e,1)}return this}
u.prototype.scheduleClips=function(t,e,i){if(e===undefined)e=0
if(i===undefined)i=1
var r=this.context().currentTime*1e3
if(this.outputLatency()){e+=this.outputLatency()}for(let l=0,h=n(t),d=h.length,f;l<d;l++){f=h[l]
var o=f.buffer||this._buffers[f.fid]
if(!o){continue}var s=f.t0-e+r
var a=f.t1-f.t0
var u=f.skip
if(r>s+a){continue}if(s<r){u+=r-s
a-=r-s
s=r}if(a<200){continue}var c=o.duration*1e3
if(c-u<100){continue}var p=f.node=this.context().createBufferSource()
p.buffer=o
let t=(s-r)/i+r
s=t
p.connect(this.gainNode())
p.start(s/1e3,u/1e3,a/1e3)
if(i!=1){p.playbackRate.value=i}}return t}
u.prototype.unscheduleClips=function(t){for(let e=0,i=n(t),r=i.length,o;e<r;e++){o=i[e]
if(o.node){o.node.stop()}}return this}},function(t,e,i){var n=i(0),r=n.createElement
var o=i(2).ACTION
var s=i(77).PaneTab
var a=i(3).Widget
var u=i(186).PaneView
var s=i(77).PaneTab
e.PaneTab=s
e.PaneView=u
var c=i(15).Dimensions
function p(){return a.apply(this,arguments)}n.subclass(p,a)
e.PaneWidget=p
p.register("pane")
p.option("layout",{overridable:true,type:c,action:o.LAYOUT})
p.prototype.tab=function(){let t=this.$$||(this.$$={})
return(this._tab=this._tab||r(s,this).flag("tab")).setData(this).end()}
p.prototype.clientLayout=function(){return(this._clientLayout||(this._clientLayout=new c(null))).wrap(this.options().locals().layout)}
p.prototype.streamLayout=function(){return(this._streamLayout||(this._streamLayout=c.build({}))).wrap(this._data.layout)}
p.prototype.agentLayout=function(){return this.streamLayout()}
p.prototype.localLayout=function(){return this.clientLayout()}
p.prototype.setLayout=function(t){return this.options().set("layout",t)}
p.prototype.streamPosToClientPos=function(t){return this}
p.prototype.posToScreen=function(t,e,i,n){i||(i=this.agentLayout())
n||(n=this.localLayout())
if(!(i&&n&&i._data&&n._data)){return null}var r=t
var o=e
var s=(n.scaleX()||1)/(i.scaleX()||1)
var a=(n.scaleY()||1)/(i.scaleY()||1)
let u=(r-i.left()+(i.scrollLeft()||0))*s
let c=(o-i.top()+(i.scrollTop()||0))*a
let p=u+n.left()-(n.scrollLeft()||0)
let l=c+n.top()-(n.scrollTop()||0)
return[p,l]}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createTagLoopResult,c=o.createElement
var p=i(2),l=p.ACTION,h=p.DOM,d=p.SCON,f=p.KEYS
var m=i(257)
var y=h.MUTS
var g=i(83).patchString
var v=i(195)
var _=i(42).Container
var b=i(64)
var x=i(82)
var w={head:"html",body:"html",thead:"table",tbody:"table",tr:"tbody",td:"tr",th:"td",option:"select"}
var T=null
if(true){T=i(275)}var S=o.defineTag("LogAttributes",function(t){t.prototype.render=function(){var t=this.$
var e=[]
for(let t=0,n=r(this.data()),o=n.length,s;t<o;t++){s=n[t]
if(!(t%2)){continue}var i=[d.refToKey(this.data()[t-1])]
if(s!=null){i.push(s)}e.push(i)}var o=n(e)
return this.$open(0).setChildren(function t(i,n,r,o){for(let t=0,s=e.length,a;t<s;t++){a=e[t]
o.push(" ")
o.push((i[t]||c("span",i,t).flag("name")).setContent(a[0],3))
if(a[1]){o.push(n[t]||c("u",n,t).setText("="))
o.push((r[t]||c(k,r,t)).bindData(a,1).end())}}return o}(t[0]||a(t,0),t[1]||a(t,1),t[2]||a(t,2),[]),3).synced()}})
var k=o.defineTag("LogVal",function(t){t.prototype.type=function(){var t,e
if(this.data()instanceof Array){return f[this.data()[0]]}else if(typeof(t=this.data())=="string"||t instanceof String){return"string"}else if(typeof(e=this.data())=="number"||e instanceof Number){return"number"}else if(this.data()==null){return"null"}else if(this.data()==undefined){return"undefined"}else if(this.data()==true||this.data()==false){return"bool"}else if(this.data()instanceof Array){return"array"}else if(this.data()instanceof Object){return"object"}else{return"value"}}
t.prototype.errorPosition=function(t){try{var e=t[3][2]}catch(t){}return e?" ("+e[2]+":"+e[3]+")":""}
t.prototype.render=function(){var t=this.$
var e=this.type()
var i=this.data()
var n=0
return this.$open(0).setFlag(-1,"tok-"+e).setChildren(e=="string"?o.static([t[0]||c("u",t,0,this).setText('"'),i,t[1]||c("u",t,1,this).setText('"')],1,1):e=="array"?o.static([t[2]||c("u",t,2,this).setText("["),function t(e,n,o){for(let t=0,s=r(i),a=s.length;t<a;t++){if(t<=1){continue}if(t>2){o.push(e[t]||c("u",e,t).setText(", "))}o.push((n[t]||c(k,n,t)).setData(s[t]).end())}return o}(t[3]||a(t,3),t[4]||a(t,4),u()),i.length<i[1]?o.static([t[5]||c("u",t,5,this).setText(", "),t[6]||c("u",t,6,this).flag("more").setText("...")],2,2):void 0,t[7]||c("u",t,7,this).setText("]")],1,3):e=="function"?i[1]:e=="element"?o.static([t[8]||c("u",t,8,this).setText("<"),(t[9]||c("span",t,9,this).flag("name")).setContent(d.refToKey(i[1]),3),(t[10]||c(S,t,10,this)).bindData(i,2).end(),t[11]||c("u",t,11,this).setText(">")],2,4):e=="error"?o.static([(t[12]||c("span",t,12,this).flag("category")).setContent(i[1]+": ",3),(t[13]||c("span",t,13,this).flag("message")).setContent(i[2],3),(t[14]||c("span",t,14,this)).setContent(this.errorPosition(i),3)],2,5):e=="object"?o.static([t[15]||c("u",t,15,this).setText("{"),function t(e,n,o){var s
for(let t=0,a=r(Object.keys(i)),u=a.length,p;t<u;t++){p=a[t]
if(t>0){o.push(e[t]||c("u",e,t).flag("delim").setText(", "))}o.push((s=n[t]||(s=c("span",n,t)).flag("kv").setContent([c("span",s.$,"A",s).flag("tok-key"),c("u",s.$,"B",s).setText(": "),c(k,s.$,"C",s).flag("value")],2)).end((s.$.A.setContent(p,3),s.$.C.bindData(i,p).end(),true)))}return o}(t[16]||a(t,16),t[17]||a(t,17),u()),t[18]||c("u",t,18,this).setText("}")],1,6):e=="null"?"null":e=="udef"?"undefined":e=="bool"?i?"true":"false":i instanceof Array?i[1]:i,3).synced()}})
var A=o.defineTag("LogEntry",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
let e={warn:"â²",error:"!"}
t.prototype.dataDidSet=function(){return this._dirty=true}
t.prototype.type=function(){return this.data()[0]}
t.prototype.items=function(){return this.data()[1]}
t.prototype.badge=function(){return this.data()[2]}
t.prototype.render=function(){var t=this.$,i=this
if(!i._dirty){return}i._dirty=false
let n=f[i.type()]
i.$open(0).flag("scon").setFlag(-1,"typ-"+n).setChildren([(t[0]||c("i",t,0,i)).setContent(e[n]||">",3),i.badge()>1?(t[1]||c("div",t,1,i).flag("badge").setContent(t[2]||c("span",t,2,1).flag("num"),2)).end((t[2].setContent(i.badge(),3),true)):void 0,function t(e,n,o){for(let t=0,s=r(i.items()),a=s.length;t<a;t++){o.push((e[t]||c(k,e,t)).setData(s[t]).end())
o.push(n[t]||c("u",n,t).setText(","))}return o}(t[3]||s(t,3),t[4]||s(t,4),u())],1).synced()
return i}})
e.LogEntry=A
var C=o.defineTag("Logs",function(t){t.prototype.build=function(){return this._dirty=true}
t.prototype.push=function(t){this._dirty=true
return this._data.push(t)}
t.prototype.pop=function(){this._dirty=true
return this._data.pop()}
t.prototype.len=function(){return this._data.length}
t.prototype.render=function(){var t=this,e=this.$
if(!t._dirty){return}t._dirty=false
return t.$open(0).setChildren(function e(i){for(let e=0,n=r(t.data()),o=i.taglen=n.length;e<o;e++){(i[e]||c(A,i,e)).setData(n[e]).end()}return i}(e[0]||s(e,0)),4).synced()}})
var E=1
function D(t,e){var i,n
if(e===undefined)e={}
if(true){this._initiator=t
this._logs=c(C).setData(e.logs||[]).end()
this._document=(i=(n=document)&&n.implementation)&&i.createHTMLDocument&&i.createHTMLDocument("Player")
this._pageNumber=E++
if(this._document){this._html=this._document.documentElement}else{this._document=document
this._html=document.createElement("html")}this._root=this._html
this._base=this._document.createElement("base")
this._ref
let r=this.container().origin()+(e.url||"/").split("/").slice(0,-1).join("/")+"/"
this.setBaseURI(r)
this._base.href=r
this._base.dataset.scrimbaInternal=true
this._options=e
this._styleNodes=[]
this._nodes=[]
this._currentStyleSheets={}
if(e.html){this.applyInitialState(e.html)
this.setLoadAction(true)
this.setLoaded(true)}this.setStatus(e.status||0)}this}e.PlayerPage=D
D.prototype.html=function(t){return this._html}
D.prototype.setHtml=function(t){this._html=t
return this}
D.prototype.__selection={watch:"selectionDidSet",name:"selection"}
D.prototype.selection=function(t){return this._selection}
D.prototype.setSelection=function(t){var e=this.selection()
if(t!=e){this._selection=t}if(t!=e){this.selectionDidSet&&this.selectionDidSet(t,e,this.__selection)}return this}
D.prototype.focusNode=function(t){return this._focusNode}
D.prototype.setFocusNode=function(t){this._focusNode=t
return this}
D.prototype.hoverNode=function(t){return this._hoverNode}
D.prototype.setHoverNode=function(t){this._hoverNode=t
return this}
D.prototype.activeNode=function(t){return this._activeNode}
D.prototype.setActiveNode=function(t){this._activeNode=t
return this}
D.prototype.__baseURI={watch:"baseURIDidSet",name:"baseURI"}
D.prototype.baseURI=function(t){return this._baseURI}
D.prototype.setBaseURI=function(t){var e=this.baseURI()
if(t!=e){this._baseURI=t}if(t!=e){this.baseURIDidSet&&this.baseURIDidSet(t,e,this.__baseURI)}return this}
D.prototype.logs=function(t){return this._logs}
D.prototype.setLogs=function(t){this._logs=t
return this}
D.prototype.requestAction=function(t){return this._requestAction}
D.prototype.setRequestAction=function(t){this._requestAction=t
return this}
D.prototype.loadAction=function(t){return this._loadAction}
D.prototype.setLoadAction=function(t){this._loadAction=t
return this}
D.prototype.loadedAction=function(t){return this._loadedAction}
D.prototype.setLoadedAction=function(t){this._loadedAction=t
return this}
D.prototype.location=function(t){return this._location}
D.prototype.setLocation=function(t){this._location=t
return this}
D.prototype.status=function(t){return this._status}
D.prototype.setStatus=function(t){this._status=t
return this}
D.prototype.loaded=function(t){return this._loaded}
D.prototype.setLoaded=function(t){this._loaded=t
return this}
D.prototype.loading=function(t){return this._loading}
D.prototype.setLoading=function(t){this._loading=t
return this}
D.prototype.tracker=function(t){return this._tracker}
D.prototype.setTracker=function(t){this._tracker=t
return this}
D.prototype.__tracking={default:true,name:"tracking"}
D.prototype.tracking=function(t){return this._tracking}
D.prototype.setTracking=function(t){this._tracking=t
return this}
D.prototype._tracking=true
D.prototype.cancelled=function(t){return this._cancelled}
D.prototype.setCancelled=function(t){this._cancelled=t
return this}
D.prototype.__errored={default:false,name:"errored"}
D.prototype.errored=function(t){return this._errored}
D.prototype.setErrored=function(t){this._errored=t
return this}
D.prototype._errored=false
D.prototype.snapshot=function(t){return this._snapshot}
D.prototype.setSnapshot=function(t){this._snapshot=t
return this}
D.prototype.history=function(t){return this._history}
D.prototype.setHistory=function(t){this._history=t
return this}
D.toOptionValue=function(t){return t}
D.fromOptionValue=function(t,e){if(t instanceof D){return t}else if(t instanceof Object){if(t._RICH){return t._RICH}else{var i=new this(e,t)
Object.defineProperty(this,"_RICH",{value:i,enumerable:false,configurable:true})
return i}}}
D.prototype.container=function(){return _.instance()}
D.prototype.branch=function(){return this._initiator&&this._initiator.branch&&this._initiator.branch()}
D.prototype.browser=function(){return this._initiator&&this._initiator.browser&&this._initiator.browser()}
D.prototype.resolvePath=function(t){let e=window.location.host
let i=this._initiator&&this._initiator.space&&this._initiator.space()
for(let s=0,a=r(i.files()),u=a.length,c;s<u;s++){c=a[s]
if(c.path()==t){var n=(t.match(/\.[^\.]+$/)||[""])[0]
if(c.blobId()){return"https://"+e+"/blobs/"+c.blobId()+n}else{var o=m.lookup(c.name())||""
return"data:"+o+","+c.body()}}}return null}
D.prototype.isLoading=function(){return!this.loaded()}
D.prototype.toJSON=function(){var t={html:[this.serializeNode(this.html(),false,true),this.serializeAttributes(this.html())],logs:this.logs().data(),status:this.status(),url:this._options.url}
return t}
D.prototype.doc=function(){return this._document}
D.prototype.selectionDidSet=function(t,e){this._selectionDidChange=true
if(t){var i=t.NODE
return t.ENDNODE||(t.ENDNODE=t[3]?this.nodeForPath(t[3]):i)}}
D.prototype.render=function(t){var e=t.document
var i=e.documentElement
if(i!=this._html){this._document=e
if(i){e.replaceChild(this._html,i)}else{e.appendChild(this._html)}}if(this._focusNodeSynced!=this._focusNode){var n=this._focusNodeSynced
var r=this._focusNode
if(n&&n.classList){n.classList.remove("__focus")}if(r&&r.classList){r.classList.add("__focus")}this._focusNodeSynced=this._focusNode}if(this._hoverNodeSynced!=this._hoverNode){this.refreshPseudoClass("__hover",this._hoverNode,this._hoverNodeSynced)
this._hoverNodeSynced=this._hoverNode}if(this._activeNodeSynced!=this._activeNode){this.refreshPseudoClass("__active",this._activeNode,this._activeNodeSynced)
this._activeNodeSynced=this._activeNode}if(this._selectionDidChange){this.applySelection(t)
this._selectionDidChange=false}return this}
D.prototype.detach=function(){return this}
D.prototype.indexNode=function(t){if(!t.hasChildNodes()){let e=this._nodes.push(t)
t.SCRIMBA_INDEX=e-1
return this}var e=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT
var i=this.doc().createNodeIterator(t,e,null)
var n
while(n=i.nextNode()){if(n.nodeName=="BASE"&&n.dataset.scrimbaInternal){continue}n.SCRIMBA_INDEX=this._nodes.push(n)-1}return this}
D.prototype.reindexNodes=function(){this._nodes=[]
this.indexNode(this._root)
return this}
D.prototype.nodeForPath=function(t){return this._nodes?this._nodes[t]:null}
D.prototype.serializeAttributes=function(t){var e=[]
Array.from(t.attributes).forEach(function(t){let i=d.keyToRef(t.name)
e.push(i)
return e.push(t.value||null)})
return e}
D.prototype.serializeNode=function(t,e,i){return v.serializeNode(this.doc(),t,e,i)}
D.prototype.deserializeNode=function(t){if(typeof t=="number"||t instanceof Number){return this.nodeForPath(t)}else{return this.nodeForHTML(t)}}
D.prototype.nodeForHTML=function(t){if(t instanceof Array){t="<div>placeholder</div>"}else if(t.text){return this.doc().createTextNode(t.text)}else if(t.comment){return this.doc().createComment(t.comment)}else if(t.TYPE==8){return this.doc().createComment(t.value)}var e=t.slice(1).match(/^\w+/)[0]
var i=this.doc().createElement(w[e]||"div")
i.innerHTML=t
var n=e=="body"?i.lastElementChild:i.firstElementChild
return n}
D.prototype.cleanTextSplitters=function(t){var e=this.doc().createNodeIterator(t,NodeFilter.SHOW_COMMENT,null)
var i
while(i=e.nextNode()){if(i.textContent=="Â§SÂ§"){i.parentNode.removeChild(i)}else if(i.textContent=="Â§SÂ§B"){i.parentNode.replaceChild(this.doc().createTextNode(""),i)}}return t}
D.prototype.applyInitialState=function(t){var e=t[0]
e=e.replace(/(<\s*head[^\>]*>)/,"$1"+this._base.outerHTML)
e=v.deserializeReferences(e,{BASECSS:T})
this._html.innerHTML=e
if(t[0].indexOf("Â§SÂ§")>=0){this.cleanTextSplitters(this._html)}this.applyAttributes(this._html,t[1])
this.reindexNodes()
this._currentStyleSheets={}
return this}
D.prototype.applyAttributes=function(t,e){if(!e){return}var i=0
var n=e.length
while(i<n){let n=d.refToKey(e[i])
let r=e[i+1]
t.setAttribute(n,r)
i+=2}return}
D.prototype.applyMutations=function(t){if(this._errored){return}var e
var i=false
for(let c=0,p=r(t),l=p.length,h;c<l;c++){h=p[c]
if(h[0]==y.INSERT){i=true
var n=this.nodeForPath(h[1])
var o=h[2]
var s=h.NODE||(h.NODE=this.deserializeNode(h[3]))
var a=n.childNodes[o]
if(a){n.insertBefore(s,a)}else{n.appendChild(s)}this.indexNode(s)}else if(h[0]==y.INSERT_ADJACENT){i=true
let t=h.RELNODE||(h.RELNODE=this.nodeForPath(h[1]))
let e=y.POS[h[2]]
if(h.NODES){for(let e=0,i=r(h.NODES),n=i.length,o;e<n;e++){o=i[e]
if(h[2]==0){t.parentNode.insertBefore(o,t)}else if(h[2]==2){t.appendChild(o)}else{console.log("node not added in M.INSERT_ADJACENT!!",h)}}continue}let n=h[3]
let o=t.previousSibling
let s=t.nextSibling
let a=t.parentNode
let u=t.lastChild
let c=null
let p=""
let l=[]
if(h[2]==0&&t.nodeType!=Node.ELEMENT_NODE){c=document.createElement("span")
a.insertBefore(c,t)
t=c}if(typeof n=="number"){let i=this.nodeForPath(n)
t.insertAdjacentElement(e,i)
l.push(i)
h.NODES=[i]
if(c){a.removeChild(c)}continue}else if(typeof n=="string"){if(t.nodeName=="HTML"){let i=this.nodeForHTML(n)
t.insertAdjacentElement(e,i)}else{t.insertAdjacentHTML(e,n)}p+=n}else{for(let i=0,o=r(n),s=o.length,a;i<s;i++){a=o[i]
if(typeof a=="string"){if(t.nodeName=="HTML"){let i=this.nodeForHTML(a)
t.insertAdjacentElement(e,i)}else{t.insertAdjacentHTML(e,a)}p+=a}else if(typeof a=="number"){let i=this.nodeForPath(a)
t.insertAdjacentElement(e,i)
l.push(i)}}}let d
let f=[]
if(p.indexOf("Â§SÂ§")>=0){this.cleanTextSplitters(a)}if(e=="beforeend"){d=u?u.nextSibling:t.firstChild}else if(e=="beforebegin"){d=o?o.nextSibling:a.firstChild}while(d){if(d==t){break}if(l.indexOf(d)<0){this.indexNode(d)}f.push(d)
d=d.nextSibling}if(c&&c.parentNode==a){a.removeChild(c)}h.NODES=f}else if(h[0]==y.REMOVE){i=true
if(e=h.NODE||(h.NODE=this.nodeForPath(h[1]))){h.REL||(h.REL=e.nextSibling)
h.PARENT||(h.PARENT=e.parentNode)
if(e.parentNode){e.parentNode.removeChild(e)}else{console.warn("M.REMOVE has no parent",e,e.parentNode,h,h.PARENT)}}}else if(h[0]==y.SETTEXT){if(e=h.NODE=this.nodeForPath(h[1])){h.PREV=e.textContent
e.textContent=g(h.PREV,h[2])}}else{e=h.NODE=this.nodeForPath(h[1])
if(e&&h[0]==y.SETPROP){var u=y.NAME_MAP[h[2]]||h[2]
h.PREV||(h.PREV=e[u])
e[u]=h[3]}else if(e&&h[0]==y.SETATTR){u=y.NAME_MAP[h[2]]||h[2]
h.PREV||(h.PREV=e.getAttribute(u))
if(u=="class"){h.STATEFLAGS||(h.STATEFLAGS=e.className.split(" ").filter(function(t){return t.match(/^__\w+/)}))}if(e.nodeName=="STYLE"||e.nodeName=="LINK"){}else if(h[3]==null){e.removeAttribute(u)}else{e.setAttribute(u,h[3])}if(e.nodeName=="IMG"&&u=="src"){this.rewriteImageSrc(e)}if(h.STATEFLAGS){h.STATEFLAGS.map(function(t){return e.classList.add(t)})}}}}if(i)this.reindexNodes()
return this}
D.prototype.revertMutations=function(t){if(this.errored()){return}var e
var i=false
var o=n(t)-1
while(o>=0){var s=t[o--]
if(s[0]==y.INSERT){i=true
if(e=s.NODE){if(e.parentNode){e.parentNode.removeChild(e)}else{console.warn("revert INSERT - no parent!",e)}}}else if(s[0]==y.INSERT_ADJACENT){i=true
for(let t=0,e=r(s.NODES),i=e.length,n;t<i;t++){n=e[t]
if(n.parentNode){n.parentNode.removeChild(n)}else{console.warn("revert INSERT_ADJACENT - no parent!",n,s)}}}else if(s[0]==y.REMOVE){i=true
var a=s.PARENT
s.REL?a.insertBefore(s.NODE,s.REL):a.appendChild(s.NODE)}else if(s[0]==y.SETTEXT&&s.NODE){s.NODE.textContent=s.PREV}else if(s[0]==y.SETPROP&&s.NODE){var u=y.NAME_MAP[s[2]]||s[2]
s.NODE[u]=s.PREV}else if(s[0]==y.SETATTR&&s.NODE){u=y.NAME_MAP[s[2]]||s[2]
if(s.PREV==null){s.NODE.removeAttribute(u)}else{s.NODE.setAttribute(u,s.PREV)}}}if(i)this.reindexNodes()
return this}
D.prototype.refreshPseudoClass=function(t,e,i){while(i&&i!=this._root&&(!e||!i.contains(e))){if(i.classList){i.classList.remove(t)}i=i.parentNode}while(e&&e!=this._root&&this._root.contains(e)){if(e.classList){e.classList.add(t)}e=e.parentNode}return}
D.prototype.applySelection=function(t){var e=this.selection()
var i=t.getSelection()
if(!i){return}if(!e||!e.NODE||e.NODE==this._document.body){if(i){i.removeAllRanges()}return this}var n=e.NODE
var r=e[1]
var o=e[2]
var s=e.ENDNODE
if(n.nodeName=="INPUT"||n.nodeName=="TEXTAREA"){var a=/text|search|password|tel|url/
if(n.nodeName=="INPUT"&&!a.test(n.type)){return}if(r<o){return n.setSelectionRange(r,o,"forward")}else if(r>o){return n.setSelectionRange(o,r,"backward")}else{return n.setSelectionRange(r,o,"none")}}else{var u=this.doc().createRange()
if(n!=s){var c=n.compareDocumentPosition(s)
var p=c&Node.DOCUMENT_POSITION_PRECEDING
if(p){u.setStart(s,o)
u.setEnd(n,r)}else{u.setStart(n,r)
u.setEnd(s,o)}}else{if(n.nodeType==3){r=Math.min(n.length,r)
o=Math.min(n.length,o)}if(r<=o){u.setStart(n,r)
u.setEnd(n,o)}else{u.setStart(n,o)
u.setEnd(n,r)}if(r==o){u.collapse(false)}}i.removeAllRanges()
return i.addRange(u)}}
D.prototype.syncStyleSheets=function(t,e){if(e===undefined)e=false
var i=this.html().querySelectorAll('link[rel="stylesheet"]')
for(let t=0,n=r(i),o=n.length,s;t<o;t++){s=n[t]
let i=s.href
if(e){s.href=s.href.split("?")[0]+"?"+Math.random()}}let o=[]
for(let e=0,i=r(t),u=i.length,c;e<u;e++){c=i[e]
if(c.lang()=="css"){var s=c.path()
if(!s.startsWith(this.browser().rootPath())){continue}s=s.slice(n(this.browser().rootPath())-1)
var a=c.currentBody()
o.push(this._currentStyleSheets[s]!=a&&(this._currentStyleSheets[s]=a,this.setCSSText(s,x.process(a,{rewritePseudoStates:true}))))}}return o}
D.prototype.setCSSText=function(t,e){var i
var n=t.slice(1)
if(i=this.html().querySelector("style[scrimba-live='"+t+"'],style[scrimba-live][href='"+n+"']")){e="/*SCRIMBA:IGNORE:START*/"+e+"/*SCRIMBA:IGNORE:END*/"
return i.textContent=e}}
D.prototype.setStyles=function(t){var e
return this
var i=this._head
while(e=i.firstChild){i.removeChild(e)}let n=[]
for(let e=0,s=r(t),a=s.length,u;e<a;e++){u=s[e]
var o
if(typeof u=="number"){o=this._styleNodes[u]}else{o=this._styleNodes[u.id]
if(!o){o=this.doc().createElement(u.textContent!=null?"style":"link")
this._styleNodes[u.id]=o}if(u.media!=undefined){o.media=u.media}if(u.textContent!=undefined){o.textContent=u.textContent}if(u.href!=undefined){o.href=u.href}if(u.filename!=undefined){o.SCRIMBA_FILENAME=u.filename}}n.push(i.appendChild(o))}return n}},function(t,e,i){var n=i(0)
var r=n.defineTag("CoverArt",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.dataDidSet=function(t){let e="none"
let i=t&&t.coverart
if(i){let i="/cdn/"+t.id+"."+t.v+".cover.svg"
e="url('"+i+"')"}else if(i&&typeof encodeURIComponent=="function"&&i.indexOf("<svg")>=0){e="url('data:image/svg+xml,"+encodeURIComponent(i)+"')"
this._bg=e}else if(typeof i=="string"||i instanceof String){e="url('"+this.url()+"')"}this.dom().style["background-image"]=e
return this}})
e.CoverArt=r},function(t,e,i){var n=i(0)
var r=n.defineTag("Tile",function(t){t.reg=function(t){return r[t]=this}
t.prototype.options=function(t){return this._options}
t.prototype.setOptions=function(t){this._options=t
return this}
t.prototype.isSelectable=function(){return this.options()&&this.options().selectable}
t.prototype.isTappable=function(){return true}
t.prototype.url=function(){return""}
t.prototype.ontap=function(t){if(this.isSelectable()){this.trigger("tileselect",this)
return t.stop()}if(this.isTappable()&&this.url()){if(t.meta()||t.alt()){window.open(this.url())}else{this.router().go(this.url())}return t.stop()}}
t.prototype.beforeRender=function(){if(!(this.data()&&this.data().v>0&&(!this.data().CODE||this.data().CODE==200))){return false}return true}})
e.Tile=r},function(t,e){function i(t){return t?t.toArray?t.toArray():t:[]}function n(){this._value=undefined
this._resolved=false
this._listeners=[]
this}e.LongPromise=n
n.prototype.then=function(t){if(this._resolved){t(this._value)}else{this._listeners.push(t)}return this}
n.prototype.resolve=function(t){this._resolved=true
this._value=t
for(let t=0,e=i(this._listeners),n=e.length;t<n;t++){e[t](this._value)}this._listeners=[]
return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0)
var o=r.defineTag("Icon","i",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.build=function(){return this.flag("uxa")}
t.prototype.dataDidSet=function(t){if(typeof t=="string"||t instanceof String){if(n(t)==1){this.setText(t)}else if(t.indexOf("<svg")>=0){this.flag("svg")
this.dom().innerHTML=t}}return this}})
e.Icon=o},function(t,e){var i={}.toString
t.exports=Array.isArray||function(t){return i.call(t)=="[object Array]"}},function(t,e,i){var n=i(36)
e.createCodec=p
e.install=s
e.filter=c
var r=i(7)
function o(t){if(!(this instanceof o))return new o(t)
this.options=t
this.init()}o.prototype.init=function(){var t=this.options
if(t&&t.uint8array){this.bufferish=r.Uint8Array}return this}
function s(t){for(var e in t){o.prototype[e]=a(o.prototype[e],t[e])}}function a(t,e){return t&&e?i:t||e
function i(){t.apply(this,arguments)
return e.apply(this,arguments)}}function u(t){t=t.slice()
return function(i){return t.reduce(e,i)}
function e(t,e){return e(t)}}function c(t){return n(t)?u(t):t}function p(t){return new o(t)}e.preset=p({preset:true})},function(t,e){const i=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]
e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,comments:{blockComment:["\x3c!--","--\x3e"]},brackets:[["\x3c!--","--\x3e"],["<",">"],["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:'"',close:'"'},{open:"'",close:"'"},{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"}],onEnterRules:[{beforeText:new RegExp("<(?!(?:"+i.join("|")+"))([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$","i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>$/i,action:{indentAction:2}},{beforeText:new RegExp("<(?!(?:"+i.join("|")+"))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$","i"),action:{indentAction:1}}]}
e.language={defaultToken:"",tokenPostfix:".html",ignoreCase:true,tokenizer:{root:[[/<!DOCTYPE/,"metatag","@doctype"],[/<!--/,"comment","@comment"],[/(<)((?:[\w\-]+:)?[\w\-]+)(\s*)(\/>)/,["delimiter","tag","","delimiter"]],[/(<)(script)/,["delimiter",{token:"tag",next:"@script"}]],[/(<)(style)/,["delimiter",{token:"tag",next:"@style"}]],[/(<)((?:[\w\-]+:)?[\w\-]+)/,["delimiter",{token:"tag",next:"@otherTag"}]],[/(<\/)((?:[\w\-]+:)?[\w\-]+)/,["delimiter",{token:"tag",next:"@otherTag"}]],[/</,"delimiter"],[/[^<]+/]],doctype:[[/[^>]+/,"metatag.content"],[/>/,"metatag","@pop"]],comment:[[/-->/,"comment","@pop"],[/[^-]+/,"comment.content"],[/./,"comment.content"]],otherTag:[[/\/?>/,"delimiter","@pop"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/]],script:[[/type/,"attribute.name","@scriptAfterType"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/(<\/)(script\s*)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],scriptAfterType:[[/=/,"delimiter","@scriptAfterTypeEquals"],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptAfterTypeEquals:[[/"([^"]*)"/,{token:"attribute.value",switchTo:"@scriptWithCustomType.$1"}],[/'([^']*)'/,{token:"attribute.value",switchTo:"@scriptWithCustomType.$1"}],[/>/,{token:"delimiter",next:"@scriptEmbedded",nextEmbedded:"text/javascript"}],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptWithCustomType:[[/>/,{token:"delimiter",next:"@scriptEmbedded.$S2",nextEmbedded:"$S2"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/],[/<\/script\s*>/,{token:"@rematch",next:"@pop"}]],scriptEmbedded:[[/<\/script/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]],style:[[/type/,"attribute.name","@styleAfterType"],[/lang/,"attribute.name","@styleAfterType"],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/(<\/)(style\s*)(>)/,["delimiter","tag",{token:"delimiter",next:"@pop"}]]],styleAfterType:[[/=/,"delimiter","@styleAfterTypeEquals"],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleAfterTypeEquals:[[/"([^"]*)"/,{token:"attribute.value",switchTo:"@styleWithCustomType.$1"}],[/'([^']*)'/,{token:"attribute.value",switchTo:"@styleWithCustomType.$1"}],[/>/,{token:"delimiter",next:"@styleEmbedded",nextEmbedded:"text/css"}],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleWithCustomType:[[/>/,{token:"delimiter",next:"@styleEmbedded.$S2",nextEmbedded:"$S2"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/=/,"delimiter"],[/[ \t\r\n]+/],[/<\/style\s*>/,{token:"@rematch",next:"@pop"}]],styleEmbedded:[[/<\/style/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/[^<]+/,""]]}}},function(t,e,i){var n;(function(r,o,s){if(!r){return}var a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"}
var u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}
var c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}
var p={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}
var l
for(var h=1;h<20;++h){a[111+h]="f"+h}for(h=0;h<=9;++h){a[h+96]=h.toString()}function d(t,e,i){if(t.addEventListener){t.addEventListener(e,i,false)
return}t.attachEvent("on"+e,i)}function f(t,e,i){if(t.removeEventListener){t.removeEventListener(e,i,false)
return}t.detachEvent("on"+e,i)}function m(t){if(t.type=="keypress"){var e=String.fromCharCode(t.which)
if(!t.shiftKey){e=e.toLowerCase()}return e}if(a[t.which]){return a[t.which]}if(u[t.which]){return u[t.which]}return String.fromCharCode(t.which).toLowerCase()}function y(t,e){return t.sort().join(",")===e.sort().join(",")}function g(t){var e=[]
if(t.shiftKey){e.push("shift")}if(t.altKey){e.push("alt")}if(t.ctrlKey){e.push("ctrl")}if(t.metaKey){e.push("meta")}return e}function v(t){if(t.preventDefault){t.preventDefault()
return}t.returnValue=false}function _(t){if(t.stopPropagation){t.stopPropagation()
return}t.cancelBubble=true}function b(t){return t=="shift"||t=="ctrl"||t=="alt"||t=="meta"}function x(){if(!l){l={}
for(var t in a){if(t>95&&t<112){continue}if(a.hasOwnProperty(t)){l[a[t]]=t}}}return l}function w(t,e,i){if(!i){i=x()[t]?"keydown":"keypress"}if(i=="keypress"&&e.length){i="keydown"}return i}function T(t){if(t==="+"){return["+"]}t=t.replace(/\+{2}/g,"+plus")
return t.split("+")}function S(t,e){var i
var n
var r
var o=[]
i=T(t)
for(r=0;r<i.length;++r){n=i[r]
if(p[n]){n=p[n]}if(e&&e!="keypress"&&c[n]){n=c[n]
o.push("shift")}if(b(n)){o.push(n)}}e=w(n,o,e)
return{key:n,modifiers:o,action:e}}function k(t,e){if(t===null||t===o){return false}if(t===e){return true}return k(t.parentNode,e)}function A(t){var e=this
t=t||o
if(!(e instanceof A)){return new A(t)}e.target=t
e._callbacks={}
e._directMap={}
var i={}
var n
var r=false
var s=false
var a=false
function u(t){t=t||{}
var e=false,n
for(n in i){if(t[n]){e=true
continue}i[n]=0}if(!e){a=false}}function c(t,n,r,o,s,a){var u
var c
var p=[]
var l=r.type
if(!e._callbacks[t]){return[]}if(l=="keyup"&&b(t)){n=[t]}for(u=0;u<e._callbacks[t].length;++u){c=e._callbacks[t][u]
if(!o&&c.seq&&i[c.seq]!=c.level){continue}if(l!=c.action){continue}if(l=="keypress"&&!r.metaKey&&!r.ctrlKey||y(n,c.modifiers)){var h=!o&&c.combo==s
var d=o&&c.seq==o&&c.level==a
if(h||d){e._callbacks[t].splice(u,1)}p.push(c)}}return p}function p(t,i,n,r){if(e.stopCallback(i,i.target||i.srcElement,n,r)){return}if(t(i,n)===false){v(i)
_(i)}}e._handleKey=function(t,e,i){var n=c(t,e,i)
var r
var o={}
var l=0
var h=false
for(r=0;r<n.length;++r){if(n[r].seq){l=Math.max(l,n[r].level)}}for(r=0;r<n.length;++r){if(n[r].seq){if(n[r].level!=l){continue}h=true
o[n[r].seq]=1
p(n[r].callback,i,n[r].combo,n[r].seq)
continue}if(!h){p(n[r].callback,i,n[r].combo)}}var d=i.type=="keypress"&&s
if(i.type==a&&!b(t)&&!d){u(o)}s=h&&i.type=="keydown"}
function l(t){if(typeof t.which!=="number"){t.which=t.keyCode}var i=m(t)
if(!i){return}if(t.type=="keyup"&&r===i){r=false
return}e.handleKey(i,g(t),t)}function h(){clearTimeout(n)
n=setTimeout(u,1e3)}function x(t,e,n,o){i[t]=0
function s(e){return function(){a=e;++i[t]
h()}}function c(e){p(n,e,t)
if(o!=="keyup"){r=m(e)}setTimeout(u,10)}for(var l=0;l<e.length;++l){var d=l+1===e.length
var f=d?c:s(o||S(e[l+1]).action)
w(e[l],f,o,t,l)}}function w(t,i,n,r,o){e._directMap[t+":"+n]=i
t=t.replace(/\s+/g," ")
var s=t.split(" ")
var a
if(s.length>1){x(t,s,i,n)
return}a=S(t,n)
e._callbacks[a.key]=e._callbacks[a.key]||[]
c(a.key,a.modifiers,{type:a.action},r,t,o)
e._callbacks[a.key][r?"unshift":"push"]({callback:i,modifiers:a.modifiers,action:a.action,seq:r,level:o,combo:t})}e._bindMultiple=function(t,e,i){for(var n=0;n<t.length;++n){w(t[n],e,i)}}
e.enable=function(){d(t,"keypress",l)
d(t,"keydown",l)
d(t,"keyup",l)}
e.disable=function(){f(t,"keypress",l)
f(t,"keydown",l)
f(t,"keyup",l)}
e.enable()}A.prototype.bind=function(t,e,i){var n=this
t=t instanceof Array?t:[t]
n._bindMultiple.call(n,t,e,i)
return n}
A.prototype.unbind=function(t,e){var i=this
return i.bind.call(i,t,function(){},e)}
A.prototype.trigger=function(t,e){var i=this
if(i._directMap[t+":"+e]){i._directMap[t+":"+e]({},t)}return i}
A.prototype.reset=function(){var t=this
t._callbacks={}
t._directMap={}
return t}
A.prototype.stopCallback=function(t,e){var i=this
if((" "+e.className+" ").indexOf(" mousetrap ")>-1){return false}if(k(e,i.target)){return false}return e.tagName=="INPUT"||e.tagName=="SELECT"||e.tagName=="TEXTAREA"||e.isContentEditable}
A.prototype.handleKey=function(){var t=this
return t._handleKey.apply(t,arguments)}
A.addKeycodes=function(t){for(var e in t){if(t.hasOwnProperty(e)){a[e]=t[e]}}l=null}
A.init=function(){var t=A(o)
for(var e in t){if(e.charAt(0)!=="_"){A[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e)}}}
A.init()
r.Mousetrap=A
if(typeof t!=="undefined"&&t.exports){t.exports=A}if(true){!(n=function(){return A}.call(e,i,e,t),n!==s&&(t.exports=n))}})(typeof window!=="undefined"?window:null,typeof window!=="undefined"?document:null)},function(t,e){e.read=function(t,e,i,n,r){var o,s
var a=r*8-n-1
var u=(1<<a)-1
var c=u>>1
var p=-7
var l=i?r-1:0
var h=i?-1:1
var d=t[e+l]
l+=h
o=d&(1<<-p)-1
d>>=-p
p+=a
for(;p>0;o=o*256+t[e+l],l+=h,p-=8){}s=o&(1<<-p)-1
o>>=-p
p+=n
for(;p>0;s=s*256+t[e+l],l+=h,p-=8){}if(o===0){o=1-c}else if(o===u){return s?NaN:(d?-1:1)*Infinity}else{s=s+Math.pow(2,n)
o=o-c}return(d?-1:1)*s*Math.pow(2,o-n)}
e.write=function(t,e,i,n,r,o){var s,a,u
var c=o*8-r-1
var p=(1<<c)-1
var l=p>>1
var h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0
var d=n?0:o-1
var f=n?1:-1
var m=e<0||e===0&&1/e<0?1:0
e=Math.abs(e)
if(isNaN(e)||e===Infinity){a=isNaN(e)?1:0
s=p}else{s=Math.floor(Math.log(e)/Math.LN2)
if(e*(u=Math.pow(2,-s))<1){s--
u*=2}if(s+l>=1){e+=h/u}else{e+=h*Math.pow(2,1-l)}if(e*u>=2){s++
u/=2}if(s+l>=p){a=0
s=p}else if(s+l>=1){a=(e*u-1)*Math.pow(2,r)
s=s+l}else{a=e*Math.pow(2,l-1)*Math.pow(2,r)
s=0}}for(;r>=8;t[i+d]=a&255,d+=f,a/=256,r-=8){}s=s<<r|a
c+=r
for(;c>0;t[i+d]=s&255,d+=f,s/=256,c-=8){}t[i+d-f]|=m*128}},function(t,e,i){var n=i(0)
var r=i(4).Resource
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.Playlist=o
o.prototype.items=function(){var t=this
if(t.item_ids){return t.item_ids.ITEMS=t.item_ids.map(function(e){return t.db().get(e)})}else{return t._cache.items||(t._cache.items=[])}}
o.prototype.feature=function(){return this.update({featured_at:new Date})}
o.prototype.unfeature=function(){return this.update({featured_at:null})}
o.prototype.itemIndex=function(t){let e=this.item_ids.indexOf(t.id||t)
return e}
o.prototype.itemAfter=function(t){let e=this.itemIndex(t)
return e>=0?this.items()[e+1]:null}
o.prototype.itemBefore=function(t){let e=this.itemIndex(t)
return e>=1?this.items()[e-1]:null}
o.prototype.group=function(){return this.gid?this.db().get(this.gid):null}
o.prototype.dependsOn=function(){return[this.db().get(this.uid)].concat(this.items())}
o.prototype.url=function(){return"/playlist/"+this.id}},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("ServiceWorkerFrame","iframe",function(t){t.prototype.send=function(t){return this.dom().contentWindow.postMessage(t,"*")}})
function s(t){this._id=t
this._runner=r(o).setSrc(this.origin()+"/__sw__.html?"+t).end()
this._player=r(o).setSrc("/__sw__.html?"+t).end()
this}e.Container=s
s.prototype.__controller={watch:"controllerDidSet",name:"controller"}
s.prototype.controller=function(t){return this._controller}
s.prototype.setController=function(t){var e=this.controller()
if(t!=e){this._controller=t}if(t!=e){this.controllerDidSet&&this.controllerDidSet(t,e,this.__controller)}return this}
s.prototype.runner=function(t){return this._runner}
s.prototype.setRunner=function(t){this._runner=t
return this}
s.prototype.player=function(t){return this._player}
s.prototype.setPlayer=function(t){this._player=t
return this}
var a={}
s.instance=function(t){if(t===undefined)t=window.CONTAINER_ID
return a[t]||(a[t]=new this(t))}
s.prototype.origin=function(t){let e=this._id
if(t){e+="-"+t}return document.location.origin.replace("://","://"+e+".")}
s.prototype.mount=function(){var t=this
if(!t._mounted){t._onmessage=function(e){if(e.source==t._runner.dom().contentWindow){return t.onrunnermessage(e.data,e)}else if(e.source==t._player.dom().contentWindow){return t.onplayermessage(e.data,e)}}
document.body.appendChild(t._runner.dom())
document.body.appendChild(t._player.dom())
window.addEventListener("message",t._onmessage)
t._mounted=true}return t}
s.prototype.unmount=function(){if(this._mounted){window.removeEventListener("message",this._onmessage)
this._onmessage=null
this._mounted=false
this._runner.orphanize()
this._player.orphanize()}return this}
s.prototype.onrunnermessage=function(t,e){var i=this,n
if(i.controller()){var r=function(e){if(t.ref&&t.ref>0){e.ref=-t.ref}return i.runner().send(e)}
return(n=i.controller())&&n.oncontainermessage&&n.oncontainermessage(t,r,"runner")}}
s.prototype.onplayermessage=function(t,e){var i=this,n
if(i.controller()){var r=function(e){if(t.ref&&t.ref>0){e.ref=-t.ref}return i.player().send(e)}
return(n=i.controller())&&n.oncontainermessage&&n.oncontainermessage(t,r,"player")}}
s.prototype.controllerDidSet=function(t,e){return this.mount()}
s.prototype.send=function(t){this.runner().send(t)
return this.player().send(t)}
s.prototype.sync=function(t){var e=t.toRunStaticSnapshot()
this.send({type:"snapshot",data:e})
return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r={},o=i(0),s=o.createElement
var a=i(56)
var u=null
var c=i(2),p=c.LCRange,l=c.SCON
var h=SCRIMBA_API
var d="Source Code Pro"
var f=[]
var m=i(174).Theme
var y={js:"javascript",ts:"typescript",svelte:"svelte",py:"python",md:"markdown"}
var g=window.MonacoEnvironment={defaults:{codeLens:false,colorDecorators:true,contextmenu:false,cursorBlinking:"smooth",detectIndentation:true,dragAndDrop:false,folding:false,fontFamily:d,fontIsMonospace:true,fontSize:14,fontWeight:"normal",glyphMargin:0,hideCursorInOverviewRuler:true,iconsInSuggestions:false,lineDecorationsWidth:"1ch",lineNumbersMinChars:5,links:false,minimap:{enabled:false},multiCursorModifier:"alt",occurrencesHighlight:false,outlineMarkers:false,quickSuggestions:true,readOnly:false,renderIndentGuides:false,renderLineHighlight:"gutter",renderWhitespace:"none",roundedSelection:true,scrollBeyondLastLine:true,selectionHighlight:false,fixedOverflowWidgets:true,suggestOnTriggerCharacters:true,acceptSuggestionOnEnter:true,theme:"scrimba-dark",wordBasedSuggestions:true,wordWrapColumn:100,wordWrap:"wordWrapColumn",wrappingIndent:"same",scrollbar:{useShadows:false,verticalScrollbarSize:8,horizontalScrollbarSize:8}},languages:[{id:"imba",extensions:[".imba"],aliases:["Imba","imba"],mimetypes:["application/imba"],language:i(69)},{id:"imba2",extensions:[".imba2"],aliases:["Imba2","imba2"],mimetypes:["application/imba"],language:i(69)},{id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile"],aliases:["Ruby","rb"],language:i(116)},{id:"css",extensions:[".css",".scss"],aliases:["CSS","css","scss"],mimetypes:["text/css"],language:i(112)},{id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",language:i(115)},{id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],language:i(38)},{id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],language:i(114)},{id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],language:i(117)},{id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],language:i(113)},{id:"svelte",extensions:[".svelte"],aliases:["Svelte","svelte"],language:i(38)},{id:"vue",extensions:[".vue"],aliases:["Vue","vue"],language:i(147)},{id:"scss",extensions:[".scss"],aliases:["Scss"],language:i(146)}],javascript:i(145),marked:a,getWorkerUrl:function(){return h.monacoPath()+"/monaco.worker.js"},didLoad:function(){monaco.editor.defineTheme("scrimba-dark",m.toMonaco())
g.languages.map(function(t){var e=t.language
monaco.languages.register(t)
return monaco.languages.onLanguage(t.id,function(){e.language&&monaco.languages.setMonarchTokensProvider(t.id,e.language)
e.conf&&monaco.languages.setLanguageConfiguration(t.id,e.conf)
return e.setup&&e.setup(monaco,t)})})
var t
try{var e=document.createElement("canvas")
t=e.getContext("2d")
t.font="bold 14px '"+d+"'"
t.measureText("0123456789")
t.font="italic 14px '"+d+"'"
t.measureText("0123456789")
t.font="14px '"+d+"'"
t.measureText("0123456789")}catch(t){}var i=monaco.editor.setModelMarkers
monaco.editor.setModelMarkers=function(t,e,n){n=n.filter(function(t){return!/Cannot find module/.test(t.message)})
return i.apply(monaco.editor,arguments)}
var n=0
var r=function(){n++
try{t.font="14px '"+d+"'"
var e=t.measureText("0123456789")}catch(t){console.log("failed font checker",t)}try{var i=monaco.languages.css.cssDefaults.diagnosticsOptions.lint
i.emptyRules="ignore"
i.duplicateProperties="ignore"}catch(t){}u=monaco
for(let t=0,e=f.length;t<e;t++){f[t](monaco)}return f=[]}
return setTimeout(r,0)}}
e.load=r.load=function(){return new Promise(function(t,e){if(u){return t(u)}else{return f.push(t)}})}
e.injectStyles=r.injectStyles=function(t){if(g.CUSTOMCSS){return}let e='.delimiter.access.imba:before {\n\tposition: absolute;\n\tcontent: ".";\n\tcolor: #ea9b80;\n}'
let i=t._tokenTheme._match("delimiter.access.imba")
let n=g.CUSTOMCSS=document.createElement("style")
n.innerHTML=e.replace("delimiter.access.imba","mtk"+i._foreground)
document.head.appendChild(n)
return}
e.patchEditor=r.patchEditor=function(t){if(g.PATCHED){return t}window.SE=t
g.PATCHED=true
g.THEME=t._themeService._theme
r.injectStyles(g.THEME)
t._view.viewCursors.constructor.prototype._getCursorBlinking=function(){try{var t=this._context.model.model.FILE_MODEL
if(t&&t.space().primaryEditor().hasFocus()){return 2}else{return 1}}catch(t){}return 2}
return t}
window.require=function(){}
window.define=function(){}
e.rangeToArray=r.rangeToArray=function(t){return p.lclcToArray(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn)}
e.selectionToArray=r.selectionToArray=function(t){return p.lclcToArray(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}
e.arrayToSelection=r.arrayToSelection=function(t){return new monaco.Selection(t[0],t[1],t[0]+(t[3]||0),t[1]+(t[2]||0))}
e.arrayToRange=r.arrayToRange=function(t){if(t.length==5){return new monaco.Range(t[0],t[1],t[2],t[3])}return new monaco.Range(t[0],t[1],t[0]+(t[3]||0),t[1]+(t[2]||0))}
e.stringToRange=r.stringToRange=function(t){let e=l.decodeRangeString(t)
return new monaco.Range(e[0],e[1],e[2],e[3])}
e.uriToMode=r.uriToMode=function(t){let e=(t.match(/\.(\w+)(\#|$)/)||[])[1]
return y[e||t]||e||t}
e.colorize=r.colorize=function(t,e,i){if(i===undefined)i={}
if(!u){return Promise.resolve(t)}let n=r.uriToMode(e)
let o=monaco.editor.colorize(t,n)
return o.then(function(t){var e=s("code").flag("monaco-hl").flagIf("show-lines",i.startLine).dataset("mode",n).end()
if(i.startLine){e.css({counterReset:"code-line "+(parseInt(i.startLine)-1)})}return e.dom().outerHTML.slice(0,-7)+t+"</code>"})}
e.opToSelections=r.opToSelections=function(t){if(t[0]instanceof Array){let e=[]
for(let i=0,o=n(t),s=o.length;i<s;i++){e.push(r.arrayToSelection(o[i]))}return e}else if(typeof t[0]=="number"||t[0]instanceof Number){return[r.arrayToSelection(t)]}else{return t}}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=e.Actions={}
var o=i(39)
var s={ENABLED:1,BUSY:2}
function a(t){this._options=t
if(t.enabled!=false){this._enabled=true}this._cooldown=this._options.cooldown||0
this._mousetraps=[]
this._scopes=this._options.scope||[]
if(typeof this._scopes=="string"||this._scopes instanceof String){this._scopes=[this._scopes]}this}e.Action=a
a.register=function(t,e,i){if(i==undefined&&typeof e=="function")i=e,e={}
if(e==undefined)e={}
if(t instanceof Object){e=t
t=e.name}else{e.name||(e.name=t)
e.cmd||(e.cmd=i)}return r[t]=new a(e)}
a.lookup=function(t){return r[t]}
a.prototype.active=function(t){return this._active}
a.prototype.setActive=function(t){this._active=t
return this}
a.prototype.cooldown=function(t){return this._cooldown}
a.prototype.setCooldown=function(t){this._cooldown=t
return this}
a.prototype.options=function(t){return this._options}
a.prototype.setOptions=function(t){this._options=t
return this}
a.prototype.scopes=function(t){return this._scopes}
a.prototype.setScopes=function(t){this._scopes=t
return this}
a.prototype.exec=function(t,e){var i=t||this.context()
if(!this.available(i)){return false}var n=this._options.cmd.call(this,i,e||this._options.params)
this._lastExec=Date.now()
return n||true}
a.prototype.available=function(t){if(t===undefined)t=this.context()
return this.enabled(t)&&(!this._lastExec||Date.now()-this._lastExec>this._cooldown)}
a.prototype.enabled=function(t){if(t===undefined)t=this.context()
var e=this.getOption("enabled",t)
return e==undefined?this._enabled||false:e}
a.prototype.setEnabled=function(t){this._enabled=t
return this}
a.prototype.getOption=function(t,e){if(e===undefined)e=this.context()
var i=this._options[t]
if(i instanceof Function){i=i.call(this,e)}return i}
a.prototype.name=function(t){return this._options.name}
a.prototype.desc=function(t){return this.getOption("desc",t)}
a.prototype.icon=function(t){return this.getOption("icon",t)}
a.prototype.shortcut=function(){return this._options.shortcut}
a.prototype.o=function(t){return this._options[t]}
a.prototype.state=function(t){if(t===undefined)t=this.context()
return this.getOption("state",t)}
a.prototype.context=function(){return this._options.context}
a.prototype.space=function(){return this.context()}
a.prototype.clone=function(t){if(t===undefined)t={}
var e=Object.create(this._options,{})
for(let i,n=0,r=Object.keys(t),o=r.length,s;n<o;n++){s=r[n]
i=t[s]
e[s]=i}return new a(e)}
a.prototype.mousetrap=function(){var t=this
return t._mousetrap||(t._mousetrap=function(e,i){if(e.target.matches("textarea,input,button,.input")){if(i=="space"&&false){e.preventDefault()}else if(!/mod|ctrl|shift/.test(i)){return}}else if(e.target.closest(".Overlay")){console.log("no mousetrap inside overlay")
return}if(t.exec(t.context(),i)){return false}else{return true}})}
a.prototype.bindToMousetrap=function(t){if(this.shortcut()){t.bind(this.shortcut(),this.mousetrap())
t._toDispose||(t._toDispose=[])
return t._toDispose.push(this.shortcut())}}
function u(t){var e=this
e._context=t
e._actions=[]
e._mousetraps=[]
e._mappings={}
e._combinations=[]
e.onkeycombo=e.onkeycombo.bind(e)
e._scopes={slides:function(){return e.space().slides().visible()},recording:function(){return e.space().recording()},browser:function(){return e.space().browser().visible()},watching:function(){return!e.space().isEditing()},paused:function(){return e.space().isPaused()},playing:function(){return e.space().isPlaying()},playback:function(){return e.space().isPlaying()||e.space().isPaused()},editing:function(){return e.space().isEditing()},brushup:function(){return e.space().isAnnotating()},space:function(){return true}}
for(let t,i=0,n=Object.keys(r),o=n.length,s;i<o;i++){s=n[i]
t=r[s]
e.get(s)}e}e.ActionManager=u
u.prototype.context=function(t){return this._context}
u.prototype.setContext=function(t){this._context=t
return this}
u.prototype.scopes=function(t){return this._scopes}
u.prototype.setScopes=function(t){this._scopes=t
return this}
u.prototype.space=function(){return this._context}
u.prototype.get=function(t){var e=this._actions[t]
if(!e&&a.lookup(t)){e=a.lookup(t)
e=this._actions[t]=a.lookup(t).clone({context:this.context()})
this._actions.push(e)
let i=e.shortcut()
if(!(i instanceof Array)){i=[i]}for(let t=0,n=i.length,r;t<n;t++){r=i[t]
if(!r){continue}if(this._combinations.indexOf(r)<0){this._combinations.push(r)}this._mappings[r]||(this._mappings[r]=[])
this._mappings[r].push(e)}}return e}
u.prototype.exec=function(t){var e=this.get(t)
return e&&e.exec()}
u.prototype.trap=function(t,e){if(this._mousetraps.indexOf(t)==-1){this._mousetraps.push(t)}t.bind(this._combinations,this.onkeycombo)
return this}
u.prototype.onkeycombo=function(t,e){var i=this
if(t.target.matches("textarea,input,button,.input")){if(!/mod|ctrl|shift/.test(e)){return}}if(t.target.closest(".Overlay")){return}let r=i._mappings[e]
for(let t=0,o=n(r),s=o.length,a;t<s;t++){a=o[t]
let n=a.scopes().some(function(t){return t.split("+").every(function(t){return!i._scopes[t]||i._scopes[t](a)})})
if(!(n&&a.enabled(a.context()))){continue}if(a.exec(a.context(),e)){return false}}return true}
u.prototype.mousetrap=function(t,e){if(!t.MOUSETRAP){t.MOUSETRAP=new o(t)
this.trap(t.MOUSETRAP,e)}return t.MOUSETRAP}
u.prototype.dispose=function(){for(let t=0,e=n(this._mousetraps),i=e.length,r;t<i;t++){r=e[t]
r.unbind(this._combinations)
r.reset()}this._mousetraps=[]
this._actions=[]
return this._context=null}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
function o(t,e){this._data=t
this._data._cue=this
this._owner=e
this._version=0}e.Segment=o
o.deserialize=function(t,e){return new this(t,e)}
o.prototype.version=function(t){return this._version}
o.prototype.setVersion=function(t){this._version=t
return this}
o.prototype.data=function(t){return this._data}
o.prototype.setData=function(t){this._data=t
return this}
o.prototype.__disabled={watch:"dirty",name:"disabled"}
o.prototype.disabled=function(t){return this._disabled}
o.prototype.setDisabled=function(t){var e=this.disabled()
if(t!=e){this._disabled=t}if(t!=e){this.dirty&&this.dirty(t,e,this.__disabled)}return this}
o.prototype.span=function(){return this.end()-this.start()}
o.prototype.start=function(){return this._data[1]}
o.prototype.span=function(){return this._data[2]}
o.prototype.end=function(){return this.start()+this._data[2]}
o.prototype.duration=function(){return this._data[3]||0}
o.prototype.options=function(){return this._data[4]}
o.prototype.setOptions=function(t){this._data[4]=t
return this.dirty()}
o.prototype.dirty=function(){this._version++
this._owner&&this._owner.dirty&&this._owner.dirty()
return this}
o.prototype.moveTo=function(t,e){if(e===undefined)e=0
this._data[1]=Math.round(t-this.span()*e)
return this.dirty()}
o.prototype.anchor=function(t){if(t===undefined)t=0
return this.start()+this.span()*t}
o.prototype.contains=function(t){if(typeof t=="number"||t instanceof Number){return t>=this.start()&&this.end()>=t}else if(t instanceof o){return t.start()>=this.start()&&this.end()>=t.end()}else{return false}}
o.prototype.setStart=function(t,e){if(e===undefined)e=false
if(this.start()!=t){let i=this.start()-t
this._data[1]=t
if(!e){this._data[2]+=i}this.dirty()}return this}
o.prototype.setEnd=function(t,e){if(e===undefined)e=false
if(this.end()!=t){this._data[2]=Math.max(0,t-this.start())
this.dirty()}return this}
o.prototype.setSpan=function(t){if(this.span()!=t){this._data[2]=t
this.dirty()}this
return this}
o.prototype.setDuration=function(t){if(this.duration()!=t){this._data[3]=t
this.dirty()}return this}
function s(){return o.apply(this,arguments)}r.subclass(s,o)
e.Cue=s
function a(){return o.apply(this,arguments)}r.subclass(a,o)
e.Media=a
function u(t){var e=this
e._data=t
e._ranges=[]
e._cues=(t.cues||[]).map(function(t){return new s(t,e)}).sort(function(t,e){return t.start()-e.start()})
e._version=0
e._dirty=true
e.compute()
e}e.TimelineCues=u
u.prototype.data=function(t){return this._data}
u.prototype.setData=function(t){this._data=t
return this}
u.prototype.cues=function(t){return this._cues}
u.prototype.setCues=function(t){this._cues=t
return this}
u.prototype.ranges=function(t){return this._ranges}
u.prototype.setRanges=function(t){this._ranges=t
return this}
u.prototype.version=function(t){return this._version}
u.prototype.setVersion=function(t){this._version=t
return this}
u.prototype.media=function(t){return this._media}
u.prototype.setMedia=function(t){this._media=t
return this}
u.prototype.normalizeMedia=function(){this.media().sort(function(t,e){return t.start()-e.start()})
for(let t=0,e=n(this.media()),i=e.length;t<i;t++){let e=this.media()[t+1]}return this}
u.prototype.markers=function(){return this._data.markers||[]}
u.prototype.audio=function(){return this._data.audio||this.markers().filter(function(t){return t.type=="audio"})}
u.prototype.lastAudioMarkerOffset=function(){var t
var e=this.audio().map(function(t){return t[1]+t[2]})
return Math.max.apply(Math,e)}
u.prototype.dirty=function(){this._dirty=true
this._version++
this._data.cues=this._cues.map(function(t){return t.data()})
return this}
u.prototype.ranges=function(){this.compute()
return this._ranges}
u.prototype.addCue=function(t){let e=s.deserialize(t,this)
this._cues.push(e)
this._cues.sort(function(t,e){return t.start()-e.start()})
this.dirty()
return e}
u.prototype.removeCue=function(t){this._cues=this._cues.filter(function(e){return e!=t&&e.data()!=t})
return this.dirty()}
u.prototype.trimCuesAndAudio=function(t){this._cues=this._cues.filter(function(e){return e.start()<t})
for(let e=0,i=n(this._cues),r=i.length,o;e<r;e++){o=i[e]
if(o.end()<=t){continue}o.setEnd(t)}this._data.audio=this._data.audio.filter(function(e){return e[1]<t})
this._data.end=t
this.dirty()
return this._data}
u.prototype.compute=function(){var t=0
if(!this._dirty){return this._ranges}this._dirty=false
var e={o0:0,o1:0,t0:0,t1:0}
this._ranges=[]
var i=this._cues.slice(0).filter(function(t){return t.span()>0&&!t.disabled()})
i=i.map(function(t){return t.data().slice(0)}).sort(function(t,e){return t[1]-e[1]})
let r=0
var o
while(o=i[r]){let t=i[r-1]
if(t){let e=t[1]+t[2]
let n=o[1]+o[2]
if(o[1]>=t[1]&&e>=n){i.splice(r,1)
continue}else if(e>o[1]){let t=e-o[1]
o[1]+=t
o[2]-=t}}r++}for(let t=0,r=n(i),o=r.length,c;t<o;t++){c=r[t]
var s=i[t+1]
let n=c[3]
if(n<0){n=c[2]*-n}var a={o0:Math.max(c[1],0),o1:Math.max(c[1]+c[2],0),duration:n,options:c[4]}
if(a.o1-a.o0<=0){continue}if(s){a.o1=Math.min(a.o1,s[1])}var u=a.o0-e.o1
a.t0=e.t1+u
a.t1=a.t0+(a.duration||0)
this._ranges.push(a)
e=a}return this._ranges}
u.prototype.timeToOffset=function(t){this.compute()
var e=0,i=this._ranges.length,n=null
if(i==0){return t}while(e<i){n=this._ranges[e++]
if(t<n.t0){return n.o0-(n.t0-t)}else if(t<n.t1){return n.o0+(n.o1-n.o0)*((t-n.t0)/(n.t1-n.t0))}}return n.o1+(t-n.t1)}
u.prototype.offsetToTime=function(t){this.compute()
var e=0,i=this._ranges.length,n=null
if(i==0){return t}while(e<i){n=this._ranges[e++]
if(t<n.o0){return n.t0-(n.o0-t)}else if(t<n.o1){return n.t0+(n.t1-n.t0)*((t-n.o0)/(n.o1-n.o0))}}return n.t1+(t-n.o1)}
u.prototype.duration=function(){return this.offsetToTime(this._data.end||this.lastAudioMarkerOffset())-this.offsetToTime(this._data.start||0)}
u.prototype.endOffset=function(){return this._data.end||this.lastAudioMarkerOffset()}
u.prototype.compileFunction=function(t){if(t===undefined)t=false
var e="return EXPR"
var i="( v<o0 ? (t0-(o0-v)) : (v<o1? t0 + (t1-t0)*((v-o0)/(o1-o0)) : EXPR ) )"
var r="(t1+(v-o1))"
var o=function(e,i){return e.replace(/([ot]\d)/g,function(e,n){if(t){if(n[0]=="t"){n="o"+n[1]}else{n="t"+n[1]}}return i[n]})}
var s=null
for(let t=0,r=n(this._ranges),a=r.length,u;t<a;t++){u=r[t]
s=u
e=e.replace("EXPR",o(i,u))}e=e.replace("EXPR",o(r,s))
return new Function("v",e)}
u.prototype.audioclips=function(t,e,i){if(t===undefined)t=0
if(e===undefined)e=0
if(i===undefined)i=false
return this.sliceClips(this.audio(),t,e,i)}
u.prototype.sliceClips=function(t,e,i,r){if(e===undefined)e=0
if(i===undefined)i=0
if(r===undefined)r=false
this.compute()
var o=[]
for(let e=0,i=n(t),r=i.length,a;e<r;e++){a=i[e]
let n=t[e+1]
let r=a[1]
let u=a[2]
if(n&&r+u>n[1]){u=n[1]-r}var s={source:a,skip:0,fid:a[3],o0:r,o1:r+u,t0:this.offsetToTime(r),t1:this.offsetToTime(r+u)}
s.duration=s.o1-s.o0
if(u){o.push(s)}}var a=[]
var u
var c=0
var p=0
s
while(s=o[p++]){var l=s.t0
var h=s.t1
for(let t=0,e=n(this._ranges),i=e.length,a;t<i;t++){a=e[t]
let i=a.t0
let n=a.t1
let u=a.duration>0&&a.options instanceof Array
if(i>h||l>n){continue}if(l>=i&&n>=h){s.disabled=a
break}if(a.o0>s.o0){if(r||u){let t={cue:a,source:s.source,fid:s.fid,o0:a.o0,t0:a.t0,o1:Math.min(s.o1,a.o1),t1:Math.min(s.t1,a.t1),skip:s.skip+(a.o0-s.o0)}
if(u){t.realSkip=t.skip
t.skip+=a.options[0]-a.o0}o.splice(p++,0,t)}if(a.o1<s.o1){let t={source:s.source,fid:s.fid,o0:a.o1,t0:a.t1,o1:s.o1,t1:s.t1,skip:s.skip+(a.o1-s.o0)}
o.splice(p,0,t)}s.o1=a.o0
s.t1=a.t0
break}else if(a.o1>s.o0){if(r){let t={cue:a,source:s.source,fid:s.fid,o0:s.o0,t0:s.t0,o1:Math.min(s.o1,a.o1),t1:Math.min(s.t1,a.t1),skip:s.skip}
if(u){console.log("special gap will be wrong")
t.skip+=a.options[0]-a.o0}o.splice(p++,0,t)}s.skip=s.skip+(a.o1-s.o0)
s.t0=a.t1
s.o0=a.o1}}}o.map(function(t){return t.duration=t.t1-t.t0})
if(r){o=o.sort(function(t,e){return t.o0-e.o0})}else{o=o.filter(function(t){return!t.disabled})
o=o.sort(function(t,e){return t.t0-e.t0})}if(i){var d=this.offsetToTime(i)
for(let t=0,e=n(o),i=e.length,r;t<i;t++){r=e[t]
if(r.t0>d){r.outOfBounds=true}if(r.t1>d){r.t1=d}}}if(e){let t=this.offsetToTime(e)
for(let e=0,i=n(o),r=i.length,s;e<r;e++){s=i[e]
s.t0-=t
s.t1-=t
if(s.t0<0){s.skip+=Math.abs(s.t0)
s.t0=0}}}if(!r){o=o.filter(function(t){return t.t1>0&&!t.outOfBounds&&t.t1-t.t0>0})}return o}},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("Notification",function(t){var e
t.prototype.text=function(t){return this._text}
t.prototype.setText=function(t){this._text=t
return this}
t.prototype.sticky=function(t){return this._sticky}
t.prototype.setSticky=function(t){this._sticky=t
return this}
t.show=function(t,i){if(i===undefined)i={}
if(e){e.hide()
e=null}let s=t instanceof o?t:r(o).setData(i).setText(t).setSticky(i.sticky).end()
return n.mount(e=s)}
t.prototype.setup=function(){this._data||(this._data={})
this.render()
return this.autosize()}
t.prototype.mount=function(){var t=this
t.dom().offsetWidth
t.flag("show")
if(!t.sticky()){return setTimeout(function(){return t.hide()},t.data().duration||2e3)}}
t.prototype.autosize=function(){var t
let e=this.dom().innerText
let i=e.split("\n")
let n=Math.max.apply(Math,i.map(function(t){return t.length}))
let r=window.innerWidth*.8
let o=r/(n*.6)
let s=Math.round(Math.min(Math.max(o,15),30))
this.css("fontSize",s+"px")
this.flag("overflows",o<15)
return this}
t.prototype.hide=function(){var t=this
if(t.hasFlag("hide")){return}t.flag("hide")
return setTimeout(function(){t.orphanize()
if(e==t){return e=null}},3e3)}
t.prototype.ontap=function(){return this.hide()}
t.prototype.render=function(){var t=this.$
return this.$open(0).flagIf("info",this.data().info).setFlag(-1,this.data().type).setFlag(-2,this.data().size).setChildren(t[0]||r("div",t,0,this).flag("main").setContent([r("div",t,1,0).flag("triangle"),r("div",t,2,0).flag("item")],2),2).synced((t[2].setNestedAttr("uxa","md",this.text()).end(),true))}})
e.Notification=o},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField,u=o.TextArea,c=o.Button
var p=i(23).Select
var l=i(25).PrivacyField
n.extendTag("iframe",function(t){t.prototype.allowfullscreen=function(t){return this.getAttribute("allowfullscreen")}
t.prototype.setAllowfullscreen=function(t){this.setAttribute("allowfullscreen",t)
return this}})
var h=n.defineTag("EmbedTextarea","textarea",function(t){t.prototype.castId=function(){return this.data()}
t.prototype.url=function(){return"https://scrimba.com/cast/"+this.castId()+".embed"}
t.prototype.embedHTML=function(){var t,e
return this._embedHTML||(this._embedHTML=true&&(e=(t=(t=r("div")).css("position","relative").setContent(t.$.A||r("iframe",t.$,"A",t).css("border",0).css("position","absolute").css("width","100%").css("height","100%").setAllowfullscreen(true),2)).css("paddingBottom",""+9/16*100+"%").end((t.$.A.setSrc(this.url()).end(),true)),e.dom().outerHTML))}
t.prototype.ontap=function(){return this.dom().select()}
t.prototype.render=function(){this.css("font-family","monospace")
this.setValue(this.embedHTML())
return this.setAttribute("readonly",true)}})
var d=n.defineTag("CastDialog",s,function(t){t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r(a,e.$,"A",e).setType("text").setName("title").setLabel("Title").setRequired(true).setPlaceholder("Untitled cast").setAutocomplete("off"),r(u,e.$,"B",e).flag("mb-md").setName("description").setLabel("Description").setDesc("Short description (markdown supported)"),r(l,e.$,"C",e)],2)).end((e.$.A.end(),e.$.B.end(),e.$.C.bindData(this,"data",[]).end(),true))}
t.prototype.onuxasubmit=function(t){var e=this
return e.uxa().queue().add(200,async function(){var t=e.formData()
e.log("onsubmit",t)
return await e.api().db().get(e.data().id).update(t)})}})
e.CastDialog=d},function(t,e,i){var n=i(0),r=n.createTagCache,o=n.createElement
var s=i(14).Format
var a=function(t,e,i,n){if(n===undefined)n={}
if(t.indexOf("<span")>=0){return t}if(i){t=t.split("\n").slice(0,i)
t=t.map(function(t){let e=t.indexOf("<")
let i=t.lastIndexOf("<")
let n=t.indexOf(">")
if(t.length>80){if(e==-1){return t.slice(0,80)}if(e==i&&e==0&&n==t.length-1){return t.slice(0,70)+">"}if(t.length>300){return t.replace(/(<.|>)/g,"").slice(0,80)}}return t})
t=t.join("\n")}var r=0
var o=1
var s=" "
if(n.plain){return"    "+t.replace(/(<.|>)/g,"").replace(/\n/g,"\n    ")}t=t.replace(/(<.|>|\n)/g,function(t){if(t[0]=="<"){r++
var i=t.charCodeAt(1)-64
var a=e.hl[i]
return"<span class='tok-"+a+"'>"}else if(t[0]==">"){r--
return"</span>"}else if(t[0]=="\n"){o++
if(o==10){s=""}if(n.lineNumbers){return"\n<i>"+s+o+"</i>  "}else{return"\n"}}})
while(r>0){r--
t=t+"</span>"}if(n.lineNumbers){t="<i> 1</i>  "+t}return t}
var u=n.defineTag("CastPreview",function(t){t.prototype.model=function(t){return this._model}
t.prototype.setModel=function(t){this._model=t
return this}
t.prototype.type=function(t){return this._type}
t.prototype.setType=function(t){this._type=t
return this}
t.prototype.__data={watch:"draw",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.draw&&this.draw(t,e,this.__data)}return this}
t.prototype.__progress={watch:"progressDidSet",name:"progress"}
t.prototype.progress=function(t){return this._progress}
t.prototype.setProgress=function(t){var e=this.progress()
if(t!=e){this._progress=t}if(t!=e){this.progressDidSet&&this.progressDidSet(t,e,this.__progress)}return this}
t.prototype.__maxlines={default:14,name:"maxlines"}
t.prototype.maxlines=function(t){return this._maxlines}
t.prototype.setMaxlines=function(t){this._maxlines=t
return this}
t.prototype._maxlines=14
t.prototype.progressBar=function(){let t=this.$$||(this.$$={})
return this._progressBar=this._progressBar||o("div",this).flag("progressBar")}
t.prototype.progressDidSet=function(t){let e=parseInt(Math.min(1,Math.max(0,t||0))*100)
return this.progressBar().css("width",e+"%")}
t.prototype.draw=function(){var t=($_=this.$).$draw$||($_.$draw$=r(this)),e=this
if(!(e.data()&&e.data().preview&&true)){return}if(e._drawTimeout){clearTimeout(e._drawTimeout)}let i=e.data().type
let n=e.data().preview.npm||[]
let s=e.data().preview.files
let u=s.filter(function(t){return t[2]})[0]
var c=n.map(function(t){return t.split("@")[0]})
var p=function(t){return"label-"+t.toLowerCase().replace(/[^A-Za-z\-\_\d]/g,"")}
e.$open("draw0").setFlag(-1,e.data().privacy).setChildren([e.progress()?(t[0]||o("div",t,0,e).flag("progress")).setContent(e.progressBar(),3):void 0,e._code=e._code||o("pre",e).flag("code")],1).synced()
if(false){}if(!(u&&true)){return e}return e._drawTimeout=setTimeout(function(){var t=a(u[1],e.data().preview,e.maxlines())
return e._code.dom().innerHTML=t},0)}})
e.CastPreview=u},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(1),p=c.IconButton,l=c.Menu,h=c.MenuItem,d=c.Actionable
var f=i(16).Carousel
var m=i(13),y=m.CastTile,g=m.CastListItem
var v=o.defineTag("CollectionSection",function(t){t.prototype.__layout={default:"tiles",name:"layout"}
t.prototype.layout=function(t){return this._layout}
t.prototype.setLayout=function(t){this._layout=t
return this}
t.prototype._layout="tiles"
t.prototype.__title={default:"Section",name:"title"}
t.prototype.title=function(t){return this._title}
t.prototype.setTitle=function(t){this._title=t
return this}
t.prototype._title="Section"
t.prototype.items=function(t){return this._items}
t.prototype.setItems=function(t){this._items=t
return this}
t.prototype.__limit={default:200,name:"limit"}
t.prototype.limit=function(t){return this._limit}
t.prototype.setLimit=function(t){this._limit=t
return this}
t.prototype._limit=200
t.prototype.__size={default:"sm",name:"size"}
t.prototype.size=function(t){return this._size}
t.prototype.setSize=function(t){this._size=t
return this}
t.prototype._size="sm"
t.prototype.renderer=function(t,e){let i,n=this.$$||(this.$$={}),r
return(n[r="key$"+e]||u(y,n,r,this).flag("dark")).setData(t).setContext(this.data()).end()}
t.prototype.onshowoptions=function(t){var e
return t.uxa().open((e=(e=u(l)).setContent([u(h,e.$,"A",e).setAction(["sort","title"]).setLabel("Alphabetical"),u(h,e.$,"B",e).setAction(["sort","-created_at"]).setLabel("Newest"),u(h,e.$,"C",e).setAction(["sort","created_at"]).setLabel("Oldest")],2)).end((e.$.A.end(),e.$.B.end(),e.$.C.end(),true)))}
t.prototype.onsort=function(t,e){console.log("onsort",t,e)
var i=e[0]
this.items().setSorter(i)
t.halt()
return this}
t.prototype.header=function(){let t=this.$$||(this.$$={}),e
return(e=this._header=this._header||(e=u("header",this)).flag("header").flag("flat").setContent([u("div",e.$,"A",e).flag("actions").setContent(e.$.B||u(p,e.$,"B","A").setAction("showoptions").setIcon("."),2),u("span",e.$,"C",e).flag("heading")],2)).end((e.$.B.end(),e.$.C.setNestedAttr("uxa","md",this.title()).end(),true))}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).flag("Section").setFlag(-1,e.data()&&e.data().id).setChildren([e.header(),e.layout()=="tiles"?(t[0]||u(f,t,0,e).flag("dense")).bindData(e,"items",[]).setFlag(0,e.size()).setRenderer(y.Renderer).end():e.layout()=="list"?(t[1]||u("div",t,1,e).flag("List")).setContent(function t(i){var n=i.$iter()
for(let t=0,o=r(e.items()),s=o.length;t<s;t++){if(t>=e.limit()){continue}n.push((i[t]||u(g,i,t)).setData(o[t]).end())}return n}(t[2]||a(t,2,t[1])),5):void 0,n(e.items())>e.limit()?(t[3]||u("footer",t,3,e).flag("footer").flag("flat").setContent(t[4]||u(d,t,4,3).flag("h3").setAction("collectionlist").setText("show all"),2)).end((t[4].bindData(e,"items",[]).end(),true)):void 0],1).synced()}})
e.CollectionSection=v},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField,u=o.TextArea,c=o.Button
var p=n.defineTag("GroupJoinDialog",s,function(t){t.prototype.cast=function(t){return this._cast}
t.prototype.setCast=function(t){this._cast=t
return this}
t.prototype.__dismissable={default:true,name:"dismissable"}
t.prototype.dismissable=function(t){return this._dismissable}
t.prototype.setDismissable=function(t){this._dismissable=t
return this}
t.prototype._dismissable=true
t.prototype.submitLabel=function(){return this.isBootcamp()?"Visit course page to buy":"Enroll for free"}
t.prototype.isBootcamp=function(){return this.data().type=="bootcamp"}
t.prototype.price=function(){if(this.data().style){if(this.data().style.discount_price){return this.data().style.discount_price}return this.data().style.price}}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent(this.cast()?this.isBootcamp()?(e.$.A||r("p",e.$,"A",e)).setText('To watch this tutorial you need to purchase the "'+this.data().title+'" from the course page ($'+this.price()+")."):(e.$.B||r("p",e.$,"B",e)).setText('To watch this tutorial you need to enroll in the "'+this.data().title+'" course.'):(e.$.C||r("p",e.$,"C",e)).setText('Are you sure you want to enroll in the "'+this.data().title+'" course?'),3)}
t.prototype.footer=function(){let t=this.$$||(this.$$={}),e
return(e=this._footer=this._footer||(e=r("footer",this)).flag("footer").flag("flat")).setContent([this.dismissable()?(e.$.A||r(c,e.$,"A",e).setType("button").on$(0,["tap","tapDismiss"],this)).setLabel(this.cancelLabel()).end():void 0,(e.$.B||r(c,e.$,"B",e).flag("primary").setType("submit")).setLabel(this.submitLabel()).end()],1)}
t.prototype.onuxahide=function(t){if(!this.dismissable()&&this.data()&&!this.data().membership(this.api().uid())){return t.halt().cancel()}}
t.prototype.onuxasubmit=function(t){var e=this
t.stopPropagation()
if(e.isBootcamp()){return e.uxa().queue().add(200,function(){return window.location.href="https://scrimba.com/g/"+e.data().id})}else{return e.uxa().queue().add(200,function(){return new Promise(async function(t,i){var n=await e.api().tryLogin()
if(!e.api().user()){return i("Not logged in")}return e.api().rpc("groupJoin",[e.data().id,e.formData()],{models:true}).then(function(r){if(r){e.api().analytics().courseEnrolled(e.data().id)}return r?t(n):i("Could not enroll")})})})}}})
e.GroupJoinDialog=p},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(1).IconButton
var p=i(16).Carousel
var l=i(14).Format
var h=i(13),d=h.CastTile,f=h.CastListItem
var m=i(1).Button
var y=o.defineTag("PlaylistSection",function(t){t.prototype.__limit={default:6,name:"limit"}
t.prototype.limit=function(t){return this._limit}
t.prototype.setLimit=function(t){this._limit=t
return this}
t.prototype._limit=6
t.prototype.__showTime={default:true,name:"showTime"}
t.prototype.showTime=function(t){return this._showTime}
t.prototype.setShowTime=function(t){this._showTime=t
return this}
t.prototype._showTime=true
t.prototype.layout=function(t){return this._layout}
t.prototype.setLayout=function(t){this._layout=t
return this}
t.prototype.__pinCount={default:0,name:"pinCount"}
t.prototype.pinCount=function(t){return this._pinCount}
t.prototype.setPinCount=function(t){this._pinCount=t
return this}
t.prototype._pinCount=0
t.prototype.__size={default:"sm",name:"size"}
t.prototype.size=function(t){return this._size}
t.prototype.setSize=function(t){this._size=t
return this}
t.prototype._size="sm"
t.prototype.__expanded={default:false,name:"expanded"}
t.prototype.expanded=function(t){return this._expanded}
t.prototype.setExpanded=function(t){this._expanded=t
return this}
t.prototype._expanded=false
t.prototype.membership=function(t){return this._membership}
t.prototype.setMembership=function(t){this._membership=t
return this}
t.prototype.renderer=function(t,e,i){let n,r=this.$$||(this.$$={}),o
return(r[o="key$"+e]||u(d,r,o,this)).setData(t).setContext(i).end()}
t.prototype.mount=function(){return this}
t.prototype.unmount=function(){this.setLimit(6)
this.setExpanded(false)
return this}
t.prototype.length=function(){var t=0
for(let e=0,i=r(this.data().items()),n=i.length;e<n;e++){t+=i[e].duration}return t}
t.prototype.hasPreview=function(){for(let t=0,e=r(this.data().items()),i=e.length,n;t<i;t++){n=e[t]
if(n.privacy=="public"){return true}}return false}
t.prototype.onexpandlimit=function(){var t
return this.setLimit(t=n(this.data().items())),t}
t.prototype.toggle=function(){var t
return this.setExpanded(t=!this.expanded()),t}
t.prototype.render=function(){var t=this.$,e=this
var i={playlist:e.data()}
return e.$open(0).flag("Section").setFlag(-1,e.data().id).setFlag(-2,e.layout()).setChildren([(t[0]||u("header",t,0,e).flag("header").on$(0,["click","toggle"],e)).setFlag(0,e.layout()).setContent([e.data().can(e.api().user(),"edit")&&e.layout()!="list"?(t[1]||u("div",t,1,0).flag("actions").setContent(t[2]||u(c,t,2,1).setAction("playlistmenu").setIcon("."),2)).end((t[2].end(),true)):void 0,e.layout()=="list"?o.static([(t[3]||u("span",t,3,0).flag("plus").flag("muted").dataset("icon","madd")).end(),(t[4]||u("span",t,4,0).flag("text").flag("title")).setContent(e.data().title,3),!e.expanded()?o.static([e.hasPreview()&&!e.membership()?t[5]||u("span",t,5,0).flag("preview").setText("Watch preview"):void 0,(t[6]||u("span",t,6,0).flag("c1").flag("muted").flag("lessons")).setText(""+n(e.data().items())+" lessons")],1,1):void 0,(t[7]||u("span",t,7,0).flag("c1").flag("muted").flag("duration")).setContent(l.duration(e.length()),3)],1,2):e.layout()=="singleList"?t[8]||u("h2",t,8,0).setText("Course content"):(t[9]||u("h2",t,9,0).flag("title").setContent(t[10]||u("a",t,10,9),2)).end((t[10].setHref("/playlist/"+e.data().id).setContent(e.data().title,3).end(),true))],1),e.layout()=="list"?(t[11]||u("div",t,11,e).flag("List")).setContent(e.expanded()?function t(i){for(let t=0,n=r(e.data().items()),o=i.taglen=n.length;t<o;t++){(i[t]||u(f,i,t)).setData(n[t]).setShowTime(e.showTime()).setNumber(t+1).setContext(e.data()).setMembership(e.membership()).end()}return i}(t[12]||s(t,12,t[11])):void 0,3):e.layout()=="singleList"?o.static([function t(i){var n=i.$iter()
for(let t=0,o=r(e.data().items()),s=o.length;t<s;t++){if(t>=e.limit()){continue}n.push((i[t]||u(f,i,t).setMembership(true)).setData(o[t]).setShowTime(e.showTime()).setNumber(t+1).setContext(e.data()).end())}return n}(t[13]||a(t,13)),e.limit()<n(e.data().items())?(t[14]||u("div",t,14,e).flag("expandButton").setContent(t[15]||u(m,t,15,14).flag("uxa").flag("flat").setNestedAttr("uxa","action","expandlimit"),2)).end((t[15].setLabel("Expand to see all "+n(e.data().items())+" lessons").end(),true)):void 0],1,3):(t[16]||u(p,t,16,e).flag("dense")).bindData(e.data(),"items",[]).setFlag(0,e.size()).setRenderer(e.renderer).setContext(e.data()).end()],1).synced()}})
e.PlaylistSection=y},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
function o(){}o.prototype.setItem=function(t,e){return this[t]=e}
o.prototype.getItem=function(t){return this[t]}
o.prototype.removeItem=function(t){var e
return e=this[t],delete this[t],e}
if(false){}function s(t,e){this._prefix=t||""
if(e=="temporary"){e=new o}else{e||(e=localStorage)}this._store=e
this}e.StoreWrapper=s
s.prototype.clear=function(){if(!this._prefix){return this._store.clear()}for(let t=0,e=n(Object.keys(this._store)),i=e.length,r;t<i;t++){r=e[t]
if(r.startsWith(this._prefix)){this._store.removeItem(r)}}return this}
s.prototype.set=function(t,e){if(this._store){var i=this._prefix+this.serializeKey(t)
var n=this.serialize(e)
try{this._store.setItem(i,n)}catch(t){}}return e}
s.prototype.get=function(t){var e=this._store?this._store.getItem(this._prefix+this.serializeKey(t)):null
return e}
s.prototype.setnx=function(t,e){var i=this.get(t)
if(!i){this.set(t,e)}return i||e}
s.prototype.getnum=function(t){return parseFloat(this.get(t)||0)}
s.prototype.getobj=function(t,e){if(e===undefined)e=null
let i=JSON.parse(this.get(t)||"null")
return i==null?e:i}
s.prototype.setobj=function(t,e){return this.set(t,JSON.stringify(e))}
s.prototype.del=function(t){return this._store?this._store.removeItem(this._prefix+this.serializeKey(t)):null}
s.prototype.inc=function(t,e){if(e===undefined)e=1
let i=this.getnum(t)+e
this.set(t,i)
return i}
s.prototype.serializeKey=function(t){return typeof t=="object"?JSON.stringify(t):t}
s.prototype.serialize=function(t){var e=typeof t=="object"?JSON.stringify(t):t
return e}
s.prototype.deserialize=function(t){return t}
function a(){return s.apply(this,arguments)}r.subclass(a,s)
e.LocalStore=a
function u(t,e){this._prefix=t||""
try{this._store=e||sessionStorage}catch(t){}this}r.subclass(u,s)
e.SessionStore=u},function(t,e){var i={}
e.readTextFile=i.readTextFile=function(t){return new Promise(function(e,i){var n=new FileReader
n.onload=function(t){return e(t.target.result)}
return n.readAsText(t)})}
e.readArrayBuffer=i.readArrayBuffer=function(t){return new Promise(function(e,i){var n=new FileReader
n.onload=function(t){return e(t.target.result)}
return n.readAsArrayBuffer(t)})}
e.readFileSystemEntry=i.readFileSystemEntry=function(t){return new Promise(function(e,i){return t.file(e,i)})}},function(t,e,i){var n=i(0),r=n.createElement
var o=i(35).Icon
var s=n.defineTag("Button","button",function(t){t.prototype.action=function(t){return this._action}
t.prototype.setAction=function(t){this._action=t
return this}
t.prototype.icon=function(t){return this._icon}
t.prototype.setIcon=function(t){this._icon=t
return this}
t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.href=function(t){return this._href}
t.prototype.setHref=function(t){this._href=t
return this}
t.prototype.uxaAnchor=function(t){return this._uxaAnchor}
t.prototype.setUxaAnchor=function(t){this._uxaAnchor=t
return this}
t.prototype.build=function(){return this.dom().setAttribute("type","button")}
t.prototype.contextData=function(){var t=null
var e=this
while(e){if(t=e.data()){return t}e=e.parent()}return null}
t.prototype.ontap=function(t){var e=this.action()
if(e){this.trigger("uxa:action",e)}if(typeof e=="string"||e instanceof String){t.halt().silence()
this.trigger(e,this.contextData())}else if(e instanceof Array){t.halt().silence()
this.trigger(e[0],e.slice(1))}else{t._responder=null}return this}
t.prototype.ontouchstart=function(t){return this.flag("_touch")}
t.prototype.ontouchend=function(){return this.unflag("_touch")}
t.prototype.ontouchcancel=function(){return this.unflag("_touch")}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("uxa").setChildren([this.icon()?(t[0]||r(o,t,0,this)).bindData(this,"icon",[]).end():void 0,this.label()?this.href()?(t[1]||r("b",t,1,this).setContent(t[2]||r("a",t,2,1),2)).end((t[2].setHref(this.href()).setNestedAttr("uxa","md",this.label()).end(),true)):(t[3]||r("b",t,3,this)).setNestedAttr("uxa","md",this.label()).end():void 0],1).synced()}})
e.Button=s
var a=n.defineTag("IconButton",s)
e.IconButton=a},function(t,e,i){(function(t){var i,n,r,o
!function(e){var s="undefined"
var a=s!==typeof t&&t
var u=s!==typeof Uint8Array&&Uint8Array
var c=s!==typeof ArrayBuffer&&ArrayBuffer
var p=[0,0,0,0,0,0,0,0]
var l=Array.isArray||A
var h=4294967296
var d=16777216
var f
i=m("Uint64BE",true,true)
n=m("Int64BE",true,false)
r=m("Uint64LE",false,true)
o=m("Int64LE",false,false)
function m(t,i,n){var r=i?0:4
var o=i?4:0
var l=i?0:3
var m=i?1:2
var A=i?2:1
var C=i?3:0
var E=i?w:S
var D=i?T:k
var P=O.prototype
var $="is"+t
var L="_"+$
P.buffer=void 0
P.offset=0
P[L]=true
P.toNumber=N
P.toString=F
P.toJSON=N
P.toArray=y
if(a)P.toBuffer=g
if(u)P.toArrayBuffer=v
O[$]=M
e[t]=O
return O
function O(t,e,i,n){if(!(this instanceof O))return new O(t,e,i,n)
return I(this,t,e,i,n)}function M(t){return!!(t&&t[L])}function I(t,e,i,n,a){if(u&&c){if(e instanceof c)e=new u(e)
if(n instanceof c)n=new u(n)}if(!e&&!i&&!n&&!f){t.buffer=x(p,0)
return}if(!_(e,i)){var l=f||Array
a=i
n=e
i=0
e=new l(8)}t.buffer=e
t.offset=i|=0
if(s===typeof n)return
if("string"===typeof n){R(e,i,n,a||10)}else if(_(n,a)){b(e,i,n,a)}else if("number"===typeof a){B(e,i+r,n)
B(e,i+o,a)}else if(n>0){E(e,i,n)}else if(n<0){D(e,i,n)}else{b(e,i,p,0)}}function R(t,e,i,n){var s=0
var a=i.length
var u=0
var c=0
if(i[0]==="-")s++
var p=s
while(s<a){var l=parseInt(i[s++],n)
if(!(l>=0))break
c=c*n+l
u=u*n+Math.floor(c/h)
c%=h}if(p){u=~u
if(c){c=h-c}else{u++}}B(t,e+r,u)
B(t,e+o,c)}function N(){var t=this.buffer
var e=this.offset
var i=z(t,e+r)
var s=z(t,e+o)
if(!n)i|=0
return i?i*h+s:s}function F(t){var e=this.buffer
var i=this.offset
var s=z(e,i+r)
var a=z(e,i+o)
var u=""
var c=!n&&s&2147483648
if(c){s=~s
a=h-a}t=t||10
while(1){var p=s%t*h+a
s=Math.floor(s/t)
a=Math.floor(p/t)
u=(p%t).toString(t)+u
if(!s&&!a)break}if(c){u="-"+u}return u}function B(t,e,i){t[e+C]=i&255
i=i>>8
t[e+A]=i&255
i=i>>8
t[e+m]=i&255
i=i>>8
t[e+l]=i&255}function z(t,e){return t[e+l]*d+(t[e+m]<<16)+(t[e+A]<<8)+t[e+C]}}function y(t){var e=this.buffer
var i=this.offset
f=null
if(t!==false&&i===0&&e.length===8&&l(e))return e
return x(e,i)}function g(e){var i=this.buffer
var n=this.offset
f=a
if(e!==false&&n===0&&i.length===8&&t.isBuffer(i))return i
var r=new a(8)
b(r,0,i,n)
return r}function v(t){var e=this.buffer
var i=this.offset
var n=e.buffer
f=u
if(t!==false&&i===0&&n instanceof c&&n.byteLength===8)return n
var r=new u(8)
b(r,0,e,i)
return r.buffer}function _(t,e){var i=t&&t.length
e|=0
return i&&e+8<=i&&"string"!==typeof t[e]}function b(t,e,i,n){e|=0
n|=0
for(var r=0;r<8;r++){t[e++]=i[n++]&255}}function x(t,e){return Array.prototype.slice.call(t,e,e+8)}function w(t,e,i){var n=e+8
while(n>e){t[--n]=i&255
i/=256}}function T(t,e,i){var n=e+8
i++
while(n>e){t[--n]=-i&255^255
i/=256}}function S(t,e,i){var n=e+8
while(e<n){t[e++]=i&255
i/=256}}function k(t,e,i){var n=e+8
i++
while(e<n){t[e++]=-i&255^255
i/=256}}function A(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)}}(typeof e==="object"&&typeof e.nodeName!=="string"?e:this||{})}).call(e,i(65).Buffer)},function(t,e,i){(function(e){(function(){var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:p,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:p,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:p,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/}
e.bullet=/(?:[*+-]|\d+\.)/
e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/
e.item=c(e.item,"gm")(/bull/g,e.bullet)()
e.list=c(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")()
e.blockquote=c(e.blockquote)("def",e.def)()
e._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b"
e.html=c(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)()
e.paragraph=c(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)()
e.normal=l({},e)
e.gfm=l({},e.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/})
e.gfm.paragraph=c(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")()
e.tables=l({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})
function i(t){this.tokens=[]
this.tokens.links={}
this.options=t||h.defaults
this.rules=e.normal
if(this.options.gfm){if(this.options.tables){this.rules=e.tables}else{this.rules=e.gfm}}}i.rules=e
i.lex=function(t,e){var n=new i(e)
return n.lex(t)}
i.prototype.lex=function(t){t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n")
return this.token(t,true)}
i.prototype.token=function(t,i,n){var t=t.replace(/^ +$/gm,""),r,o,s,a,u,c,p,l,h
while(t){if(s=this.rules.newline.exec(t)){t=t.substring(s[0].length)
if(s[0].length>1){this.tokens.push({type:"space"})}}if(s=this.rules.code.exec(t)){t=t.substring(s[0].length)
s=s[0].replace(/^ {4}/gm,"")
this.tokens.push({type:"code",text:!this.options.pedantic?s.replace(/\n+$/,""):s})
continue}if(s=this.rules.fences.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:"code",lang:s[2],text:s[3]||""})
continue}if(s=this.rules.heading.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:"heading",depth:s[1].length,text:s[2]})
continue}if(i&&(s=this.rules.nptable.exec(t))){t=t.substring(s[0].length)
c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")}
for(l=0;l<c.align.length;l++){if(/^ *-+: *$/.test(c.align[l])){c.align[l]="right"}else if(/^ *:-+: *$/.test(c.align[l])){c.align[l]="center"}else if(/^ *:-+ *$/.test(c.align[l])){c.align[l]="left"}else{c.align[l]=null}}for(l=0;l<c.cells.length;l++){c.cells[l]=c.cells[l].split(/ *\| */)}this.tokens.push(c)
continue}if(s=this.rules.lheading.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:"heading",depth:s[2]==="="?1:2,text:s[1]})
continue}if(s=this.rules.hr.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:"hr"})
continue}if(s=this.rules.blockquote.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:"blockquote_start"})
s=s[0].replace(/^ *> ?/gm,"")
this.token(s,i,true)
this.tokens.push({type:"blockquote_end"})
continue}if(s=this.rules.list.exec(t)){t=t.substring(s[0].length)
a=s[2]
this.tokens.push({type:"list_start",ordered:a.length>1})
s=s[0].match(this.rules.item)
r=false
h=s.length
l=0
for(;l<h;l++){c=s[l]
p=c.length
c=c.replace(/^ *([*+-]|\d+\.) +/,"")
if(~c.indexOf("\n ")){p-=c.length
c=!this.options.pedantic?c.replace(new RegExp("^ {1,"+p+"}","gm"),""):c.replace(/^ {1,4}/gm,"")}if(this.options.smartLists&&l!==h-1){u=e.bullet.exec(s[l+1])[0]
if(a!==u&&!(a.length>1&&u.length>1)){t=s.slice(l+1).join("\n")+t
l=h-1}}o=r||/\n\n(?!\s*$)/.test(c)
if(l!==h-1){r=c.charAt(c.length-1)==="\n"
if(!o)o=r}this.tokens.push({type:o?"loose_item_start":"list_item_start"})
this.token(c,false,n)
this.tokens.push({type:"list_item_end"})}this.tokens.push({type:"list_end"})
continue}if(s=this.rules.html.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]})
continue}if(!n&&i&&(s=this.rules.def.exec(t))){t=t.substring(s[0].length)
this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]}
continue}if(i&&(s=this.rules.table.exec(t))){t=t.substring(s[0].length)
c={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")}
for(l=0;l<c.align.length;l++){if(/^ *-+: *$/.test(c.align[l])){c.align[l]="right"}else if(/^ *:-+: *$/.test(c.align[l])){c.align[l]="center"}else if(/^ *:-+ *$/.test(c.align[l])){c.align[l]="left"}else{c.align[l]=null}}for(l=0;l<c.cells.length;l++){c.cells[l]=c.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this.tokens.push(c)
continue}if(i&&(s=this.rules.paragraph.exec(t))){t=t.substring(s[0].length)
this.tokens.push({type:"paragraph",text:s[1].charAt(s[1].length-1)==="\n"?s[1].slice(0,-1):s[1]})
continue}if(s=this.rules.text.exec(t)){t=t.substring(s[0].length)
this.tokens.push({type:"text",text:s[0]})
continue}if(t){throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}}return this.tokens}
var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:p,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:p,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/}
n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/
n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/
n.link=c(n.link)("inside",n._inside)("href",n._href)()
n.reflink=c(n.reflink)("inside",n._inside)()
n.normal=l({},n)
n.pedantic=l({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})
n.gfm=l({},n.normal,{escape:c(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(n.text)("]|","~]|")("|","|https?://|")()})
n.breaks=l({},n.gfm,{br:c(n.br)("{2,}","*")(),text:c(n.gfm.text)("{2,}","*")()})
function r(t,e){this.options=e||h.defaults
this.links=t
this.rules=n.normal
this.renderer=this.options.renderer||new o
this.renderer.options=this.options
if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=n.breaks}else{this.rules=n.gfm}}else if(this.options.pedantic){this.rules=n.pedantic}}r.rules=n
r.output=function(t,e,i){var n=new r(e,i)
return n.output(t)}
r.prototype.output=function(t){var e="",i,n,r,o
while(t){if(o=this.rules.escape.exec(t)){t=t.substring(o[0].length)
e+=o[1]
continue}if(o=this.rules.autolink.exec(t)){t=t.substring(o[0].length)
if(o[2]==="@"){n=o[1].charAt(6)===":"?this.mangle(o[1].substring(7)):this.mangle(o[1])
r=this.mangle("mailto:")+n}else{n=a(o[1])
r=n}e+=this.renderer.link(r,null,n)
continue}if(!this.inLink&&(o=this.rules.url.exec(t))){t=t.substring(o[0].length)
n=a(o[1])
r=n
e+=this.renderer.link(r,null,n)
continue}if(o=this.rules.tag.exec(t)){if(!this.inLink&&/^<a /i.test(o[0])){this.inLink=true}else if(this.inLink&&/^<\/a>/i.test(o[0])){this.inLink=false}t=t.substring(o[0].length)
e+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):a(o[0]):o[0]
continue}if(o=this.rules.link.exec(t)){t=t.substring(o[0].length)
this.inLink=true
e+=this.outputLink(o,{href:o[2],title:o[3]})
this.inLink=false
continue}if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){t=t.substring(o[0].length)
i=(o[2]||o[1]).replace(/\s+/g," ")
i=this.links[i.toLowerCase()]
if(!i||!i.href){e+=o[0].charAt(0)
t=o[0].substring(1)+t
continue}this.inLink=true
e+=this.outputLink(o,i)
this.inLink=false
continue}if(o=this.rules.strong.exec(t)){t=t.substring(o[0].length)
e+=this.renderer.strong(this.output(o[2]||o[1]))
continue}if(o=this.rules.em.exec(t)){t=t.substring(o[0].length)
e+=this.renderer.em(this.output(o[2]||o[1]))
continue}if(o=this.rules.code.exec(t)){t=t.substring(o[0].length)
e+=this.renderer.codespan(a(o[2],true))
continue}if(o=this.rules.br.exec(t)){t=t.substring(o[0].length)
e+=this.renderer.br()
continue}if(o=this.rules.del.exec(t)){t=t.substring(o[0].length)
e+=this.renderer.del(this.output(o[1]))
continue}if(o=this.rules.text.exec(t)){t=t.substring(o[0].length)
e+=this.renderer.text(a(this.smartypants(o[0])))
continue}if(t){throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}}return e}
r.prototype.outputLink=function(t,e){var i=a(e.href),n=e.title?a(e.title):null
return t[0].charAt(0)!=="!"?this.renderer.link(i,n,this.output(t[1])):this.renderer.image(i,n,a(t[1]))}
r.prototype.smartypants=function(t){if(!this.options.smartypants)return t
return t.replace(/---/g,"â").replace(/--/g,"â").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1â").replace(/'/g,"â").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1â").replace(/"/g,"â").replace(/\.{3}/g,"â¦")}
r.prototype.mangle=function(t){if(!this.options.mangle)return t
var e="",i=t.length,n=0,r
for(;n<i;n++){r=t.charCodeAt(n)
if(Math.random()>.5){r="x"+r.toString(16)}e+="&#"+r+";"}return e}
function o(t){this.options=t||{}}o.prototype.code=function(t,e,i){if(this.options.highlight){var n=this.options.highlight(t,e)
if(n!=null&&n!==t){i=true
t=n}}if(!e){return"<pre><code>"+(i?t:a(t,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+a(e,true)+'">'+(i?t:a(t,true))+"\n</code></pre>\n"}
o.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"}
o.prototype.html=function(t){return t}
o.prototype.heading=function(t,e,i){return"<h"+e+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"}
o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}
o.prototype.list=function(t,e){var i=e?"ol":"ul"
return"<"+i+">\n"+t+"</"+i+">\n"}
o.prototype.listitem=function(t){return"<li>"+t+"</li>\n"}
o.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"}
o.prototype.table=function(t,e){return"<table>\n"+"<thead>\n"+t+"</thead>\n"+"<tbody>\n"+e+"</tbody>\n"+"</table>\n"}
o.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"}
o.prototype.tablecell=function(t,e){var i=e.header?"th":"td"
var n=e.align?"<"+i+' style="text-align:'+e.align+'">':"<"+i+">"
return n+t+"</"+i+">\n"}
o.prototype.strong=function(t){return"<strong>"+t+"</strong>"}
o.prototype.em=function(t){return"<em>"+t+"</em>"}
o.prototype.codespan=function(t){return"<code>"+t+"</code>"}
o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"}
o.prototype.del=function(t){return"<del>"+t+"</del>"}
o.prototype.link=function(t,e,i){if(this.options.sanitize){try{var n=decodeURIComponent(u(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0){return""}}var r='<a href="'+t+'"'
if(e){r+=' title="'+e+'"'}r+=">"+i+"</a>"
return r}
o.prototype.image=function(t,e,i){var n='<img src="'+t+'" alt="'+i+'"'
if(e){n+=' title="'+e+'"'}n+=this.options.xhtml?"/>":">"
return n}
o.prototype.text=function(t){return t}
function s(t){this.tokens=[]
this.token=null
this.options=t||h.defaults
this.options.renderer=this.options.renderer||new o
this.renderer=this.options.renderer
this.renderer.options=this.options}s.parse=function(t,e,i){var n=new s(e,i)
return n.parse(t)}
s.prototype.parse=function(t){this.inline=new r(t.links,this.options,this.renderer)
this.tokens=t.reverse()
var e=""
while(this.next()){e+=this.tok()}return e}
s.prototype.next=function(){return this.token=this.tokens.pop()}
s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0}
s.prototype.parseText=function(){var t=this.token.text
while(this.peek().type==="text"){t+="\n"+this.next().text}return this.inline.output(t)}
s.prototype.tok=function(){switch(this.token.type){case"space":{return""}case"hr":{return this.renderer.hr()}case"heading":{return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text)}case"code":{return this.renderer.code(this.token.text,this.token.lang,this.token.escaped)}case"table":{var t="",e="",i,n,r,o,s
r=""
for(i=0;i<this.token.header.length;i++){o={header:true,align:this.token.align[i]}
r+=this.renderer.tablecell(this.inline.output(this.token.header[i]),{header:true,align:this.token.align[i]})}t+=this.renderer.tablerow(r)
for(i=0;i<this.token.cells.length;i++){n=this.token.cells[i]
r=""
for(s=0;s<n.length;s++){r+=this.renderer.tablecell(this.inline.output(n[s]),{header:false,align:this.token.align[s]})}e+=this.renderer.tablerow(r)}return this.renderer.table(t,e)}case"blockquote_start":{var e=""
while(this.next().type!=="blockquote_end"){e+=this.tok()}return this.renderer.blockquote(e)}case"list_start":{var e="",a=this.token.ordered
while(this.next().type!=="list_end"){e+=this.tok()}return this.renderer.list(e,a)}case"list_item_start":{var e=""
while(this.next().type!=="list_item_end"){e+=this.token.type==="text"?this.parseText():this.tok()}return this.renderer.listitem(e)}case"loose_item_start":{var e=""
while(this.next().type!=="list_item_end"){e+=this.tok()}return this.renderer.listitem(e)}case"html":{var u=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text
return this.renderer.html(u)}case"paragraph":{return this.renderer.paragraph(this.inline.output(this.token.text))}case"text":{return this.renderer.paragraph(this.parseText())}}}
function a(t,e){return t.replace(!e?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(t,e){e=e.toLowerCase()
if(e==="colon")return":"
if(e.charAt(0)==="#"){return e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1))}return""})}function c(t,e){t=t.source
e=e||""
return function i(n,r){if(!n)return new RegExp(t,e)
r=r.source||r
r=r.replace(/(^|[^\[])\^/g,"$1")
t=t.replace(n,r)
return i}}function p(){}p.exec=p
function l(t){var e=1,i,n
for(;e<arguments.length;e++){i=arguments[e]
for(n in i){if(Object.prototype.hasOwnProperty.call(i,n)){t[n]=i[n]}}}return t}function h(t,e,n){if(n||typeof e==="function"){if(!n){n=e
e=null}e=l({},h.defaults,e||{})
var r=e.highlight,o,u,c=0
try{o=i.lex(t,e)}catch(t){return n(t)}u=o.length
var p=function(t){if(t){e.highlight=r
return n(t)}var i
try{i=s.parse(o,e)}catch(e){t=e}e.highlight=r
return t?n(t):n(null,i)}
if(!r||r.length<3){return p()}delete e.highlight
if(!u)return p()
for(;c<o.length;c++){(function(t){if(t.type!=="code"){return--u||p()}return r(t.text,t.lang,function(e,i){if(e)return p(e)
if(i==null||i===t.text){return--u||p()}t.text=i
t.escaped=true;--u||p()})})(o[c])}return}try{if(e)e=l({},h.defaults,e)
return s.parse(i.lex(t,e),e)}catch(t){t.message+="\nPlease report this to https://github.com/chjj/marked."
if((e||h.defaults).silent){return"<p>An error occured:</p><pre>"+a(t.message+"",true)+"</pre>"}throw t}}h.options=h.setOptions=function(t){l(h.defaults,t)
return h}
h.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,sanitizer:null,mangle:true,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new o,xhtml:false}
h.Parser=s
h.parser=s.parse
h.Renderer=o
h.Lexer=i
h.lexer=i.lex
h.InlineLexer=r
h.inlineLexer=r.output
h.parse=h
if(true){t.exports=h}else if(typeof define==="function"&&define.amd){define(function(){return h})}else{this.marked=h}}).call(function(){return this||(typeof window!=="undefined"?window:e)}())}).call(e,i(62))},function(t,e,i){var n=i(260)
e.copy=u
e.slice=c
e.toString=p
e.write=l("write")
var r=i(7)
var o=r.global
var s=r.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o
var a=s&&!o.TYPED_ARRAY_SUPPORT
function u(t,e,i,o){var s=r.isBuffer(this)
var u=r.isBuffer(t)
if(s&&u){return this.copy(t,e,i,o)}else if(!a&&!s&&!u&&r.isView(this)&&r.isView(t)){var p=i||o!=null?c.call(this,i,o):this
t.set(p,e)
return p.length}else{return n.copy.call(this,t,e,i,o)}}function c(t,e){var i=this.slice||!a&&this.subarray
if(i)return i.call(this,t,e)
var n=r.alloc.call(this,e-t)
u.call(this,n,0,t,e)
return n}function p(t,e,i){var o=!s&&r.isBuffer(this)?this.toString:n.toString
return o.apply(this,arguments)}function l(t){return e
function e(){var e=this[t]||n[t]
return e.apply(this,arguments)}}},function(t,e,i){e.ExtBuffer=r
var n=i(7)
function r(t,e){if(!(this instanceof r))return new r(t,e)
this.buffer=n.from(t)
this.type=e}},function(t,e,i){var n=i(58).ExtBuffer
var r=i(268)
var o=i(106).readUint8
var s=i(270)
var a=i(37)
a.install({addExtUnpacker:p,getExtUnpacker:l,init:c})
e.preset=c.call(a.preset)
function u(t){var e=s.getReadToken(t)
return i
function i(t){var i=o(t)
var n=e[i]
if(!n)throw new Error("Invalid type: "+(i?"0x"+i.toString(16):i))
return n(t)}}function c(){var t=this.options
this.decode=u(t)
if(t&&t.preset){r.setExtUnpackers(this)}return this}function p(t,e){var i=this.extUnpackers||(this.extUnpackers=[])
i[t]=a.filter(e)}function l(t){var e=this.extUnpackers||(this.extUnpackers=[])
return e[t]||i
function i(e){return new n(e,t)}}},function(t,e,i){var n=i(58).ExtBuffer
var r=i(267)
var o=i(272)
var s=i(37)
s.install({addExtPacker:c,getExtPacker:p,init:u})
e.preset=u.call(s.preset)
function a(t){var e=o.getWriteType(t)
return i
function i(t,i){var n=e[typeof i]
if(!n)throw new Error('Unsupported type "'+typeof i+'": '+i)
n(t,i)}}function u(){var t=this.options
this.encode=a(t)
if(t&&t.preset){r.setExtPackers(this)}return this}function c(t,e,i){i=s.filter(i)
var r=e.name
if(r&&r!=="Object"){var o=this.extPackers||(this.extPackers={})
o[r]=u}else{var a=this.extEncoderList||(this.extEncoderList=[])
a.unshift([e,u])}function u(e){if(i)e=i(e)
return new n(e,t)}}function p(t){var e=this.extPackers||(this.extPackers={})
var i=t.constructor
var n=i&&i.name&&e[i.name]
if(n)return n
var r=this.extEncoderList||(this.extEncoderList=[])
var o=r.length
for(var s=0;s<o;s++){var a=r[s]
if(i===a[0])return a[1]}}},function(t,e){var i=t.exports={}
var n
var r
function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(t){n=o}try{if(typeof clearTimeout==="function"){r=clearTimeout}else{r=s}}catch(t){r=s}})()
function a(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout
return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(r===clearTimeout){return clearTimeout(t)}if((r===s||!r)&&clearTimeout){r=clearTimeout
return clearTimeout(t)}try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}var c=[]
var p=false
var l
var h=-1
function d(){if(!p||!l){return}p=false
if(l.length){c=l.concat(c)}else{h=-1}if(c.length){f()}}function f(){if(p){return}var t=a(d)
p=true
var e=c.length
while(e){l=c
c=[]
while(++h<e){if(l){l[h].run()}}h=-1
e=c.length}l=null
p=false
u(t)}i.nextTick=function(t){var e=new Array(arguments.length-1)
if(arguments.length>1){for(var i=1;i<arguments.length;i++){e[i-1]=arguments[i]}}c.push(new m(t,e))
if(c.length===1&&!p){a(f)}}
function m(t,e){this.fun=t
this.array=e}m.prototype.run=function(){this.fun.apply(null,this.array)}
i.title="browser"
i.browser=true
i.env={}
i.argv=[]
i.version=""
i.versions={}
function y(){}i.on=y
i.addListener=y
i.once=y
i.off=y
i.removeListener=y
i.removeAllListeners=y
i.emit=y
i.binding=function(t){throw new Error("process.binding is not supported")}
i.cwd=function(){return"/"}
i.chdir=function(t){throw new Error("process.chdir is not supported")}
i.umask=function(){return 0}},function(t,e){var i
i=function(){return this}()
try{i=i||Function("return this")()||(1,eval)("this")}catch(t){if(typeof window==="object")i=window}t.exports=i},function(t,e){e.animate=function(t,e,n,r,o,s){if(typeof t!=="number"||typeof e!=="number"||typeof n!=="number"||typeof r!=="function")return
if(typeof o==="string"&&i[o]){o=i[o]}if(typeof o!=="function"){o=i.linear}if(typeof s!=="function"){s=function(){}}var a=window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}
var u=false
var c=e-t
function p(i){if(u){return}var h=(i||+new Date)-l
if(h>=0){r(o(h,t,c,n))}if(h>=0&&h>=n){r(e)
s()}else{a(p)}}r(t)
var l=window.performance&&window.performance.now?window.performance.now():+new Date
a(p)
return{cancel:function(){u=true}}}
e.animateCSS=function(t,i,n,r,o,s,a,u){var c=function(e){t.style[i]=e+n}
return e.animate(r,o,s,c,a,u)}
e.cancel=function(t){if(!t){return}t.cancel()}
var i=e.easings={}
i.linear=function(t,e,i,n){return i*t/n+e}
i.easeInQuad=function(t,e,i,n){return i*(t/=n)*t+e}
i.easeOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e}
i.easeInOutQuad=function(t,e,i,n){if((t/=n/2)<1)return i/2*t*t+e
return-i/2*(--t*(t-2)-1)+e}
i.easeInCubic=function(t,e,i,n){return i*(t/=n)*t*t+e}
i.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}
i.easeInOutCubic=function(t,e,i,n){if((t/=n/2)<1)return i/2*t*t*t+e
return i/2*((t-=2)*t*t+2)+e}
i.easeInQuart=function(t,e,i,n){return i*(t/=n)*t*t*t+e}
i.easeOutQuart=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}
i.easeInOutQuart=function(t,e,i,n){if((t/=n/2)<1)return i/2*t*t*t*t+e
return-i/2*((t-=2)*t*t*t-2)+e}
i.easeInQuint=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e}
i.easeOutQuint=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}
i.easeInOutQuint=function(t,e,i,n){if((t/=n/2)<1)return i/2*t*t*t*t*t+e
return i/2*((t-=2)*t*t*t*t+2)+e}
i.easeInSine=function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}
i.easeOutSine=function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}
i.easeInOutSine=function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}
i.easeInExpo=function(t,e,i,n){return t==0?e:i*Math.pow(2,10*(t/n-1))+e}
i.easeOutExpo=function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}
i.easeInOutExpo=function(t,e,i,n){if(t==0)return e
if(t==n)return e+i
if((t/=n/2)<1)return i/2*Math.pow(2,10*(t-1))+e
return i/2*(-Math.pow(2,-10*--t)+2)+e}
i.easeInCirc=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}
i.easeOutCirc=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}
i.easeInOutCirc=function(t,e,i,n){if((t/=n/2)<1)return-i/2*(Math.sqrt(1-t*t)-1)+e
return i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}
i.easeInElastic=function(t,e,i,n){var r=0
var o=i
if(t==0)return e
if((t/=n)==1)return e+i
if(!r)r=n*.3
if(o<Math.abs(i)){o=i
var s=r/4}else var s=r/(2*Math.PI)*Math.asin(i/o)
return-(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r))+e}
i.easeOutElastic=function(t,e,i,n){var r=0
var o=i
if(t==0)return e
if((t/=n)==1)return e+i
if(!r)r=n*.3
if(o<Math.abs(i)){o=i
var s=r/4}else var s=r/(2*Math.PI)*Math.asin(i/o)
return o*Math.pow(2,-10*t)*Math.sin((t*n-s)*(2*Math.PI)/r)+i+e}
i.easeInOutElastic=function(t,e,i,n){var r=0
var o=i
if(t==0)return e
if((t/=n/2)==2)return e+i
if(!r)r=n*(.3*1.5)
if(o<Math.abs(i)){o=i
var s=r/4}else var s=r/(2*Math.PI)*Math.asin(i/o)
if(t<1)return-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r))+e
return o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/r)*.5+i+e}
i.easeInBack=function(t,e,i,n,r){if(r==undefined)r=1.70158
return i*(t/=n)*t*((r+1)*t-r)+e}
i.easeOutBack=function(t,e,i,n,r){if(r==undefined)r=1.70158
return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e}
i.easeInOutBack=function(t,e,i,n,r){if(r==undefined)r=1.70158
if((t/=n/2)<1)return i/2*(t*t*(((r*=1.525)+1)*t-r))+e
return i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e}
i.easeInBounce=function(t,e,n,r){return n-i.easeOutBounce(r-t,0,n,r)+e}
i.easeOutBounce=function(t,e,i,n){if((t/=n)<1/2.75){return i*(7.5625*t*t)+e}else if(t<2/2.75){return i*(7.5625*(t-=1.5/2.75)*t+.75)+e}else if(t<2.5/2.75){return i*(7.5625*(t-=2.25/2.75)*t+.9375)+e}else{return i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}}
i.easeInOutBounce=function(t,e,n,r){if(t<r/2)return i.easeInBounce(t*2,0,n,r)*.5+e
return i.easeOutBounce(t*2-r,0,n,r)*.5+n*.5+e}},function(t,e,i){"use strict";(function(e){function i(t){if(typeof t!=="string"){throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}}function n(t,e){var i=""
var n=0
var r=-1
var o=0
var s
for(var a=0;a<=t.length;++a){if(a<t.length)s=t.charCodeAt(a)
else if(s===47)break
else s=47
if(s===47){if(r===a-1||o===1){}else if(r!==a-1&&o===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var u=i.lastIndexOf("/")
if(u!==i.length-1){if(u===-1){i=""
n=0}else{i=i.slice(0,u)
n=i.length-1-i.lastIndexOf("/")}r=a
o=0
continue}}else if(i.length===2||i.length===1){i=""
n=0
r=a
o=0
continue}}if(e){if(i.length>0)i+="/.."
else i=".."
n=2}}else{if(i.length>0)i+="/"+t.slice(r+1,a)
else i=t.slice(r+1,a)
n=a-r-1}r=a
o=0}else if(s===46&&o!==-1){++o}else{o=-1}}return i}function r(t,e){var i=e.dir||e.root
var n=e.base||(e.name||"")+(e.ext||"")
if(!i){return n}if(i===e.root){return i+n}return i+t+n}var o={resolve:function t(){var r=""
var o=false
var s
for(var a=arguments.length-1;a>=-1&&!o;a--){var u
if(a>=0)u=arguments[a]
else{if(s===undefined)s=e.cwd()
u=s}i(u)
if(u.length===0){continue}r=u+"/"+r
o=u.charCodeAt(0)===47}r=n(r,!o)
if(o){if(r.length>0)return"/"+r
else return"/"}else if(r.length>0){return r}else{return"."}},normalize:function t(e){i(e)
if(e.length===0)return"."
var r=e.charCodeAt(0)===47
var o=e.charCodeAt(e.length-1)===47
e=n(e,!r)
if(e.length===0&&!r)e="."
if(e.length>0&&o)e+="/"
if(r)return"/"+e
return e},isAbsolute:function t(e){i(e)
return e.length>0&&e.charCodeAt(0)===47},join:function t(){if(arguments.length===0)return"."
var e
for(var n=0;n<arguments.length;++n){var r=arguments[n]
i(r)
if(r.length>0){if(e===undefined)e=r
else e+="/"+r}}if(e===undefined)return"."
return o.normalize(e)},relative:function t(e,n){i(e)
i(n)
if(e===n)return""
e=o.resolve(e)
n=o.resolve(n)
if(e===n)return""
var r=1
for(;r<e.length;++r){if(e.charCodeAt(r)!==47)break}var s=e.length
var a=s-r
var u=1
for(;u<n.length;++u){if(n.charCodeAt(u)!==47)break}var c=n.length
var p=c-u
var l=a<p?a:p
var h=-1
var d=0
for(;d<=l;++d){if(d===l){if(p>l){if(n.charCodeAt(u+d)===47){return n.slice(u+d+1)}else if(d===0){return n.slice(u+d)}}else if(a>l){if(e.charCodeAt(r+d)===47){h=d}else if(d===0){h=0}}break}var f=e.charCodeAt(r+d)
var m=n.charCodeAt(u+d)
if(f!==m)break
else if(f===47)h=d}var y=""
for(d=r+h+1;d<=s;++d){if(d===s||e.charCodeAt(d)===47){if(y.length===0)y+=".."
else y+="/.."}}if(y.length>0)return y+n.slice(u+h)
else{u+=h
if(n.charCodeAt(u)===47)++u
return n.slice(u)}},_makeLong:function t(e){return e},dirname:function t(e){i(e)
if(e.length===0)return"."
var n=e.charCodeAt(0)
var r=n===47
var o=-1
var s=true
for(var a=e.length-1;a>=1;--a){n=e.charCodeAt(a)
if(n===47){if(!s){o=a
break}}else{s=false}}if(o===-1)return r?"/":"."
if(r&&o===1)return"//"
return e.slice(0,o)},basename:function t(e,n){if(n!==undefined&&typeof n!=="string")throw new TypeError('"ext" argument must be a string')
i(e)
var r=0
var o=-1
var s=true
var a
if(n!==undefined&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return""
var u=n.length-1
var c=-1
for(a=e.length-1;a>=0;--a){var p=e.charCodeAt(a)
if(p===47){if(!s){r=a+1
break}}else{if(c===-1){s=false
c=a+1}if(u>=0){if(p===n.charCodeAt(u)){if(--u===-1){o=a}}else{u=-1
o=c}}}}if(r===o)o=c
else if(o===-1)o=e.length
return e.slice(r,o)}else{for(a=e.length-1;a>=0;--a){if(e.charCodeAt(a)===47){if(!s){r=a+1
break}}else if(o===-1){s=false
o=a+1}}if(o===-1)return""
return e.slice(r,o)}},extname:function t(e){i(e)
var n=-1
var r=0
var o=-1
var s=true
var a=0
for(var u=e.length-1;u>=0;--u){var c=e.charCodeAt(u)
if(c===47){if(!s){r=u+1
break}continue}if(o===-1){s=false
o=u+1}if(c===46){if(n===-1)n=u
else if(a!==1)a=1}else if(n!==-1){a=-1}}if(n===-1||o===-1||a===0||a===1&&n===o-1&&n===r+1){return""}return e.slice(n,o)},format:function t(e){if(e===null||typeof e!=="object"){throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e)}return r("/",e)},parse:function t(e){i(e)
var n={root:"",dir:"",base:"",ext:"",name:""}
if(e.length===0)return n
var r=e.charCodeAt(0)
var o=r===47
var s
if(o){n.root="/"
s=1}else{s=0}var a=-1
var u=0
var c=-1
var p=true
var l=e.length-1
var h=0
for(;l>=s;--l){r=e.charCodeAt(l)
if(r===47){if(!p){u=l+1
break}continue}if(c===-1){p=false
c=l+1}if(r===46){if(a===-1)a=l
else if(h!==1)h=1}else if(a!==-1){h=-1}}if(a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1){if(c!==-1){if(u===0&&o)n.base=n.name=e.slice(1,c)
else n.base=n.name=e.slice(u,c)}}else{if(u===0&&o){n.name=e.slice(1,a)
n.base=e.slice(1,c)}else{n.name=e.slice(u,a)
n.base=e.slice(u,c)}n.ext=e.slice(a,c)}if(u>0)n.dir=e.slice(0,u-1)
else if(o)n.dir="/"
return n},sep:"/",delimiter:":",win32:null,posix:null}
o.posix=o
t.exports=o}).call(e,i(61))},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=i(119)
var r=i(40)
var o=i(36)
e.Buffer=c
e.SlowBuffer=_
e.INSPECT_MAX_BYTES=50
c.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==undefined?t.TYPED_ARRAY_SUPPORT:s()
e.kMaxLength=a()
function s(){try{var t=new Uint8Array(1)
t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}}
return t.foo()===42&&typeof t.subarray==="function"&&t.subarray(1,1).byteLength===0}catch(t){return false}}function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e){throw new RangeError("Invalid typed array length")}if(c.TYPED_ARRAY_SUPPORT){t=new Uint8Array(e)
t.__proto__=c.prototype}else{if(t===null){t=new c(e)}t.length=e}return t}function c(t,e,i){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c)){return new c(t,e,i)}if(typeof t==="number"){if(typeof e==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return d(this,t)}return p(this,t,e,i)}c.poolSize=8192
c._augment=function(t){t.__proto__=c.prototype
return t}
function p(t,e,i,n){if(typeof e==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&e instanceof ArrayBuffer){return y(t,e,i,n)}if(typeof e==="string"){return f(t,e,i)}return g(t,e)}c.from=function(t,e,i){return p(null,t,e,i)}
if(c.TYPED_ARRAY_SUPPORT){c.prototype.__proto__=Uint8Array.prototype
c.__proto__=Uint8Array
if(typeof Symbol!=="undefined"&&Symbol.species&&c[Symbol.species]===c){Object.defineProperty(c,Symbol.species,{value:null,configurable:true})}}function l(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be a number')}else if(t<0){throw new RangeError('"size" argument must not be negative')}}function h(t,e,i,n){l(e)
if(e<=0){return u(t,e)}if(i!==undefined){return typeof n==="string"?u(t,e).fill(i,n):u(t,e).fill(i)}return u(t,e)}c.alloc=function(t,e,i){return h(null,t,e,i)}
function d(t,e){l(e)
t=u(t,e<0?0:v(e)|0)
if(!c.TYPED_ARRAY_SUPPORT){for(var i=0;i<e;++i){t[i]=0}}return t}c.allocUnsafe=function(t){return d(null,t)}
c.allocUnsafeSlow=function(t){return d(null,t)}
function f(t,e,i){if(typeof i!=="string"||i===""){i="utf8"}if(!c.isEncoding(i)){throw new TypeError('"encoding" must be a valid string encoding')}var n=b(e,i)|0
t=u(t,n)
var r=t.write(e,i)
if(r!==n){t=t.slice(0,r)}return t}function m(t,e){var i=e.length<0?0:v(e.length)|0
t=u(t,i)
for(var n=0;n<i;n+=1){t[n]=e[n]&255}return t}function y(t,e,i,n){e.byteLength
if(i<0||e.byteLength<i){throw new RangeError("'offset' is out of bounds")}if(e.byteLength<i+(n||0)){throw new RangeError("'length' is out of bounds")}if(i===undefined&&n===undefined){e=new Uint8Array(e)}else if(n===undefined){e=new Uint8Array(e,i)}else{e=new Uint8Array(e,i,n)}if(c.TYPED_ARRAY_SUPPORT){t=e
t.__proto__=c.prototype}else{t=m(t,e)}return t}function g(t,e){if(c.isBuffer(e)){var i=v(e.length)|0
t=u(t,i)
if(t.length===0){return t}e.copy(t,0,0,i)
return t}if(e){if(typeof ArrayBuffer!=="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e){if(typeof e.length!=="number"||et(e.length)){return u(t,0)}return m(t,e)}if(e.type==="Buffer"&&o(e.data)){return m(t,e.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(t){if(t>=a()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+a().toString(16)+" bytes")}return t|0}function _(t){if(+t!=t){t=0}return c.alloc(+t)}c.isBuffer=function t(e){return!!(e!=null&&e._isBuffer)}
c.compare=function t(e,i){if(!c.isBuffer(e)||!c.isBuffer(i)){throw new TypeError("Arguments must be Buffers")}if(e===i)return 0
var n=e.length
var r=i.length
for(var o=0,s=Math.min(n,r);o<s;++o){if(e[o]!==i[o]){n=e[o]
r=i[o]
break}}if(n<r)return-1
if(r<n)return 1
return 0}
c.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true
default:return false}}
c.concat=function t(e,i){if(!o(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return c.alloc(0)}var n
if(i===undefined){i=0
for(n=0;n<e.length;++n){i+=e[n].length}}var r=c.allocUnsafe(i)
var s=0
for(n=0;n<e.length;++n){var a=e[n]
if(!c.isBuffer(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(r,s)
s+=a.length}return r}
function b(t,e){if(c.isBuffer(t)){return t.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)){return t.byteLength}if(typeof t!=="string"){t=""+t}var i=t.length
if(i===0)return 0
var n=false
for(;;){switch(e){case"ascii":case"latin1":case"binary":return i
case"utf8":case"utf-8":case undefined:return J(t).length
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2
case"hex":return i>>>1
case"base64":return Q(t).length
default:if(n)return J(t).length
e=(""+e).toLowerCase()
n=true}}}c.byteLength=b
function x(t,e,i){var n=false
if(e===undefined||e<0){e=0}if(e>this.length){return""}if(i===undefined||i>this.length){i=this.length}if(i<=0){return""}i>>>=0
e>>>=0
if(i<=e){return""}if(!t)t="utf8"
while(true){switch(t){case"hex":return N(this,e,i)
case"utf8":case"utf-8":return L(this,e,i)
case"ascii":return I(this,e,i)
case"latin1":case"binary":return R(this,e,i)
case"base64":return $(this,e,i)
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,i)
default:if(n)throw new TypeError("Unknown encoding: "+t)
t=(t+"").toLowerCase()
n=true}}}c.prototype._isBuffer=true
function w(t,e,i){var n=t[e]
t[e]=t[i]
t[i]=n}c.prototype.swap16=function t(){var e=this.length
if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<e;i+=2){w(this,i,i+1)}return this}
c.prototype.swap32=function t(){var e=this.length
if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<e;i+=4){w(this,i,i+3)
w(this,i+1,i+2)}return this}
c.prototype.swap64=function t(){var e=this.length
if(e%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<e;i+=8){w(this,i,i+7)
w(this,i+1,i+6)
w(this,i+2,i+5)
w(this,i+3,i+4)}return this}
c.prototype.toString=function t(){var e=this.length|0
if(e===0)return""
if(arguments.length===0)return L(this,0,e)
return x.apply(this,arguments)}
c.prototype.equals=function t(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer")
if(this===e)return true
return c.compare(this,e)===0}
c.prototype.inspect=function t(){var i=""
var n=e.INSPECT_MAX_BYTES
if(this.length>0){i=this.toString("hex",0,n).match(/.{2}/g).join(" ")
if(this.length>n)i+=" ... "}return"<Buffer "+i+">"}
c.prototype.compare=function t(e,i,n,r,o){if(!c.isBuffer(e)){throw new TypeError("Argument must be a Buffer")}if(i===undefined){i=0}if(n===undefined){n=e?e.length:0}if(r===undefined){r=0}if(o===undefined){o=this.length}if(i<0||n>e.length||r<0||o>this.length){throw new RangeError("out of range index")}if(r>=o&&i>=n){return 0}if(r>=o){return-1}if(i>=n){return 1}i>>>=0
n>>>=0
r>>>=0
o>>>=0
if(this===e)return 0
var s=o-r
var a=n-i
var u=Math.min(s,a)
var p=this.slice(r,o)
var l=e.slice(i,n)
for(var h=0;h<u;++h){if(p[h]!==l[h]){s=p[h]
a=l[h]
break}}if(s<a)return-1
if(a<s)return 1
return 0}
function T(t,e,i,n,r){if(t.length===0)return-1
if(typeof i==="string"){n=i
i=0}else if(i>2147483647){i=2147483647}else if(i<-2147483648){i=-2147483648}i=+i
if(isNaN(i)){i=r?0:t.length-1}if(i<0)i=t.length+i
if(i>=t.length){if(r)return-1
else i=t.length-1}else if(i<0){if(r)i=0
else return-1}if(typeof e==="string"){e=c.from(e,n)}if(c.isBuffer(e)){if(e.length===0){return-1}return S(t,e,i,n,r)}else if(typeof e==="number"){e=e&255
if(c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(r){return Uint8Array.prototype.indexOf.call(t,e,i)}else{return Uint8Array.prototype.lastIndexOf.call(t,e,i)}}return S(t,[e],i,n,r)}throw new TypeError("val must be string, number or Buffer")}function S(t,e,i,n,r){var o=1
var s=t.length
var a=e.length
if(n!==undefined){n=String(n).toLowerCase()
if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(t.length<2||e.length<2){return-1}o=2
s/=2
a/=2
i/=2}}function u(t,e){if(o===1){return t[e]}else{return t.readUInt16BE(e*o)}}var c
if(r){var p=-1
for(c=i;c<s;c++){if(u(t,c)===u(e,p===-1?0:c-p)){if(p===-1)p=c
if(c-p+1===a)return p*o}else{if(p!==-1)c-=c-p
p=-1}}}else{if(i+a>s)i=s-a
for(c=i;c>=0;c--){var l=true
for(var h=0;h<a;h++){if(u(t,c+h)!==u(e,h)){l=false
break}}if(l)return c}}return-1}c.prototype.includes=function t(e,i,n){return this.indexOf(e,i,n)!==-1}
c.prototype.indexOf=function t(e,i,n){return T(this,e,i,n,true)}
c.prototype.lastIndexOf=function t(e,i,n){return T(this,e,i,n,false)}
function k(t,e,i,n){i=Number(i)||0
var r=t.length-i
if(!n){n=r}else{n=Number(n)
if(n>r){n=r}}var o=e.length
if(o%2!==0)throw new TypeError("Invalid hex string")
if(n>o/2){n=o/2}for(var s=0;s<n;++s){var a=parseInt(e.substr(s*2,2),16)
if(isNaN(a))return s
t[i+s]=a}return s}function A(t,e,i,n){return tt(J(e,t.length-i),t,i,n)}function C(t,e,i,n){return tt(X(e),t,i,n)}function E(t,e,i,n){return C(t,e,i,n)}function D(t,e,i,n){return tt(Q(e),t,i,n)}function P(t,e,i,n){return tt(Z(e,t.length-i),t,i,n)}c.prototype.write=function t(e,i,n,r){if(i===undefined){r="utf8"
n=this.length
i=0}else if(n===undefined&&typeof i==="string"){r=i
n=this.length
i=0}else if(isFinite(i)){i=i|0
if(isFinite(n)){n=n|0
if(r===undefined)r="utf8"}else{r=n
n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-i
if(n===undefined||n>o)n=o
if(e.length>0&&(n<0||i<0)||i>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!r)r="utf8"
var s=false
for(;;){switch(r){case"hex":return k(this,e,i,n)
case"utf8":case"utf-8":return A(this,e,i,n)
case"ascii":return C(this,e,i,n)
case"latin1":case"binary":return E(this,e,i,n)
case"base64":return D(this,e,i,n)
case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,i,n)
default:if(s)throw new TypeError("Unknown encoding: "+r)
r=(""+r).toLowerCase()
s=true}}}
c.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}}
function $(t,e,i){if(e===0&&i===t.length){return n.fromByteArray(t)}else{return n.fromByteArray(t.slice(e,i))}}function L(t,e,i){i=Math.min(t.length,i)
var n=[]
var r=e
while(r<i){var o=t[r]
var s=null
var a=o>239?4:o>223?3:o>191?2:1
if(r+a<=i){var u,c,p,l
switch(a){case 1:if(o<128){s=o}break
case 2:u=t[r+1]
if((u&192)===128){l=(o&31)<<6|u&63
if(l>127){s=l}}break
case 3:u=t[r+1]
c=t[r+2]
if((u&192)===128&&(c&192)===128){l=(o&15)<<12|(u&63)<<6|c&63
if(l>2047&&(l<55296||l>57343)){s=l}}break
case 4:u=t[r+1]
c=t[r+2]
p=t[r+3]
if((u&192)===128&&(c&192)===128&&(p&192)===128){l=(o&15)<<18|(u&63)<<12|(c&63)<<6|p&63
if(l>65535&&l<1114112){s=l}}}}if(s===null){s=65533
a=1}else if(s>65535){s-=65536
n.push(s>>>10&1023|55296)
s=56320|s&1023}n.push(s)
r+=a}return M(n)}var O=4096
function M(t){var e=t.length
if(e<=O){return String.fromCharCode.apply(String,t)}var i=""
var n=0
while(n<e){i+=String.fromCharCode.apply(String,t.slice(n,n+=O))}return i}function I(t,e,i){var n=""
i=Math.min(t.length,i)
for(var r=e;r<i;++r){n+=String.fromCharCode(t[r]&127)}return n}function R(t,e,i){var n=""
i=Math.min(t.length,i)
for(var r=e;r<i;++r){n+=String.fromCharCode(t[r])}return n}function N(t,e,i){var n=t.length
if(!e||e<0)e=0
if(!i||i<0||i>n)i=n
var r=""
for(var o=e;o<i;++o){r+=K(t[o])}return r}function F(t,e,i){var n=t.slice(e,i)
var r=""
for(var o=0;o<n.length;o+=2){r+=String.fromCharCode(n[o]+n[o+1]*256)}return r}c.prototype.slice=function t(e,i){var n=this.length
e=~~e
i=i===undefined?n:~~i
if(e<0){e+=n
if(e<0)e=0}else if(e>n){e=n}if(i<0){i+=n
if(i<0)i=0}else if(i>n){i=n}if(i<e)i=e
var r
if(c.TYPED_ARRAY_SUPPORT){r=this.subarray(e,i)
r.__proto__=c.prototype}else{var o=i-e
r=new c(o,undefined)
for(var s=0;s<o;++s){r[s]=this[s+e]}}return r}
function B(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint")
if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function t(e,i,n){e=e|0
i=i|0
if(!n)B(e,i,this.length)
var r=this[e]
var o=1
var s=0
while(++s<i&&(o*=256)){r+=this[e+s]*o}return r}
c.prototype.readUIntBE=function t(e,i,n){e=e|0
i=i|0
if(!n){B(e,i,this.length)}var r=this[e+--i]
var o=1
while(i>0&&(o*=256)){r+=this[e+--i]*o}return r}
c.prototype.readUInt8=function t(e,i){if(!i)B(e,1,this.length)
return this[e]}
c.prototype.readUInt16LE=function t(e,i){if(!i)B(e,2,this.length)
return this[e]|this[e+1]<<8}
c.prototype.readUInt16BE=function t(e,i){if(!i)B(e,2,this.length)
return this[e]<<8|this[e+1]}
c.prototype.readUInt32LE=function t(e,i){if(!i)B(e,4,this.length)
return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216}
c.prototype.readUInt32BE=function t(e,i){if(!i)B(e,4,this.length)
return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])}
c.prototype.readIntLE=function t(e,i,n){e=e|0
i=i|0
if(!n)B(e,i,this.length)
var r=this[e]
var o=1
var s=0
while(++s<i&&(o*=256)){r+=this[e+s]*o}o*=128
if(r>=o)r-=Math.pow(2,8*i)
return r}
c.prototype.readIntBE=function t(e,i,n){e=e|0
i=i|0
if(!n)B(e,i,this.length)
var r=i
var o=1
var s=this[e+--r]
while(r>0&&(o*=256)){s+=this[e+--r]*o}o*=128
if(s>=o)s-=Math.pow(2,8*i)
return s}
c.prototype.readInt8=function t(e,i){if(!i)B(e,1,this.length)
if(!(this[e]&128))return this[e]
return(255-this[e]+1)*-1}
c.prototype.readInt16LE=function t(e,i){if(!i)B(e,2,this.length)
var n=this[e]|this[e+1]<<8
return n&32768?n|4294901760:n}
c.prototype.readInt16BE=function t(e,i){if(!i)B(e,2,this.length)
var n=this[e+1]|this[e]<<8
return n&32768?n|4294901760:n}
c.prototype.readInt32LE=function t(e,i){if(!i)B(e,4,this.length)
return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24}
c.prototype.readInt32BE=function t(e,i){if(!i)B(e,4,this.length)
return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]}
c.prototype.readFloatLE=function t(e,i){if(!i)B(e,4,this.length)
return r.read(this,e,true,23,4)}
c.prototype.readFloatBE=function t(e,i){if(!i)B(e,4,this.length)
return r.read(this,e,false,23,4)}
c.prototype.readDoubleLE=function t(e,i){if(!i)B(e,8,this.length)
return r.read(this,e,true,52,8)}
c.prototype.readDoubleBE=function t(e,i){if(!i)B(e,8,this.length)
return r.read(this,e,false,52,8)}
function z(t,e,i,n,r,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance')
if(e>r||e<o)throw new RangeError('"value" argument is out of bounds')
if(i+n>t.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function t(e,i,n,r){e=+e
i=i|0
n=n|0
if(!r){var o=Math.pow(2,8*n)-1
z(this,e,i,n,o,0)}var s=1
var a=0
this[i]=e&255
while(++a<n&&(s*=256)){this[i+a]=e/s&255}return i+n}
c.prototype.writeUIntBE=function t(e,i,n,r){e=+e
i=i|0
n=n|0
if(!r){var o=Math.pow(2,8*n)-1
z(this,e,i,n,o,0)}var s=n-1
var a=1
this[i+s]=e&255
while(--s>=0&&(a*=256)){this[i+s]=e/a&255}return i+n}
c.prototype.writeUInt8=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,1,255,0)
if(!c.TYPED_ARRAY_SUPPORT)e=Math.floor(e)
this[i]=e&255
return i+1}
function U(t,e,i,n){if(e<0)e=65535+e+1
for(var r=0,o=Math.min(t.length-i,2);r<o;++r){t[i+r]=(e&255<<8*(n?r:1-r))>>>(n?r:1-r)*8}}c.prototype.writeUInt16LE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,2,65535,0)
if(c.TYPED_ARRAY_SUPPORT){this[i]=e&255
this[i+1]=e>>>8}else{U(this,e,i,true)}return i+2}
c.prototype.writeUInt16BE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,2,65535,0)
if(c.TYPED_ARRAY_SUPPORT){this[i]=e>>>8
this[i+1]=e&255}else{U(this,e,i,false)}return i+2}
function V(t,e,i,n){if(e<0)e=4294967295+e+1
for(var r=0,o=Math.min(t.length-i,4);r<o;++r){t[i+r]=e>>>(n?r:3-r)*8&255}}c.prototype.writeUInt32LE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,4,4294967295,0)
if(c.TYPED_ARRAY_SUPPORT){this[i+3]=e>>>24
this[i+2]=e>>>16
this[i+1]=e>>>8
this[i]=e&255}else{V(this,e,i,true)}return i+4}
c.prototype.writeUInt32BE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,4,4294967295,0)
if(c.TYPED_ARRAY_SUPPORT){this[i]=e>>>24
this[i+1]=e>>>16
this[i+2]=e>>>8
this[i+3]=e&255}else{V(this,e,i,false)}return i+4}
c.prototype.writeIntLE=function t(e,i,n,r){e=+e
i=i|0
if(!r){var o=Math.pow(2,8*n-1)
z(this,e,i,n,o-1,-o)}var s=0
var a=1
var u=0
this[i]=e&255
while(++s<n&&(a*=256)){if(e<0&&u===0&&this[i+s-1]!==0){u=1}this[i+s]=(e/a>>0)-u&255}return i+n}
c.prototype.writeIntBE=function t(e,i,n,r){e=+e
i=i|0
if(!r){var o=Math.pow(2,8*n-1)
z(this,e,i,n,o-1,-o)}var s=n-1
var a=1
var u=0
this[i+s]=e&255
while(--s>=0&&(a*=256)){if(e<0&&u===0&&this[i+s+1]!==0){u=1}this[i+s]=(e/a>>0)-u&255}return i+n}
c.prototype.writeInt8=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,1,127,-128)
if(!c.TYPED_ARRAY_SUPPORT)e=Math.floor(e)
if(e<0)e=255+e+1
this[i]=e&255
return i+1}
c.prototype.writeInt16LE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,2,32767,-32768)
if(c.TYPED_ARRAY_SUPPORT){this[i]=e&255
this[i+1]=e>>>8}else{U(this,e,i,true)}return i+2}
c.prototype.writeInt16BE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,2,32767,-32768)
if(c.TYPED_ARRAY_SUPPORT){this[i]=e>>>8
this[i+1]=e&255}else{U(this,e,i,false)}return i+2}
c.prototype.writeInt32LE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,4,2147483647,-2147483648)
if(c.TYPED_ARRAY_SUPPORT){this[i]=e&255
this[i+1]=e>>>8
this[i+2]=e>>>16
this[i+3]=e>>>24}else{V(this,e,i,true)}return i+4}
c.prototype.writeInt32BE=function t(e,i,n){e=+e
i=i|0
if(!n)z(this,e,i,4,2147483647,-2147483648)
if(e<0)e=4294967295+e+1
if(c.TYPED_ARRAY_SUPPORT){this[i]=e>>>24
this[i+1]=e>>>16
this[i+2]=e>>>8
this[i+3]=e&255}else{V(this,e,i,false)}return i+4}
function j(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range")
if(i<0)throw new RangeError("Index out of range")}function q(t,e,i,n,o){if(!o){j(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38)}r.write(t,e,i,n,23,4)
return i+4}c.prototype.writeFloatLE=function t(e,i,n){return q(this,e,i,true,n)}
c.prototype.writeFloatBE=function t(e,i,n){return q(this,e,i,false,n)}
function H(t,e,i,n,o){if(!o){j(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308)}r.write(t,e,i,n,52,8)
return i+8}c.prototype.writeDoubleLE=function t(e,i,n){return H(this,e,i,true,n)}
c.prototype.writeDoubleBE=function t(e,i,n){return H(this,e,i,false,n)}
c.prototype.copy=function t(e,i,n,r){if(!n)n=0
if(!r&&r!==0)r=this.length
if(i>=e.length)i=e.length
if(!i)i=0
if(r>0&&r<n)r=n
if(r===n)return 0
if(e.length===0||this.length===0)return 0
if(i<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds")
if(r<0)throw new RangeError("sourceEnd out of bounds")
if(r>this.length)r=this.length
if(e.length-i<r-n){r=e.length-i+n}var o=r-n
var s
if(this===e&&n<i&&i<r){for(s=o-1;s>=0;--s){e[s+i]=this[s+n]}}else if(o<1e3||!c.TYPED_ARRAY_SUPPORT){for(s=0;s<o;++s){e[s+i]=this[s+n]}}else{Uint8Array.prototype.set.call(e,this.subarray(n,n+o),i)}return o}
c.prototype.fill=function t(e,i,n,r){if(typeof e==="string"){if(typeof i==="string"){r=i
i=0
n=this.length}else if(typeof n==="string"){r=n
n=this.length}if(e.length===1){var o=e.charCodeAt(0)
if(o<256){e=o}}if(r!==undefined&&typeof r!=="string"){throw new TypeError("encoding must be a string")}if(typeof r==="string"&&!c.isEncoding(r)){throw new TypeError("Unknown encoding: "+r)}}else if(typeof e==="number"){e=e&255}if(i<0||this.length<i||this.length<n){throw new RangeError("Out of range index")}if(n<=i){return this}i=i>>>0
n=n===undefined?this.length:n>>>0
if(!e)e=0
var s
if(typeof e==="number"){for(s=i;s<n;++s){this[s]=e}}else{var a=c.isBuffer(e)?e:J(new c(e,r).toString())
var u=a.length
for(s=0;s<n-i;++s){this[s+i]=a[s%u]}}return this}
var W=/[^+\/0-9A-Za-z-_]/g
function G(t){t=Y(t).replace(W,"")
if(t.length<2)return""
while(t.length%4!==0){t=t+"="}return t}function Y(t){if(t.trim)return t.trim()
return t.replace(/^\s+|\s+$/g,"")}function K(t){if(t<16)return"0"+t.toString(16)
return t.toString(16)}function J(t,e){e=e||Infinity
var i
var n=t.length
var r=null
var o=[]
for(var s=0;s<n;++s){i=t.charCodeAt(s)
if(i>55295&&i<57344){if(!r){if(i>56319){if((e-=3)>-1)o.push(239,191,189)
continue}else if(s+1===n){if((e-=3)>-1)o.push(239,191,189)
continue}r=i
continue}if(i<56320){if((e-=3)>-1)o.push(239,191,189)
r=i
continue}i=(r-55296<<10|i-56320)+65536}else if(r){if((e-=3)>-1)o.push(239,191,189)}r=null
if(i<128){if((e-=1)<0)break
o.push(i)}else if(i<2048){if((e-=2)<0)break
o.push(i>>6|192,i&63|128)}else if(i<65536){if((e-=3)<0)break
o.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((e-=4)<0)break
o.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else{throw new Error("Invalid code point")}}return o}function X(t){var e=[]
for(var i=0;i<t.length;++i){e.push(t.charCodeAt(i)&255)}return e}function Z(t,e){var i,n,r
var o=[]
for(var s=0;s<t.length;++s){if((e-=2)<0)break
i=t.charCodeAt(s)
n=i>>8
r=i%256
o.push(r)
o.push(n)}return o}function Q(t){return n.toByteArray(G(t))}function tt(t,e,i,n){for(var r=0;r<n;++r){if(r+i>=e.length||r>=t.length)break
e[r+i]=t[r]}return r}function et(t){return t!==t}}).call(e,i(62))},function(t,e,i){
/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */
function n(){if(!(this instanceof n))return new n}(function(e){if(true)t.exports=e
var i="listeners"
var n={on:o,once:s,off:a,emit:u}
r(e.prototype)
e.mixin=r
function r(t){for(var e in n){t[e]=n[e]}return t}function o(t,e){c(this,t).push(e)
return this}function s(t,e){var i=this
n.originalListener=e
c(i,t).push(n)
return i
function n(){a.call(i,t,n)
e.apply(this,arguments)}}function a(t,e){var n=this
var r
if(!arguments.length){delete n[i]}else if(!e){r=n[i]
if(r){delete r[t]
if(!Object.keys(r).length)return a.call(n)}}else{r=c(n,t,true)
if(r){r=r.filter(o)
if(!r.length)return a.call(n,t)
n[i][t]=r}}return n
function o(t){return t!==e&&t.originalListener!==e}}function u(t,e){var i=this
var n=c(i,t,true)
if(!n)return false
var r=arguments.length
if(r===1){n.forEach(s)}else if(r===2){n.forEach(a)}else{var o=Array.prototype.slice.call(arguments,1)
n.forEach(u)}return!!n.length
function s(t){t.call(i)}function a(t){t.call(i,e)}function u(t){t.apply(i,o)}}function c(t,e,n){if(n&&!t[i])return
var r=t[i]||(t[i]={})
return r[e]||(r[e]=[])}})(n)},function(t,e,i){var n=i(0)
var r=i(4),o=r.Resource,s=r.MASK,a=r.ACCESS
function u(){return o.apply(this,arguments)}n.subclass(u,o)
e.Group=u
u.prototype.dependsOn=function(){return[this.creator()]}
u.prototype.creator=function(){return this.db().get(this.creator_id)}
u.prototype.casts=function(){var t=this
return t._cache.casts||(t._cache.casts=t.db().casts().sel({sort:["-published_at","-created_at"]},function(e){return e.gid==t.id&&!e.archived_at}))}
u.prototype.drafts=function(){return this._cache.drafts||(this._cache.drafts=this.casts().sel({sort:"-created_at"},function(t){return t.type=="tutorial"&&!t.pub}))}
u.prototype.playlists=function(){var t=this
return t._cache.playlists||(t._cache.playlists=t.db().playlists().sel({sort:"-created_at"},function(e){return e.gid==t.id&&!e.archived_at}))}
u.prototype.memberships=function(){var t=this
return t._cache.memberships||(t._cache.memberships=t.db().memberships().sel(function(e){return e.gid==t.id}))}
u.prototype.membership=function(t){if(t===undefined)t="anon"
return this._cache[t]||(this._cache[t]=this.memberships().first(function(e){return e.uid==t}))}
u.prototype.url=function(){return"/g/"+this.id}
u.prototype.getMetadata=function(){return this.metadata||this.style||{}}
u.prototype.price=function(){if(this.hasDiscount()){return this.getMetadata().discount_price}else{return this.getMetadata().price}}
u.prototype.discount=function(){return Math.round((this.getMetadata().price-this.getMetadata().discount_price)/this.getMetadata().price*100,0)||0}
u.prototype.hasDiscount=function(){if(this.type=="bootcamp"&&this.getMetadata()){return this.getMetadata().price&&this.getMetadata().discount_price&&this.getMetadata().discount_price<this.getMetadata().price}else{return false}}
u.prototype.isPaid=function(){return this.getMetadata().discount_price||this.getMetadata().price}
u.prototype.hasProjects=function(){return this.getMetadata().projects}
u.prototype.isBootcamp=function(){return this.type=="bootcamp"}
u.prototype.hasLearningsection=function(){return this.getMetadata().learnings}
u.prototype.hasFaq=function(){return this.getMetadata().faq}
u.prototype.giveawayData=function(){return this.getMetadata().giveaway}
u.prototype.slackChannel=function(){return this.getMetadata().slackChannel}
u.prototype.isComingSoon=function(){return this.getMetadata().coming_soon_page}
u.prototype.topTagline=function(){return this.getMetadata().topTagline}
u.prototype.waitlistUrl=function(){return this.getMetadata().waitlistUrl}
u.prototype.isPreorder=function(){return this.getMetadata().preorder}
u.prototype.giveawayData=function(){return this.getMetadata().giveaway}
u.prototype.giveawaysLeft=function(){if(!this.giveawayData()){return false}return this.getMetadata().giveaways_left||0}
u.prototype.teaserCastId=function(){return this.getMetadata().teaserCastId}
u.prototype.serialize=function(t){var e=u.prototype.__super__.serialize.apply(this,arguments)
if(e.coverart){e.coverart=true}return e}},function(t,e,i){var n=i(0)
var r=i(4),o=r.Resource,s=r.MASK
var a
if(false){}function u(){return o.apply(this,arguments)}n.subclass(u,o)
e.User=u
u._serializer={github_profile:s.NEVER,github_user_id:s.NEVER,github_token:s.NEVER,roles:s.OWN,email:s.OWN,password_hash:s.NEVER,stripe_customer_id:s.NEVER}
u.prototype.notifyChannels=function(){return this.id}
u.prototype.casts=function(){var t=this
return t._cache.casts||(t._cache.casts=t.db().casts().sel({sort:["-published_at","-created_at"]},function(e){return e.uid==t.id&&!e.archived_at}))}
u.prototype.drafts=function(){return this._cache.drafts||(this._cache.drafts=this.casts().sel({sort:"-created_at"},function(t){return t.type=="tutorial"&&!t.pub}))}
u.prototype.forks=function(){return this._cache.forks||(this._cache.forks=this.casts().sel({sort:"-created_at"},function(t){return t.type=="fork"}))}
u.prototype.playlists=function(){var t=this
return t._cache.playlists||(t._cache.playlists=t.db().playlists().sel(function(e){return e.uid==t.id&&!e.archived_at}))}
u.prototype.memberships=function(){var t=this
return t._cache.memberships||(t._cache.memberships=t.db().memberships().sel(function(e){return e.uid==t.id}))}
u.prototype.enrolledCourses=function(){var t=this.memberships().map(function(t){return t.gid})
return this._cache.enrolledCourses||(this._cache.enrolledCourses=this.db().groups().sel(function(e){return t.indexOf(e.id)>-1}))}
u.prototype.isMod=function(){return this.roles&&this.roles.indexOf("mod")>=0}
u.prototype.isAdmin=function(){return this.hasRole("admin")}
u.prototype.hasRole=function(t){return this.roles&&this.roles.indexOf(t)>=0}
u.prototype.beforeSerialize=function(){return this.createGravatarHash()}
u.prototype.gravatarHash=function(){this.createGravatarHash()
return this.gravatar_hash}
u.prototype.createGravatarHash=function(){if(false){}}
u.prototype.url=function(){if(this.username){return"/@"+this.username}else{return"/"+this.id}}
u.prototype.avatarUrl=function(t){var e
if(t===undefined)t=64
if(!this.username&&(e=this.gravatarHash())){return"https://www.gravatar.com/avatar/"+e+"?s="+t}else{return"https://avatars.githubusercontent.com/"+this.username+"?s="+t}}},function(t,e,i){var n={}
var r=i(142).setupMode
var o={access:"delimiter.access",ivar:"variable.instance",constant:"identifier.const"}
e.setup=n.setup=function(t){t.IMBA_WORKER=r({})
return n}
var s=e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#%\^\&\*\(\)\=\$\-\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{blockComment:["###","###"],lineComment:"#"},brackets:[["{","}","delimiter.curly"],["[","]","delimiter.square"],["(",")","delimiter.parenthesis"],["<",">","delimiter.angle"]],autoClosingPairs:[{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"{",close:"}",notIn:["comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:"<",close:">",notIn:["string","comment","operators"]}],onEnterRules:[{beforeText:/^\s*(?:def|get \w|set \w|class|for|if|elif|else|while|try|with|finally|except|async).*?$/,action:{indentAction:1}},{beforeText:/\s*(?:do)\s*(\|.*\|\s*)?$/,action:{indentAction:1}}]}
var a=e.language={defaultToken:"invalid",ignoreCase:false,tokenPostfix:".imba",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["def","and","or","is","isnt","not","on","yes","@","no","off","true","false","null","this","self","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","if","elif","else","switch","for","while","do","try","catch","finally","class","extends","super","undefined","then","unless","until","loop","of","by","when","tag","prop","export","import","extend","var","let","const","require","isa","await","static"],boolean:["true","false","yes","no","undefined"],contextual_keywords:["from","global","attr"],operators:["=","!","~","?",":","!!","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","?=","^=","%=","<<=",">>=",">>>=","..","..."],logic:[">","<","==","<=",">=","!=","&&","||","===","!=="],ranges:["..","..."],dot:["."],math:["+","-","*","/","++","--"],symbols:/[=><!~?&%|+\-*\/\^\.,\:]+/,escapes:/\\(?:[abfnrtv\\"'$]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,postaccess:/(:(?=\w))?/,ivar:/\@[a-zA-Z_]\w*/,constant:/[A-Z][A-Za-z\d\-\_]*/,className:/[A-Z][A-Za-z\d\-\_]*|[A-Za-z\d\-\_]+/,methodName:/[A-Za-z\_\$][A-Za-z\d\$\_]*(\-+[\w\$]+)*[\?\!\=]?/,identifier:/[a-z_][A-Za-z\d\_\$]*(\-+[\w\$]+)*[\?\!]?/,regEx:/\/(?!\/\/)(?:[^\/\\]|\\.)*\/[igm]*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[{include:"@body"}],body:[[/([a-z]\w*)(\:)(?=\w)/,{cases:{"this:":["variable.predefined.this","delimiter.access"],"self:":["variable.predefined.self","delimiter.access"],"@default":["identifier","delimiter.access"]}}],[/(@ivar)(\:)(?=\w)/,[o.ivar,o.access]],[/(@constant)(\:)(?=\w)/,[o.constant,o.access]],[/(class|tag|module)(?=\s)/,{token:"keyword.$1",next:"@declstart.$1"}],[/(def|get|set)(?=\s)/,{token:"keyword.$1",next:"@defstart.$1"}],[/(prop|attr)(?=\s)/,{token:"keyword.$1",next:"@propstart.$1"}],[/(import)(?=\s)/,{token:"keyword.$1",next:"@importstart.$1"}],[/([a-z]\w*)(:?(?!\w))/,{cases:{$2:["key.identifier","delimiter"],this:"variable.predefined.this",self:"variable.predefined.self","$1@boolean":{token:"boolean.$0"},"$1@keywords":{token:"keyword.$0"},"$1@contextual_keywords":{token:"identifier.$0"},"@default":["identifier","delimiter"]}}],[/\@[a-zA-Z_\$]\w*(\-\w+)*[\?\!]?/,"variable.instance"],[/\$\w+\$/,"identifier.env"],[/\$\d+/,"identifier.special"],[/\$[a-zA-Z_\$]\w*(\-\w+)*/,"identifier.sys"],[/[A-Z][A-Za-z\d\-\_]*/,{token:"identifier.const"}],[/[a-z_][A-Za-z\d\_]*(\-\w+)*[\?\!]?/,{token:"identifier"}],[/\$/,{token:"identifier.special"}],[/\(/,{token:"paren.open",next:"@parens"}],{include:"@whitespace"},{include:"@tag"},{include:"@tag_singleton_ref"},[/### (javascript|compiles to)\:/,{token:"comment",next:"@js_comment",nextEmbedded:"text/javascript"}],[/### (css\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/css"}],[/### (less\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/less"}],[/### (sass\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/css"}],[/### (scss\b.*)/,{token:"comment",next:"@style_comment",nextEmbedded:"text/css"}],{include:"@comments"},[/(\:)([\@\w\-\_]+)/,["symbol.start","symbol"]],[/\$\d+/,"entity.special.arg"],[/\&/,"operator"],[/\/(?!\ )(?=([^\\\/]|\\.)+\/)/,{token:"regexp.slash",bracket:"@open",next:"@regexp"}],[/}/,{cases:{"$S2==interpolatedstring":{token:"string",next:"@pop"},"@default":"@brackets"}}],[/[\{\}\(\)\[\]]/,"@brackets"],{include:"@operators"},{include:"@number"},[/[,]/,"delimiter.comma"],[/[.]/,"delimiter.dot"],[/"""/,"string",'@herestring."""'],[/'''/,"string","@herestring.'''"],[/"/,{cases:{"@eos":"string","@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}],[/`/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.`"}}}]],js_comment:[[/###/,{token:"comment",next:"@pop",nextEmbedded:"@pop"}]],style_comment:[[/###/,{token:"comment",next:"@pop",nextEmbedded:"@pop"}]],string_start:[[/"""/,"string",'@herestring."""'],[/'''/,"string","@herestring.'''"],[/"/,{cases:{"@eos":"string","@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}],[/`/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.`"}}}]],value:[{include:"string_start"},{include:"@number"}],unspaced_expr:[[/([a-z]\w*)(\:)(?=\w)/,{cases:{"this:":["variable.predefined.this","delimiter.access"],"self:":["variable.predefined.self","delimiter.access"],"@default":["identifier","delimiter.access"]}}],[/(@ivar)(\:)(?=\w)/,[o.ivar,o.access]],[/(@constant)(\:)(?=\w)/,[o.constant,o.access]]],number:[[/\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d+\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/0[0-7]+(?!\d)/,"number.octal"],[/\d+/,"number"]],operators:[[/@symbols/,{cases:{"@operators":"operator","@math":"operator.math","@logic":"operator.logic","@dot":"operator.dot","@default":"delimiter"}}],[/\&\b/,"operator"]],whitespace:[[/[ \t\r\n]+/,"white"]],comments:[[/###/,"comment","@comment"],[/#(\s.*)?$/,"comment"]],tag:[[/\<\>/,{token:"tag.empty"}],[/(<)([a-z][a-z\-\d]*(?:\:[A-Za-z\-\d]+)?)/,["tag.open",{token:"tag.name.tag-$2",next:"@tag_start"}]],[/(<)([A-Z][A-Za-z\-\d]*)/,["tag.open",{token:"tag.name.local",next:"@tag_start"}]],[/(<)(?=[a-z\d\#\.\{\@])/,{token:"tag.open",next:"@tag_start"}]],tag_singleton_ref:[[/\#(-*[a-zA-Z][\w\-]*)+/,"tag.singleton.ref"]],tag_parts:[[/\#(-*[a-zA-Z][\w\-]*)/,"tag.id"],[/\.(-*[a-zA-Z][\w\-]*)/,"tag.class"],[/\@(-*[a-zA-Z][\w\-]*)/,"tag.iref"],[/[\#\.\@]\{/,{token:"tag.interpolated.open",next:"@tag_inter"}]],tag_start:[[/[ \t\r\n]+/,{token:"white",switchTo:"@tag_content"}],{include:"tag_parts"},[/\[/,{token:"tag.data.open",next:"@tag_data"}],[/[\=\-]?\>/,{token:"tag.close",next:"@pop"}]],tag_inter:[["}",{token:"tag.interpolated.close",next:"@pop"}],{include:"body"}],tag_data:[["]",{token:"tag.data.close",next:"@pop"}],{include:"body"}],tag_content:[[/(\:[a-zA-Z][\w\-]*)((?:\.[a-zA-Z][\w\-]*)+)/,["tag.attribute.listener","tag.attribute.modifier"]],[/(\:[a-zA-Z][\w\-]*)/,{token:"tag.attribute.listener"}],[/([a-zA-Z\-][\w\-]*(\:[a-zA-Z][\w\-]*)?)/,{token:"tag.attribute.name"}],{include:"tag_parts"},{include:"@whitespace"},[/[\=\-]?\>/,{token:"tag.close",next:"@pop"}],[/(\=)\s*/,{token:"delimiter.eq.tag",next:"@tag_attr_value"}],[/\(/,{token:"paren.open.tag",next:"@tag_parens"}]],tag_attr_value:[[/(?=(\:?[\w]+\=))/,{token:"",next:"@pop"}],[/(?=(\>|\s))/,{token:"",next:"@pop"}],[/\(/,{token:"paren.open",next:"@parens"}],[/\{/,{token:"brace.open",next:"@braces"}],[/\[/,{token:"bracket.open",next:"@brackets"}],{include:"body"}],tag_parens:[[/\)/,{token:"paren.close.tag",next:"@pop"}],[/(\))(\:?)/,["paren.close.tag","delimiter.colon"],"@pop"],{include:"body"}],importstart:[[/^./,{token:"@rematch",next:"@pop"}],[/(from|as)/,{token:"keyword.$1"}],[/[\{\}\,]/,{token:"keyword"}],[/"""/,"string",'@herestring."""'],[/'''/,"string","@herestring.'''"],[/"/,{cases:{"@eos":"string","@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}],[/[a-z_A-Z][A-Za-z\d\-\_]*/,{token:"identifier.import"}]],parens:[[/\)/,{token:"paren.close",next:"@pop"}],[/(\))(\:?)/,["paren.close","delimiter.colon"],"@pop"],{include:"body"}],braces:[["}",{token:"brace.close",next:"@pop"}],{include:"body"}],brackets:[["]",{token:"bracket.close",next:"@pop"}],{include:"body"}],declstart:[[/^./,{token:"@rematch",next:"@pop"}],[/[A-Z][A-Za-z\d\-\_]*/,{token:"identifier.decl.$S2"}],[/\./,{token:"delimiter.dot"}],[/[a-z_][A-Za-z\d\-\_]*/,{token:"identifier.decl.$S2"}],[/[ \t\<\>]+/,"operator.inherits string"]],defstart:[[/(self)\./,{token:"identifier.decl.def.self"}],[/@methodName/,{token:"identifier.decl.def",next:"@pop"}],[/^./,{token:"@rematch",next:"@pop"}]],propstart:[[/@identifier/,{token:"identifier.decl.$S2",next:"@pop"}],[/^./,{token:"@rematch",next:"@pop"}]],string:[[/[^"'`\{\\]+/,"string"],[/@escapes/,"string.escape"],[/\./,"string.escape.invalid"],[/\./,"string.escape.invalid"],[/\{/,{cases:{'$S2=="':{token:"string",next:"root.interpolatedstring"},"$S2==`":{token:"string",next:"root.interpolatedstring"},"@default":"string"}}],[/["'\`]/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}],[/#/,"string"]],herestring:[[/("""|''')/,{cases:{"$1==$S2":{token:"string",next:"@pop"},"@default":"string"}}],[/[^#\\'"\{]+/,"string"],[/['"]+/,"string"],[/@escapes/,"string.escape"],[/\./,"string.escape.invalid"],[/\{/,{cases:{'$S2=="""':{token:"string",next:"root.interpolatedstring"},"@default":"string"}}],[/#/,"string"]],comment:[[/[^#]+/,"comment"],[/###/,"comment","@pop"],[/#/,"comment"]],hereregexp:[[/[^\\\/#]/,"regexp"],[/\\./,"regexp"],[/#.*$/,"comment"],["///[igm]*",{token:"regexp",next:"@pop"}],[/\//,"regexp"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],["/",{token:"regexp.slash",bracket:"@close"},"@pop"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"regexp.escape.control","@pop"]]}}},function(t,e,i){var n=i(0)
var r=i(20).ScrimbaGesture
function o(){o.prototype.__super__.constructor.apply(this,arguments)
this.touch().capture()
this._vp=this.target().data().space().layout().viewport()
this._layout=this._options.layout.clone()
this._left=this._layout[0]
this._top=this._layout[1]
this._width=this._layout[2]
this._height=this._layout[3]
this._tracker=this.target().data().space().pointerTracker()
this._ax=0
this._ay=0
this}n.subclass(o,r)
e.LayoutGesture=o
o.prototype.box=function(t){return this._box}
o.prototype.setBox=function(t){this._box=t
return this}
o.prototype.layout=function(t){return this._layout}
o.prototype.setLayout=function(t){this._layout=t
return this}
o.prototype.top=function(t){return this._top}
o.prototype.setTop=function(t){this._top=t
return this}
o.prototype.left=function(t){return this._left}
o.prototype.setLeft=function(t){this._left=t
return this}
o.prototype.width=function(t){return this._width}
o.prototype.setWidth=function(t){this._width=t
return this}
o.prototype.height=function(t){return this._height}
o.prototype.setHeight=function(t){this._height=t
return this}
o.prototype.vp=function(t){return this._vp}
o.prototype.setVp=function(t){this._vp=t
return this}
o.prototype.ax=function(t){return this._ax}
o.prototype.setAx=function(t){this._ax=t
return this}
o.prototype.ay=function(t){return this._ay}
o.prototype.setAy=function(t){this._ay=t
return this}
o.prototype.onresizestart=function(){var t
var e=this.options()
var i=this.target().dom().getBoundingClientRect()
var n=this.x()-i.left
var r=this.y()-i.top
if(e.l||e.r||e.b||e.t){if(e.l){this.setAx(-1)}else if(e.r){this.setAx(1)}if(e.b){this.setAy(1)}else if(e.t){this.setAy(-1)}}else{if(n>i.width-20){this.setAx(1)}else if(n<20){this.setAx(-1)}if(r>i.height-20){this.setAy(1)}else if(r<20){this.setAy(-1)}}return(t=this.target())&&t.onresizestart&&t.onresizestart(this)}
o.prototype.onstart=function(t){if(this._tracker){this._prevTargetLock=this._tracker.lockedOnTarget()
this._tracker.setLockedOnTarget(this._tracker.targetForElement(this.target().dom()))}return o.prototype.__super__.onstart.apply(this,arguments)}
o.prototype.teardown=function(){if(this._tracker){this._tracker.setLockedOnTarget(this._prevTargetLock)}return o.prototype.__super__.teardown.apply(this,arguments)}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(34).LongPromise
var s=["audio/ogg; codecs=opus;","audio/webm; codecs=opus;","audio/opus"]
var a=i(29).AudioManager
function u(t){if(t===undefined)t={}
this._options=t
this._space=t.space
this._constraints=t.constraints
this._chunkSize=60*8
this._frameSize=this.api().ua().isChrome()?60:20
this._audioBitRate=t.audioBitsPerSecond||48e3
this._size=0
this._chunks=[]
this._warnings=[]
this._timecodes=[]
this._startPromise=new o
this._donePromise=new o
this._state="init"
this._timecodeDuration=0
if(window.MediaRecorder){for(let t=0,e=s.length,i;t<e;t++){i=s[t]
if(MediaRecorder.isTypeSupported(i)){this._mimeType=i
this._ext=i.match(/\/(\w+)/)[1]}}}this}e.MediaRecording=u
u.prototype.size=function(t){return this._size}
u.prototype.setSize=function(t){this._size=t
return this}
u.prototype.warnings=function(t){return this._warnings}
u.prototype.setWarnings=function(t){this._warnings=t
return this}
u.prototype.stream=function(t){return this._stream}
u.prototype.setStream=function(t){this._stream=t
return this}
u.prototype.options=function(t){return this._options}
u.prototype.setOptions=function(t){this._options=t
return this}
u.prototype.state=function(t){return this._state}
u.prototype.setState=function(t){this._state=t
return this}
u.prototype.audio=function(t){return this._audio}
u.prototype.setAudio=function(t){this._audio=t
return this}
u.prototype.space=function(t){return this._space}
u.prototype.setSpace=function(t){this._space=t
return this}
u.prototype.mimeType=function(t){return this._mimeType}
u.prototype.setMimeType=function(t){this._mimeType=t
return this}
u.prototype.chunkSize=function(t){return this._chunkSize}
u.prototype.setChunkSize=function(t){this._chunkSize=t
return this}
u.prototype.audioBitRate=function(t){return this._audioBitRate}
u.prototype.setAudioBitRate=function(t){this._audioBitRate=t
return this}
u.prototype.error=function(t){return this._error}
u.prototype.setError=function(t){this._error=t
return this}
u.prototype.startAt=function(t){return this._startAt}
u.prototype.setStartAt=function(t){this._startAt=t
return this}
u.prototype.startedAt=function(t){return this._startedAt}
u.prototype.setStartedAt=function(t){this._startedAt=t
return this}
u.prototype.stopAt=function(t){return this._stopAt}
u.prototype.setStopAt=function(t){this._stopAt=t
return this}
u.prototype.stoppedAt=function(t){return this._stoppedAt}
u.prototype.setStoppedAt=function(t){this._stoppedAt=t
return this}
u.prototype.manager=function(){return a.instance()}
u.prototype.api=function(){return App.api()}
u.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.api()).log.apply(t,[].concat(["media"],Array.from(n)))}
u.prototype.proxy=function(t,e){this.setState(this._recorder.state)
if(this["onrec"+t]){return this["onrec"+t](e)}}
u.prototype.setup=function(){var t=this
return t._setupPromise||(t._setupPromise=new Promise(function(e,i){t._state="setup"
var n=function(i){t.setStream(i)
return setTimeout(function(){t._state="ready"
return e(t)},500)}
var r=function(e){t.log("error!!!",e)
t._error=e
t.setState("error")
return i(e)}
return window.navigator.mediaDevices.getUserMedia({video:false,audio:t._constraints}).then(n,r)}))}
u.prototype.start=async function(){var t=this
if(t._startAt){return t._startPromise}t._startAt=Date.now()
let e=await t.setup()
if(t._error){t._startPromise.resolve(t)
return}t._state="starting"
var i=t._audioBitRate
if(t._space){let e=t.api().db().files().generateId()
t._model=t.api().db().files().build({id:e+"."+t._ext,uid:t.api().uid(),cid:t._space&&t._space.id(),type:t.mimeType(),state:"streaming",size:0,metadata:{constraints:t._constraints,chunkSize:t._chunkSize,bitsPerSecond:i,mimeType:t.mimeType()}})
t._writer=t._model.createWriteStream(t.space().api())}var n={mimeType:t._mimeType,audioBitsPerSecond:i}
t._recorder=new MediaRecorder(t.stream(),n)
t._recorder.audioChannels=1;["start","stop","error","dataavailable","pause","resume"].map(function(e){return t._recorder["on"+e]=function(i){return t.proxy(e,i)}})
t._startAt=Date.now()
t._recorder.start(t._chunkSize)
window.MRI=t
return t._startPromise}
u.prototype.stop=function(){if(this._requestedStop){return this}this._requestedStop=true
this._stopAt=Date.now()
this._recorder.stop()
return this._donePromise}
u.prototype.warn=function(t){console.warn(t)
return this}
u.prototype.check=function(){if(!this._lastChunkAt){return}var t=Date.now()-this._lastChunkAt
if(t>this._chunkSize*4){this._warn=true
this.warn("no audio received in the last "+t+"ms")}else{if(this._warn){console.log("got back!!")
this._warn=false}}return this}
u.prototype.duration=function(){if(this._duration){return this._duration}else if(this._stoppedAt){return this._stoppedAt-this._startedAt}else if(this._stopAt){return this._stopAt-this._startedAt}else if(this._startedAt){return Date.now()-this._startedAt}else{return 0}}
u.prototype.onrecstart=function(t){var e=this
e._checker=setInterval(function(){return e.check()},e._chunkSize)
e._startedAt=Date.now()
e.log("recstart",e._startedAt-e._startAt)
setTimeout(function(){if(!r(e._chunks)){return console.warn("something wrong with recording?! Timed out")}},5e3)
e._startPromise.resolve(e)
return e}
u.prototype.onrecstop=function(t){var e=this
clearInterval(e._checker)
e._stoppedAt=Date.now()
let i=e.duration()%e._frameSize
e._calcDuration=e._stoppedAt-e._startedAt
if(e.api().ua().isChrome()){e._calcDuration-=i}e._duration=e._calcDuration
e.log("recstop",e._duration,i)
e.finalize()
setTimeout(function(){return e.teardown()},200)
return e}
u.prototype.onrecdataavailable=function(t){if(this._stoppedAt){console.error("Received audio-data after stopping")}let e=r(this._chunks)
this._chunks.push(t.data)
this._size+=t.data.size
let i=Date.now()
let n=t.timecode||0
this._timecodes.push(n)
let o=this._lastTimecode?n-this._lastTimecode:0
this.log("audiochunk",t.data.size,this._size,i-(this._lastChunkAt||i),o,n)
if(e==0){this._timecodeDuration=i-this._startAt}else{this._timecodeDuration+=o}this._lastTimecode=n
this._lastChunkAt=i
this._firstChunkAt||(this._firstChunkAt=this._lastChunkAt)
this._writer&&this._writer.write(t.data,this.api())
return this}
u.prototype.onrecerror=function(t){this.log("ERROR",t)
console.error(t)
if(!this._error){this._error=t
this.setState("error")
this._donePromise.resolve(this._error)}return this}
u.prototype.finalize=async function(){var t=this
var e=t._blob||(t._blob=new Blob(t._chunks,{type:t.mimeType()}))
var i=!window.DEBUG_AUDIO&&!t._options.debug
await(t._writer&&t._writer.close(e))
try{if(i&&t.api().localStore().get("calcRecDuration")){console.log("trusting the calculated duration")
t._donePromise.resolve(t)
return t}t._audioBuffer=await t.manager().audioBufferFromBlob(e)
t.log("response from buffer",t._audioBuffer.duration)
t._bufferDuration=t._audioBuffer.duration*1e3
t._duration=t._bufferDuration
if(Math.abs(t._bufferDuration-t._calcDuration)<3){console.log("calculated duration is correct",t._bufferDuration-t._calcDuration)
t.api().localStore().set("calcRecDuration",1)}else{t.api().localStore().del("calcRecDuration")}if(i){t._donePromise.resolve(t)
return t}return t.manager().durationForAudioElement(t.audio(),t.duration()).then(function(e){t.log("duration according to manager",e)
t._blobDuration=Math.round(e)
if(Math.abs(t._blobDuration-t._duration)>1e3){t.setError("Duration mismatch from audio recording")
App.uxa().flash("Duration mismatch from audio recording")}return t._donePromise.resolve(t)})}catch(t){}}
u.prototype.audio=function(){if(this._audio||!this._stoppedAt){return this._audio}var t=this._blob||new Blob(this._chunks,{type:this.mimeType()})
var e=APB=this._audio=new Audio
e.src=URL.createObjectURL(t)
e.controls=true
e.load()
return this._audio}
u.prototype.play=function(){this.audio().currentTime=0
this.audio().play()
return this}
u.prototype.upload=function(){if(!this._model){let t=this.api().db().files().generateId()
this._model=this.api().db().files().build({id:t+"."+this._ext,uid:this.api().uid(),cid:window.SP.id(),type:this.mimeType(),state:"streaming",size:0,metadata:{constraints:this._constraints,chunkSize:this._chunkSize,bitsPerSecond:this._audioBitRate,mimeType:this.mimeType()}})
this._writer=this._model.createWriteStream(this.api())
for(let t=0,e=n(this._chunks),i=e.length;t<i;t++){this._writer.write(e[t],this.api())}this._writer.close()}return this._model.upload()}
u.prototype.discard=function(){return this}
u.prototype.teardown=function(){if(this._stream){for(let t=0,e=n(this._stream.getAudioTracks()),i=e.length,r;t<i;t++){r=e[t]
window.MTR=r
let i=r.getConstraints()
window.CTR=i
r.stop()}this._stream=null}return this}},function(t,e,i){var n=i(0)
var r=i(20).ScrimbaGesture
function o(){o.prototype.__super__.constructor.apply(this,arguments)
this.touch().capture()
this}n.subclass(o,r)
e.WindowGesture=o
o.prototype.box=function(t){return this._box}
o.prototype.setBox=function(t){this._box=t
return this}
o.prototype.getLayout=function(t){if(t===undefined)t=this.target()
var e=t.dom()
return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}
o.prototype.onstart=function(){this._box=this.target().dom().getBoundingClientRect()
this._outer=this.target().dom().offsetParent.getBoundingClientRect()
this._layout=this.getLayout()
o.prototype.__super__.onstart.apply(this,arguments)
return this}
o.prototype.onmoveupdate=function(t){var e=Math.max(-(this._box.top-34),this.dy())
if(this.options().noTranslate){this.target().css({left:this._layout.left+this.dx(),top:this._layout.top+e})}else{this.target().css({transform:"translate("+this.dx()+"px,"+e+"px)"})}return this}
o.prototype.onmoveend=function(){var t,e
var i=this.target().dom().offsetTop
var n=this.target().dom().offsetLeft
var r=Math.max(-(this._box.top-34),this.dy())
this._layout.top+=r
this._layout.left+=this.dx()
this.target().css({transform:"none",top:this._layout.top,left:this._layout.left,right:"auto",bottom:"auto"});(t=this.target())&&t.onmove&&t.onmove(this,this.getLayout());(e=this.target())&&e.onmoveend&&e.onmoveend(this)
return this}
o.prototype.onresizestart=function(){var t=this.getLayout()
this.target().css({transform:"none",top:t.top,left:t.left,right:"auto",bottom:"auto"})
return this}
o.prototype.onresizeupdate=function(){var t
var e=this.options()
var i=this._layout
if(e.l){this.target().css({left:i.left+this.dx(),width:i.width-this.dx()})}if(e.r){this.target().css({width:i.width+this.dx()})}if(e.b){this.target().css({height:i.height+this.dy()})}if(e.t){this.target().css({top:i.top+this.dy(),height:i.height-this.dy()})}(t=this.target())&&t.onresize&&t.onresize(this,this.getLayout())
return this}
o.prototype.onresizeend=function(){var t
var e=this.getLayout()
e.width=Math.min(e.width,window.innerWidth)
e.height=Math.min(e.height,window.innerHeight-20)
this.target().css(e);(t=this.target())&&t.onresize&&t.onresize(this,e)
return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createElement
var s=i(12)
var a=i(21).InterfaceView
var u=i(45),c=u.TimelineCues,p=u.Segment
var l=i(20).ScrimbaGesture
var h=i(72).WindowGesture
var d=i(175),f=d.TimelineOverview,m=d.TimelineRegionCanvas
var y=i(1),g=y.Button,v=y.IconButton
var _=i(39)
var b={clipColors:["#977f9e","#7f939e","#7f9e89","#9e8a7f","#9e7f85"],cutColor:"#e4e3e3",bgColor:"#f0f1f1",actionsHeight:4,waveAnchorY:.5,renderTimeTicks:true,renderCollapsed:true,log:true}
var x={clipColors:["#BF94CA"],cutColor:"#D6D6D6",bgColor:"#ffffff",actionsHeight:2,tickFontSize:8,waveAnchorY:.5,renderCollapsed:true,minimap:true}
var w=r.defineTag("BrushupView",a,function(t){t.prototype.__pxps={default:60,watch:"pxpsDidSet",name:"pxps"}
t.prototype.pxps=function(t){return this._pxps}
t.prototype.setPxps=function(t){var e=this.pxps()
if(t!=e){this._pxps=t}if(t!=e){this.pxpsDidSet&&this.pxpsDidSet(t,e,this.__pxps)}return this}
t.prototype._pxps=60
t.prototype.__currentSegment={watch:"currentSegmentDidSet",name:"currentSegment"}
t.prototype.currentSegment=function(t){return this._currentSegment}
t.prototype.setCurrentSegment=function(t){var e=this.currentSegment()
if(t!=e){this._currentSegment=t}if(t!=e){this.currentSegmentDidSet&&this.currentSegmentDidSet(t,e,this.__currentSegment)}return this}
t.prototype.__showCollapsed={default:true,watch:"showCollapsedDidSet",name:"showCollapsed"}
t.prototype.showCollapsed=function(t){return this._showCollapsed}
t.prototype.setShowCollapsed=function(t){var e=this.showCollapsed()
if(t!=e){this._showCollapsed=t}if(t!=e){this.showCollapsedDidSet&&this.showCollapsedDidSet(t,e,this.__showCollapsed)}return this}
t.prototype._showCollapsed=true
t.prototype.viewRange=function(t){return this._viewRange}
t.prototype.setViewRange=function(t){this._viewRange=t
return this}
t.prototype.timeline=function(){return this.data().timeline()}
t.prototype.branch=function(){return this.data().branch()}
t.prototype.space=function(){return this.data().space()}
t.prototype.hide=function(){return this.unflag("on")}
t.prototype.show=function(){return this.flag("on")}
t.prototype.recording=function(){return this.data().recording()}
t.prototype.shouldHide=function(){return false}
t.prototype.ondblclick=function(t){return t.halt()}
t.prototype.dispose=function(){var t=this
t.unschedule()
t.render=function(){return t}
return t}
t.prototype.version=function(){return this._version}
t.prototype.trim=function(){var t=this.data().branch().currentOffset()
var e=this.data().timeline().currentTime()
if(window.confirm("Are you sure you want to remove everything after "+s.msToStr(e)+"? This action cannot be undone")){return this.data().branch().trimToTimeOffset(t)}}
t.prototype.currentOffset=function(){return this.timeline().currentOffset()}
t.prototype.cues=function(){return this.timeline().cues()}
t.prototype.setup=function(){var t=this
t.dom().tabIndex=-1
t._version=0
t._zoomLevels=[12,30,60,120,180,240]
t._width=1e3
t._viewRange=new p([0,0,t._width/t.pxps()*1e3],t)
t.onplaying=t.onplaying.bind(t)
t.onpaused=t.onpaused.bind(t)
t._shortcuts=new _(t.dom())
t._shortcuts.bind(["space"],function(e){e.stopPropagation()
return t.togglePlay()})
t._shortcuts.bind(["backspace"],function(e){e.stopPropagation()
if(t.currentSegment()){return t.trigger("segdel",t.currentSegment())}})
return t}
t.prototype.syncViewRange=function(t){return this}
t.prototype.playheadIsInView=function(){return this.offsetIsInView(this.currentOffset())}
t.prototype.offsetIsInView=function(t,e){if(e===undefined)e=0
let i=this._zoomed.offset2px(t)
return i>=0&&this._zoomed.vw()-e>=i}
t.prototype.togglePlay=function(){if(this.timeline().isPlaying()){this.timeline().pause()
this._autoFollowPlayhead=false}else{this.timeline().play()
this._autoFollowPlayhead=this.playheadIsInView()}return this}
t.prototype.currentSegmentDidSet=function(t,e){if(t){t._selected=true}if(e){return e._selected=false}}
t.prototype.pxpsDidSet=function(t,e){let i=this.viewRange().anchor(.5)
this.viewRange().setSpan(Math.round(this.dom().offsetWidth/this.pxps()*1e3))
return this.viewRange().moveTo(i,.5)}
t.prototype.onchange=function(t){var e
t.halt()
return this.setPxps(this._zoomLevels[e=t.target().value()]),this._zoomLevels[e]}
t.prototype.onshowrange=function(t,e){t.halt()
if(e.start){this.viewRange().moveTo(e.start,0)
this._autoFollowPlayhead=false}return this.dirty()}
t.prototype.onzoom=function(t,e){let i=0
let n=e.scale/this.pxps()
if(e.anchorTime){i=(e.anchorTime-this.viewRange().start())/this.viewRange().span()}this.setPxps(Math.round(Math.max(10,e.scale)))
if(e.anchorTime){this.viewRange().moveTo(Math.round(e.anchorTime),i)}return this.dirty()}
t.prototype.onseek=function(t,e){t.halt()
let i=e.offset
this.timeline().seek(i)
if(this.timeline().loopSegment()&&!this.timeline().loopSegment().contains(i)){this.timeline().setLoopSegment(null)}if(t.target()==this._overview){this._zoomed.setStartOffset(i)
let t=this._zoomed.val2offset(this._zoomed.px2val(this._zoomed.vw()*-.5))
return this.viewRange().moveTo(Math.max(t,0),0)}}
t.prototype.onsegsel=function(t,e){t.halt()
return this.setCurrentSegment(e),e}
t.prototype.onsegdel=function(t,e){var i
if(e==this.currentSegment()){this.setCurrentSegment(null)}this.cues().removeCue(e)
this.trigger("autosave")
if(e==this.timeline().loopSegment()){this.timeline().setLoopSegment(null)}if(e==this._zoomed.markedRange()){return this._zoomed.setMarkedRange(null),null}}
t.prototype.onfinish=function(t){t.halt()
return this.timeline().space().view().trigger("brushupstop")}
t.prototype.onplaying=function(t){return this._autoFollowPlayhead=this.playheadIsInView()}
t.prototype.onpaused=function(t){return this._autoFollowPlayhead=false}
t.prototype.dirty=function(){return this._version++}
t.prototype.mount=function(){var t
this._prevSpaceSize=this.space().view().size()
this._savedVersion=this.cues()._version
this._savedCueData=JSON.stringify(this.cues()._data)
this.schedule({raf:true,events:false})
this.space().on("playing",this.onplaying)
this.space().on("paused",this.onpaused)
if(this.space().view().size()=="auto"){return this.space().view().setSize(t="desktop"),t}}
t.prototype.unmount=function(){this.unschedule()
if(this.space().view().size()=="desktop"){this.space().view().setSize(this._prevSpaceSize)}this.space().un("playing",this.onplaying)
return this.space().un("paused",this.onpaused)}
t.prototype.onautosave=function(t){return this.autosave()}
t.prototype.autosave=function(){var t=this
if(t._savedVersion!=t.cues()._version){clearTimeout(t._autosaver)
t._savedVersion=t.cues()._version
return t._autosaver=setTimeout(function(){return t.save()},1e3)}}
t.prototype.save=function(){if(JSON.stringify(this.cues()._data)!=this._savedCueData){this._savedCueData=JSON.stringify(this.cues()._data)
console.log("saving")
this.timeline().branch().model().save({draft:this.cues()._data})}return this}
t.prototype.ontouchstart=function(t){if(!this.hasFlag("abs")){return}let e=h.options(t)
if(e.type=="move"){return h.wrap(t,e)}else if(e.type=="resize"){return h.wrap(t,e)}}
t.prototype.ontouchend=function(t){return this}
t.prototype.toggleCollapsed=function(){this.setShowCollapsed(!this.showCollapsed())
b.renderCollapsed=!b.renderCollapsed
x.renderCollapsed=!x.renderCollapsed
return this}
t.prototype.render=function(){var t=this.$,e
this._viewRange.setSpan(Math.round(this.dom().offsetWidth*1e3/this.pxps()))
let i=this.cues().endOffset()
let s=this.currentOffset()
if(r.Touch.count()==0&&l.Active.length==0){this.autosave()}if(this._zoomed&&this._autoFollowPlayhead&&this.timeline().isPlaying()){let t=this.timeline().loopSegment()
if(t){if(s>t.end()){this.timeline().seek(s=t.start())}}else if(n(l.Active)==0){let t=this._zoomed.offset2px(s)
if(t<10||t>this._zoomed.vw()-10){let e=this._zoomed.val2offset(this._zoomed.px2val(t-20))
this.viewRange().moveTo(e,0)}}}this._prevOffset=s
return this.$open(0).setChildren(t.$=t.$||[o("header",t,0,this).dataset("gesture","move,noTranslate").setContent([o("div",t,1,0).flag("title"),o("div",t,7,0).flag("resizer").dataset("gesture","resize,r")],2),this._zoomed=this._zoomed||o(m,this).flag("zoomed"),e=(e=o("footer",t,8,this)).setContent(this._overview=this._overview||o(f,e).flag("overview"),2)],2).synced((t[0].end((t[1].setContent([(t[2]||o("span",t,2,1).flag("hint").setNestedAttr("uxa","md","*space* to play/pause")).end(),(t[3]||o("span",t,3,1).flag("hint").setNestedAttr("uxa","md","*shift* to mark range")).end(),(t[4]||o("span",t,4,1).flag("hint").setNestedAttr("uxa","md","*alt* to pan")).end(),this.currentSegment()?(t[5]||o("span",t,5,1).flag("hint").setNestedAttr("uxa","md","*â«* to remove segment")).end():void 0,(t[6]||o("span",t,6,1).flag("hint").on$(0,["tap","toggleCollapsed"],this).setNestedAttr("uxa","md","*toggle* collapsed")).end()],1),t[7].end(),true)),this._zoomed.bindData(this,"timeline",[]).setStartOffset(this.viewRange().start()).setPxps(this.pxps()).setCurrentOffset(s).setOptions(b).end(),this._overview.bindData(this,"timeline",[]).setViewRange(this.viewRange()).setCurrentOffset(s).setOptions(x).end(),true))}})
e.BrushupView=w},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField
var u='You can assign specific version with "@", ex. "react@0.14.7" or "react@next"'
var c=n.defineTag("DependencyAddDialog",s,function(t){t.prototype.mount=function(){this.schedule({events:true})
return this._packageName.input().dom().focus()}
t.prototype.space=function(){return this.data()}
t.prototype.submitLabel=function(){return"Add"}
t.prototype.bundle=function(){return this.space().browser().npmPackages()||{resolved:[]}}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h2",e.$,"A",e).setText("Add NPM package"),this._packageName=this._packageName||r(a,e).flag("packageName").setLabel("Package name").setName("query").setPlaceholder("Submit name of package...").setAutocomplete("off")],2)).end((this._packageName.setDesc(u).end(),true))}
t.prototype.onuxasubmit=function(t,e){var i=this
t.prevent().halt()
if(!e.query){return}return i.uxa().queue().add(300,async function(){await i.space().browser().addPackage(e.query)
return i.hide()})}})
e.DependencyAddDialog=c},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagCache,s=r.createElement
var a=i(2),u=a.FILE,c=a.SCON,p=a.DIRTY
var l=i(17).Delay
var h=i(15).Dimensions
var d=i(10)
if(true){var f=i(43)}var m=i(144)
var y=r.defineTag("CodePreview",function(t){t.prototype.file=function(t){return this._file}
t.prototype.setFile=function(t){this._file=t
return this}
t.prototype.__value={watch:"valueDidSet",name:"value"}
t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){var e=this.value()
if(t!=e){this._value=t}if(t!=e){this.valueDidSet&&this.valueDidSet(t,e,this.__value)}return this}
t.prototype.build=function(){var t=($_=this.$).$build$||($_.$build$=o(this))
return this.$open("build0").setChildren(this._code=this._code||s("pre",this).flag("code"),2).synced()}
t.prototype.valueDidSet=function(t){return this._code.dom().innerText=t}
t.prototype.render=function(){if(!this.file()){return}this.setValue(this.file().currentBody())
return this}
t.prototype.setScrollPosition=function(t){if(t.scrollLeft!=undefined){this.dom().scrollLeft=this._scrollLeft=t.scrollLeft}if(t.scrollTop!=undefined){this.dom().scrollTop=this._scrollTop=t.scrollTop}return this}
t.prototype.getScrollTop=function(){return this.dom().scrollTop}
t.prototype.getScrollLeft=function(){return this.dom().scrollLeft}
t.prototype.getScrollWidth=function(){return 0}
t.prototype.getScrollHeight=function(){return 0}})
var g=r.defineTag("EditorView",function(t){t.prototype.layout=function(t){return this._layout}
t.prototype.setLayout=function(t){this._layout=t
return this}
t.prototype.__file={watch:"fileDidSet",name:"file"}
t.prototype.file=function(t){return this._file}
t.prototype.setFile=function(t){var e=this.file()
if(t!=e){this._file=t}if(t!=e){this.fileDidSet&&this.fileDidSet(t,e,this.__file)}return this}
t.prototype.__fontSize={watch:"fontSizeDidSet",name:"fontSize"}
t.prototype.fontSize=function(t){return this._fontSize}
t.prototype.setFontSize=function(t){var e=this.fontSize()
if(t!=e){this._fontSize=t}if(t!=e){this.fontSizeDidSet&&this.fontSizeDidSet(t,e,this.__fontSize)}return this}
t.prototype.__selState={watch:"selStateDidSet",name:"selState"}
t.prototype.selState=function(t){return this._selState}
t.prototype.setSelState=function(t){var e=this.selState()
if(t!=e){this._selState=t}if(t!=e){this.selStateDidSet&&this.selStateDidSet(t,e,this.__selState)}return this}
t.prototype.__scrollState={watch:"scrollStateDidSet",name:"scrollState"}
t.prototype.scrollState=function(t){return this._scrollState}
t.prototype.setScrollState=function(t){var e=this.scrollState()
if(t!=e){this._scrollState=t}if(t!=e){this.scrollStateDidSet&&this.scrollStateDidSet(t,e,this.__scrollState)}return this}
t.prototype.__streamLayout={watch:"streamLayoutDidSet",name:"streamLayout"}
t.prototype.streamLayout=function(t){return this._streamLayout}
t.prototype.setStreamLayout=function(t){var e=this.streamLayout()
if(t!=e){this._streamLayout=t}if(t!=e){this.streamLayoutDidSet&&this.streamLayoutDidSet(t,e,this.__streamLayout)}return this}
t.prototype.__autoScroll={default:true,watch:"autoScrollDidSet",name:"autoScroll"}
t.prototype.autoScroll=function(t){return this._autoScroll}
t.prototype.setAutoScroll=function(t){var e=this.autoScroll()
if(t!=e){this._autoScroll=t}if(t!=e){this.autoScrollDidSet&&this.autoScrollDidSet(t,e,this.__autoScroll)}return this}
t.prototype._autoScroll=true
t.prototype.space=function(){return this.data().space()}
t.prototype.build=function(){this._syncing=false
this._dirty={}
this._bridge=this._preview=s(y).end()
this._layout={}
this._layouter=new l(this,"relayout")
this._scrollTarget={}
this.dom().appendChild(this._preview.dom())
this.dom().appendChild(s("div").flag("left-shadow").dom())
this.dom().appendChild(s("div").flag("top-shadow").dom())
return this}
t.prototype.setup=function(){var t=this
t.data().setView(t)
t.setSref(t.data().id())
t.layoutCodePreview()
t.space().once("dispose",function(){return t.dispose()})
t._v=t.data().options()._v
t.space().on("reflow",function(e){t._top=t._left=t._width=t._height=0
return t.relayout()})
t.space().on("watch",function(){t.log("Space:watch")
return t.setAutoScroll(true),true})
t.space().on("playing",function(){t.log("Space:playing",t.autoScroll())
t.setAutoScroll(true)
return t.space().agent().options().reset("file")})
return t}
t.prototype.posToScreen=function(t,e){return this.data().agentToLocalPoint(t,e)}
t.prototype.batch=function(t){var e=this._syncing
this._syncing=true
t()
this._syncing=e
return this}
t.prototype.mount=function(){var t=this
t._mounted=true
t.load()
t.render()
setTimeout(function(){return t.relayout()},20)
return t}
t.prototype.fontSize=function(){return this.space().view().fontSize()}
t.prototype.unmount=function(){return this}
t.prototype.focus=function(){this.log("called focus")
if(this._editor){return this._editor.focus()}}
t.prototype.onfocus=function(t){if(t.event().target==this){this.log("editor onfocus")
return this._editor.focus()}}
t.prototype.autoScrollDidSet=function(t){if(t){return this.unsyncScroll()}}
t.prototype.getDynamicOptions=function(){var t
var e=this.space().view().fontSize()
var i=this.space().model().pub
return t={renderWhitespace:this.data().renderWhitespace()?"boundary":"none",renderIndentGuides:this.data().renderIndentGuides(),fontSize:this._fontSize=e,lineHeight:this._lineHeight=Math.ceil(this._fontSize*1.5),lineDecorationsWidth:e+4,wordWrapColumn:this.data().wordWrapColumn(),wordWrap:this.data().wordWrap()&&(!i||!i.noWordWrap)?"wordWrapColumn":"off",wrappingIndent:this.data().wrappingIndent()}}
t.prototype.configuration=function(){return this._editor.viewModel.configuration}
t.prototype.fontInfo=function(){return this.configuration().editor.fontInfo}
t.prototype.layoutInfo=function(){return this.configuration().editor.layoutInfo}
t.prototype.leftPadding=function(){var t=this.getDynamicOptions()
return Math.round(t.fontSize*.6*5)+t.lineDecorationsWidth}
t.prototype.top=function(){return this._top||(this._top=this.dom().offsetTop)}
t.prototype.left=function(){return this._left||(this._left=this.dom().offsetLeft)}
t.prototype.width=function(){return this._layout.width||this._width}
t.prototype.height=function(){return this._layout.height||this._height}
t.prototype.contentTop=function(){return 20}
t.prototype.contentLeft=function(){return this._layout.contentLeft||this.leftPadding()}
t.prototype.scrollTop=function(){return this._bridge.getScrollTop()}
t.prototype.scrollLeft=function(){return this._bridge.getScrollLeft()}
t.prototype.lineHeight=function(){return Math.ceil(this._fontSize*1.5)}
t.prototype.setScrollPosition=function(t){let e=this._scrollTarget
if(t.scrollTop!=e.scrollTop||t.scrollLeft!=e.scrollLeft){e.scrollTop=t.scrollTop
e.scrollLeft=t.scrollLeft
this._bridge.setScrollPosition(t)}return this}
t.prototype.setSelections=function(t){if(this._editor){this._monacoSel=f.opToSelections(t)
return this._editor.setSelections(this._monacoSel)}}
t.prototype.layoutCodePreview=function(){return this._preview.css({left:this.contentLeft()+"px",paddingTop:this.contentTop()+"px",fontSize:this.fontSize()+"px",lineHeight:this.lineHeight()+"px"})}
t.prototype.currentCodeAnchor=function(){if(!(this._editor&&this._file)){return}var t=this._editor.getSelection()
var e=this.space().cursor().current()
var i="scrimba://"+e.branch().id()+"@"+e.index()
if(this.file()&&t){let e=t.startLineNumber
let n=t.startColumn
let r=t.endLineNumber
let o=t.endColumn
i+=""+this.file().path()+"#"
i+="L"+e
if(n==1&&o==1){if(r-1>e){i+="-"+(r-1)}}else{i+=":"+n
if(e==r&&n==o){true}else if(o==1){r=r-1
i+="-"+r
if(n!=1){i+=":"+this._editor.model.getLineMaxColumn(r)}}else{i+="-"+r+":"+o}}}return{uri:i,text:this._editor.model.getValueInRange(t)}}
t.prototype.batchEdits=function(t){var e=this
if(!e._editor){return e.batch(t)}e.batch(function(){var i=e._editor.getModel()
var n=e._editor.cursor
if(n){n._isHandling=true}t()
if(n){return n._isHandling=false}})
return e}
t.prototype.render=function(){var t=this
if(!t._mounted){return}t.batch(function(){t.setFile(t.data().currentFile())
t.flagIf("hasAgentFocus",t.file()&&(t.space().agent().focus()==t.file()||t.space().agent().focus()==t.data()))
if(!t.file()){return}if(!t._editor){t._preview.render()}var e=t.file().selState()
if(e!=t.selState()&&t._editor){t.setSelState(e)
if(!e.LOCAL){t.setSelections(e)}}t.syncScroll()
if(t.data().options()._v!=t._v&&t._editor){t._v=t.data().options()._v
t._editor.updateOptions(t.getDynamicOptions())}if(t.file().isLanguageStale()){const e="."+t.file().ext()
const i=monaco.languages.getLanguages()
for(let r=0,o=n(i),s=o.length,a;r<s;r++){a=o[r]
if(a.extensions.includes(e)){monaco.editor.setModelLanguage(t.file().model().model(),a.id)
t.file().syncExtension()
break}}}if(t._editor){t._editor.render()}return t.pushLayout()})
return t}
t.prototype.relayout=function(){var t=this._width||(this._width=this.dom().offsetWidth)
var e=this._height||(this._height=this.dom().offsetHeight)
if(!(t&&this._editor)){return}this._compositingLayout=true
if(this._syncedFontSize!=this.space().view().fontSize()){this._editor.updateOptions(this.getDynamicOptions())
this._syncedFontSize=this.space().view().fontSize()}if(t!=this._syncedWidth||e!=this._syncedHeight){this._syncedWidth=t
this._syncedHeight=e
this._editor.layout({height:e,width:t})}this._compositingLayout=false
return this}
t.prototype.pushLayout=function(){if(!(this.space().isEditing()&&this._editor)){return}this.data().setLeft(this.left())
this.data().setTop(this.top())
this.data().setWidth(this.width())
this.data().setHeight(this.height())
this.data().setContentLeft(this.contentLeft())
this.data().setContentTop(this.contentTop())
this.data().setFontSize(this.fontSize())
this.data().setLineHeight(this.lineHeight())
if(this.file()&&this._editor){this.file().setScrollTop(this._editor.getScrollTop())
this.file().setScrollLeft(this._editor.getScrollLeft())}return this}
t.prototype.syncScroll=function(){if(this.space().isEditing()||!this.autoScroll()){return}var t=this.data().lineHeight()||21
var e=this.file().scrollTop()||0
var i=this.file().scrollLeft()||0
let n=this.data().height()/t
var r=this._monacoSel&&this._monacoSel[0]
var o=null
let s={}
let a=this.height()/this.lineHeight()
let u=a/n
let c=s.scrollTop=Math.round(e*(this.lineHeight()/t))
let p=s.scrollLeft=Math.round(i*(this.fontSize()/(this.data().fontSize()||14)))
let l=this._agentPointerX
let h=this._agentPointerY
let d=this._scrollTarget
if(r&&u<1){let i=this._editor.getTopForLineNumber(r.startLineNumber)
let n=this._editor.getTopForLineNumber(r.endLineNumber)
let o=this._editor.getTopForLineNumber(r.positionLineNumber)
let a=o/this.lineHeight()*t
let u=(a-e)/this.data().height()
let p=(o-c)/this.height()
let l=Math.round(o-this.height()*u)
let d=(1-p)*this.height()
let f=p*this.height()
if(d>this.lineHeight()){true}else{s.scrollTop=l}if(h<s.scrollTop){s.scrollTop=Math.round(h-this.lineHeight())}}this.setScrollPosition(s)
if(e!=this._agentScrollTop){this._agentScrollTop=e}if(i!=this._agentScrollLeft){this._agentScrollLeft=i}return this}
t.prototype.unsyncScroll=function(){return this._agentScrollLeft=this._agentScrollTop=-1}
t.prototype.fileDidSet=function(t,e){var i
this.flag("hasFile",!!t)
if(e){e.setEditor(null),null}this._preview.setFile(t)
if(t){t.setEditor(this),this}this._dirty.file=true
this.flag("binary-file",t&&t.isBinary())
if(!this._editor){return}if(t&&t.isBinary()){t=null}if(this.space().isPlaying()||this.space().isWatching()){this.setAutoScroll(true),true}this.unsyncScroll()
var n=false
if(this._bridge.isFocused()){n=true}if(t){let e=t.model().model()
this._editor.setModel(e)
this._editor.FILE=t
try{this._editor.viewModel.viewLayout._linesLayout.insertWhitespace(0,0,this.contentTop())}catch(t){}if(this.space().isEditing()){this.setScrollPosition({scrollTop:t.scrollTop()||0,scrollLeft:t.scrollLeft()||0})
this.relayout()}else if(!this.autoScroll()&&t._lastScrollPosition){this.log("restore local scrollPosition!")
this.setScrollPosition({scrollTop:t._lastScrollPosition.scrollTop,scrollLeft:t._lastScrollPosition.scrollLeft})}}else{this._editor.setModel(null)}if(t&&t.selState()){this.setSelState(t.selState())
this._editor.render()
this.setSelections(this.selState())}if(n){return this._editor.focus()}}
t.prototype.focusWidgetForNode=function(){return this.data()}
t.prototype.oncopy=function(){var t=f.selectionToArray(this._editor.getSelection())
return this.api().sendTracking(d.TYPES.COPY,[this.space().timeline().currentOffset(),this.file().id(),t])}
t.prototype.oncut=function(){return this.oncopy()}
t.prototype.load=async function(){var t=this
if(t._editor||t._loading){return t}t._loading=true
await f.load()
var e=c.clone(window.MonacoEnvironment.defaults)
for(let i=t.getDynamicOptions(),n,r=0,o=Object.keys(i),s=o.length,a;r<s;r++){a=o[r]
n=i[a]
e[a]=n}t._toDispose=[]
t._timeouts=[]
var i=t._file?t._file.ext():""
var o={logService:console}
monaco.languages.typescript.typescriptDefaults.setEagerModelSync(true)
monaco.languages.typescript.typescriptDefaults.setCompilerOptions({experimentalDecorators:true})
t._editor=monaco.editor.create(t.dom(),e,o)
t._lastCursorSelection=Date.now()
f.patchEditor(t._editor)
t._toDispose.push(t._editor.onDidChangeCursorSelection(function(e){if(t.file()&&!t.space().isSyncing()&&!t._syncing){t.file().model().onDidChangeCursorSelection(e)
t._lastCursorSelection=Date.now()
r.commit(e)}return}))
t._toDispose.push(t._editor.onDidScrollChange(function(e){var i
if(!(t._file&&(e.scrollTopChanged||e.scrollLeftChanged))){return}t.file()._lastScrollPosition=e
t.space().touch("locals")
if(t._syncing||t.space().cursor().syncing()){return}t.setAutoScroll(false)
t.log("scroll",e)
if(t.space().isEditing()){t.file().setScrollTop(e.scrollTop)
return t.file().setScrollLeft(i=e.scrollLeft),i}}))
t._toDispose.push(t._editor.onDidLayoutChange(function(e){t.log("onDidLayoutChange",e)
return t._layout=e}))
t._toDispose.push(t._editor.onDidFocusEditor(function(e){return t.log("onDidFocusEditor")}))
t._toDispose.push(t._editor.onDidBlurEditor(function(e){return t.log("onDidBlurEditor")}))
t._editor.addAction({id:"inline-transpiled-code",label:"Inline transpiled code",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_J],run:function(t){if(!["imba","imba2"].includes(t.model.getModeId())){return}return m.inlineCompiledCode(t.model,t)}})
t._bridge=t._editor
t._layout=t._editor.getLayoutInfo()
if(!t._file){t._editor.setModel(null)}for(let e=0,i=n(t.space().files()),r=i.length;e<r;e++){i[e].model().model()}t.batch(function(){t._agentScrollTop=t._agentScrollLeft=-1
t._scrollTarget={}
if(t._file){return t.fileDidSet(t._file)}})
t.flag("loaded")
t.render()
if(window.performance){console.log("editor loaded",window.performance.now())}return t}
t.prototype.dispose=function(){var t
for(let e=0,i=n(this._toDispose),r=i.length;e<r;e++){(t=i[e])&&t.dispose&&t.dispose()}this._toDispose=null
for(let t=0,e=n(this._timeouts),i=e.length;t<i;t++){clearTimeout(e[t])}this._timeouts=null
this.setFile(null)
window.SE=null
if(this._editor){this._editor.setModel(null)
this._editor.dispose()
try{this._editor.domElement.innerHTML=""}catch(t){}this._editor.domElement=null}if(this._model){this._model.dispose()
this._model=null}this._editor=null
this._dom._tag=null
this._dom.innerHTML=null
this._data.setView(null)
this._data=null
this._owner=null
this._dom.parentNode.removeChild(this._dom)
return this}})
e.EditorView=g},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o={},s=r.createTagList,a=r.createTagMap,u=r.createTagLoopResult,c=r.createElement
var p=i(2),l=p.ACTION,h=p.CAST
var d=i(1),f=d.IconButton,m=d.Icon,y=d.Menu,g=d.MenuItem
var v=i(22),_=v.SidebarPanel,b=v.SidebarEntry
var x=i(53),w=x.readTextFile,T=x.readArrayBuffer,S=x.readFileSystemEntry
var k=h.EXPLORER_PANEL+"$"
var A=r.defineTag("EntryHead",function(t){t.prototype.build=function(){return this.setAttribute("draggable",true)}
t.prototype.ondragstart=function(t){var e=t.event().dataTransfer
return t.event().dataTransfer.setData("scrimba/widget",""+this.data().id())}})
var C=r.defineTag("Entry",b,function(t){t.prototype.__level={default:0,name:"level"}
t.prototype.level=function(t){return this._level}
t.prototype.setLevel=function(t){this._level=t
return this}
t.prototype._level=0
t.prototype.onrename=function(t){t.halt()
var e=window.prompt("Rename",this.name())
this.log("onrename!",e)
return this.data().rename(e)}
t.prototype.ondel=function(t){t.halt()
if(window.confirm("Are you sure you want to delete "+this.data().path()+"?")){return this.data().rm()}}
t.prototype.name=function(){return this.data().name()}
t.prototype.icon=function(){let t=this.$$||(this.$$={})
return(this._icon=this._icon||c("i",this).flag("icon")).setFlag(0,this.data().ext())}
t.prototype.head=function(){let t=this.$$||(this.$$={}),e
let i=this.name().length+this.level()*2>28
let n=this.data().ext()
return(e=this._head=this._head||(e=c(A,this)).flag("head")).bindData(this,"data",[]).setSref(k+this.data().id()).setContent([this.icon(),i?r.static([(e.$.A||c("div",e.$,"A",e).flag("name").flag("long")).setTitle(this.name()).setContent(n?this.name().slice(0,-n.length-1):this.name(),3).end(),(e.$.B||c("div",e.$,"B",e).flag("ext")).setText("."+n)],2,1):(e.$.C||c("div",e.$,"C",e).flag("name")).setContent(this.name(),3)],1).end()}
t.prototype.render=function(){return this.$open(0).setChildren(this.head(),3).synced()}
t.prototype.oncontextmenu=function(t){var e
t.prevent().halt()
return this._head.uxa().open((e=(e=c(y)).flag("dark").flag("narrow").setContent([c(g,e.$,"A",e).setIcon(">").setAction("rename").setLabel("Rename..."),c(g,e.$,"B",e).flag("neg").setIcon("x").setAction("del").setLabel("Delete File")],2)).end((e.$.A.end(),e.$.B.end(),true)))}})
var E=r.defineTag("FileEntry",C,function(t){t.prototype.focusWidgetForNode=function(){return null}
t.prototype.ontap=function(t){var e=this
t.halt()
e.data().space().agent().setFile(e.data())
return setTimeout(function(){if(e.data().space().isEditing()){return e.data().space().view().editor().focus()}},0)}
t.prototype.sontouchstart=function(t){return this}
t.prototype.sontouchend=function(t){return this}
t.prototype.render=function(){this.flag("active",this.data().clientIsShowing())
this.flag("active-agent",this.data().agentIsShowing())
return t.prototype.__super__.render.apply(this,arguments)}})
o.checkBinary=async function(t){var e=await T(t.slice(0,1024))
var i=new Uint8Array(e)
for(let t=0,e=n(i),r=e.length,o;t<r;t++){o=e[t]
if(o==0){return true}}return false}
o.uploadBlob=async function(t){var e=await window.fetch("/blobs",{credentials:"include",method:"POST",body:t,headers:{"Content-Type":"application/octet-stream"}})
var i=await e.json()
return i.id}
var D=1024
var P=1024*D
o.addFileToDirectory=async function(t,e){var i=await o.checkBinary(e)
var n=i?5*P:500*D
if(e.size>n){return}var r={name:e.name}
if(i){r.blobId=await o.uploadBlob(e)}else{r.body=await w(e)}return t.mkfile(r.name,r)}
o.ignoreEntry=function(t){if(r.indexOf(t.name,[".DS_Store","node_modules"])>=0){return true}return false}
var $=async function(t,e){for(let i=0,r=n(e),s=r.length,a;i<s;i++){a=r[i]
if(!!o.ignoreEntry(a)){continue}if(a.isDirectory){let e=t.mkdir(a.name)
a.createReader().readEntries(function(t){return $(e,t)})}else if(a.isFile){let e=await S(a)
await o.addFileToDirectory(t,e)}}return null}
var L=r.defineTag("DirEntry",C,function(t){t.prototype.onnewfile=function(t){var e=this,i
t.stop()
var n=window.prompt("Name file")
if(n){if(i=e.data().mkfile(n)){e.data().space().agent().setFile(i)
return setTimeout(function(){return e.data().space().view().editor().focus()},0)}}}
t.prototype.onnewdir=function(t){t.stop()
var e=window.prompt("Name directory")
if(e){return this.data().mkdir(e)}}
t.prototype.toggle=function(t){var e
return this.data().setExpanded(e=!this.data().expanded()),e}
t.prototype.ontap=function(t){t.stop()
return this.toggle()}
t.prototype.entries=function(){return this.data().entries().toArray().slice().sort(function(t,e){return t.TYPE==e.TYPE?t.name()>e.name()?1:-1:t.TYPE=="dir"?-1:1})}
t.prototype.oncontextmenu=function(t){var e
t.prevent().stop()
return this._head.uxa().open((e=(e=c(y)).flag("dark").flag("narrow").setContent([c(g,e.$,"A",e).setIcon(">").setAction("newfile").setLabel("New File"),c(g,e.$,"B",e).setIcon(">").setAction("rename").setLabel("Rename..."),c("hr",e.$,"C",e),c(g,e.$,"D",e).setIcon(">").setAction("newdir").setLabel("New Folder..."),c(g,e.$,"E",e).flag("neg").setIcon("x").setAction("del").setLabel("Delete Folder")],2)).end((e.$.A.end(),e.$.B.end(),e.$.D.end(),e.$.E.end(),true)))}
t.prototype.head=function(){let t=this.$$||(this.$$={}),e
return(e=this._head=this._head||(e=c(A,this)).flag("head").setContent([this._icon=this._icon||c("i",e).flag("icon").flag("folder").flag("toggler"),c("div",e.$,"A",e).flag("name")],2)).bindData(this,"data",[]).setSref(k+this.data().id()).end((e.$.A.setContent(this.data().name(),3),true))}
t.prototype.body=function(){var t=this.$$||(this.$$={}),e=this,i
return(i=e._body=e._body||(i=c("div",e)).flag("body")).setFlag(0,"l"+e.level()).setContent(function t(i,r,o){for(let t=0,s=n(e.entries()),a=s.length,u;t<a;t++){u=s[t]
if(u.TYPE=="file"){o.push((i[t]||c(E,i,t)).setData(u).setLevel(e._level+1).end())}else{o.push((r[t]||c(L,r,t)).setData(u).setLevel(e._level+1).end())}}return o}(i.$["A"]||a(i.$,"A",e._body),i.$["B"]||a(i.$,"B",e._body),u()),5)}
t.prototype.render=function(){return this.$open(0).flagIf("expanded",this.data().expanded()).setChildren([this.head(),this.data().expanded()?this.body():void 0],1).synced()}})
var O=r.defineTag("RootEntry",L,function(t){t.prototype.name=function(){return"Workspace"}
t.prototype.ontap=function(t){return t.halt()}})
var M=r.defineTag("ExplorerView",_,function(t){t.prototype.__droptarget={watch:"droptargetDidSet",name:"droptarget"}
t.prototype.droptarget=function(t){return this._droptarget}
t.prototype.setDroptarget=function(t){var e=this.droptarget()
if(t!=e){this._droptarget=t}if(t!=e){this.droptargetDidSet&&this.droptargetDidSet(t,e,this.__droptarget)}return this}
t.prototype.oncontextmenu=function(t){t.prevent().stop()
return this.showMenu()}
t.prototype.showMenu=function(){var t
return this._header.uxa().open((t=(t=c(y)).flag("dark").flag("narrow").setContent([c(g,t.$,"A",t).setIcon("+").setAction("newfile").setLabel("New File"),c(g,t.$,"B",t).setIcon("+").setAction("newdir").setLabel("New Folder"),c("hr",t.$,"C",t),c(g,t.$,"D",t).setIcon(">").setAction("spacezip").setLabel("Download .zip")],2)).end((t.$.A.end(),t.$.B.end(),t.$.D.end(),true)))}
t.prototype.onnewfile=function(t){t.stop()
var e=window.prompt("Name file")
if(e){return this.space().fs().mkfile(e)}}
t.prototype.onnewdir=function(t){t.stop()
var e=window.prompt("Name directory")
if(e){return this.space().fs().mkdir(e)}}
t.prototype.ondragenter=function(t){var e
t.prevent().stop()
try{var i=t.event().target.closest(".DirEntry")
return this.setDroptarget(e=i?i._tag:this._main),e}catch(t){}}
t.prototype.ondragover=function(t){return t.prevent().stop()}
t.prototype.ondragleave=function(t){var e
t.prevent().stop()
if(!this.dom().contains(t.event().relatedTarget)){return this.setDroptarget(null),null}}
t.prototype.ondrop=async function(t){var e=this
if(!e.droptarget()){return}var i=t.event().dataTransfer
var r=e.droptarget()
t.prevent().stop()
e.setDroptarget(null)
var o=[]
var s=[]
var a=null
o=[]
for(let t=0,r=n(i.items),u=r.length,c;t<u;t++){c=r[t]
let i=c
e.log("ondrop",c)
if(c.type=="scrimba/widget"){s.push(new Promise(function(t){return c.getAsString(function(i){let n=e.space().__lookup(i)
e.log("found widget",i)
a=n
return t(n)})}))
continue}if(c.webkitGetAsEntry){i=c.webkitGetAsEntry()
console.log("webkit entry",i)}if(i.isDirectory||i.isFile){o.push(i)}}await Promise.all(s)
if(a){a.moveTo(r.data())}return $(r.data(),o)}
t.prototype.droptargetDidSet=function(t,e){var i,n;(i=t)&&i.flag&&i.flag("droptarget")
return(n=e)&&n.unflag&&n.unflag("droptarget")}
t.prototype.render=function(){var t=this.$
return this.$open(0).setSref(this.data().id()).setChildren(t.$=t.$||[this._header=this._header||c("header",this).flag("header").setContent([c("div",t,0,this._header).flag("title").setText("Files"),c("div",t,1,this._header).flag("tools").setContent(t[2]||c("div",t,2,1).flag("tool").dataset("icon","mcog").on$(0,["tap","showMenu"],this),2)],2),this._main=this._main||c(O,this).flag("main")],2).synced((t[2].end(),this._main.bindData(this.space(),"fs",[]).end(),true))}})
e.ExplorerView=M},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Menu,a=o.MenuItem
var u=n.defineTag("PaneTab",function(t){t.prototype.group=function(t){return this._group}
t.prototype.setGroup=function(t){this._group=t
return this}
t.prototype.__warnings={default:0,name:"warnings"}
t.prototype.warnings=function(t){return this._warnings}
t.prototype.setWarnings=function(t){this._warnings=t
return this}
t.prototype._warnings=0
t.prototype.__errors={default:0,name:"errors"}
t.prototype.errors=function(t){return this._errors}
t.prototype.setErrors=function(t){this._errors=t
return this}
t.prototype._errors=0
t.prototype.__active={watch:"activeDidSet",name:"active"}
t.prototype.active=function(t){return this._active}
t.prototype.setActive=function(t){var e=this.active()
if(t!=e){this._active=t}if(t!=e){this.activeDidSet&&this.activeDidSet(t,e,this.__active)}return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setFlag(-1,this.data().TYPE).flagIf("errors",this.errors()).flagIf("warnings",this.warnings()).setChildren(t.$=t.$||[r("div",t,0,this).flag("title"),r("div",t,1,this).flag("badges").setContent([r("div",t,2,1).flag("badge").flag("errors"),r("div",t,3,1).flag("badge").flag("warnings"),r("div",t,4,1).flag("badge").flag("participant")],2)],2).synced((t[0].setContent(this.data().title()||"Pane",3),t[2].setContent(this.errors()||"",3),t[3].setContent(this.warnings()||"",3),true))}
t.prototype.ontouchstart=function(t){if(t.button()==2){return this}return this.trigger("tabtap",{item:this.data()})}
t.prototype.oncontextmenu=function(t){var e
t.prevent().halt()
let i=this.data().title()
return t.target().uxa().open((e=(e=r(s)).setContent([r(a,e.$,"A",e).setAction("mv"),r(a,e.$,"B",e).setAction("rm")],2)).end((e.$.A.setLabel("Rename "+i).end(),e.$.B.setLabel("Delete "+i).end(),true)))}
t.prototype.onrm=function(){var t=this
return setTimeout(function(){let e=window.confirm("Are you sure you want to delete "+t.data().title()+"?")
if(e){return t.data().rm()}},10)}
t.prototype.onmv=function(t){var e=this
setTimeout(function(){let t=window.prompt("New name for file",e.data().title())
console.log("renamed to",t)
return e.data().mv(t)},10)
return e}})
e.PaneTab=u},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(1),a=s.Menu,u=s.MenuItem
var c=i(74).DependencyAddDialog
var p=i(47).CastDialog
var l=i(53).readTextFile
var h=r.defineTag("SpaceMenu",a,function(t){t.prototype.space=function(){return this.data()}
t.prototype.hide=function(){return this.trigger("uxa:hide")}
t.prototype.ontap=function(t){return this.hide()}
t.prototype.newFile=function(t){var e=window.prompt("Name file")
if(e){return this.space().fs().mkfile(e)}}
t.prototype.newDirectory=function(t){var e=window.prompt("Name directory")
if(e){return this.space().fs().mkdir(e)}}
t.prototype.addDependency=function(){return this.uxa().open(o(c).bindData(this,"space",[]).end())}
t.prototype.importDependenciesFromFile=function(){var t=this
var e=o("input").setType("file").end()
e.dom().onchange=async function(){for(let r=0,s=n(e.dom().files),a=s.length,u;r<a;r++){u=s[r]
if(u.name=="package.json"){var i=await l(u)
var o=JSON.parse(i)
t.space().browser().overwritePackages(o.dependencies)}else{}}return r.commit()}
return e.dom().click()}
t.prototype.editCastDetails=function(){return this.uxa().open(o(p).flag("modal").bindData(this.space(),"model",[]).setFormData(this.space().model()).end())}
t.prototype.render=function(){var t=this.$
var e=this.space().model().can(this.api().user(),"edit")
return this.$open(0).flag("space-menu").setChildren([e?r.static([t[0]||o("div",t,0,this).flag("action").on$(0,["tap","editCastDetails"],this).setText("Edit metadata"),this.space().model().isPublished()?(t[1]||o(u,t,1,this).setAction("branchpublish").setLabel("Re-publish")).bindData(this.space(),"trunk",[]).end():void 0,t[2]||o("hr",t,2,this)],1,1):void 0,t[3]||o("div",t,3,this).flag("action").on$(0,["tap","newFile"],this).setText("New File..."),t[4]||o("div",t,4,this).flag("action").on$(0,["tap","newDirectory"],this).setText("New Folder..."),t[5]||o("div",t,5,this).flag("action").on$(0,["tap","addDependency"],this).setText("Add dependency..."),t[6]||o("div",t,6,this).flag("action").on$(0,["tap","importDependenciesFromFile"],this).setText("Import package.json"),e?r.static([t[7]||o("hr",t,7,this),(t[8]||o(u,t,8,this).setAction("importslides").setLabel("Import Google Slides")).end(),this.space().slides().url()?(t[9]||o(u,t,9,this).setAction("reimportslides").setLabel("Resync with Google Slides")).end():void 0],1,2):void 0,t[10]||o("hr",t,10,this),(t[11]||o(u,t,11,this).setAction("spacezip").setLabel("Download .zip")).end(),(t[12]||o(u,t,12,this).setAction("spacefork").setLabel("Fork workspace")).end(),this.space().trunk().isMine()&&this.space().model().isTutorial()?(t[13]||o(u,t,13,this).setAction("spaceclone").setLabel("Clone cast")).end():void 0],1).synced()}})
e.SpaceMenu=h},function(t,e,i){var n=i(0),r=n.createElement
var o=i(22).SidebarPanel
var s=n.defineTag("WidgetPanel",o,function(t){t.prototype.ontap=function(t){this.log("ontap",t.target())
return this.toggle()}
t.prototype.state=function(){return this.data().visible()?"on":"off"}
t.prototype.render=function(){return this.$open(0).setFlag(-1,this.state()).setSref("sidebar$"+this.data().id()).setChildren(this.header(),3).synced()}
t.prototype.header=function(){let t=this.$$||(this.$$={}),e
return(e=this._header=this._header||(e=r("header",this)).flag("header").setContent([r("div",e.$,"A",e).flag("title"),r("div",e.$,"B",e).flag("tools")],2)).end((e.$.A.setContent(this.name(),3),true))}})
e.WidgetPanel=s},function(t,e,i){var n=i(0)
var r=i(3).Widget
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.EditorWidget=o
o.register("editor")
o.option("left")
o.option("top")
o.option("width")
o.option("height")
o.option("contentTop")
o.option("contentLeft")
o.option("fontSize")
o.option("lineHeight")
o.option("renderIndentGuides",{default:false})
o.option("renderWhitespace",{default:false,overridable:true})
o.option("wordWrap",{default:true,overridable:true})
o.option("wordWrapColumn",{default:100,overridable:true})
o.option("wrappingIndent",{default:"same",overridable:true})
o.prototype.view=function(t){return this._view}
o.prototype.setView=function(t){this._view=t
return this}
o.prototype.setup=function(){return this}
o.prototype.currentFile=function(){return this.space().agent().file()}
o.prototype.agentFile=function(){return this.space().agent().file(false)}
o.prototype.hasFocus=function(){return this.space().agent().focus()==this||this.space().agent().focus(false)==this}
o.prototype.posToScreen=function(t,e){return this.agentToLocalPoint(t,e)}
o.prototype.agentToLocalPoint=function(t,e,i){if(i===undefined)i=this._data
var n=this.currentFile()
if(!n||n!=this.agentFile()){return null}var r=i.top+i.contentTop
var o=i.left+i.contentLeft
var s=this.view().top()+this.view().contentTop()
var a=this.view().left()+this.view().contentLeft()
var u=t-(i.left+i.contentLeft)+(i.scrollLeft||n.scrollLeft()||0)
var c=e-(i.top+i.contentTop)+(i.scrollTop||n.scrollTop()||0)
var p=u
var l=this.view().fontSize()/(i.fontSize||14)
var h=this.view().lineHeight()/(i.lineHeight||21)
var d=u*l-this.view().scrollLeft()
var f=c*h-this.view().scrollTop()
if(this.view()){this.view()._agentPointerX=u*l
this.view()._agentPointerY=c*h}var m=Math.round(s+f)
var y=Math.round(a+d)
return[y,m]}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0)
var s=i(3).Widget
var a=i(30).PaneWidget
var u=i(2),c=u.WIDGET,p=u.FILE,l=u.SCON,h=u.ACTION,d=u.LCRange
var f=i(11).List
var m=i(153).TextModel
var y
if(true){y=i(43)}var g=i(237)
var v=i(15).Dimensions
var _=i(10)
function b(t){this._file=t
this._batch=[]
this._batchState={}
this._changes=[]
this._raw=new m(this._file.initialBody())
this.model()
this}b.prototype.file=function(t){return this._file}
b.prototype.setFile=function(t){this._file=t
return this}
b.prototype.model=function(t){return this._model}
b.prototype.setModel=function(t){this._model=t
return this}
b.prototype.id=function(){return this.file().__uid()}
b.prototype.space=function(){return this.file().space()}
b.prototype.body=function(){return this._raw.getValue()}
b.prototype.logLine=function(t){var e
var i=this._raw._lines[t]
var n=this._model._lines[t]
return e=[i,n._text,i.length,n._text.length]}
b.prototype.applyEdits=function(t,e){if(e===undefined)e=false
if(!t.MONACO){let e=[]
for(let i=0,n=r(t),o=n.length,s;i<o;i++){s=n[i]
e.push({range:y.arrayToRange(s[0]),text:s[1]})}t.MONACO=e}return this._applyEditsRaw.call(this._model,t.MONACO)}
b.prototype.isSyncing=function(){return this._syncing||this.space().isSyncing()}
b.prototype.model=function(){if(true)this.setupMonaco()
return this._model}
b.prototype.setupMonaco=function(){var t=this
if(!true||t._model||t._initing||!window.monaco){return}t._initing=true
t._uri=monaco.Uri.parse(t.file().uri())
t._changes=[]
let e=monaco.editor.getModel(t._uri)
if(e){e.FILE_MODEL.dispose()}t._model=monaco.editor.createModel(t._raw.getValue(),null,t._uri)
t._initing=false
t._model.FILE_MODEL=t
var i={trimAutoWhitespace:false}
if(t._file.useTabs()){i.insertSpaces=false
i.tabSize=4}t._model.updateOptions(i)
var o=t._applyEditsRaw=t._model.applyEdits
t._model.applyEdits=function(e){var i=o.call(t._model,e)
if(!t.isSyncing()){t._batchState.significant=true
t._batchState.preapplied=true
var s=[]
var a=n(e)
for(let n=0,o=r(e),u=o.length,c;n<u;n++){c=o[n]
if(i[n]&&g.containsEmoji(i[n].text)){c.range.startColumn=i[n].range.startColumn}let e=y.rangeToArray(c.range)
if(c.text){s.push([e,c.text])}else{s.push([e])}if(a==1){if(c.text&&e.length==2){t.pushEvent(h.LCINSERT,[t.id(),e[0],e[1],c.text])
return i}else if(!c.text){t.pushEvent(h.LCDELETE,[t.id()].concat(e))
return i}}}t.pushEvent(h.LCEDIT,[t.id(),s])}return i}
return t}
b.prototype.onDidChangeCursorSelection=function(t){var e,i
if(!this.isSyncing()){var o=y.selectionToArray(t.selection)
var s=[o]
for(let e=0,i=r(t.secondarySelections),n=i.length;e<n;e++){o=null
s.push(y.selectionToArray(i[e]))}let a=this._batch[n(this._batch)-1]||{}
if(a.TYPE==h.LCINSERT){var e=r(a)
let t=e[0],i=e[1],n=e[2],u=e[3]
if(u.indexOf("\n")>=0||!o||o[0]!=i||o[1]-(n+u.length)!=0){a.push(o||s)}}else if(a.TYPE==h.LCDELETE){var i=r(a)
let t=i[0],e=i[1],n=i[2]
if(!o||o[0]!=e||o[1]!=n||o.length>2){a[5]=o||s}}else if(a.TYPE==h.LCEDIT){a.push(o||s)}else if(!this.file().space().isEditing()){this.file().setLocalSel(o||s)
if(this.file().space().isPlaying()){this.file().space().timeline().pause()}}else{this.pushEvent(h.LCSELECTION,[this.id()].concat(o||s))}this.flushEvents()}return this}
b.prototype.pushEvent=function(t,e){var i=this
e.TYPE=t
i._batch.push(e)
setTimeout(function(){return i.flushEvents()},0)
return i}
b.prototype.flushEvents=function(){if(n(this._batch)){var t=this._batch.slice(0)
var e=this._batchState
this._batch=[]
this._batchState={}
this.file().setLocalSel(null)
if(n(t)==1){this.file().push_(t[0].TYPE,t[0],e)}else{let i
let n=[]
for(let e=0,i=r(t),o=i.length,s;e<o;e++){s=i[e]
n.push([s.TYPE,s])}i=n
this.file().batch_(i,e)}}return this}
b.prototype.apply=function(t,e){if(e===undefined)e=false
this._raw.apply(t)
if(!e||!e.preapplied){this._changes.push(t)}return this}
b.prototype.undo=function(t){this._raw.apply(t.UNDO,-1)
for(let e=0,i=r(t.UNDO),n=i.length;e<n;e++){this._changes.push([i[e]])}return this}
b.prototype.flushChanges=function(){var t=this
if(!t._model){return}var e=t._file._editor
var i=t._changes
var o=Date.now()
if(n(i)==0){return t}t._changes=[]
t._syncing=true
if(n(i)>3){t._changeDiff={model:t._model.getValue(),raw:t._raw.getValue()}
var s=t._raw.getDiff(t._model._lines)
t._changeDiff.diff=s
if(s&&s[0][0]==1){t._model.setValue(t._raw.getValue())}else if(s){t.applyEdits([s])}}else if(e){e.batchEdits(function(){let e=[]
for(let n=0,o=r(i),s=o.length;n<s;n++){e.push(t.applyEdits(o[n]))}return e})}else{for(let e=0,n=r(i),o=n.length;e<o;e++){t.applyEdits(n[e])}}t._syncing=false
t._file.async("modified")
return t}
b.prototype.enable=function(){this._enabled=true
return this}
b.prototype.disable=function(){this._enabled=false
return this}
b.prototype.dispose=function(){this._model&&this._model.dispose&&this._model.dispose()
this._model=null
return this}
function x(){return a.apply(this,arguments)}o.subclass(x,a)
e.FileWidget=x
x.register("file",p)
x.prototype.body=function(t){return this.getAttribute("body")}
x.prototype.setBody=function(t){this.setAttribute("body",t)
return this}
x.prototype.lang=function(t){return this.getAttribute("lang")}
x.prototype.setLang=function(t){this.setAttribute("lang",t)
return this}
x.prototype.blobId=function(t){return this.getAttribute("blobId")}
x.prototype.setBlobId=function(t){this.setAttribute("blobId",t)
return this}
x.prototype.buffer=function(t){return this._buffer}
x.prototype.setBuffer=function(t){this._buffer=t
return this}
x.prototype.diff=function(t){return this._diff}
x.prototype.setDiff=function(t){this._diff=t
return this}
x.prototype.stream=function(t){return this._stream}
x.prototype.setStream=function(t){this._stream=t
return this}
x.prototype.editor=function(t){return this._editor}
x.prototype.setEditor=function(t){this._editor=t
return this}
x.prototype.scrollState=function(t){return this._scrollState}
x.prototype.setScrollState=function(t){this._scrollState=t
return this}
x.prototype.selState=function(t){return this._selState}
x.prototype.setSelState=function(t){this._selState=t
return this}
x.prototype.__localSel={watch:"localSelDidSet",name:"localSel"}
x.prototype.localSel=function(t){return this._localSel}
x.prototype.setLocalSel=function(t){var e=this.localSel()
if(t!=e){this._localSel=t}if(t!=e){this.localSelDidSet&&this.localSelDidSet(t,e,this.__localSel)}return this}
x.prototype.localScroll=function(t){return this._localScroll}
x.prototype.setLocalScroll=function(t){this._localScroll=t
return this}
x.option("name")
x.option("parent",{type:"widget"})
x.option("scrollTop")
x.option("scrollLeft")
x.prototype.setup=function(){this._localScroll=false
this._selState=[[1,1]]
this._stream=[]
this._edits=0
this._initialBody=this.data().body
this._decorations={}
return this}
x.prototype.posToScreen=function(t,e,i,n){if(this._editor){let i=this.agentLayout()
let n={top:i.top(),left:i.left(),contentTop:0,contentLeft:0,scrollTop:i.scrollTop(),scrollLeft:i.scrollLeft(),fontSize:i.scaleX(),lineHeight:i.scaleY()}
return this.space().primaryEditor().agentToLocalPoint(t,e,n)}return null}
x.prototype.model=function(){return this._model||(this._model=new b(this))}
x.prototype.localLayout=function(){return this._editor?this.clientLayout():null}
x.prototype.uri=function(){return""+this.space().namespace()+this.path()}
x.prototype.ext=function(){let t=this.name().lastIndexOf(".")
return t>0?this.name().substr(t+1):""}
x.prototype.lang=function(){return this.data().lang||this.ext()||"text"}
x.prototype.isLanguageStale=function(){try{let t=this.ext()
let e=this.model()._uri.path.split(".")[1]
return t!==e}catch(t){return false}}
x.prototype.syncExtension=function(){return this.model()._uri=this.uri()}
x.prototype.title=function(){return this.name()}
x.prototype.commitAdd=function(){x.prototype.__super__.commitAdd.apply(this,arguments)
this._initialBody=this.data().body
return this}
x.prototype.mount_=function(){x.prototype.__super__.mount_.apply(this,arguments)
this.space().files().add(this,this.id())
return this.parentDir().entries().add(this)}
x.prototype.unmount_=function(){x.prototype.__super__.unmount_.apply(this,arguments)
this.space().files().remove(this,this.id())
return this.parentDir().entries().remove(this)}
x.prototype.parentDir=function(){return this.parent()||this.space().fs()}
x.prototype.replaceBody=function(t,e){if(e===undefined)e=false
var i=this.body()
var n=new m(t).getDiff(this.model().body())
if(e){var r=this.model()._raw.expandedRange([1,1],i)
n=[r,t]}this.log("replacBody",n)
if(n){return this.push_(h.LCEDIT,[this.id(),[n]])}}
x.prototype.deltaDecorations=function(t,e){var i
if(false){}for(let t=0,n=r(e),o=n.length,s;t<o;t++){s=n[t]
if(typeof(i=s.range)=="string"||i instanceof String){s.range=y.stringToRange(s.range)}else if(s.range instanceof Array){s.range=y.arrayToRange(s.range)}}this.log("deltaDecorations",e)
return this._decorations[t]=this.model().model().deltaDecorations(this._decorations[t]||[],e)}
x.prototype.initialBody=function(){return this._initialBody==null?this._initialBody=this.data().body:this._initialBody}
x.prototype.currentBody=function(){return this.model().body()}
x.prototype.localSelDidSet=function(t){var e=this
clearTimeout(e._localSelTrackingTimeout)
if(t){e._localSelTrackingTimeout=setTimeout(function(){return e.space().api().sendTracking(_.TYPES.SELECTION,[e.space().timeline().currentOffset(),e.id(),t])},500)}return e}
x.prototype.flushLocals=function(){if(this.localSel()){this.push_(h.LCSELECTION,[this.id()].concat(this.localSel()))}return this}
x.prototype.buffer=function(){return this.data().buffer||this.data().body}
x.prototype.toString=function(){return this.currentBody()}
x.prototype.persist_=function(){this._data.body=this.currentBody()
this._data.selState=this._selState
return this}
x.prototype.modified=function(){this.emit("modified",this)
return this}
x.prototype.synced_=function(){this._data.body=this.currentBody()
return this._model&&this._model.flushChanges&&this._model.flushChanges()}
x.prototype.pointer=function(){return this._editor&&this._editor.pointer()}
x.prototype.node=function(){return this._editor}
x.prototype.agentIsShowing=function(){return this.space().agent().options().get("file",false)==this}
x.prototype.clientIsShowing=function(){return this.space().agent().file()==this}
x.prototype.isBinary=function(){return!!this.blobId()}
x.prototype.useTabs=function(){return this.lang()=="imba"||this.lang()=="imba2"}
x.prototype.quicksave=function(){this.space().emit("quicksave",this)
return this}
x.prototype.dispose=function(){this._editor=null
return this._model&&this._model.dispose&&this._model.dispose()}
x.prototype.rename=function(t){if(!t||t==this.name()||this.parentDir().entries().any(function(e){return e.name()==t})){return this}return this.push_(h.FS_RENAME,[this.id(),t])}
x.prototype.moveTo=function(t){this.log("moveTo",t)
if(this.parent()!=t){this.push_(h.FS_MOVE,[this.id(),t.id()])
return this}}
x.prototype.path=function(){return""+this.parentDir().path()+"/"+this.name()}
x.prototype.rm=function(){if(this.space().agent().file()==this){this.space().agent().setFocus(null)
this.space().agent().setFile(null)}return this.push_(h.FS_REMOVE,[this.id()])}},function(t,e){var i={}
var n={}
i.rewriteColor=function(t){let e=0
let r=0
let o=t.length
let s
let a=[]
let u=0
while(true&&u<1e3){u++
r=e=t.indexOf("color(",r)
let i=1
if(r==-1){break}r+=6
while(i>0&&r<o){if(t[r]=="("){i++}else if(t[r]==")"){i--}r++}a.unshift([e,r-e])}for(let e=0,r=a.length,o;e<r;e++){o=a[e]
let r=t.substr(o[0],o[1])
let s=n[r]||(n[r]=i.csscolorfunc().convert(r))
t=t.replace(r,s)}return t}
e.process=i.process=function(t,e){if(e===undefined)e={}
if(e.rewritePseudoStates){t=t.replace(/:(hover|focus|active)\b/g,function(t,e){return".__"+e})}return t}},function(t,e){var i={}
e.diffString=i.diffString=function(t,e){var i=0
var n=Math.max(t.length,e.length)
var r=0
while(i<n){var o=t[i]
var s=e[i]
i++
if(o==s){r++}else{break}}var a=n
i=n
var u=t.length
var c=e.length
while(i>0){i--
o=t[--u]
s=e[--c]
if(o==s){a--}else{break}}a=u+1
var p=e.slice(r,c+1)
if(e.length<6){return e}return[r,a,p]}
e.patchString=i.patchString=function(t,e){if(e instanceof Array){return t.substr(0,e[0])+e[2]+t.slice(e[1])}else{return e}}},function(t,e){function i(t,e){var i=this
if(e===undefined)e={}
i._options=e
i._file=t
i._dom=false?true:document.createElement("style")
i._dom.setAttribute("data-name",t.name())
i._dom.innerHTML=".item { }"
t.on("modified",function(){return i.refresh()})
i.refresh()
i}e.Stylesheet=i
i.prototype.options=function(t){return this._options}
i.prototype.setOptions=function(t){this._options=t
return this}
i.prototype.file=function(t){return this._file}
i.prototype.setFile=function(t){this._file=t
return this}
i.prototype.dom=function(t){return this._dom}
i.prototype.setDom=function(t){this._dom=t
return this}
i.prototype.__doc={watch:"docDidSet",name:"doc"}
i.prototype.doc=function(t){return this._doc}
i.prototype.setDoc=function(t){var e=this.doc()
if(t!=e){this._doc=t}if(t!=e){this.docDidSet&&this.docDidSet(t,e,this.__doc)}return this}
i.forFile=function(t){return t}
i.prototype.docDidSet=function(t,e){if(false){}if(this.dom().parentNode){this.dom().parentNode.removeChild(this.dom())}if(t){this.doc().adoptNode(this.dom())
return this.doc().head.appendChild(this.dom())}else{return window.document.adoptNode(this.dom())}}
i.prototype.refresh=function(){var t=this.file().currentBody()
if(this.options().fakePseudoStates){t=t.replace(/:(hover|focus|active)/g,function(t,e){return".__"+e})}return this.dom().innerHTML=t}},function(t,e,i){var n=i(0)
var r=i(11).List
var o=e.WidgetTypes={}
function s(){return r.apply(this,arguments)}n.subclass(s,r)
e.Widgets=s
s.register=function(t,e){o[t]=e
return e.TYPE=e.prototype.TYPE=t}
s.type=function(t){return o[t]||s[t]}
s.prototype.create=function(t,e,i){if(typeof t=="string"||t instanceof String){t=o[t]}e.id==null?e.id=this.nextId():e.id
e.type||(e.type=t.TYPE)
return new(t||o.widget)(this._owner,e,i)}
s.prototype.load=function(t,e){return this.get(t.id)||this.create(t.type,t,e)}},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextArea,u=o.TextField,c=o.Button
var p=i(34).LongPromise
var l=n.defineTag("AuthenticationDialog",s,function(t){t.prototype.promise=function(t){return this._promise}
t.prototype.setPromise=function(t){this._promise=t
return this}
t.prototype.openGithubSeamless=function(){var t="/login?from=/auth/github/seamless"
if(/11\.\d Safari/.test(window.navigator.userAgent)){window.open(t,"_blank")
return}var e=Math.round(window.screenLeft+window.outerWidth*.5)
var i=Math.round(window.screenTop+window.outerHeight*.5)
var n="left="+(e-300)+",width=600,top="+(i-300)+",height=600"
return window.open(t,"ghlogin",n)}
t.prototype.github=function(){var t=this
t.openGithubSeamless()
return t.uxa().queue().add(1e4,async function(){await t.api().githubLoginPromise()
return t.hide()})}
t.prototype.signup=function(){App.uxa().open(r(h).setPromise(this._promise).end())
this._promise=null
return this.hide()}
t.prototype.forgot=function(){App.uxa().open(r(d).setPromise(this._promise).end())
this._promise=null
return this.hide()}
t.prototype.setup=function(){this._promise||(this._promise=new p)
this.setSubmitLabel("Log in")
return t.prototype.__super__.setup.apply(this,arguments)}
t.prototype.onuxahide=function(){if(this._promise){return this._promise.resolve(true)}}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("a",e.$,"A",e).flag("githubButton").flag("lg-mb").on$(0,["tap","prevent","github"],this).setContent([e.$.B||r("i",e.$,"B","A").dataset("icon","github"),"Log in with GitHub"],2),r("h2",e.$,"C",e).setText("â¦ or log in with email and password"),r(u,e.$,"D",e).setType("text").setName("email").setLabel("Email"),r(u,e.$,"E",e).setType("password").setName("password").setLabel("Password"),r("div",e.$,"F",e).flag("extra").setContent([r("p",e.$,"G","F").setContent(["Don't have an account yet? ",e.$.H||r("a",e.$,"H","G").on$(0,["tap","prevent","signup"],this).setText("Sign up")],2),r("p",e.$,"I","F").setContent(["Forgot your password? ",e.$.J||r("a",e.$,"J","I").on$(0,["tap","prevent","forgot"],this).setText("Reset password")],2)],2)],2)).end((e.$.B.end(),e.$.D.end(),e.$.E.end(),true))}
t.prototype.onuxasubmit=function(t,e){var i=this
t.halt()
return i.uxa().queue().add(200,async function(){var t=await i.api().userAuthenticate(e.email,e.password,{models:true})
if(!t){throw new Error("Incorrect email/password")}})}})
e.AuthenticationDialog=l
n.extendTag("input",function(t){t.prototype.minlength=function(t){return this.getAttribute("minlength")}
t.prototype.setMinlength=function(t){this.setAttribute("minlength",t)
return this}
t.prototype.maxlength=function(t){return this.getAttribute("maxlength")}
t.prototype.setMaxlength=function(t){this.setAttribute("maxlength",t)
return this}})
var h=n.defineTag("SignupDialog",s,function(t){t.prototype.promise=function(t){return this._promise}
t.prototype.setPromise=function(t){this._promise=t
return this}
t.prototype.onuxahide=function(){if(this._promise){return this._promise.resolve(true)}}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h2",e.$,"A",e).setText("Sign up with email and password"),r(u,e.$,"B",e).setType("email").setName("email").setLabel("Email").setRequired(true),r(u,e.$,"C",e).setType("text").setName("name").setLabel("Name").setRequired(true),r(u,e.$,"D",e).setType("password").setName("password").setLabel("Password").setRequired(true).setMinlength(5)],2)).end((e.$.B.end(),e.$.C.end(),e.$.D.end(),true))}
t.prototype.onuxasubmit=function(t,e){var i=this
return i.uxa().queue().add(200,async function(){var t=await i.api().userCreate(e)
if(t&&t.message){throw new Error(t.message)}})}})
var d=n.defineTag("ForgotDialog",s,function(t){t.prototype.promise=function(t){return this._promise}
t.prototype.setPromise=function(t){this._promise=t
return this}
t.prototype.onuxahide=function(){if(this._promise){return this._promise.resolve(true)}}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h2",e.$,"A",e).setText("Reset password"),r(u,e.$,"B",e).setType("email").setName("email").setLabel("Email")],2)).end((e.$.B.end(),true))}
t.prototype.onuxasubmit=function(t,e){var i=this
return i.uxa().queue().add(200,async function(){var t=await i.api().rpc("userForgotPassword",[e.email])
if(t){return i.uxa().flash("Instructions for resetting your password been sent to "+e.email)}else{throw new Error("There is no user with the given email address")}})}})
var f=n.defineTag("ResetPasswordDialog",s,function(t){t.prototype.token=function(t){return this._token}
t.prototype.setToken=function(t){this._token=t
return this}
t.prototype.aid=function(t){return this._aid}
t.prototype.setAid=function(t){this._aid=t
return this}
t.prototype.setup=function(){var t=this
t._status="loading"
t.setSubmitLabel("Reset")
return t.uxa().queue().add(async function(){return t._status=await t.api().rpc("userResetPassword",[t.aid(),t.token()])})}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent([e.$.A||r("h2",e.$,"A",e).setText("Reset password"),this._status=="loading"?e.$.B||r("p",e.$,"B",e).setText("Loading..."):this._status=="invalid"?e.$.C||r("p",e.$,"C",e).setText("Invalid reset link. Please try again."):this._status=="valid"?(e.$.D||r(u,e.$,"D",e).setType("password").setName("password").setLabel("New password").setRequired(true).setMinlength(5)).end():void 0],1)}
t.prototype.onuxasubmit=function(t,e){var i=this
return i.uxa().queue().add(200,async function(){var t
var n=await i.api().rpc("userResetPassword",[i.aid(),i.token(),e.password])
if(n=="updated"){i.uxa().flash("Your password has been updated")
return App.router().url().setHash(t=""),t}else{throw new Error("Something went wrong")}})}})
e.ResetPasswordDialog=f},function(t,e,i){var n=i(0),r=n.createElement
var o=i(25).PrivacyField
var s=i(202).CastTypeField
var a=i(201).CastTopicField
var u=i(16).Carousel
var c=i(13).CastTile
var p=i(1),l=p.Dialog,h=p.TextField
var d=n.defineTag("TemplateTile",c,function(t){t.Renderer=function(t,e,i){let n,o=this.$$||(this.$$={}),s
return(o[s="key$"+e]||r(d,o,s,this)).setData(t).flagIf("selected",i.preset()==t).end()}
t.prototype.ontap=function(){this.trigger("selectpreset",this.data())
return this}})
var f=n.defineTag("CastCreateDialog",l,function(t){var e={selectable:true}
t.prototype.presets=function(t){return this._presets}
t.prototype.setPresets=function(t){this._presets=t
return this}
t.prototype.__preset={watch:"presetDidSet",name:"preset"}
t.prototype.preset=function(t){return this._preset}
t.prototype.setPreset=function(t){var e=this.preset()
if(t!=e){this._preset=t}if(t!=e){this.presetDidSet&&this.presetDidSet(t,e,this.__preset)}return this}
t.prototype.setup=function(){t.prototype.__super__.setup.apply(this,arguments)
return this.fetch()}
t.prototype.fetch=async function(){var t=this
await t.api().prefetch("templates")
console.log("received templates")
t.setPresets(t.api().db().spaces().sel({sort:["-featured_at","-created_at"]},function(e){return e.type=="template"&&(e.featured_at||e.uid==t.api().uid())&&!e.archived_at}))
t.render()
if(!t.api().isMod()&&!t.data().parent_id){t._parentId.dom().setCustomValidity("Please select template")}t.setFormData(t.data())
return t}
t.prototype.onselectpreset=function(t,e){this.setPreset(e)
return this.render()}
t.prototype.presetDidSet=function(t,e){this._parentId.setValue(t?t.id:null)
this._parentId.dom().setCustomValidity("")
var i=this.formData().title
if(t&&(!i||e&&e.title==i)){this.setFormData({title:t.title})}return this.render()}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent([this.data().parent_id?e.$.A||r("h2",e.$,"A",e).setText("Create cast from current workspace"):void 0,(e.$.B||r("input",e.$,"B",e).flag("hidden").setType("text").setName("uid").setRequired(true)).end(),!this.data().parent_id?n.static([e.$.C||r("label",e.$,"C",e).flag("caption").setText("Select template"),(e.$.D||r(u,e.$,"D",e).flag("sm").flag("boxed").setRows(1)).bindData(this,"presets",[]).setRenderer(d.Renderer).setContext(this).end()],2,1):void 0,(this._parentId=this._parentId||r("input",e).flag("parentId").flag("invisible").setType("text").setName("parent_id")).setRequired(!this.api().isMod()).end(),this.data().parent_id?(e.$.E||r(s,e.$,"E",e).flag("large").flag("bm-xl").setLabel("Select type")).bindData(this,"data",[]).end():(e.$.F||r(s,e.$,"F",e).flag("large").flag("bm-xl").setLabel("Select type")).bindData(this,"data",[]).setPattern(/lab|tutorial/).end(),(e.$.G||r(h,e.$,"G",e).setType("text").setName("title").setRequired(true).setLabel("Title").setPlaceholder("Untitled").setDesc("Please name your project").setAutocomplete("off")).end()],1)}
t.prototype.onuxasubmit=function(t){var e=this,i
var n=e.formData()
if(!n.parent_id){i=n.parent_id,delete n.parent_id,i
if(!e.api().isMod()){t.prevent()
return e.uxa().flash(new Error("Please select a template"))}}t.halt()
return e.uxa().queue().add(300,async function(){var t=await e.api().rpc("castCreate",[n,e.data().snapshot,e.data().stream],{models:true})
if(t){e.api().analytics().castCreated(t.id)
return App.router().go(t.url())}})}})
e.CastCreateDialog=f},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createElement
var s=i(1),a=s.Menu,u=s.MenuItem
var c=i(41).Playlist
var p=r.defineTag("CastMenu",a,function(t){t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.render=function(){var t=this.$
var e=this.data().can(this.api().user(),"edit")
return this.$open(0).flag("inset").setChildren([e?(t[0]||o(u,t,0,this).setIcon(">").setAction("castedit").setLabel("Edit cast details")).end():void 0,(t[1]||o(u,t,1,this).setIcon(">").setAction("castjoinplaylist").setLabel("Add to playlist")).end(),this.context()instanceof c&&this.context().can(this.api().user(),"edit")?r.static([t[2]||o("hr",t,2,this),(t[3]||o(u,t,3,this).setIcon(".").setAction("listmoveup").setLabel("Move up in playlist")).setDisabled(this.listIndex()==0).end(),(t[4]||o(u,t,4,this).setIcon(".").setAction("listmovedown").setLabel("Move down in playlist")).setDisabled(this.listIndex()==this.listLen()-1).end(),(t[5]||o(u,t,5,this).flag("neg").setIcon("x").setAction("listdel").setLabel("Remove from playlist")).end()],2,1):void 0,e?r.static([t[6]||o("hr",t,6,this),(t[7]||o(u,t,7,this).flag("neg").setIcon("x").setAction("castdel").setLabel("Delete cast")).end()],2,2):void 0],1).synced()}
t.prototype.onlistdel=async function(t){t.halt()
var e=this.context().items().slice()
var i=e.indexOf(this.data())
if(i<0){return}e.splice(i,1)
var n="Are you sure you want to remove '"+this.data().title+"'' from playlist '"+this.context().title+"'?"
var r=await t.uxa().confirm(n)
if(r){return this.context().update({item_ids:e.map(function(t){return t.id})})}}
t.prototype.onlistmoveup=function(t){t.halt()
var e=this.context().items().slice()
var i=this.listIndex()
e.splice(i,1)
e.splice(i-1,0,this.data())
this.log("new items",e)
return this.context().update({item_ids:e.map(function(t){return t.id})})}
t.prototype.onlistmovedown=function(t){t.halt()
var e=this.context().items().slice()
var i=this.listIndex()
e.splice(i,1)
e.splice(i+1,0,this.data())
this.log("new items",e)
return this.context().update({item_ids:e.map(function(t){return t.id})})}
t.prototype.listIndex=function(){return this.context().items().indexOf(this.data())}
t.prototype.listLen=function(){return n(this.context().items())}})
e.CastMenu=p},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(24).GroupTile
var u=r.defineTag("GroupGrid",function(t){t.prototype.courses=function(t){return this._courses}
t.prototype.setCourses=function(t){this._courses=t
return this}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setChildren(t[0]||s("div",t,0,e).flag("grid"),2).synced((t[0].setContent(function t(i){var r
for(let t=0,o=n(e.data()),a=i.taglen=o.length,u;t<a;t++){u=o[t];(r=i[t]||(r=s("div",i,t)).flag("item").setContent(r.$.A||s("a",r.$,"A",r).setContent(r.$.B||s("img",r.$,"B","A").flag("svg"),2),2)).end((r.$.A.setHref("/g/"+u.id).end((r.$.B.setSrc("https://scrimba.com/cdn/"+u.id+".1005.cover.svg").end(),true)),true))}return i}(t[1]||o(t,1,t[0])),4),true))}})
e.GroupGrid=u},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(6).Page
var p=i(5).UserAvatar
var l=i(51).PlaylistSection
var h=i(49).CollectionSection
var d=i(13),f=d.CastTile,m=d.CastListItem
var y=i(16).Carousel
var g=i(89).GroupGrid
var v=i(24).GroupTile
var _=i(217).UserTile
var b=i(1),x=b.Button,w=b.Actionable
var T=o.defineTag("TopicFilter",function(t){t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){this._value=t
return this}
t.prototype.name=function(t){return this._name}
t.prototype.setName=function(t){this._name=t
return this}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).flagIf("has-selection",e.value()).setChildren([(t[0]||u("a",t,0,e).flag("tpb").flag("pill").flag("all").setHref("/").setText("All")).end(),function t(i){var n=i.$iter()
for(let t=0,o=r(e.data()),s=o.length,a;t<s;t++){a=o[t]
if(a.v<0){continue}n.push((i[t]||u("a",i,t).flag("tpb").flag("pill")).setData(a).setFlag(0,a.id).flagIf("selected",e.value()==a.id).setHref("/"+a.id).setContent(a.name,3).end())}return n}(t[1]||a(t,1))],1).synced()}
t.prototype.ontap=function(t){return}})
var S=o.defineTag("HomePage",c,function(t){t.prototype.courses=function(t){return this._courses}
t.prototype.setCourses=function(t){this._courses=t
return this}
t.prototype.casts=function(t){return this._casts}
t.prototype.setCasts=function(t){this._casts=t
return this}
t.prototype.playlists=function(t){return this._playlists}
t.prototype.setPlaylists=function(t){this._playlists=t
return this}
t.prototype.featured=function(t){return this._featured}
t.prototype.setFeatured=function(t){this._featured=t
return this}
t.prototype.history=function(t){return this._history}
t.prototype.setHistory=function(t){this._history=t
return this}
t.prototype.instructors=function(t){return this._instructors}
t.prototype.setInstructors=function(t){this._instructors=t
return this}
t.prototype.jscourses=function(t){return this._jscourses}
t.prototype.setJscourses=function(t){this._jscourses=t
return this}
t.prototype.htmlcsscourses=function(t){return this._htmlcsscourses}
t.prototype.setHtmlcsscourses=function(t){this._htmlcsscourses=t
return this}
t.prototype.featuredcourses=function(t){return this._featuredcourses}
t.prototype.setFeaturedcourses=function(t){this._featuredcourses=t
return this}
t.prototype.librarycourses=function(t){return this._librarycourses}
t.prototype.setLibrarycourses=function(t){this._librarycourses=t
return this}
t.prototype.othercourses=function(t){return this._othercourses}
t.prototype.setOthercourses=function(t){this._othercourses=t
return this}
t.prototype.path=function(){return[]}
t.prototype.load=async function(){var t,e,i,n,r,o,s,a,u,c,p
await this.api().prefetch("home")
let l=this.api().uid()
if(true&&l){(e=this.history())||(this.setHistory(i=this.api().db().viewings().sel({sort:"-updated_at"},function(t){return t.uid==l})),i)}(n=this.featuredcourses())||(this.setFeaturedcourses(i=this.api().db().groups().sel({sort:"-featured_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at&&t.tags&&t.tags.includes("#featured")})),i);(r=this.jscourses())||(this.setJscourses(i=this.api().db().groups().sel({sort:"-featured_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at&&t.tags&&t.tags.includes("#javascript")})),i);(o=this.librarycourses())||(this.setLibrarycourses(i=this.api().db().groups().sel({sort:"-featured_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at&&t.tags&&t.tags.includes("#library")})),i);(s=this.othercourses())||(this.setOthercourses(i=this.api().db().groups().sel({sort:"-featured_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at&&t.tags&&t.tags.includes("#other")})),i);(a=this.htmlcsscourses())||(this.setHtmlcsscourses(i=this.api().db().groups().sel({sort:"-created_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at&&t.tags&&t.tags.includes("#css"||t.tags.includes("#html"))})),i);(u=this.courses())||(this.setCourses(i=this.api().db().groups().sel({sort:"-created_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at})),i);(c=this.casts())||(this.setCasts(i=this.api().db().spaces().sel({sort:"-published_at"},function(t){return t.published_at&&!t.archived_at&&t.privacy=="public"&&t.type=="tutorial"})),i);(p=this.playlists())||(this.setPlaylists(i=this.api().db().playlists().sel({sort:"-featured_at"},function(t){return t.featured_at&&!t.archived_at&&t.privacy=="public"})),i)
return(t=this.instructors())||(this.setInstructors(i=this.api().db().users().sel({sort:"-karma"},function(t){return t.karma>0})),i)}
t.prototype.mount=function(){this.schedule({events:true})
App.setScrollTop(0)
return this.render()}
t.prototype.unmount=function(){return this.unschedule()}
t.prototype.start=function(t){this.trigger("castnew")
t.prevent().halt()
return this}
t.prototype.render=function(){var t=this.$
let e=this.api().user()
let i=this.playlists().at(0)
return this.$open(0).setChildren([t[0]||u("header",t,0,this).setContent(t[1]||u("div",t,1,0).flag("wide").flag("what").setContent([u("h1",t,2,1).setText("Grow your skills. Boost your career."),u("p",t,3,1).flag("lead").setContent(["Our ",t[4]||u("a",t,4,3).setTarget("_blank").setHref("https://twitter.com/search?q=scrimba%20mind").setText("mind-blowing")," learning experience makes it easier than ever to grow your coding skills. So pick a course, start learning, and give your career the boost it deserves."],2),u("div",t,5,1).flag("cta").setContent(t[6]||u("a",t,6,5).setHref("/c/c8gp4WfE").setText("Learn more"),2)],2),2),t[7]||u("article",t,7,this).flag("wide"),this.footer()],1).synced((t[4].end(),t[6].end(),t[7].setContent([(t[8]||u("div",t,8,7).flag("section").flag("Section").setContent([u("header",t,9,8).flag("header").setContent(t[10]||u("h2",t,10,9).flag("title").setText("Featured courses"),2),u(y,t,11,8).flag("lg").setLimit(32).setInfinite(true)],2)).end((t[11].bindData(this,"featuredcourses",[]).setRenderer(v.Renderer).end(),true)),(t[12]||u("div",t,12,7).flag("section").flag("Section").setContent([u("header",t,13,12).flag("header").flag("flex").setContent([u("h2",t,14,13).flag("title").setText("JavaScript"),u("a",t,15,13).setHref("/allcourses").setContent(t[16]||u("span",t,16,15).setText("All courses"),2)],2),u(g,t,17,12)],2)).end((t[15].end(),t[17].bindData(this,"jscourses",[]).end(),true)),e&&n(this.history())?(t[18]||u("div",t,18,7).flag("section").flag("Section").setContent([u("header",t,19,18).flag("header").setContent(t[20]||u("h2",t,20,19).flag("title").setText("Continue watching"),2),u(y,t,21,18).flag("dense").flag("sm").setRows(1).setLimit(12).setInfinite(true)],2)).end((t[21].setData(this.history().map(function(t){return t.cast()})).setRenderer(f.Renderer).end(),true)):void 0,(t[22]||u("div",t,22,7).flag("section").flag("Section").setContent([u("header",t,23,22).flag("header").flag("flex").setContent([u("h2",t,24,23).flag("title").setText("JavaScript library courses"),u("a",t,25,23).setHref("/allcourses").setContent(t[26]||u("span",t,26,25).setText("All courses"),2)],2),u(g,t,27,22)],2)).end((t[25].end(),t[27].bindData(this,"librarycourses",[]).end(),true)),(t[28]||u("div",t,28,7).flag("section").flag("Section").setContent([u("header",t,29,28).flag("header").flag("flex").setContent([u("h2",t,30,29).flag("title").setText("HTML & CSS courses"),u("a",t,31,29).setHref("/allcourses").setContent(t[32]||u("span",t,32,31).setText("All courses"),2)],2),u(g,t,33,28)],2)).end((t[31].end(),t[33].bindData(this,"htmlcsscourses",[]).end(),true)),(t[34]||u("div",t,34,7).flag("section").flag("Section").setContent([u("header",t,35,34).flag("header").flag("flex").setContent([u("h2",t,36,35).flag("title").setText("Other courses"),u("a",t,37,35).setHref("/allcourses").setContent(t[38]||u("span",t,38,37).setText("All courses"),2)],2),u(g,t,39,34)],2)).end((t[37].end(),t[39].bindData(this,"othercourses",[]).end(),true))],1),true))}})
e.HomePage=S},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createElement
var s=i(6).Page
var a=i(14).Format
var u=i(17).Delay
if(true){var c=i(148).Space}var p=i(1),l=p.Indicator,h=p.TextArea,d=p.Form,f=p.Button
var m=i(10)
var y=i(205).NextUpView
var g=i(211).ShareDialog
var v=r.defineTag("SpacePage",s,function(t){t.prototype.user=function(t){return this._user}
t.prototype.setUser=function(t){this._user=t
return this}
t.prototype.cid=function(t){return this._cid}
t.prototype.setCid=function(t){this._cid=t
return this}
t.prototype.pid=function(t){return this._pid}
t.prototype.setPid=function(t){this._pid=t
return this}
t.prototype.__hasMembership={default:false,name:"hasMembership"}
t.prototype.hasMembership=function(t){return this._hasMembership}
t.prototype.setHasMembership=function(t){this._hasMembership=t
return this}
t.prototype._hasMembership=false
t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.__playlist={watch:"playlistDidSet",name:"playlist"}
t.prototype.playlist=function(t){return this._playlist}
t.prototype.setPlaylist=function(t){var e=this.playlist()
if(t!=e){this._playlist=t}if(t!=e){this.playlistDidSet&&this.playlistDidSet(t,e,this.__playlist)}return this}
t.prototype.playlists=function(t){return this._playlists}
t.prototype.setPlaylists=function(t){this._playlists=t
return this}
t.prototype.__space={watch:"spaceDidSet",name:"space"}
t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){var e=this.space()
if(t!=e){this._space=t}if(t!=e){this.spaceDidSet&&this.spaceDidSet(t,e,this.__space)}return this}
t.prototype.__status={default:404,name:"status"}
t.prototype.status=function(t){return this._status}
t.prototype.setStatus=function(t){this._status=t
return this}
t.prototype._status=404
t.prototype.trunk=function(t){return this._trunk}
t.prototype.setTrunk=function(t){this._trunk=t
return this}
t.prototype.__noscroll={watch:"noscrollDidSet",name:"noscroll"}
t.prototype.noscroll=function(t){return this._noscroll}
t.prototype.setNoscroll=function(t){var e=this.noscroll()
if(t!=e){this._noscroll=t}if(t!=e){this.noscrollDidSet&&this.noscrollDidSet(t,e,this.__noscroll)}return this}
t.prototype.featuredBootcamp=function(t){return this._featuredBootcamp}
t.prototype.setFeaturedBootcamp=function(t){this._featuredBootcamp=t
return this}
t.prototype.title=function(){return""+(this.data().title||"Cast "+this.data().id)+" - Scrimba "+(this.data().type=="tutorial"?"Tutorial":"Playground")}
t.prototype.desc=function(){return this.data().description||this.data().title}
t.prototype.image=function(){return"https://scrimba.com/static/art/castcover.png"}
t.prototype.canonical=function(){var t
if((t=this.data())&&t.pid){return"https://scrimba.com/p/"+this.data().pid+"/"+this.data().id}else{return false}}
t.prototype.load=async function(){var t=this,e
let i=t.api().db().get(t.cid())
if(i==t.trunk()||i.trunk()==t.trunk()){true}else{i=null}t.setData(await(i||t.api().prefetch(["cast",t.cid(),t.pid()])))
t.setPlaylist(t.pid()?t.api().db().get(t.pid()):null)
if(!t.data()||!t.data().can(t.api().user(),"read")){return t.setStatus(e=404),e}if(t.data().privacy=="internal"){if(t.data().group()&&!t.data().group().membership(t.api().uid())){if(true){t.setNoscroll(false)
return App.router().go("/g/"+t.data().group().id)}return t.setStatus(e=404),e}}var n=t.api().db().groups().sel(function(t){return t.type=="bootcamp"&&t.style&&t.style.internal_ad&&t.style.internal_ad.is_main})
t.setFeaturedBootcamp(n.at(0))
t.setPlaylists(t.api().db().playlists().sel({sort:"created-at"},function(e){return e.gid&&t.data().gid&&e.gid==t.data().gid}))
t.setStatus(t.data()?t.data().CODE||200:404)
t.setTrunk(t.data()&&t.data().trunk())
if(false||t.status()!=200){return}if(t.space()&&t.space().model()!=t.trunk()){t.log("remove previous space")
t.setSpace(null)}if(t.space()){if(t.space().branch().model()==t.data()){t.log("already at correct branch")}else{t.space().navigateTo(t.data())}return t.render()}else{t.setSpace(new c(t.trunk(),{api:t.api(),playlist:t.playlist()}))
await t.space().setup()
t.uxa().queue().add(1e3,async function(){await t.space().load()
if(t.space()){t.render()
if(t.trunk()!=t.data()){return t.space().navigateTo(t.data())}}})
return t}}
t.prototype.path=function(){var t=[this.trunk()]
if(this.data().group()){t.unshift(this.data().group())}else if(this.data().playlist()){t.unshift(this.data().playlist())}else if(this.playlist()){t.unshift(this.playlist())}if(this.data()!=this.trunk()){t.push(this.data())}return t}
t.prototype.spaceDidSet=function(t,e){if(e){e.terminate()
e.dispose()}return this}
t.prototype.render=function(){var t=this.$
var e=this.data()
return this.$open(0).flag("dark").setChildren([(this._indicator=this._indicator||o(l,this).flag("indicator").setType("forward")).bindData(this.uxa(),"queue",[]).end(),this.space()?this.space().view():t[0]||o("div",t,0,this).flag("SpaceView")],1).synced()}
t.prototype.tools=function(){let t=this.$$||(this.$$={})
return this._tools=this._tools||o("div",this).flag("tools")}
t.prototype.onkeydown=function(t){return this}
t.prototype.setup=function(){this.onwinwheel=this.onwinwheel.bind(this)
this.onwinscroll=this.onwinscroll.bind(this)
return this}
t.prototype.hasPhoneInterface=function(){return this.api().ua().isPhone()}
t.prototype.mount=function(){this._winScrollZone=Math.max(window.innerWidth,window.innerHeight)+40
App.doc().flag("space")
window.addEventListener("scroll",this.onwinscroll,false)
this.schedule({events:true})
this.flag("mount")
if(this.data()){App.setScrollTop(0)
this.setNoscroll(true)
this.render()}return this}
t.prototype.unmount=function(){App.doc().unflag("space")
this.setData(null)
this.setSpace(null)
this._params=null
window.removeEventListener("scroll",this.onwinscroll,false)
this.render()
return this.unschedule()}
t.prototype.onwinwheel=function(t){let e=t.target
if(this.api().ua().isPhone()){return}if(e.closest(".EditorView")){t.stopPropagation()}else{var i=e.closest(".scroll")
if(!i||Math.abs(t.deltaX)>Math.abs(t.deltaY)){t.preventDefault()}}return this}
t.prototype.onwinscroll=function(t){var e=App.scrollTop()
if(e==0){this.setNoscroll(true)}this.flag("scrolled",e!=0)
this.flag("covered",e>this._winScrollZone)
return this}
t.prototype.onfocusin=function(t){return this}
t.prototype.onspaceclose=function(t){t.halt()
var e=this.router().history().filter(function(t){return!/^\/c(asts?)?\//.test(t)})[0]
return this.router().go(e||"/")}
t.prototype.getNextItem=function(){var t=this
var e=t.playlist()?t.playlist().itemAfter(t.data()):null
if(e){return[e]}if(t.playlists()&&n(t.playlists())>1){var i=t.playlists().toArray()
var r=i.findIndex(function(e){return e.id==t.pid()})
var o=n(i)-1
if(r<o){e=t.playlists().at(r+1).items()[0]
return[e,t.playlists().at(r+1)]}}return false}
t.prototype.onenterplayground=function(t){if(!y.Instance){return}return y.Instance.cancel()}
t.prototype.onspaceend=function(t){t.halt()
var e=this.getNextItem()
if(e&&!y.Instance){return this.uxa().open(o(y).flag("modal").bindData(e,0).setContext(e[1]||this.playlist()).end())}else if(!e&&this.space().model().isPublished()&&this.space().model().uid!=this.api().uid()){return this.uxa().open(o(g).flag("modal").bindData(this,"data",[]).setFeaturedBootcamp(this.featuredBootcamp()).end())}}
t.prototype.onshowannotation=function(t,e){t.halt()
return this.space().setAnnotation(e),e}
t.prototype.ontogglecontrols=function(t){return t.halt()}
t.prototype.onspaceplay=function(t){return t.halt()}
t.prototype.noscrollDidSet=function(t){if(this.api().ua().isPhone()){return}this.flag("noscroll",t)
return App.doc().flag("noscroll",t)}
t.prototype.onbeforenavigate=function(t){if(this.space()&&(this.space().isEditing()||this.space().isAnnotating())){return t.preventDefault()}}})
e.SpacePage=v},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(6).Page
var p=i(5).UserAvatar
var l=i(16).Carousel
var h=i(13).CastTile
var d=i(51).PlaylistSection
var f=i(49).CollectionSection
var m=i(215).UserLinks
var y=i(24).GroupTile
var g=i(14).Format
var v=i(1),_=v.Menu,b=v.MenuItem,x=v.IconButton
var w=o.defineTag("Tab",function(t){t.prototype.name=function(t){return this._name}
t.prototype.setName=function(t){this._name=t
return this}
t.prototype.href=function(t){return this._href}
t.prototype.setHref=function(t){this._href=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||u("a",t,0,this),2).synced((t[0].setHref(this.href()).setContent(this.name(),3).end(),true))}})
var T=o.defineTag("Casts",f,function(t){t.prototype.groups=function(t){return this._groups}
t.prototype.setGroups=function(t){this._groups=t
return this}
t.prototype.__items={watch:"itemsDidSet",name:"items"}
t.prototype.items=function(t){return this._items}
t.prototype.setItems=function(t){var e=this.items()
if(t!=e){this._items=t}if(t!=e){this.itemsDidSet&&this.itemsDidSet(t,e,this.__items)}return this}
t.prototype.__view={watch:"viewDidSet",name:"view"}
t.prototype.view=function(t){return this._view}
t.prototype.setView=function(t){var e=this.view()
if(t!=e){this._view=t}if(t!=e){this.viewDidSet&&this.viewDidSet(t,e,this.__view)}return this}
t.prototype.filterGroup=function(t){return this.setView(t),t}
t.prototype.itemsDidSet=function(t){var e
return this.setView(e=this.groups()&&this.groups()[0]||null),e}
t.prototype.viewDidSet=function(t,e){if(e){for(let i=e[1],n,r=0,o=Object.keys(i),s=o.length,a;r<s;r++){a=o[r]
n=i[a]
if(!(t&&t[a])){this.items().filters().del(a)}}}if(t){for(let e=t[1],i,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
i=e[s]
this.items().filters().set(s,i)}}this.render()
return this}
t.prototype.header=function(){var t=this.$$||(this.$$={}),e,i=this
return(e=i._header=i._header||(e=u("header",i)).flag("header").flag("flat").setContent([u("div",e.$,"A",e).flag("actions").setContent(e.$.B||u(x,e.$,"B","A").setAction("showoptions").setIcon("."),2),u("div",e.$,"C",e).flag("heading").flag("tabs")],2)).end((e.$.B.end(),e.$.C.setContent(function t(e){for(let t=0,n=r(i.groups()),o=e.taglen=n.length,s;t<o;t++){s=n[t];(e[t]||u("div",e,t).flag("tab")).flagIf("selected",s==i.view()).on$(0,["tap",["filterGroup",s]],i).setContent(s[0],3)}return e}(e.$["D"]||s(e.$,"D",e.$.C)),4),true))}})
var S=o.defineTag("UserPage",c,function(t){t.prototype.history=function(t){return this._history}
t.prototype.setHistory=function(t){this._history=t
return this}
t.prototype.tabs=function(t){return this._tabs}
t.prototype.setTabs=function(t){this._tabs=t
return this}
t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.__status={default:404,name:"status"}
t.prototype.status=function(t){return this._status}
t.prototype.setStatus=function(t){this._status=t
return this}
t.prototype._status=404
t.prototype.username=function(t){return this._username}
t.prototype.setUsername=function(t){this._username=t
return this}
t.prototype.groups=function(t){return this._groups}
t.prototype.setGroups=function(t){this._groups=t
return this}
t.prototype.enrolledCourses=function(t){return this._enrolledCourses}
t.prototype.setEnrolledCourses=function(t){this._enrolledCourses=t
return this}
t.prototype.uid=function(t){return this._uid}
t.prototype.setUid=function(t){this._uid=t
return this}
var e=[["All",{}],["Forks",{type:"fork"}],["Playgrounds",{type:"lab"}],["Tutorials",{type:"tutorial"}],["Templates",{type:"template"}]]
t.prototype.user=function(){return this.data()}
t.prototype.path=function(){return[this.data()]}
t.prototype.dataDidSet=function(t){var e
if(!t){return this.setStatus(e=404),e}this.setStatus(200)
var i=t.id==this.api().uid()
this.setTabs({casts:t.casts().sel({sort:"-edited_at"},function(t){return i||(t.type!="tutorial"||t.published_at)&&t.privacy=="public"}),playlists:t.playlists().sel({sort:"-created_at"},function(t){return t.privacy=="public"||i})})
this.setGroups(this.api().db().groups().sel({sort:"-created_at"},function(e){return e.creator_id==t.id&&e.privacy=="public"}))
this._filters=[["Casts",{type:"tutorial"}],["Playgrounds",{type:"lab"}],["Templates",{type:"template"}],["Forks",{type:"fork"}]]
if(i){this._filters.push(["Drafts",{isDraft:true}])}return}
t.prototype.load=async function(t){var e=this,i,n
if(e.uid()){e.setData(await e.api().prefetch(["user",e.uid()]))}else{e.setData(await e.api().prefetch(["user","@"+e.username()]))}if(true&&e.uid()){return(i=e.history())||(e.setHistory(n=e.api().db().viewings().sel({sort:"-updated_at"},function(t){return t.uid==e.uid()})),n)}}
t.prototype.title=function(){if(this.data()){if(this.data().username){return this.data().name?""+this.data().username+" ("+this.data().name+")":""+this.data().username}else{return this.data().name||this.data().id}}else{return"Not found"}}
t.prototype.tab=function(){return this.params().tab||"casts"}
t.prototype.mount=function(){t.prototype.__super__.mount.apply(this,arguments)
this.schedule({events:true})
return this.render()}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setChildren(t.$=t.$||[u("header",t,0,e).setContent(t[1]||u("section",t,1,0).setContent([u(p,t,2,1).setS(240),u("h1",t,3,1).flag("name"),u(m,t,4,1).flag("muted").flag("bullets"),u("div",t,5,1).flag("clear")],2),2),u("article",t,6,e).flag("hsplit").setContent(t[7]||u("section",t,7,6).flag("main").flag("livesize"),2)],2).synced((t[2].bindData(e,"data",[]).end(),t[3].setContent(e.title(),3),t[4].bindData(e,"data",[]).end(),t[7].setContent([e.api().user()&&e.user().memberships()&&n(e.user().memberships())&&e.user().id==e.api().user().id?(t[8]||u("div",t,8,7).flag("section").flag("Section").setContent([u("header",t,9,8).flag("header").setContent(t[10]||u("h2",t,10,9).flag("title").setText("Enrolled courses"),2),u(l,t,11,8).flag("lg").setLimit(24)],2)).end((t[11].bindData(e.data(),"enrolledCourses",[]).setRenderer(y.Renderer).end(),true)):void 0,e.groups()&&n(e.groups())?(t[12]||u("div",t,12,7).flag("section").flag("Section").setContent([u("header",t,13,12).flag("header").setContent(t[14]||u("h2",t,14,13).flag("title").setText("Courses"),2),u(l,t,15,12).flag("lg").setLimit(24)],2)).end((t[15].bindData(e,"groups",[]).setRenderer(y.Renderer).end(),true)):void 0,(t[16]||u(T,t,16,7).flag("section").setTitle("## Casts").setSize("md")).setGroups(e._filters).setItems(e.tabs().casts).end(),e.user()&&e.history()?(t[17]||u("div",t,17,7).flag("section").flag("Section").setContent([u("header",t,18,17).flag("header").setContent(t[19]||u("h2",t,19,18).flag("title").setText("Continue watching"),2),u(l,t,20,17).flag("dense").flag("sm").setRows(1).setLimit(12).setInfinite(true)],2)).end((t[20].setData(e.history().map(function(t){return t.cast()})).setRenderer(h.Renderer).end(),true)):void 0,function t(i){var o=i.$iter()
for(let t=0,s=r(e.tabs().playlists),a=s.length,c;t<a;t++){c=s[t]
if(n(c.item_ids)){o.push((i[t]||u(d,i,t).flag("section")).setData(c).end())}}return o}(t[21]||a(t,21,t[7]))],1),true))}})
e.UserPage=S},function(t,e){function i(t){return t?t.toArray?t.toArray():t:[]}function n(t){this._location=t
this}e.Url=n
n.prototype.path=function(){if(true){return this._location.pathname+this._location.search}}
n.prototype.hash=function(){return this._location.hash||""}
n.prototype.setHash=function(t){this._location.hash=t
return this}
n.prototype.queryParams=function(){return this._queryParams||(this._queryParams=this._location.query||this.parseSearch())}
n.prototype.parseSearch=function(){var t
var e={}
for(let o=0,s=i(this._location.search.slice(1).split("&")),a=s.length;o<a;o++){var t=i(s[o].split("=",2))
var n=t[0],r=t[1]
if(!r){continue}e[n]=window.decodeURIComponent(r.replace(/\+/g," "))}return e}},function(t,e,i){var n=i(8)
n.Pointer=function t(){this._button=-1
this._event={x:0,y:0,type:"uninitialized"}
return this}
n.Pointer.prototype.button=function(){return this._button}
n.Pointer.prototype.touch=function(){return this._touch}
n.Pointer.prototype.update=function(t){this._event=t
this._dirty=true
return this}
n.Pointer.prototype.process=function(){var t=this._event
if(this._dirty){this._prevEvent=t
this._dirty=false
if(t.type=="mousedown"){this._button=t.button
if(this._touch&&this._button!=0){return}if(this._touch){this._touch.cancel()}this._touch=new n.Touch(t,this)
this._touch.mousedown(t,t)}else if(t.type=="mousemove"){if(this._touch){this._touch.mousemove(t,t)}}else if(t.type=="mouseup"){this._button=-1
if(this._touch&&this._touch.button()==t.button){this._touch.mouseup(t,t)
this._touch=null}}}else if(this._touch){this._touch.idle()}return this}
n.Pointer.prototype.x=function(){return this._event.x}
n.Pointer.prototype.y=function(){return this._event.y}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0)
var o=r.defineTag("Form","form",function(t){t.prototype.__formData={watch:"formDataDidSet",name:"formData"}
t.prototype.formData=function(t){return this._formData}
t.prototype.setFormData=function(t){var e=this.formData()
if(t!=e){this._formData=t}if(t!=e){this.formDataDidSet&&this.formDataDidSet(t,e,this.__formData)}return this}
t.prototype.formDataDidSet=function(t){if(this._commited){return this.applyFormData(t)}}
t.prototype.loadFormData=function(){if(this._formData){return this.applyFormData(this._formData)}}
t.prototype.commit=function(){t.prototype.__super__.commit.apply(this,arguments)
if(!this._commited){this.loadFormData()
this._commited=true}return this}
t.prototype.formElements=function(){var t=[]
for(let e=0,i=n(this.dom().elements),r=i.length,o;e<r;e++){o=i[e]
let n=o
let r=o.name
if(r){t.push(n)}if(t[r]){if(!(t[r]instanceof Array)){t[r]=[t[r]]}t[r].push(n)}else{t[r]=n}}return t}
t.prototype.applyFormData=function(t){if(t===undefined)t={}
var e=this.formElements()
for(let i=0,r=n(e),o=r.length,s;i<o;i++){s=r[i]
let e=s.type
let n=t[s.name]
if(n==undefined){continue}if(e=="radio"||e=="checked"){s.checked=s.value==n}else{if(s._tag){s._tag.setValue(n)}else{s.value=n}}}return this}
t.prototype.formData=function(){var t={}
for(let e=0,i=n(this.dom().elements),r=i.length,o;e<r;e++){o=i[e]
if(o.type=="checkbox"){if(!o.checked){continue}}else if(o.type=="radio"){if(!o.checked){continue}}if(o.name){t[o.name]=o._tag&&o._tag.value?o._tag.value():o.value}}return t}
t.prototype.onsubmit=async function(t){t.cancel().halt()
if(this.uxa().queue().busy()){return}this.trigger("uxa:submit",this.formData())
await this.uxa().queue()
if(this.uxa().queue().failed()){this.log("failed?!?!",this.uxa().queue().error())
this.uxa().flash(this.uxa().queue().error())
this.uxa().queue().reset()}return this}
t.prototype.onuxabusy=function(t){t.halt()
return this.flag("uxa-busy")}
t.prototype.onuxaidle=function(t){var e=this
t.halt()
return setTimeout(function(){if(e.uxa().queue().idle()){return e.unflag("uxa-busy")}},200)}})
e.Form=o},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createElement
var s=i(99).Queue
var a=r.defineTag("Indicator",function(t){t.prototype.__progress={default:0,watch:"progressDidSet",name:"progress"}
t.prototype.progress=function(t){return this._progress}
t.prototype.setProgress=function(t){var e=this.progress()
if(t!=e){this._progress=t}if(t!=e){this.progressDidSet&&this.progressDidSet(t,e,this.__progress)}return this}
t.prototype._progress=0
t.prototype.__type={default:"indeterminate",name:"type"}
t.prototype.type=function(t){return this._type}
t.prototype.setType=function(t){this._type=t
return this}
t.prototype._type="indeterminate"
t.prototype.__busy={watch:"busyDidSet",name:"busy"}
t.prototype.busy=function(t){return this._busy}
t.prototype.setBusy=function(t){var e=this.busy()
if(t!=e){this._busy=t}if(t!=e){this.busyDidSet&&this.busyDidSet(t,e,this.__busy)}return this}
t.prototype.__state={default:"idle",watch:"stateDidSet",name:"state"}
t.prototype.state=function(t){return this._state}
t.prototype.setState=function(t){var e=this.state()
if(t!=e){this._state=t}if(t!=e){this.stateDidSet&&this.stateDidSet(t,e,this.__state)}return this}
t.prototype._state="idle"
t.prototype.__time={default:2100,name:"time"}
t.prototype.time=function(t){return this._time}
t.prototype.setTime=function(t){this._time=t
return this}
t.prototype._time=2100
t.prototype.__threshold={default:0,name:"threshold"}
t.prototype.threshold=function(t){return this._threshold}
t.prototype.setThreshold=function(t){this._threshold=t
return this}
t.prototype._threshold=0
t.prototype.busyDidSet=function(t){return t?this.start():this.stop()}
t.prototype.setup=function(){this._items=[]
this._starter=null
this._endAt=0
if(this.data()instanceof s){this._queue=this.data()
this._handler=this.refresh.bind(this)
this.data().on("incr",this._handler)
this.data().on("decr",this._handler)}return this}
t.prototype.refresh=function(){var t=this.expectedEndAt()
if(n(this._queue)){this.start()}else{this.stop()}return this}
t.prototype.expectedEndAt=function(){var t
if(this._queue){var e=this._queue.map(function(t){return t._uxa.endAt||0})
var i=Math.max.apply(Math,e)
return Math.max(i,Date.now())}return Math.max(this._endAt,Date.now())}
t.prototype.start=function(t){if(t===undefined)t=1e3
this.setBusy(true)
if(this.state()=="done"||this.state()=="idle"){this._startAt=Date.now()
this._endAt=this._startAt+t
this.setState("prep")}return this}
t.prototype.stop=function(){this.setBusy(false)
if(this.state()=="prep"){this.setState("done")}else if(this.state()=="busy"||this.state()=="stalled"){this.setState("finish")}return this}
t.prototype.calculatedProgress=function(){var t=Date.now()
return(t-this._startAt)/(this._endAt-this._startAt)}
t.prototype.step=function(){var t
if(this.state()=="prep"){return this.setState(t="start"),t}else if(this.state()=="start"){if(this.busy()){return this.setState(t="busy"),t}else{return this.setState(t="finish"),t}}else if(this.state()=="busy"){if(this._queue&&!this._queue.idle()){return this.setState(t="stalled"),t}else{return this.setState(t="finish"),t}}else if(this.state()=="finish"){return this.setState(t="done"),t}else if(this.state()=="done"){return this.setState(t="idle"),t}}
t.prototype.stateDidSet=function(t,e){var i=this
i.setFlag("state",t)
clearTimeout(i._stateTimeout)
let n=2
let r
let o=0
if(t=="prep"){i.unflag("running")
n=i.threshold()||2
i._ind.css({transition:"none",transform:"scaleX(0)"})
i.dom().offsetParent
i.flag("running")}else if(t=="start"){i._startedAt=Date.now()
n=240
o=.12
r="cubic-bezier(0.250, 1.190, 0.300, 0.865)"
i._ind.css({transition:"transform "+n+"ms "+r,transform:"scaleX(0.1)"})}else if(t=="busy"){n=i.expectedEndAt()-Date.now()
o=.85
r="cubic-bezier(0.225, 0.710, 0.565, 0.985)"
i._ind.css({transition:"transform "+n+"ms "+r,transform:"scaleX(0.85)"})}else if(t=="stalled"){i._ind.css({transition:"transform 3s linear",transform:"scaleX(0.95)"})}else if(t=="finish"){var s=Date.now()-i._startedAt
n=Math.max(200,600-s)
r="cubic-bezier(0.260, 0.025, 0.000, 0.995)"
r="cubic-bezier(0.4, 0.0, 0.2, 1)"
o=1
i._ind.css({transition:"transform "+n+"ms "+r,transform:"scaleX(1)"})}else if(t=="done"){i.unflag("running")
n=200}return i._stateTimeout=setTimeout(function(){return i.step()},n)}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("uxa").setFlag(-1,this.type()).setChildren(this._ind=this._ind||o("div",this).flag("ind"),2).synced((this._ind.setFlag(0,this.type()),true))}})
e.Indicator=a},function(t,e,i){var n=i(0)
var r=n.defineTag("Menu")
e.Menu=r},function(t,e,i){var n=i(0)
var r=n.defineTag("Popover")
e.Popover=r},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0)
function o(t,e){this._parent=e
this._owner=t
this._commit=t.commit
this._pending=[]
this._errors=[]
this._state="idle"
this}e.Queue=o
o.prototype.error=function(t){return this._error}
o.prototype.setError=function(t){this._error=t
return this}
o.prototype.errors=function(t){return this._errors}
o.prototype.setErrors=function(t){this._errors=t
return this}
o.prototype.__state={watch:"stateDidSet",name:"state"}
o.prototype.state=function(t){return this._state}
o.prototype.setState=function(t){var e=this.state()
if(t!=e){this._state=t}if(t!=e){this.stateDidSet&&this.stateDidSet(t,e,this.__state)}return this}
o.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return r.emit(this,t,n)}
o.prototype.on=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.listen.apply(r,[].concat([this,t],Array.from(o)))}
o.prototype.un=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.unlisten.apply(r,[].concat([this,t],Array.from(o)))}
o.prototype.map=function(t){return this._pending.map(t)}
o.prototype.len=function(){return this._pending.length}
o.prototype.busy=function(){return n(this)>0}
o.prototype.idle=function(){return n(this)==0}
o.prototype.failed=function(){return n(this._errors)}
o.prototype.reset=function(){this._errors=[]
return this}
o.prototype.error=function(){return this._errors[0]&&this._errors[0]._uxa.error}
o.prototype.add=function(t,e){var i=this
if(e==undefined&&typeof t=="function")e=t,t={}
if(t==undefined)t={}
if(typeof t=="number"||t instanceof Number){t={duration:t}}t.duration||(t.duration=1e3)
t.startAt=Date.now()
t.state="pending"
if(t.duration){t.endAt=t.startAt+t.duration}var n=e
if(n instanceof Function){n=n()}if(n&&n.then){n._uxa=t
i.incr(n)
return n.then(function(t){return i.decr(n,t)},function(t){return i.fail(n,t)})}return i}
o.prototype.incr=function(t){this._pending.push(t)
if(n(this._pending)==1){this.setState("busy")}r.emit(this,"incr",[this,t])
if(this._parent){return this._parent.incr(t)}}
o.prototype.decr=function(t,e){var i=this._pending.indexOf(t)
if(i>=0){this._pending.splice(i,1)
t._uxa.endedAt=Date.now()
if(t._uxa.error){this._errors.push(t)}r.emit(this,"decr",[this,t])
if(n(this._pending)==0){this.setState("idle")}if(this._parent){return this._parent.decr(t,e)}}}
o.prototype.fail=function(t,e){t._uxa.error=e
return this.decr(t)}
o.prototype.stateDidSet=function(t,e){if(t=="busy"){this._owner&&this._owner.trigger&&this._owner.trigger("uxa:busy")}else if(t=="idle"){this._owner&&this._owner.trigger&&this._owner.trigger("uxa:idle")
this._owner&&this._owner.commit&&this._owner.commit()}return r.emit(this,t,[])}
o.prototype.then=function(t){if(this.state()=="idle"){return t()}else{return r.once(this,"idle",t)}}},function(t,e,i){var n=i(0)
var r=n.defineTag("Snackbar")
e.Snackbar=r},function(t,e,i){e.DecodeBuffer=o
var n=i(59).preset
var r=i(105).FlexDecoder
r.mixin(o.prototype)
function o(t){if(!(this instanceof o))return new o(t)
if(t){this.options=t
if(t.codec){var e=this.codec=t.codec
if(e.bufferish)this.bufferish=e.bufferish}}}o.prototype.codec=n
o.prototype.fetch=function(){return this.codec.decode(this)}},function(t,e,i){e.decode=r
var n=i(101).DecodeBuffer
function r(t,e){var i=new n(e)
i.write(t)
return i.read()}},function(t,e,i){e.EncodeBuffer=o
var n=i(60).preset
var r=i(105).FlexEncoder
r.mixin(o.prototype)
function o(t){if(!(this instanceof o))return new o(t)
if(t){this.options=t
if(t.codec){var e=this.codec=t.codec
if(e.bufferish)this.bufferish=e.bufferish}}}o.prototype.codec=n
o.prototype.write=function(t){this.codec.encode(this,t)}},function(t,e,i){e.encode=r
var n=i(103).EncodeBuffer
function r(t,e){var i=new n(e)
i.write(t)
return i.read()}},function(t,e,i){e.FlexDecoder=a
e.FlexEncoder=u
var n=i(7)
var r=2048
var o=65536
var s="BUFFER_SHORTAGE"
function a(){if(!(this instanceof a))return new a}function u(){if(!(this instanceof u))return new u}a.mixin=y(c())
a.mixin(a.prototype)
u.mixin=y(p())
u.mixin(u.prototype)
function c(){return{bufferish:n,write:t,fetch:h,flush:e,push:f,pull:m,read:d,reserve:i,offset:0}
function t(t){var e=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer
this.buffer=e?t?this.bufferish.concat([e,t]):e:t
this.offset=0}function e(){while(this.offset<this.buffer.length){var t=this.offset
var e
try{e=this.fetch()}catch(e){if(e&&e.message!=s)throw e
this.offset=t
break}this.push(e)}}function i(t){var e=this.offset
var i=e+t
if(i>this.buffer.length)throw new Error(s)
this.offset=i
return e}}function p(){return{bufferish:n,write:l,fetch:t,flush:e,push:f,pull:i,read:d,reserve:s,send:a,maxBufferSize:o,minBufferSize:r,offset:0,start:0}
function t(){var t=this.start
if(t<this.offset){var e=this.start=this.offset
return n.prototype.slice.call(this.buffer,t,e)}}function e(){while(this.start<this.offset){var t=this.fetch()
if(t)this.push(t)}}function i(){var t=this.buffers||(this.buffers=[])
var e=t.length>1?this.bufferish.concat(t):t[0]
t.length=0
return e}function s(t){var e=t|0
if(this.buffer){var i=this.buffer.length
var n=this.offset|0
var r=n+e
if(r<i){this.offset=r
return n}this.flush()
t=Math.max(t,Math.min(i*2,this.maxBufferSize))}t=Math.max(t,this.minBufferSize)
this.buffer=this.bufferish.alloc(t)
this.start=0
this.offset=e
return 0}function a(t){var e=t.length
if(e>this.minBufferSize){this.flush()
this.push(t)}else{var i=this.reserve(e)
n.prototype.copy.call(t,this.buffer,i)}}}function l(){throw new Error("method not implemented: write()")}function h(){throw new Error("method not implemented: fetch()")}function d(){var t=this.buffers&&this.buffers.length
if(!t)return this.fetch()
this.flush()
return this.pull()}function f(t){var e=this.buffers||(this.buffers=[])
e.push(t)}function m(){var t=this.buffers||(this.buffers=[])
return t.shift()}function y(t){return e
function e(e){for(var i in t){e[i]=t[i]}return e}}},function(t,e,i){var n=i(40)
var r=i(55)
var o=r.Uint64BE
var s=r.Int64BE
e.getReadFormat=l
e.readUint8=_
var a=i(7)
var u=i(57)
var c="undefined"!==typeof Map
var p=true
function l(t){var e=a.hasArrayBuffer&&t&&t.binarraybuffer
var i=t&&t.int64
var n=c&&t&&t.usemap
var r={map:n?d:h,array:f,str:m,bin:e?g:y,ext:v,uint8:_,uint16:x,uint32:T,uint64:k(8,i?E:A),int8:b,int16:w,int32:S,int64:k(8,i?D:C),float32:k(4,P),float64:k(8,$)}
return r}function h(t,e){var i={}
var n
var r=new Array(e)
var o=new Array(e)
var s=t.codec.decode
for(n=0;n<e;n++){r[n]=s(t)
o[n]=s(t)}for(n=0;n<e;n++){i[r[n]]=o[n]}return i}function d(t,e){var i=new Map
var n
var r=new Array(e)
var o=new Array(e)
var s=t.codec.decode
for(n=0;n<e;n++){r[n]=s(t)
o[n]=s(t)}for(n=0;n<e;n++){i.set(r[n],o[n])}return i}function f(t,e){var i=new Array(e)
var n=t.codec.decode
for(var r=0;r<e;r++){i[r]=n(t)}return i}function m(t,e){var i=t.reserve(e)
var n=i+e
return u.toString.call(t.buffer,"utf-8",i,n)}function y(t,e){var i=t.reserve(e)
var n=i+e
var r=u.slice.call(t.buffer,i,n)
return a.from(r)}function g(t,e){var i=t.reserve(e)
var n=i+e
var r=u.slice.call(t.buffer,i,n)
return a.Uint8Array.from(r).buffer}function v(t,e){var i=t.reserve(e+1)
var n=t.buffer[i++]
var r=i+e
var o=t.codec.getExtUnpacker(n)
if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n))
var s=u.slice.call(t.buffer,i,r)
return o(s)}function _(t){var e=t.reserve(1)
return t.buffer[e]}function b(t){var e=t.reserve(1)
var i=t.buffer[e]
return i&128?i-256:i}function x(t){var e=t.reserve(2)
var i=t.buffer
return i[e++]<<8|i[e]}function w(t){var e=t.reserve(2)
var i=t.buffer
var n=i[e++]<<8|i[e]
return n&32768?n-65536:n}function T(t){var e=t.reserve(4)
var i=t.buffer
return i[e++]*16777216+(i[e++]<<16)+(i[e++]<<8)+i[e]}function S(t){var e=t.reserve(4)
var i=t.buffer
return i[e++]<<24|i[e++]<<16|i[e++]<<8|i[e]}function k(t,e){return function(i){var n=i.reserve(t)
return e.call(i.buffer,n,p)}}function A(t){return new o(this,t).toNumber()}function C(t){return new s(this,t).toNumber()}function E(t){return new o(this,t)}function D(t){return new s(this,t)}function P(t){return n.read(this,t,false,23,4)}function $(t){return n.read(this,t,false,52,8)}},function(t,e){var i=e.uint8=new Array(256)
for(var n=0;n<=255;n++){i[n]=r(n)}function r(t){return function(e){var i=e.reserve(1)
e.buffer[i]=t}}},function(t,e,i){"use strict"
var n=i(109)
function r(t,e){var i=Math.floor(t/e)
var n=t-i*e
if(n>0){i++}return i}t.exports=function t(e,i){var o=e.scale
var s=e.amplitude_scale
var a=127
var u=-128
return function t(e){var c=r(e.length,o)
var p=20
var l=new DataView(new ArrayBuffer(p+c*2))
var h=[]
var d
var f=Infinity,m=-Infinity,y=0
var g=e.length
var v=p
var _
l.setInt32(0,1,true)
l.setUint32(4,1,true)
l.setInt32(8,e.sampleRate,true)
l.setInt32(12,o,true)
l.setInt32(16,c,true)
for(d=0;d<e.numberOfChannels;++d){h[d]=e.getChannelData(d)}for(_=0;_<g;_++){var b=0
for(d=0;d<h.length;++d){b+=h[d][_]}b=Math.floor(a*b*s/h.length)
if(b<f){f=b
if(f<u){f=u}}if(b>m){m=b
if(m>a){m=a}}if(++y===o){l.setInt8(v++,Math.floor(f))
l.setInt8(v++,Math.floor(m))
f=Infinity
m=-Infinity
y=0}}if(y>0){l.setInt8(v++,Math.floor(f))
l.setInt8(v++,Math.floor(m))}i(null,new n(l.buffer,n.adapters.arraybuffer),e)}}},function(t,e,i){"use strict"
var n=i(280)
n.adapters=i(277)
t.exports=n},function(t,e){},function(t,e,i){var n=i(0),r=n.createElement
App=null
var o=i(123).API
var s=i(42).Container
SCRIMBA_API=o.instance()
SDB=SCRIMBA_API.db()
var a=document.documentElement
window.path=i(64)
window.MP=i(9)
window.ANIM=i(63)
n.Event.prototype.cancel=function(){return this.prevent()}
var u=i(199).Scrimba
if(SCRIMBA_API.isEmbed()||document.location.href.indexOf(".embed")>=0){a.classList.add("is-embed")}try{if(document.location.search.indexOf("minimal")>=0){a.classList.add("minimal")
SCRIMBA_API.MINIMAL=true}}catch(t){}n.extendTag("element",function(t){t.prototype.root=function(){return App}
t.prototype.api=function(){return SCRIMBA_API}
t.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.api()).log.apply(t,[].concat([this.constructor._name],Array.from(n)))}
t.prototype.ua=function(){return this.api().ua()}
t.prototype.anim=function(){return window.ANIM}})
n.extendTag("html",function(t){t.prototype.parent=function(){return null}})
var c
var p=async function(){if(!document.hidden&&!c){c=r(u).setApi(SCRIMBA_API).end()
c.setUrl(c.router().url().path())
document.removeEventListener("visibilitychange",p,false)
if(true){s.instance().mount()
var t=new URLSearchParams(window.location.search)
if(t.get("coupon")){var e=await SCRIMBA_API.rpc("validateCoupon",[t.get("coupon"),undefined,SCRIMBA_API.user()?SCRIMBA_API.user().id:undefined])
App.uxa().flash(e?e.message:"Invalid coupon code")
t.delete("coupon")
var i=t.toString()==""?window.location.pathname:""+window.location.pathname+"?"+t.toString()
return window.history.replaceState(window.history.state,"",i)}}}}
if(document.hidden){document.addEventListener("visibilitychange",p,false)}else{p()}},function(t,e){e.conf={wordPattern:/(#?-?\d*\.\d\w*%?)|((::|[@#.!:])?[\w-?]+%?)|::|[@#.!:]/g,comments:{blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}
e.language={defaultToken:"",tokenPostfix:".css",ws:"[ \t\n\r\f]*",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.bracket"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@selector"}],selector:[{include:"@comments"},{include:"@import"},{include:"@strings"},["[@](keyframes|-webkit-keyframes|-moz-keyframes|-o-keyframes)",{token:"keyword",next:"@keyframedeclaration"}],["[@](page|content|font-face|-moz-document)",{token:"keyword"}],["[@](charset|namespace)",{token:"keyword",next:"@declarationbody"}],["(url-prefix)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],["(url)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],{include:"@selectorname"},["[\\*]","tag"],["[>\\+,]","delimiter"],["\\[",{token:"delimiter.bracket",next:"@selectorattribute"}],["{",{token:"delimiter.bracket",next:"@selectorbody"}]],selectorbody:[{include:"@comments"},["[*_]?@identifier@ws:(?=(\\s|\\d|[^{;}]*[;}]))","attribute.name","@rulevalue"],["}",{token:"delimiter.bracket",next:"@pop"}]],selectorname:[["(\\.|#(?=[^{])|%|(@identifier)|:)+","tag"]],selectorattribute:[{include:"@term"},["]",{token:"delimiter.bracket",next:"@pop"}]],term:[{include:"@comments"},["(url-prefix)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],["(url)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],{include:"@functioninvocation"},{include:"@numbers"},{include:"@name"},["([<>=\\+\\-\\*\\/\\^\\|\\~,])","delimiter"],[",","delimiter"]],rulevalue:[{include:"@comments"},{include:"@strings"},{include:"@term"},["!important","keyword"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],warndebug:[["[@](warn|debug)",{token:"keyword",next:"@declarationbody"}]],import:[["[@](import)",{token:"keyword",next:"@declarationbody"}]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],parenthizedterm:[{include:"@term"},["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],declarationbody:[{include:"@term"},[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[/[^*/]+/,"comment"],[/./,"comment"]],name:[["@identifier","attribute.value"]],numbers:[["-?(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"attribute.value.number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","attribute.value.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","attribute.value.unit","@pop"]],keyframedeclaration:[["@identifier","attribute.value"],["{",{token:"delimiter.bracket",switchTo:"@keyframebody"}]],keyframebody:[{include:"@term"},["{",{token:"delimiter.bracket",next:"@selectorbody"}],["}",{token:"delimiter.bracket",next:"@pop"}]],functioninvocation:[["@identifier\\(",{token:"attribute.value",next:"@functionarguments"}]],functionarguments:[["\\$@identifier@ws:","attribute.name"],["[,]","delimiter"],{include:"@term"},["\\)",{token:"attribute.value",next:"@pop"}]],strings:[['~?"',{token:"string",next:"@stringenddoublequote"}],["~?'",{token:"string",next:"@stringendquote"}]],stringenddoublequote:[["\\\\.","string"],['"',{token:"string",next:"@pop"}],[/[^\\"]+/,"string"],[".","string"]],stringendquote:[["\\\\.","string"],["'",{token:"string",next:"@pop"}],[/[^\\']+/,"string"],[".","string"]]}}},function(t,e){e.conf={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}]}
e.language={defaultToken:"",tokenPostfix:".java",keywords:["abstract","continue","for","new","switch","assert","default","goto","package","synchronized","boolean","do","if","private","this","break","double","implements","protected","throw","byte","else","import","public","throws","case","enum","instanceof","return","transient","catch","extends","int","short","try","char","final","interface","static","void","class","finally","long","strictfp","volatile","const","float","native","super","while","true","false"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@default":"identifier"}}],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,"annotation"],[/(@digits)[eE]([\-+]?(@digits))?[fFdD]?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?[fFdD]?/,"number.float"],[/0[xX](@hexdigits)[Ll]?/,"number.hex"],[/0(@octaldigits)[Ll]?/,"number.octal"],[/0[bB](@binarydigits)[Ll]?/,"number.binary"],[/(@digits)[fFdD]/,"number.float"],[/(@digits)[lL]?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@javadoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],javadoc:[[/[^\/*]+/,"comment.doc"],[/\/\*/,"comment.doc.invalid"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]]}}},function(t,e){e.conf={wordPattern:/(#?-?\d*\.\d\w*%?)|([@#!.:]?[\w-?]+%?)|[@#!.]/g,comments:{blockComment:["/*","*/"],lineComment:"//"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}
e.language={defaultToken:"",tokenPostfix:".less",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",identifierPlus:"-?-?([a-zA-Z:.]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-:.]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@nestedJSBegin"},["[ \\t\\r\\n]+",""],{include:"@comments"},{include:"@keyword"},{include:"@strings"},{include:"@numbers"},["[*_]?[a-zA-Z\\-\\s]+(?=:.*(;|(\\\\$)))","attribute.name","@attribute"],["url(\\-prefix)?\\(",{token:"tag",next:"@urldeclaration"}],["[{}()\\[\\]]","@brackets"],["[,:;]","delimiter"],["#@identifierPlus","tag.id"],["&","tag"],["\\.@identifierPlus(?=\\()","tag.class","@attribute"],["\\.@identifierPlus","tag.class"],["@identifierPlus","tag"],{include:"@operators"},["@(@identifier(?=[:,\\)]))","variable","@attribute"],["@(@identifier)","variable"],["@","key","@atRules"]],nestedJSBegin:[["``","delimiter.backtick"],["`",{token:"delimiter.backtick",next:"@nestedJSEnd",nextEmbedded:"text/javascript"}]],nestedJSEnd:[["`",{token:"delimiter.backtick",next:"@pop",nextEmbedded:"@pop"}]],operators:[["[<>=\\+\\-\\*\\/\\^\\|\\~]","operator"]],keyword:[["(@[\\s]*import|![\\s]*important|true|false|when|iscolor|isnumber|isstring|iskeyword|isurl|ispixel|ispercentage|isem|hue|saturation|lightness|alpha|lighten|darken|saturate|desaturate|fadein|fadeout|fade|spin|mix|round|ceil|floor|percentage)\\b","keyword"]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"tag",next:"@pop"}]],attribute:[{include:"@nestedJSBegin"},{include:"@comments"},{include:"@strings"},{include:"@numbers"},{include:"@keyword"},["[a-zA-Z\\-]+(?=\\()","attribute.value","@attribute"],[">","operator","@pop"],["@identifier","attribute.value"],{include:"@operators"},["@(@identifier)","variable"],["[)\\}]","@brackets","@pop"],["[{}()\\[\\]>]","@brackets"],["[;]","delimiter","@pop"],["[,=:]","delimiter"],["\\s",""],[".","attribute.value"]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[".","comment"]],numbers:[["(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"attribute.value.number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","attribute.value.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","attribute.value.unit","@pop"]],strings:[['~?"',{token:"string.delimiter",next:"@stringsEndDoubleQuote"}],["~?'",{token:"string.delimiter",next:"@stringsEndQuote"}]],stringsEndDoubleQuote:[['\\\\"',"string"],['"',{token:"string.delimiter",next:"@popall"}],[".","string"]],stringsEndQuote:[["\\\\'","string"],["'",{token:"string.delimiter",next:"@popall"}],[".","string"]],atRules:[{include:"@comments"},{include:"@strings"},["[()]","delimiter"],["[\\{;]","delimiter","@pop"],[".","key"]]}}},function(t,e){e.conf={comments:{lineComment:"#",blockComment:["'''","'''"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}
e.language={defaultToken:"",tokenPostfix:".python",keywords:["and","as","assert","break","class","continue","def","del","elif","else","except","exec","finally","for","from","global","if","import","in","is","lambda","None","not","or","pass","print","raise","return","self","try","while","with","yield","int","float","long","complex","hex","abs","all","any","apply","basestring","bin","bool","buffer","bytearray","callable","chr","classmethod","cmp","coerce","compile","complex","delattr","dict","dir","divmod","enumerate","eval","execfile","file","filter","format","frozenset","getattr","globals","hasattr","hash","help","id","input","intern","isinstance","issubclass","iter","len","locals","list","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","reversed","range","raw_input","reduce","reload","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","unichr","unicode","vars","xrange","zip","True","False","__dict__","__methods__","__members__","__class__","__bases__","__name__","__mro__","__subclasses__","__init__","__import__"],brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"}],tokenizer:{root:[{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},[/[,:;]/,"delimiter"],[/[{}\[\]()]/,"@brackets"],[/@[a-zA-Z]\w*/,"tag"],[/[a-zA-Z]\w*/,{cases:{"@keywords":"keyword","@default":"identifier"}}]],whitespace:[[/\s+/,"white"],[/(^#.*$)/,"comment"],[/('''.*''')|(""".*""")/,"string"],[/'''.*$/,"string","@endDocString"],[/""".*$/,"string","@endDblDocString"]],endDocString:[[/\\'/,"string"],[/.*'''/,"string","@popall"],[/.*$/,"string"]],endDblDocString:[[/\\"/,"string"],[/.*"""/,"string","@popall"],[/.*$/,"string"]],numbers:[[/-?0x([abcdef]|[ABCDEF]|\d)+[lL]?/,"number.hex"],[/-?(\d*\.)?\d+([eE][+\-]?\d+)?[jJ]?[lL]?/,"number"]],strings:[[/'$/,"string.escape","@popall"],[/'/,"string.escape","@stringBody"],[/"$/,"string.escape","@popall"],[/"/,"string.escape","@dblStringBody"]],stringBody:[[/\\./,"string"],[/'/,"string.escape","@popall"],[/.(?=.*')/,"string"],[/.*\\$/,"string"],[/.*$/,"string","@popall"]],dblStringBody:[[/\\./,"string"],[/"/,"string.escape","@popall"],[/.(?=.*")/,"string"],[/.*\\$/,"string"],[/.*$/,"string","@popall"]]}}},function(t,e){e.conf={comments:{lineComment:"#",blockComment:["=begin","=end"]},brackets:[["(",")"],["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}
e.language={tokenPostfix:".ruby",keywords:["__LINE__","__ENCODING__","__FILE__","BEGIN","END","alias","and","begin","break","case","class","def","defined?","do","else","elsif","end","ensure","for","false","if","in","module","next","nil","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield"],keywordops:["::","..","...","?",":","=>"],builtins:["require","public","private","include","extend","attr_reader","protected","private_class_method","protected_class_method","new"],declarations:["module","class","def","case","do","begin","for","if","while","until","unless"],linedecls:["def","case","do","begin","for","if","while","until","unless"],operators:["^","&","|","<=>","==","===","!~","=~",">",">=","<","<=","<<",">>","+","-","*","/","%","**","~","+@","-@","[]","[]=","`","+=","-=","*=","**=","/=","^=","%=","<<=",">>=","&=","&&=","||=","|="],brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"}],symbols:/[=><!~?:&|+\-*\/\^%\.]+/,escape:/(?:[abefnrstv\\"'\n\r]|[0-7]{1,3}|x[0-9A-Fa-f]{1,2}|u[0-9A-Fa-f]{4})/,escapes:/\\(?:C\-(@escape|.)|c(@escape|.)|@escape)/,decpart:/\d(_?\d)*/,decimal:/0|@decpart/,delim:/[^a-zA-Z0-9\s\n\r]/,heredelim:/(?:\w+|'[^']*'|"[^"]*"|`[^`]*`)/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[AzZbBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})?/,tokenizer:{root:[[/^(\s*)([a-z_]\w*[!?=]?)/,["white",{cases:{"for|until|while":{token:"keyword.$2",next:"@dodecl.$2"},"@declarations":{token:"keyword.$2",next:"@root.$2"},end:{token:"keyword.$S2",next:"@pop"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}]],[/[a-z_]\w*[!?=]?/,{cases:{"if|unless|while|until":{token:"keyword.$0x",next:"@modifier.$0x"},for:{token:"keyword.$2",next:"@dodecl.$2"},"@linedecls":{token:"keyword.$0",next:"@root.$0"},end:{token:"keyword.$S2",next:"@pop"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],[/[A-Z][\w]*[!?=]?/,"constructor.identifier"],[/\$[\w]*/,"global.constant"],[/@[\w]*/,"namespace.instance.identifier"],[/@@[\w]*/,"namespace.class.identifier"],[/<<-(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/[ \t\r\n]+<<(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/^<<(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],{include:"@whitespace"},[/"/,{token:"string.d.delim",next:'@dstring.d."'}],[/'/,{token:"string.sq.delim",next:"@sstring.sq"}],[/%([rsqxwW]|Q?)/,{token:"@rematch",next:"pstring"}],[/`/,{token:"string.x.delim",next:"@dstring.x.`"}],[/:(\w|[$@])\w*[!?=]?/,"string.s"],[/:"/,{token:"string.s.delim",next:'@dstring.s."'}],[/:'/,{token:"string.s.delim",next:"@sstring.s"}],[/\/(?=(\\\/|[^\/\n])+\/)/,{token:"regexp.delim",next:"@regexp"}],[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@keywordops":"keyword","@operators":"operator","@default":""}}],[/[;,]/,"delimiter"],[/0[xX][0-9a-fA-F](_?[0-9a-fA-F])*/,"number.hex"],[/0[_oO][0-7](_?[0-7])*/,"number.octal"],[/0[bB][01](_?[01])*/,"number.binary"],[/0[dD]@decpart/,"number"],[/@decimal((\.@decpart)?([eE][\-+]?@decpart)?)/,{cases:{$1:"number.float","@default":"number"}}]],dodecl:[[/^/,{token:"",switchTo:"@root.$S2"}],[/[a-z_]\w*[!?=]?/,{cases:{end:{token:"keyword.$S2",next:"@pop"},do:{token:"keyword",switchTo:"@root.$S2"},"@linedecls":{token:"@rematch",switchTo:"@root.$S2"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],{include:"@root"}],modifier:[[/^/,"","@pop"],[/[a-z_]\w*[!?=]?/,{cases:{end:{token:"keyword.$S2",next:"@pop"},"then|else|elsif|do":{token:"keyword",switchTo:"@root.$S2"},"@linedecls":{token:"@rematch",switchTo:"@root.$S2"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],{include:"@root"}],sstring:[[/[^\\']+/,"string.$S2"],[/\\\\|\\'|\\$/,"string.$S2.escape"],[/\\./,"string.$S2.invalid"],[/'/,{token:"string.$S2.delim",next:"@pop"}]],dstring:[[/[^\\`"#]+/,"string.$S2"],[/#/,"string.$S2.escape","@interpolated"],[/\\$/,"string.$S2.escape"],[/@escapes/,"string.$S2.escape"],[/\\./,"string.$S2.escape.invalid"],[/[`"]/,{cases:{"$#==$S3":{token:"string.$S2.delim",next:"@pop"},"@default":"string.$S2"}}]],heredoc:[[/^(\s*)(@heredelim)$/,{cases:{"$2==$S2":["string.heredoc",{token:"string.heredoc.delimiter",next:"@pop"}],"@default":["string.heredoc","string.heredoc"]}}],[/.*/,"string.heredoc"]],interpolated:[[/\$\w*/,"global.constant","@pop"],[/@\w*/,"namespace.class.identifier","@pop"],[/@@\w*/,"namespace.instance.identifier","@pop"],[/[{]/,{token:"string.escape.curly",switchTo:"@interpolated_compound"}],["","","@pop"]],interpolated_compound:[[/[}]/,{token:"string.escape.curly",next:"@pop"}],{include:"@root"}],pregexp:[{include:"@whitespace"},[/[^\(\{\[\\]/,{cases:{"$#==$S3":{token:"regexp.delim",next:"@pop"},"$#==$S2":{token:"regexp.delim",next:"@push"},"~[)}\\]]":"@brackets.regexp.escape.control","~@regexpctl":"regexp.escape.control","@default":"regexp"}}],{include:"@regexcontrol"}],regexp:[{include:"@regexcontrol"},[/[^\\\/]/,"regexp"],["/[ixmp]*",{token:"regexp.delim"},"@pop"]],regexcontrol:[[/(\{)(\d+(?:,\d*)?)(\})/,["@brackets.regexp.escape.control","regexp.escape.control","@brackets.regexp.escape.control"]],[/(\[)(\^?)/,["@brackets.regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?[:=!])/,["@brackets.regexp.escape.control","regexp.escape.control"]],[/\(\?#/,{token:"regexp.escape.control",next:"@regexpcomment"}],[/[()]/,"@brackets.regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/\\$/,"regexp.escape"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/#/,"regexp.escape","@interpolated"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/\\$/,"regexp.escape"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"@brackets.regexp.escape.control","@pop"]],regexpcomment:[[/[^)]+/,"comment"],[/\)/,{token:"regexp.escape.control",next:"@pop"}]],pstring:[[/%([qws])\(/,{token:"string.$1.delim",switchTo:"@qstring.$1.(.)"}],[/%([qws])\[/,{token:"string.$1.delim",switchTo:"@qstring.$1.[.]"}],[/%([qws])\{/,{token:"string.$1.delim",switchTo:"@qstring.$1.{.}"}],[/%([qws])</,{token:"string.$1.delim",switchTo:"@qstring.$1.<.>"}],[/%([qws])(@delim)/,{token:"string.$1.delim",switchTo:"@qstring.$1.$2.$2"}],[/%r\(/,{token:"regexp.delim",switchTo:"@pregexp.(.)"}],[/%r\[/,{token:"regexp.delim",switchTo:"@pregexp.[.]"}],[/%r\{/,{token:"regexp.delim",switchTo:"@pregexp.{.}"}],[/%r</,{token:"regexp.delim",switchTo:"@pregexp.<.>"}],[/%r(@delim)/,{token:"regexp.delim",switchTo:"@pregexp.$1.$1"}],[/%(x|W|Q?)\(/,{token:"string.$1.delim",switchTo:"@qqstring.$1.(.)"}],[/%(x|W|Q?)\[/,{token:"string.$1.delim",switchTo:"@qqstring.$1.[.]"}],[/%(x|W|Q?)\{/,{token:"string.$1.delim",switchTo:"@qqstring.$1.{.}"}],[/%(x|W|Q?)</,{token:"string.$1.delim",switchTo:"@qqstring.$1.<.>"}],[/%(x|W|Q?)(@delim)/,{token:"string.$1.delim",switchTo:"@qqstring.$1.$2.$2"}],[/%([rqwsxW]|Q?)./,{token:"invalid",next:"@pop"}],[/./,{token:"invalid",next:"@pop"}]],qstring:[[/\\$/,"string.$S2.escape"],[/\\./,"string.$S2.escape"],[/./,{cases:{"$#==$S4":{token:"string.$S2.delim",next:"@pop"},"$#==$S3":{token:"string.$S2.delim",next:"@push"},"@default":"string.$S2"}}]],qqstring:[[/#/,"string.$S2.escape","@interpolated"],{include:"@qstring"}],whitespace:[[/[ \t\r\n]+/,""],[/^\s*=begin\b/,"comment","@comment"],[/#.*$/,"comment"]],comment:[[/[^=]+/,"comment"],[/^\s*=begin\b/,"comment.invalid"],[/^\s*=end\b.*/,"comment","@pop"],[/[=]/,"comment"]]}}},function(t,e){exportsconf={comments:{blockComment:["\x3c!--","--\x3e"]},brackets:[["<",">"]],autoClosingPairs:[{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'}],surroundingPairs:[{open:"<",close:">"},{open:"'",close:"'"},{open:'"',close:'"'}]}
e.language={defaultToken:"",tokenPostfix:".xml",ignoreCase:true,qualifiedName:/(?:[\w\.\-]+:)?[\w\.\-]+/,tokenizer:{root:[[/[^<&]+/,""],{include:"@whitespace"},[/(<)(@qualifiedName)/,[{token:"delimiter"},{token:"tag",next:"@tag"}]],[/(<\/)(@qualifiedName)(\s*)(>)/,[{token:"delimiter"},{token:"tag"},"",{token:"delimiter"}]],[/(<\?)(@qualifiedName)/,[{token:"delimiter"},{token:"metatag",next:"@tag"}]],[/(<\!)(@qualifiedName)/,[{token:"delimiter"},{token:"metatag",next:"@tag"}]],[/<\!\[CDATA\[/,{token:"delimiter.cdata",next:"@cdata"}],[/&\w+;/,"string.escape"]],cdata:[[/[^\]]+/,""],[/\]\]>/,{token:"delimiter.cdata",next:"@pop"}],[/\]/,""]],tag:[[/[ \t\r\n]+/,""],[/(@qualifiedName)(\s*=\s*)("[^"]*"|'[^']*')/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">?\/]*|'[^'>?\/]*)(?=[\?\/]\>)/,["attribute.name","","attribute.value"]],[/(@qualifiedName)(\s*=\s*)("[^">]*|'[^'>]*)/,["attribute.name","","attribute.value"]],[/@qualifiedName/,"attribute.name"],[/\?>/,{token:"delimiter",next:"@pop"}],[/(\/)(>)/,[{token:"tag"},{token:"delimiter",next:"@pop"}]],[/>/,{token:"delimiter",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,""],[/<!--/,{token:"comment",next:"@comment"}]],comment:[[/[^<\-]+/,"comment.content"],[/-->/,{token:"comment",next:"@pop"}],[/<!--/,"comment.content.invalid"],[/[<\-]/,"comment.content"]]}}},function(t,e){var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]
var n=["January","February","March","April","May","June","July","August","September","October","November","December"]
function r(t){return("0"+t).slice(-2)}function o(t,e){var s=t.getDay()
var a=t.getDate()
var u=t.getMonth()
var c=t.getFullYear()
var p=t.getHours()
var l=t.getMinutes()
var h=t.getSeconds()
return e.replace(/%([%aAbBcdeHIlmMpPSwyYZz])/g,function(e){var d
var f=e[1]
switch(f){case"%":return"%"
case"a":return i[s].slice(0,3)
case"A":return i[s]
case"b":return n[u].slice(0,3)
case"B":return n[u]
case"c":return t.toString()
case"d":return r(a)
case"e":return a
case"H":return r(p)
case"I":return r(o(t,"%l"))
case"l":if(p===0||p===12){return 12}else{return(p+12)%12}case"m":return r(u+1)
case"M":return r(l)
case"p":if(p>11){return"PM"}else{return"AM"}case"P":if(p>11){return"pm"}else{return"am"}case"S":return r(h)
case"w":return s
case"y":return r(c%100)
case"Y":return c
case"Z":d=t.toString().match(/\((\w+)\)$/)
return d?d[1]:""
case"z":d=t.toString().match(/\w([+-]\d\d\d\d) /)
return d?d[1]:""}})}function s(t){if("Intl"in window){try{return new Intl.DateTimeFormat(undefined,t)}catch(t){if(!(t instanceof RangeError)){throw t}}}}var a=null
function u(){if(a!==null){return a}var t=s({day:"numeric",month:"short"})
if(t){var e=t.format(new Date(0))
a=!!e.match(/^\d/)
return a}else{return false}}var c=null
function p(){if(c!==null){return c}var t=s({day:"numeric",month:"short",year:"numeric"})
if(t){var e=t.format(new Date(0))
c=!!e.match(/\d,/)
return c}else{return true}}function l(t){var e=new Date
return e.getUTCFullYear()===t.getUTCFullYear()}function h(t){this.date=t}h.prototype.toString=function(){var t=this.timeElapsed()
if(t){return t}else{var e=this.timeAhead()
if(e){return e}else{return"on "+this.formatDate()}}}
h.prototype.timeElapsed=function(){var t=(new Date).getTime()-this.date.getTime()
var e=Math.round(t/1e3)
var i=Math.round(e/60)
var n=Math.round(i/60)
var r=Math.round(n/24)
if(t>=0&&r<30){return this.timeAgoFromMs(t)}else{return null}}
h.prototype.timeAhead=function(){var t=this.date.getTime()-(new Date).getTime()
var e=Math.round(t/1e3)
var i=Math.round(e/60)
var n=Math.round(i/60)
var r=Math.round(n/24)
if(t>=0&&r<30){return this.timeUntil()}else{return null}}
h.prototype.timeAgo=function(){var t=(new Date).getTime()-this.date.getTime()
return this.timeAgoFromMs(t)}
h.prototype.timeAgoFromMs=function(t){var e=Math.round(t/1e3)
var i=Math.round(e/60)
var n=Math.round(i/60)
var r=Math.round(n/24)
var o=Math.round(r/30)
var s=Math.round(o/12)
if(t<0){return"just now"}else if(e<60){return"just now"}else if(e<90){return"a minute ago"}else if(i<45){return i+" minutes ago"}else if(i<90){return"an hour ago"}else if(n<24){return n+" hours ago"}else if(n<36){return"a day ago"}else if(r<30){return r+" days ago"}else if(r<45){return"a month ago"}else if(o<12){return o+" months ago"}else if(o<18){return"a year ago"}else{return s+" years ago"}}
h.prototype.microTimeAgo=function(){var t=(new Date).getTime()-this.date.getTime()
var e=Math.round(t/1e3)
var i=Math.round(e/60)
var n=Math.round(i/60)
var r=Math.round(n/24)
var o=Math.round(r/30)
var s=Math.round(o/12)
if(i<1){return"1m"}else if(i<60){return i+"m"}else if(n<24){return n+"h"}else if(r<365){return r+"d"}else{return s+"y"}}
h.prototype.timeUntil=function(){var t=this.date.getTime()-(new Date).getTime()
return this.timeUntilFromMs(t)}
h.prototype.timeUntilFromMs=function(t){var e=Math.round(t/1e3)
var i=Math.round(e/60)
var n=Math.round(i/60)
var r=Math.round(n/24)
var o=Math.round(r/30)
var s=Math.round(o/12)
if(o>=18){return s+" years from now"}else if(o>=12){return"a year from now"}else if(r>=45){return o+" months from now"}else if(r>=30){return"a month from now"}else if(n>=36){return r+" days from now"}else if(n>=24){return"a day from now"}else if(i>=90){return n+" hours from now"}else if(i>=45){return"an hour from now"}else if(e>=90){return i+" minutes from now"}else if(e>=45){return"a minute from now"}else if(e>=45){return e+" seconds from now"}else{return"just now"}}
h.prototype.microTimeUntil=function(){var t=this.date.getTime()-(new Date).getTime()
var e=Math.round(t/1e3)
var i=Math.round(e/60)
var n=Math.round(i/60)
var r=Math.round(n/24)
var o=Math.round(r/30)
var s=Math.round(o/12)
if(r>=365){return s+"y"}else if(n>=24){return r+"d"}else if(i>=60){return n+"h"}else if(i>1){return i+"m"}else{return"1m"}}
h.prototype.formatDate=function(){var t=u()?"%e %b":"%b %e"
if(!l(this.date)){t+=p()?", %Y":" %Y"}return o(this.date,t)}
h.prototype.formatTime=function(){var t=s({hour:"numeric",minute:"2-digit"})
if(t){return t.format(this.date)}else{return o(this.date,"%l:%M%P")}}
t.exports=h},function(t,e,i){"use strict"
e.byteLength=p
e.toByteArray=l
e.fromByteArray=f
var n=[]
var r=[]
var o=typeof Uint8Array!=="undefined"?Uint8Array:Array
var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
for(var a=0,u=s.length;a<u;++a){n[a]=s[a]
r[s.charCodeAt(a)]=a}r["-".charCodeAt(0)]=62
r["_".charCodeAt(0)]=63
function c(t){var e=t.length
if(e%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}return t[e-2]==="="?2:t[e-1]==="="?1:0}function p(t){return t.length*3/4-c(t)}function l(t){var e,i,n,s,a,u
var p=t.length
a=c(t)
u=new o(p*3/4-a)
n=a>0?p-4:p
var l=0
for(e=0,i=0;e<n;e+=4,i+=3){s=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)]
u[l++]=s>>16&255
u[l++]=s>>8&255
u[l++]=s&255}if(a===2){s=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4
u[l++]=s&255}else if(a===1){s=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2
u[l++]=s>>8&255
u[l++]=s&255}return u}function h(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[t&63]}function d(t,e,i){var n
var r=[]
for(var o=e;o<i;o+=3){n=(t[o]<<16)+(t[o+1]<<8)+t[o+2]
r.push(h(n))}return r.join("")}function f(t){var e
var i=t.length
var r=i%3
var o=""
var s=[]
var a=16383
for(var u=0,c=i-r;u<c;u+=a){s.push(d(t,u,u+a>c?c:u+a))}if(r===1){e=t[i-1]
o+=n[e>>2]
o+=n[e<<4&63]
o+="=="}else if(r===2){e=(t[i-2]<<8)+t[i-1]
o+=n[e>>10]
o+=n[e>>4&63]
o+=n[e<<2&63]
o+="="}s.push(o)
return s.join("")}},function(t,e,i){(function(n){e=t.exports=i(121)
e.log=s
e.formatArgs=o
e.save=a
e.load=u
e.useColors=r
e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c()
e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"]
function r(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}
function o(t){var i=this.useColors
t[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+t[0]+(i?"%c ":" ")+"+"+e.humanize(this.diff)
if(!i)return
var n="color: "+this.color
t.splice(1,0,n,"color: inherit")
var r=0
var o=0
t[0].replace(/%[a-zA-Z%]/g,function(t){if("%%"===t)return
r++
if("%c"===t){o=r}})
t.splice(o,0,n)}function s(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{if(null==t){e.storage.removeItem("debug")}else{e.storage.debug=t}}catch(t){}}function u(){var t
try{t=e.storage.debug}catch(t){}if(!t&&typeof n!=="undefined"&&"env"in n){t=n.env.DEBUG}return t}e.enable(u())
function c(){try{return window.localStorage}catch(t){}}}).call(e,i(61))},function(t,e,i){e=t.exports=o.debug=o["default"]=o
e.coerce=c
e.disable=a
e.enable=s
e.enabled=u
e.humanize=i(258)
e.names=[]
e.skips=[]
e.formatters={}
var n
function r(t){var i=0,n
for(n in t){i=(i<<5)-i+t.charCodeAt(n)
i|=0}return e.colors[Math.abs(i)%e.colors.length]}function o(t){function i(){if(!i.enabled)return
var t=i
var r=+new Date
var o=r-(n||r)
t.diff=o
t.prev=n
t.curr=r
n=r
var s=new Array(arguments.length)
for(var a=0;a<s.length;a++){s[a]=arguments[a]}s[0]=e.coerce(s[0])
if("string"!==typeof s[0]){s.unshift("%O")}var u=0
s[0]=s[0].replace(/%([a-zA-Z%])/g,function(i,n){if(i==="%%")return i
u++
var r=e.formatters[n]
if("function"===typeof r){var o=s[u]
i=r.call(t,o)
s.splice(u,1)
u--}return i})
e.formatArgs.call(t,s)
var c=i.log||e.log||console.log.bind(console)
c.apply(t,s)}i.namespace=t
i.enabled=e.enabled(t)
i.useColors=e.useColors()
i.color=r(t)
if("function"===typeof e.init){e.init(i)}return i}function s(t){e.save(t)
e.names=[]
e.skips=[]
var i=(typeof t==="string"?t:"").split(/[\s,]+/)
var n=i.length
for(var r=0;r<n;r++){if(!i[r])continue
t=i[r].replace(/\*/g,".*?")
if(t[0]==="-"){e.skips.push(new RegExp("^"+t.substr(1)+"$"))}else{e.names.push(new RegExp("^"+t+"$"))}}}function a(){e.enable("")}function u(t){var i,n
for(i=0,n=e.skips.length;i<n;i++){if(e.skips[i].test(t)){return false}}for(i=0,n=e.names.length;i<n;i++){if(e.names[i].test(t)){return true}}return false}function c(t){if(t instanceof Error)return t.stack||t.message
return t}},function(t,e,i){var n=i(284)
function r(t,e){var i=-Infinity
t.getFloatFrequencyData(e)
for(var n=4,r=e.length;n<r;n++){if(e[n]>i&&e[n]<0){i=e[n]}}return i}var o
if(typeof window!=="undefined"){o=window.AudioContext||window.webkitAudioContext}var s=null
t.exports=function(t,e){var i=new n
if(!o)return i
var e=e||{},a=e.smoothing||.1,u=e.interval||50,c=e.threshold,p=e.play,l=e.history||10,h=true
s=e.audioContext||s||new o
var d,f,m
m=s.createAnalyser()
m.fftSize=512
m.smoothingTimeConstant=a
f=new Float32Array(m.frequencyBinCount)
if(t.jquery)t=t[0]
if(t instanceof HTMLAudioElement||t instanceof HTMLVideoElement){d=s.createMediaElementSource(t)
if(typeof p==="undefined")p=true
c=c||-50}else{d=s.createMediaStreamSource(t)
c=c||-50}d.connect(m)
if(p)m.connect(s.destination)
i.speaking=false
i.suspend=function(){return s.suspend()}
i.resume=function(){return s.resume()}
Object.defineProperty(i,"state",{get:function(){return s.state}})
s.onstatechange=function(){i.emit("state_change",s.state)}
i.setThreshold=function(t){c=t}
i.setInterval=function(t){u=t}
i.stop=function(){h=false
i.emit("volume_change",-100,c)
if(i.speaking){i.speaking=false
i.emit("stopped_speaking")}m.disconnect()
d.disconnect()}
i.speakingHistory=[]
for(var y=0;y<l;y++){i.speakingHistory.push(0)}var g=function(){setTimeout(function(){if(!h){return}var t=r(m,f)
i.emit("volume_change",t,c)
var e=0
if(t>c&&!i.speaking){for(var n=i.speakingHistory.length-3;n<i.speakingHistory.length;n++){e+=i.speakingHistory[n]}if(e>=2){i.speaking=true
i.emit("speaking")}}else if(t<c&&i.speaking){for(var n=0;n<i.speakingHistory.length;n++){e+=i.speakingHistory[n]}if(e==0){i.speaking=false
i.emit("stopped_speaking")}}i.speakingHistory.shift()
i.speakingHistory.push(0+(t>c))
g()},u)}
g()
return i}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(9)
var a=i(18)
var u=i(2).MSG
var c=i(232).DB
var p=i(229).Socket
var l=i(235).Logger
var h=i(34).LongPromise
var d=i(236).UserAgent
var f=i(52),m=f.SessionStore,y=f.LocalStore
var g=i(234).Analytics
var v=i(86).AuthenticationDialog
var _=i(17).Delay
var b=i(10)
var x=function(t,e){if(typeof e=="string"){if(/^\d{4}-\d\d-\d\dT([\d\.\:]+)/.test(e)){return new Date(e)}}return e}
function w(){var t=this,e
t._initializedAt=t._lastMoveTime=Date.now()
t._ua=new d(window.navigator&&window.navigator.userAgent)
t._cache=JSON.parse((API_CACHE||"{}").replace(/Â§Â§SCRIPTÂ§Â§/g,"script"),x)
t._user=t.db().read(t._cache.user||null)
t._touches=0
t._manifest=t._cache.manifest||{}
t._logger=new l
t._pageVisibility=-1
t._currentCoupon=t._cache.currentCoupon
t._idler=new _(function(){t._idle=true
return t.emit("idle")})
if(t._cache.deps){t.db().preload(t._cache.deps)}if(t._cache.prefetched){for(let e=0,i=n(t._cache.prefetched),r=i.length,o;e<r;e++){o=i[e]
t.db().prefetched(o[0],o[1])}}window.addEventListener("offline",function(){t.log("api","offline")
t._wasOffline=true
t.socket().close()
return t.touch()})
window.addEventListener("online",function(){t.log("api","online")
if(t._wasOffline){t._wasOffline=false
if(!t._hiddenSleep){t.socket().reopen()}}return t.touch()})
document.addEventListener("visibilitychange",function(){var e
t.log("api","visibility",document.visibilityState)
t.sendTracking(b.TYPES.VISIBILITY,[document.visibilityState=="visible"])
return t.setPageVisibility(e=!t.isHidden()),e},false)
if(e=t.sessionStore().getnum("fontSize")){t.setFontSize(e)}window.addEventListener("mousemove",function(){t._idler.delay(5e3)
t._lastMoveTime=Date.now()
if(t._idle){t._idle=false
return t.emit("unidle")}},{passive:true})
t}e.API=w
w.prototype.cache=function(t){return this._cache}
w.prototype.setCache=function(t){this._cache=t
return this}
w.prototype.__user={watch:"userDidSet",name:"user"}
w.prototype.user=function(t){return this._user}
w.prototype.setUser=function(t){var e=this.user()
if(t!=e){this._user=t}if(t!=e){this.userDidSet&&this.userDidSet(t,e,this.__user)}return this}
w.prototype.__hasAvailableUpdates={watch:"hasAvailableUpdatesDidSet",name:"hasAvailableUpdates"}
w.prototype.hasAvailableUpdates=function(t){return this._hasAvailableUpdates}
w.prototype.setHasAvailableUpdates=function(t){var e=this.hasAvailableUpdates()
if(t!=e){this._hasAvailableUpdates=t}if(t!=e){this.hasAvailableUpdatesDidSet&&this.hasAvailableUpdatesDidSet(t,e,this.__hasAvailableUpdates)}return this}
w.prototype.session=function(t){return this._session}
w.prototype.setSession=function(t){this._session=t
return this}
w.prototype.__pageVisibility={watch:"pageVisibilityDidSet",name:"pageVisibility"}
w.prototype.pageVisibility=function(t){return this._pageVisibility}
w.prototype.setPageVisibility=function(t){var e=this.pageVisibility()
if(t!=e){this._pageVisibility=t}if(t!=e){this.pageVisibilityDidSet&&this.pageVisibilityDidSet(t,e,this.__pageVisibility)}return this}
w.prototype.ua=function(t){return this._ua}
w.prototype.setUa=function(t){this._ua=t
return this}
w.instance=function(){return this._instance||(this._instance=new this)}
w.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return r.emit(this,t,n)}
w.prototype.on=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.listen.apply(r,[].concat([this,t],Array.from(o)))}
w.prototype.once=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.once.apply(r,[].concat([this,t],Array.from(o)))}
w.prototype.un=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.unlisten.apply(r,[].concat([this,t],Array.from(o)))}
w.prototype.db=function(){return this._db||(this._db=new c(this))}
w.prototype.analytics=function(){return this._analytics||(this._analytics=new g(this))}
w.prototype.manifest=function(){return this._manifest}
w.prototype.getCoupon=function(){return this._currentCoupon}
w.prototype.platform=function(){return window.navigator.platform}
w.prototype.get=function(t){return this.db().get(t)}
w.prototype.load=function(t){var e=this.db().get(t)
if(e.v==-3){return e.fetch()}else{return Promise.resolve(e)}}
w.prototype.fetch=function(t){return this.rpc("fetch",[t],{models:true})}
w.prototype.prefetch=function(t){return this.db().prefetch(t,this)}
w.prototype.preload=function(){return this}
w.prototype.log=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this._logger.log.apply(this._logger,i)}
w.prototype.pageVisibilityDidSet=function(t){var e=this
if(e.isHidden()){e._hiddenSince=Date.now()
return e._hiddenTimeout=setTimeout(function(){e.log("api","hidden for some time")
e._hiddenSleep=true
return e.socket().close(true)},1e3*60*5)}else if(e._hiddenSince){var i=Date.now()-e._hiddenSince
clearTimeout(e._hiddenTimeout)
if(i>1e3*60*60){return document.location.reload()}else if(e._hiddenSleep==true){e._hiddenSleep=false
return e.socket().reopen()}}}
w.prototype.hasAvailableUpdatesDidSet=function(t){if(t){let t=function(){return window.location.reload()}
let e=o("div").flag("pendingUpdates").setText("scrimba.com has been updated. Tap to reload").on$(0,["tap",t],this)
return r.mount(e)}}
w.prototype.idleTime=function(){return Date.now()-this._lastMoveTime}
w.prototype.sid=function(){return this._sid==null?this._sid=this.sessionStore().get("sid"):this._sid}
w.prototype.setSid=function(t){this._sid=this.sessionStore().set("sid",t)
return this}
w.prototype.reloadUser=async function(){var t=await this.rpc("getCurrentUser",[])
this.setUser(t?this.db().users().read(t):null)
if(this._githubLoginPromise){this._githubLoginPromise.resolve(this.user())
return this._githubLoginPromise=null}}
w.prototype.githubLoginPromise=function(){return this._githubLoginPromise||(this._githubLoginPromise=new h)}
w.prototype.tryLogin=function(){if(this.user()){return Promise.resolve(this.user())}var t=o(v).flag("modal").end()
App.uxa().open(t)
return t.promise()}
w.prototype.tryLogout=async function(){if(!this.user()){return}await window.fetch("/logout?xhr=1",{credentials:"include"})
return this.reloadUser()}
w.prototype.userCreate=async function(t){var e
return this.setUser(e=await this.rpc("userCreate",[t],{models:true})),e}
w.prototype.userAuthenticate=async function(t,e){var i
return this.setUser(i=await this.rpc("userAuthenticate",[t,e],{models:true})),i}
w.prototype.userDidSet=function(t,e){return this.socket().reopen()}
w.prototype.msSinceInit=function(){return Date.now()-this._initializedAt}
w.prototype.socket=function(){return this._socket||(this._socket=new p(this))}
w.prototype.sendTracking=function(){return this.socket().sendTracking.apply(this.socket(),arguments)}
w.prototype.uid=function(){var t=this._user
return t&&t.id}
w.prototype.roles=function(){return this._roles||(this._roles=this._user&&this._user.roles||[])}
w.prototype.isMod=function(){return this.roles().indexOf("mod")>=0}
w.prototype.isMobile=function(){return this._isMobile==null?this._isMobile=this.ua().isMobile():this._isMobile}
w.prototype.isEmbed=function(){return window.top!=window}
w.prototype.isOffline=function(){return!window.navigator.onLine}
w.prototype.isHidden=function(){return document.hidden}
w.prototype.sync=function(){return this.db().sync()}
w.prototype.assetsPath=function(t){return"/assets/"+(this._manifest[t]||t)}
w.prototype.monacoPath=function(){return this._manifest.monaco}
w.prototype.clientVersion=function(){return this._manifest.version}
w.prototype.stamp=function(t){if(null){}return this}
w.prototype.localStore=function(){return this._localStore||(this._localStore=new y)}
w.prototype.sessionStore=function(){return this._sessionStore||(this._sessionStore=new m)}
w.prototype.localToken=function(){if(!(this._localToken=this.localStore().get("localToken"))){this.localStore().set("localToken",this._localToken=a.uuid())}return this._localToken}
w.prototype.getStyleVar=function(t){var e=window.getComputedStyle(document.body)
var i=e.getPropertyValue("--"+t)
return i}
w.prototype.setStyleVar=function(t,e){document.body.style.setProperty("--"+t,e)
return e}
w.prototype.fontSize=function(){return this._fontSize||parseInt(this.getStyleVar("fontSize"))}
w.prototype.vw=function(){return window.innerWidth}
w.prototype.vh=function(){return window.innerHeight}
w.prototype.setFontSize=function(t){if(this._fontSize!=t){this._fontSize=t
this.setStyleVar("fontSize",t+"px")
this.setStyleVar("lineHeight",Math.ceil(t*1.5)+"px")
this.sessionStore().set("fontSize",t)
this.emit("reflow")}return}
w.prototype.send=function(t,e){return this.socket().send(t,e)}
w.prototype.onmessage=function(t,e){return console.log("api.onmessage",t,e)}
w.prototype.receive=function(t){var e
if(window.DEBUG_CHAOS){return}if(t.CODE>=100&&t.CODE<200){let i=this.db().get(t[1]);(e=i)&&e.onpacket&&e.onpacket(t)}else if(t.CODE==u.SYNC){this.log("sync",t.params()[1])
for(let e=0,i=n(t.params()[1]),r=i.length;e<r;e++){this.db().read(i[e])}this.db().touch()}else if(t.CODE==u.SID){this.setSid(t.params()[1])}else if(t.CODE==u.UPDATES_AVAILABLE){this.setHasAvailableUpdates(true)}else if(t.CODE==u.RELOAD_STYLES){var i=document.getElementById("clientcss")
if(i){i.href=i.href.split("?")[0]+("?"+Math.random())}}else{this.log("receive",t.CODE,t.params()[1])}r.Scheduler.event({type:"packet",data:t})
return this}
w.prototype.touch=function(){this._touches++
return r.Scheduler.event({type:"api"})}
w.prototype.simulateDisconnect=function(t){var e=this
if(t===undefined)t=5e3
e.socket().close(true)
return setTimeout(function(){return e.socket().reopen()},t)}
w.prototype.uploadBlob=async function(t,e){var i=await window.fetch("/blobs",{credentials:"include",method:"POST",body:t,headers:{"Content-Type":"application/octet-stream"}})
var n=await i.json()
if(e){n.locals=e}return n}
w.prototype.fetchBlob=async function(t,e){if(e===undefined)e=null
var i=await window.fetch("/blobs/"+t,{credentials:"include",method:"GET"})
return i}
w.prototype.rpc=function(t,e,i){var n=this,r,o
if(i===undefined)i={}
var a=JSON.stringify([t,e])
if(r=n._cache[a]){o=n._cache[a],delete n._cache[a],o
if(i.models){r=n.db().deserialize(r)}return Promise.resolve(r)}var u=n.analytics().time("app","rpc_"+t,e[0])
return new Promise(function(r,o){var a=new XMLHttpRequest
if(i.type){a.responseType=i.type}var c=n.clientVersion()
a.open("POST","/rpc/"+t)
a.setRequestHeader("Content-Type","application/json")
a.setRequestHeader("Scrimba-Client-Version",c)
a.onload=function(){var t
var e=a.response
var c
var p=a.getResponseHeader("Scrimba-Client-Version")
if(p&&n.clientVersion()!=p){(t=n.hasAvailableUpdates())||(n.setHasAvailableUpdates(true),true)
try{App.router().setShouldReload(true)}catch(t){}}if(a.status>=200&&a.status<300){u.end()
if(i.raw){r(e)}else if(i.type=="arraybuffer"){var l=new Uint8Array(e)
c=s.decode(l)
r(c)}else{e=JSON.parse(e,x).response
if(i.models){e=n.db().deserialize(e)}r(e)}try{n.touch()
return App.touch()}catch(t){}}else{return o(a.statusText)}}
return a.send(JSON.stringify({name:t,args:e,options:i}))})}},function(t,e,i){var n=i(0)
var r=i(4).Resource
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.Action=o
o.prototype.updateFromPromise=function(t){var e=this
var i=function(t){return e.update({state:"success",result:t})}
var n=function(t){return e.update({state:"failed",result:t})}
return t.then(i,n)}},function(t,e,i){var n=i(0)
var r=i(2).MSG
var o=i(4).Resource
function s(t,e){this._file=t
this._chunks=[]
this._size=0
this._api=e
this._blob=null
this}s.prototype.write=function(t){this._chunks.push(t)
this._size+=t.size
return this}
s.prototype.blob=function(){return this._blob}
s.prototype.close=function(t){this._file._blob=this._blob=t||(t=new Blob(this._chunks,{type:this._file.type}))
return this._file}
function a(){return o.apply(this,arguments)}n.subclass(a,o)
e.File=a
a.prototype.createWriteStream=function(t){return new s(this,t)}
a.prototype.upload=function(t){var e=this
if(t===undefined)t={}
return e._cache.uploader||(e._cache.uploader=new Promise(async function(i,n){var r=await e.save()
console.log("saved to server")
var o=await e.fetchLocalBlob()
var s=new XMLHttpRequest
s.upload.addEventListener("progress",function(e){var i=e.loaded
var n=e.total
var r=i/n
t.loaded=e.loaded
t.total=e.total
t.progress=r
return console.log("progress",e,s.upload.loaded,s.upload.total,i,n,i/n)})
s.onload=function(t){console.log("request finished uploading!!",t,s.response)
return i(s.response)}
s.open("POST","/upload/"+e.id)
return s.send(o)}))}
a.prototype.fetchLocalBlob=async function(){if(this._blob){return Promise.resolve(this._blob)}var t=await this._db.cacheGet(this.id+"_body")
return t?t.body:null}
a.prototype.fetchAsArrayBuffer=function(t){var e=this
if(t===undefined)t=null
return e._fetcher||(e._fetcher=new Promise(async function(i){var n=await e.fetchLocalBlob()
if(n){var r=new FileReader
r.onloadend=function(t){e._arraybuffer=t.target.result
return i(e._arraybuffer)}
return r.readAsArrayBuffer(n)}else{var o=new XMLHttpRequest
o.open("GET",t||"/cdn/"+e.id,true)
o.responseType="arraybuffer"
o.onload=function(){return i(e._arraybuffer=o.response)}
return o.send()}}))}
a.prototype.repair=async function(){var t=await this._db.api().rpc("checkIntegrity",[this.id])
if(t.realSize==0){var e=await this.fetchLocalBlob()
if(e){console.log("found local file! - try to upload")
return this.upload()}else{return{error:"file not found"}}}else{return this}}
if(false){}},function(t,e,i){var n=i(0)
var r=i(4).Resource
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.Giveaway=o
o.prototype.serialize=function(t){return{}}},function(t,e,i){var n=i(0)
var r=i(4),o=r.Resource,s=r.MASK,a=r.ACCESS
function u(){return o.apply(this,arguments)}n.subclass(u,o)
e.Membership=u
u.prototype.user=function(){return this.db().get(this.uid)}
u.prototype.group=function(){return this.db().get(this.gid)}
u.prototype.dependsOn=function(){return[this.user(),this.group()]}},function(t,e,i){var n=i(0)
var r=i(4),o=r.Resource,s=r.MASK,a=r.ACCESS
function u(){return o.apply(this,arguments)}n.subclass(u,o)
e.Message=u
u.prototype.dependsOn=function(){return[this.user()]}
u.prototype.user=function(){return this.db().get(this.uid)}
u.prototype.parent=function(){return this.parent_id?this.db().get(this.parent_id):null}
u.prototype.trunk=function(){return this.isFork()?this.parent():this}
u.prototype.cast=function(){return this.db().get(this.cid)}
u.prototype.replies=function(){var t=this
return t._cache.replies||(t._cache.replies=t.db().messages().sel({sort:"ts"},function(e){return e.parent_id==t.id}))}},function(t,e,i){var n=i(0)
var r=i(4).Resource
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.Topic=o},function(t,e,i){var n=i(0)
var r=i(4).Resource
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.ViewSession=o
o.prototype.notifyChannels=function(){return null}},function(t,e,i){var n=i(0)
var r=i(4),o=r.Resource,s=r.ACCESS
function a(){return o.apply(this,arguments)}n.subclass(a,o)
e.Viewing=a
a.prototype.dependsOn=function(){return[this.cast()]}
a.prototype.cast=function(){return this.db().get(this.cid)}
a.prototype.user=function(){return this.db().get(this.uid)}
a.prototype.permissions=function(t){if(t&&t.id==this.uid){return s.ALL}else{return s.NONE}}
a.prototype.notifyChannels=function(){return this.uid}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0),s=o.createElement
var a=i(2),u=a.ACTION,c=a.SCON,p=a.MSG,l=a.SPIV
var h=i(3).Widget
var d=i(137).Recording
var f=i(140),m=f.AbsTimeline,y=f.PubTimeline
var g=i(11).List
var v=i(139).StreamSyncer
var _=i(19).StreamAction
var b=i(27).StreamBuffer
var x=i(138).Stream
var w=i(160).LocalBranchDialog
var T=i(18)
var S=i(9)
var k=i(10)
function A(t,e,i){var n
this._space=t
this._parent=e
this._model=i=t.api().db().read(i)
this._currentOffset=0
this._draft=i.draft||{start:0,cues:[],audio:[]}
this._pub=i.pub
this._stream=new x(i.stream(),this,this.seed())
this._branches=new g(this)
this._ancestors=e?e.ancestors().concat(e):[]
if(e){e.branches().add(this,this.id())}if(i.pub&&(!this.isMine()||this.api().isEmbed()||this.api().isMobile())){var r=i.pub.audio?y:m
this.setTimeline((this.setPubTimeline(n=new r(this,this._pub)),n))}else{this.setTimeline((this.setAbsTimeline(n=new m(this,this._draft)),n))}this._currentOffset=this.timeline().currentOffset()
this}o.subclass(A,h)
e.Branch=A
A.register("branch")
A.modelDataFromEvent=function(t,e){if(e===undefined)e={}
var i=t.branch()
var n=i.id()
var r=i.timeline().currentOffset()
var o=i.timeline().currentTime()
var s=SCRIMBA_API
var a=s.uid()
var u="Local edits at "+T.msToStr(o)
var c={type:"note",title:u,privacy:"public",spiv:l,uid:a||"-"+s.localToken(),parent_id:i.id(),parent_index:t.index(),parent_offset:r,created_at:new Date,edited_at:new Date,v:-2}
if(!a){c.LOCAL=true}for(let t,i=0,n=Object.keys(e),r=n.length,o;i<r;i++){o=n[i]
t=e[o]
c[o]=t}return c}
A.modelFromEvent=function(t){var e=this.modelDataFromEvent(t)
return t.branch().space().api().db().casts().build(e)}
A.branchFromEvent=function(t){var e=this.modelFromEvent(t)
var i=t.branch().toSnapshot()
var n=t.branch().api()
n.sendTracking(k.TYPES.CREATE_BRANCH,[e.id,e.parent_id,e.parent_index,e.parent_offset])
var r=b.encode([-u.SNAPSHOT,[i],-u.LOCK,[n.sid(),n.uid()]])
e.buffer().add(r,0)
var o=new this(t.branch().space(),t.branch(),e)
o._initialSnapshot=i
o._parentPlayState=t.branch().timeline().state()
o._isLoaded=true
o.setMode("editing")
o.stream().sync({local:true})
return o}
A.prototype.absTimeline=function(t){return this._absTimeline}
A.prototype.setAbsTimeline=function(t){this._absTimeline=t
return this}
A.prototype.pubTimeline=function(t){return this._pubTimeline}
A.prototype.setPubTimeline=function(t){this._pubTimeline=t
return this}
A.prototype.__timeline={watch:"timelineDidSet",name:"timeline"}
A.prototype.timeline=function(t){return this._timeline}
A.prototype.setTimeline=function(t){var e=this.timeline()
if(t!=e){this._timeline=t}if(t!=e){this.timelineDidSet&&this.timelineDidSet(t,e,this.__timeline)}return this}
A.prototype.draft=function(t){return this._draft}
A.prototype.setDraft=function(t){this._draft=t
return this}
A.prototype.branches=function(t){return this._branches}
A.prototype.setBranches=function(t){this._branches=t
return this}
A.prototype.recording=function(t){return this._recording}
A.prototype.setRecording=function(t){this._recording=t
return this}
A.prototype.ancestors=function(t){return this._ancestors}
A.prototype.setAncestors=function(t){this._ancestors=t
return this}
A.prototype.currentOffset=function(t){return this._currentOffset}
A.prototype.setCurrentOffset=function(t){this._currentOffset=t
return this}
A.prototype.stream=function(t){return this._stream}
A.prototype.setStream=function(t){this._stream=t
return this}
A.prototype.id=function(){return this._model.id}
A.prototype.api=function(){return this.space().api()}
A.prototype.inspect=function(){return"Branch(id="+this.id()+")"}
A.prototype.title=function(){return this.model().title||"Branch"}
A.prototype.model=function(){return this._model}
A.prototype.data=function(){return this._model}
A.prototype.parent=function(){return this._parent}
A.prototype.dispose=function(){this._stream&&this._stream.dispose&&this._stream.dispose()
this._syncer&&this._syncer.dispose&&this._syncer.dispose()
return this}
A.prototype.tick=function(){return this}
A.prototype.syncer=function(){return this._syncer||(this._syncer=new v(this.stream(),this.api().socket()))}
A.prototype.head=function(){return this._stream.tail()}
A.prototype.seed=function(){return this._seed||(this._seed=this._parent.stream().actionAtIndex(this.model().parent_index))}
A.prototype.ancestors=function(){return this._ancestors}
A.prototype.branch=function(){return this}
A.prototype.setup=function(){return this}
A.prototype.state=function(){return this.model().state}
A.prototype.type=function(){return this.model().type||"cast"}
A.prototype.pub=function(){return this.model().pub}
A.prototype.isInScope=function(){var t=this.space().branch()
while(t){if(t==this){return true}t=t.parent()}return false}
A.prototype.isPublished=function(){return this.model().isPublished()}
A.prototype.isLocked=function(){return this.isPublished()}
A.prototype.isSignificant=function(){return this.stream().duration()>0}
A.prototype.isTemplate=function(){return this.type()=="template"}
A.prototype.isLab=function(){return this.type()=="lab"}
A.prototype.isNote=function(){return this.type()=="note"}
A.prototype.isFork=function(){return this.type()=="fork"}
A.prototype.isTutorial=function(){return this.type()=="tutorial"}
A.prototype.isLocal=function(){return this.model().isLocal()}
A.prototype.isMine=function(){return this.model().uid==this.api().uid()||this.isLocal()}
A.prototype.isActive=function(){return this.space().branch()==this}
A.prototype.setMode=function(t){return this.timeline().setState(t)}
A.prototype.mode=function(){return this.timeline().state()}
A.prototype.isEditing=function(){return this.timeline().isEditing()}
A.prototype.isRecording=function(){return this.timeline().isRecording()}
A.prototype.isWatching=function(){return this.timeline().isWatching()}
A.prototype.isPlaying=function(){return this.timeline().isPlaying()}
A.prototype.isPaused=function(){return this.timeline().isPaused()}
A.prototype.isAnnotating=function(){return this.timeline().isAnnotating()}
A.prototype.isLive=function(){return this.timeline().isLive()}
A.prototype.isForkable=function(){return this.type()!="fork"&&(!this.isLab()||!this.isMine())&&this.model().isForkable()}
A.prototype.hasUnsavedChanges=function(){return this.model().isLocal()||this._unsavedChanges}
A.prototype.hasUnpublishedChanges=function(){return!this.model().pub||this.model().draft&&!c.compare(this.model().draft.cues,this.model().pub.cues)}
A.prototype.hasRecordings=function(){return r(this.stream().recordings())>0}
A.prototype.hasDuration=function(){return this.hasRecordings()||this.draft().end}
A.prototype.canContribute=function(){return this.isLocal()||this.model().hasMember(this.api().uid())}
A.prototype.canEdit=function(){return this._isLoaded&&(this.isLocal()||this.stream().currentSID()==this.api().sid())}
A.prototype.canPush=function(t){return this.isEditing()&&this.space().cursor().current()==this.head()&&this.stream().canPush(t)}
A.prototype.canPublish=function(){return(this.canContribute()||this.api().user()&&this.api().user().isAdmin())&&!this.isLocal()&&this.hasRecordings()&&!this.isTemplate()&&this.hasUnpublishedChanges()&&!this.hasUnsavedChanges()&&!this.api().isMobile()}
A.prototype.canUnpublish=function(){return this.isPublished()&&(this.canContribute()||this.api().user()&&this.api().user().isAdmin())&&!this.isLocal()&&this.hasRecordings()&&!this.isTemplate()&&!this.api().isMobile()}
A.prototype.canPrepare=function(){return this.canContribute()&&!this.hasRecordings()}
A.prototype.canAnnotate=function(){return(this.canContribute()||this.api().user()&&this.api().user().isMod())&&this.hasRecordings()&&!this.api().ua().isPhone()&&this.timeline()instanceof m}
A.prototype.canRecord=function(){return this.canContribute()&&!this.isLocked()&&!this.isTemplate()&&!this.isLocal()&&!this.isLab()&&(!this._parent||!this._parent.isLab())&&!this.api().isMobile()}
A.prototype.canSave=function(){return this.isActive()&&this.canContribute()&&this.hasUnsavedChanges()&&this.api().uid()}
A.prototype.checkIntegrity=async function(){var t=await this.api().rpc("castCheckIntegrity",[this.id()])
console.log("result from integrity",t)
return t}
A.prototype.ensureIntegrity=async function(){var t=this
var e=t.draft().audio.map(function(e){return t.api().db().get(e[3])})
await Promise.all(e.map(function(t){return t.repair()}))
var i=await t.checkIntegrity()
var n=r(t.stream().buffer())
if(i.byteLength!=n){console.warn("The length of the stream differs on server and client",i,n)}if(r(i.issues)){console.warn("There are known issues with cast",i.issues)}return Promise.resolve(i)}
A.prototype.registerView=function(){if(this._registeredView||this.space().isDisposing()){return}this._registeredView=true
return this.api().rpc("registerView",[this.id()])}
A.prototype.addLocalEvent=function(t,e){if(e===undefined)e={}
var i=this.stream().write(t,e)
if(!i){console.warn("action rejected by stream")
t.discard()
return}this.forceToEnd()
this.syncer().schedule()
if(this.isWatching()){this.setMode("editing")}return i}
A.prototype.forceToEnd=function(){var t
if(t=this.head()){this.space().cursor().sync(t)}return this}
A.prototype.currentOffset=function(){return this._currentOffset==-1?this._stream.duration()||0:this._currentOffset}
A.prototype.didEnter=function(t){if(this.parent()){this.parent().setCurrentOffset(this.model().parent_offset)
this.parent().didEnter()
if(t==this.parent()){if(this.parent().isPlaying()){this.parent().timeline().pause()}}}if(!this.isLocal()){this.space().socket().join(this.id())}if(this.space().trunk().isLab()&&this.isLocal()){s(w).setData(this).end().show()}return this}
A.prototype.didLeave=function(t){if(this.isEditing()){this.log("go from editing to watching!!!",this)
this.setMode("watching")}var e=this.isInScope()
if(this.isInScope()){return}if(this.isLocal()){this}else{this.space().socket().leave(this.id())}if(this.parent()){return this.parent().didLeave(t)}}
A.prototype.enter=function(){if(this.isActive()){return this}this.space().setTimeline(this.timeline())
this.space().tick()
return this}
A.prototype.leave=function(){if(this.isActive()){return this.space().navigateTo(this.parent())}}
A.prototype.discard=function(){if(this.isLocal()){if(this.timeline().isEditing()){this.timeline().setState("watching")}if(this.isActive())this.leave()
if(this.parent()){this.parent().branches().remove(this)}this.model().del(true)
if(this.branch()._parentPlayState){this.parent().timeline().setState(this.branch()._parentPlayState)}}return this}
A.prototype.load=async function(){var t=this
if(t.isLocal()){t.stream().sync()
t._isLoaded=true
return Promise.resolve(t)}if(true&&!t.model().isLocal()){t._myFork=t.model().branches().filter(function(e){return e.type=="fork"&&e.uid==t.api().uid()})[0]}if(t._isLoaded){t.log("already loaded!")}await t.model().fetchStreamBuffer(t.api())
t.api().log("streamsync",t.timeline().currentOffset())
t.stream().actionAtOffset(t.timeline().currentOffset())
if(t.timeline().isLive()||false){t.stream().sync()
t._isLoaded=true}else{if(true){t.stream().sync()
t._isLoaded=true}}t.api().log("streamsync")
return t}
A.prototype.flattenStream=function(){var t
var e=this.toSnapshot()
return t=[p.STREAMFLATTEN,this.id(),e]}
A.prototype.refreshBranches=function(){return this
var t=this.model().branches()
var e=t.check()
if(this._branchesVersion==e){return}this._branchesVersion=e
for(let e=0,i=n(t),r=i.length,o;e<r;e++){o=i[e]
if(!this._branches.has(o.id)){new A(this.space(),this,o).load()}}return this}
A.prototype.loadChildBranch=function(t){if(!this._branches.has(t.id)){return new A(this.space(),this,t).load()}else{return Promise.resolve(this._branches.get(t.id))}}
A.prototype.widgets=function(){return this.space().widgets()}
A.prototype.record=async function(t){var e
if(t===undefined)t={}
if(!this.canRecord()){return Promise.reject("Not allowed to record")}await(typeof(e=t.offset)=="number"||e instanceof Number?this.trimToTimeOffset(t.offset):Promise.resolve(this))
this.forceToEnd()
var i=new d(this,t)
return i.start()}
A.prototype.trimToTimeOffset=function(t){var e=this.stream().actionAtOffset(t)
return this.trimToAction(e,t)}
A.prototype.trimToAction=function(t,e,i){var n=this
return new Promise(function(r,o){if(typeof t=="number"||t instanceof Number){t=n.stream().actionAtIndex(t)}e||(e=t.timeOffset())
var s=false
var a=Math.max(e-t.timeOffset(),0)
n.space().cursor().sync(t)
n.stream().buffer().trim(t._byteEnd)
var c=[[p.STREAMTRIM,n.id(),t._byteEnd,n.stream().currentSID()||""]]
n.log("trimToTimeOffset",e,t,c)
if(i||a){c.push(a||0,-u.TRIM,[])}n.api().send(b.encode(c),function(t){let i=n.timeline().cues().trimCuesAndAudio(e)
n.log("responded from trim",t,i)
n.model().save({draft:n.draft()})
return r(n)})
return n})}
A.prototype.toSnapshot=function(t){if(t===undefined)t={}
var e={}
var i=this.space().cursor().current()
t.local=true
if(i.branch()!=this){throw"cannot create snapshot for wrong branch",i}e.seed=[this.model().id,i.index()||0,Math.round(this.timeline().currentOffset())]
e.spiv=l
var n=this.widgets().map(function(i){if(!(t.exclude&&o.indexOf(i.TYPE,t.exclude)>=0)){return i.serialize(t,e)}})
e.widgets=n.filter(function(t){return t})
return e}
A.prototype.lock=function(t){this.stream().lock()
this.stream().sync()
return t&&t(null,true)}
A.prototype.startEditing=function(){var t=this
t.lock(function(){if(t.canPrepare()){return t.setMode("editing")}})
return t}
A.prototype.stopEditing=function(){if(!this.isEditing()){throw"branch is not editing!",this}if(this.isTemplate()&&this.head().type()!=u.SNAPSHOT){this.push_(u.SNAPSHOT,[this.toSnapshot()])}this.setMode(this.isRecording()?"paused":"watching")
return this}
A.prototype.stopRecording=function(){if(this.recording()){return this.recording().stop()}}
A.prototype.myFork=function(){var t=this
if(t.isLab()&&t.isMine()){return t}return t._myFork||(t._myFork=t.model().branches().filter(function(e){return e.type=="fork"&&e.uid==t.api().uid()})[0])}
A.prototype.upsertResponse=async function(){if(this.myFork()){return Promise.resolve(this.myFork())}if(this.isLab()&&this.isMine()){return Promise.resolve(this)}if(!(this.type()=="challenge"||this.type()=="lab")){return Promise.resolve(null)}if(this.space().trunk().model().uid==this.api().uid()){return Promise.resolve(null)}var t=this.toSnapshot()
var e=await this.api().rpc("castRespond",[this.space().trunk().id(),t],{models:true})
this._myFork=e
return e}
A.prototype.startAnnotating=function(){if(!this.canAnnotate()){return}this._frozenDraft=JSON.stringify(this.draft())
this.log("startAnnotating")
this.timeline().setIsAnnotating(true)
return this}
A.prototype.stopAnnotating=function(t){console.log("stopAnnotating",t)
if(JSON.stringify(this.draft())!=this._frozenDraft){this.save({draft:this._draft})}this.timeline().setIsAnnotating(false)
return this}
A.prototype.save=async function(t){if(t===undefined)t={}
var e=this.model().isLocal()
await this.api().tryLogin()
this.draft().end=this.stream().duration()
var i={draft:this._draft}
for(let e,n=0,r=Object.keys(t),o=r.length,s;n<o;n++){s=r[n]
e=t[s]
i[s]=e}if(e||!this.model().uid){i.uid||(i.uid=this.api().uid())}if(!this.api().uid()){throw"not allowed to save unless logged in"}if(!this.model().uid){i.uid=this.api().uid()}await this.model().save(i)
await this.syncer().persist(true)
return this}
A.prototype.publish=async function(t){if(t===undefined)t={}
await this.save(true)
var e=await this.ensureIntegrity()
if(r(e.issues)){console.log("HAS ISSUES!!!",e)
return Promise.resolve({error:"issues with publish!"})}t.end=this.stream().duration()
await this.save(true)
var i=await this.api().rpc("publish",[this.id(),t])
await this.model().fetch()
return this}
A.prototype.unpublish=async function(){await this.save({pub:null,published_at:null})
await this.model().fetch()
this.model().pub=null
this.model().published_at=null
return this}
A.prototype.__uid=function(){return 0}
function C(){return A.apply(this,arguments)}o.subclass(C,A)
e.Trunk=C
C.prototype.seed=function(){return null}},function(t,e,i){var n=i(44).Action
var r=i(2),o=r.MSG,s=r.CAST
var a=i(46).Notification
n.register({name:"toggleConsole",desc:"Toggle console",scope:["space","simulator"],shortcut:"mod+shift+y",state:function(t){return t.space().console().enabled()?"on":"off"},cmd:function(t){var e
return t.space().console().setEnabled(e=!t.space().console().enabled()),e}})
n.register({name:"toggleBrowser",desc:"Toggle browser",scope:["space"],shortcut:"mod+shift+u",state:function(t){return t.space().browser().visible()?"on":"off"},cmd:function(t){var e
let i=t.space()
if(i.simulator()){i.simulator().setVisible(false)}return i.browser().setVisible(e=!i.browser().visible()),e}})
n.register({name:"toggleBrowserMinification",desc:"Toggle Browser",scope:["space"],shortcut:"mod+b",enabled:function(){return true},cmd:function(t){var e
return t.space().browser().setMinimized(e=!t.space().browser().minimized()),e}})
var u=function(t){return t.space().slides().visible()}
n.register({name:"slidesStepForward",desc:"Next step in slideshow",scope:"slides+editing",shortcut:"right",cmd:function(t){return t.space().slides().stepForward()}})
n.register({name:"startPointerTracker",scope:"editing",shortcut:"alt+shift+p",cmd:function(t){return t.space().pointerTracker().start()}})
n.register({name:"slidesStepBackward",desc:"Previous step in slideshow",scope:"slides+editing",shortcut:"left",cmd:function(t){return t.space().slides().stepBackward()}})
n.register({name:"slideToStart",desc:"Previous slide",scope:"slides+editing",shortcut:"shift+left",cmd:function(t){return t.space().slides().stepBackward(true)}})
n.register({name:"slideToEnd",desc:"Next slide",scope:"slides+editing",shortcut:"shift+right",cmd:function(t){return t.space().slides().stepForward(true)}})
n.register({name:"minimizeSlides",desc:"Minimize slides",scope:"slides+editing",shortcut:"x",cmd:function(t){return t.space().slides().setVisible(false),false}})
n.register({name:"refresh",desc:"Run code / Reload browser",scope:["space"],shortcut:["mod+r","mod+shift+r"],cooldown:0,enabled:function(t){return!!t.space().isEditing()},cmd:function(t){return t.space().browser().run()}})
n.register({name:"login",desc:"Login",scope:["space"],enabled:function(t){return!t.branch().api().uid()},cmd:function(t){return t.api().tryLogin()}})
n.register({name:"quicksave",desc:"Save",scope:["space"],shortcut:"mod+s",cooldown:1e3,enabled:function(){return true},cmd:function(t){var e=t.space().agent().file()
if(e){return e.quicksave()}}})
n.register({name:"recstop",desc:"Stop Recording",scope:"recording",shortcut:"mod+shift+2",cooldown:0,state:function(t){return t.recording().state()},enabled:function(t){return t.recording()&&t.recording().state()=="recording"},cmd:function(t){var e
return(e=t.recording())&&e.stop&&e.stop()}})
n.register({name:"togglePlayback",desc:"Play / pause",scope:"watching",shortcut:"space",state:function(t){return t.timeline().playState()},enabled:function(t){return!!t.branch().hasDuration()},cmd:function(t){var e=t.timeline()
return e.isPlaying()?e.pause():e.play()}})
n.register({name:"play",desc:"Play",state:function(){return"paused"},enabled:function(t){return!!t.branch().hasDuration()&&!t.branch().timeline().isPlaying()},cmd:function(t){return t.timeline().play()}})
n.register({name:"skipForward",desc:"Go forward 10s",scope:"playback",shortcut:"right",cmd:function(t){return t.timeline().skip(1e4)}})
n.register({name:"skipBack",desc:"Go back 10s",scope:"playback",shortcut:"left",cmd:function(t){return t.timeline().skip(-1e4)}})
n.register({name:"fasterPlayback",desc:"Faster playback",scope:"playback",shortcut:"ctrl+shift+right",cmd:function(t){const e=4
if(t.timeline().playbackRate()<e){t.timeline().setPlaybackRate(Math.min(t.timeline().playbackRate()+.1,e))
return a.show(t.timeline().describe(),{info:true})}}})
n.register({name:"slowerPlayback",desc:"Slower playback",scope:"playback",shortcut:"ctrl+shift+left",cmd:function(t){const e=.4
if(t.timeline().playbackRate()>e){t.timeline().setPlaybackRate(Math.max(t.timeline().playbackRate()-.1,e))
return a.show(t.timeline().describe(),{info:true})}}})
n.register({name:"fontSizeInc",scope:["space"],shortcut:["shift+alt+l"],cmd:function(t){var e,i
return(e=t.api()).setFontSize(i=e.fontSize()+1),i}})
n.register({name:"fontSizeDecr",scope:["space"],shortcut:["shift+alt+k"],cmd:function(t){var e,i
return(e=t.api()).setFontSize(i=e.fontSize()-1),i}})
n.register({name:"toggleWhitespace",scope:["space"],shortcut:["shift+alt+i"],cmd:function(t){var e
return t.primaryEditor().setRenderWhitespace(e=!t.primaryEditor().renderWhitespace()),e}})},function(t,e){function i(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function n(t){this._space=t
this._options=new Map
this._space.on("playing",function(){return t.agent().options().discardLocals()})
this}e.Client=n
n.prototype.idle=function(t){return this._idle}
n.prototype.setIdle=function(t){this._idle=t
return this}
n.prototype.options=function(t){return this._options}
n.prototype.setOptions=function(t){this._options=t
return this}
n.prototype.space=function(t){return this._space}
n.prototype.setSpace=function(t){this._space=t
return this}
n.prototype.optionsForItem=function(t){var e
if(!(e=this._options.get(t))){this._options.set(t,e={})}return e}
n.prototype.set=function(t,e,i){var n=this.optionsForItem(t)
n[e]=i
return this}
n.prototype.clearOptions=function(){var t=[]
this._options.forEach(function(e,n){var r
if(i(Object.keys(e))){t.push(n)
let i=[]
for(let t,n=0,o=Object.keys(e),s=o.length,a;n<s;n++){a=o[n]
t=e[a]
i.push((r=e[a],delete e[a],r))}return i}})
for(let e=0,i=t.length;e<i;e++){t[e].optionsDidUpdate()}return this}
n.prototype.flushLocals=function(){this.options().forEach(function(t,e){return e.options().set(t)})
return this.space().files().forEach(function(t){return t.flushLocals()})}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0)
var s=i(19).StreamAction
function a(t){this._space=t
this._stack=[]
this._event={}
this._syncing=false
this._reverting=false
this._targets=[]
this._branch=t.trunk()
this._current=this._target=this._tail=t.trunk().stream().seed()
this}e.Cursor=a
a.prototype.space=function(t){return this._space}
a.prototype.setSpace=function(t){this._space=t
return this}
a.prototype.stack=function(t){return this._stack}
a.prototype.setStack=function(t){this._stack=t
return this}
a.prototype.current=function(t){return this._current}
a.prototype.setCurrent=function(t){this._current=t
return this}
a.prototype.syncing=function(t){return this._syncing}
a.prototype.setSyncing=function(t){this._syncing=t
return this}
a.prototype.__branch={watch:"branchDidSet",name:"branch"}
a.prototype.branch=function(t){return this._branch}
a.prototype.setBranch=function(t){var e=this.branch()
if(t!=e){this._branch=t}if(t!=e){this.branchDidSet&&this.branchDidSet(t,e,this.__branch)}return this}
a.prototype.skipping=function(t){return this._skipping}
a.prototype.setSkipping=function(t){this._skipping=t
return this}
a.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return o.emit(this,t,n)}
a.prototype.on=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.listen.apply(o,[].concat([this,t],Array.from(r)))}
a.prototype.once=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.once.apply(o,[].concat([this,t],Array.from(r)))}
a.prototype.un=function(t){var e
var i=arguments,n=i.length
var r=new Array(n>1?n-1:0)
while(n>1)r[--n-1]=i[n]
return o.unlisten.apply(o,[].concat([this,t],Array.from(r)))}
a.prototype.lineage=function(t){var e=t.branch()
var i=[t]
while(e&&e.seed()){i.unshift(e._seed)
e=e._seed._branch}return i}
a.prototype.compare=function(t,e){if(t.branch()==e.branch()){if(e.INDEX<t.INDEX){return{revertTo:e}}else{return{stepTo:e}}}var i=this.lineage(t)
var n=this.lineage(e)
var o=Math.min(r(i),r(n))
var s=0
var a=0
while(s<o-1){if(i[s].branch()==n[s].branch()){a=s}s++}var u=n[a]
if(i[a].INDEX<n[a].INDEX){u=i[a]}return{revertTo:u,route:n.slice(a)}}
a.prototype.branchDidSet=function(t,e){var i,n;(i=e)&&i.didLeave&&i.didLeave(t);(n=t)&&n.didEnter&&n.didEnter(e)
return this.space().emit("branch:enter",t,e)}
a.prototype.target=function(t){if(t){this._target=t
return this}else{return this._target}}
a.prototype.canPush=function(t){return!this.current()._next&&this.branch().canPush(t)}
a.prototype.sync=function(t,e){if(t===undefined)t=this._target
if(e===undefined)e=0
if(!t){return}if(!this._current){console.log("first cursor.sync!",t)
this._current=this.space().trunk().stream().seed()}var i=this.current()
var r=Date.now()
this._syncing=true
this._prev=i
this._next=t
this._targets=[]
this._skipping=!(this.space().timeline().state()=="playing"||this.space().isLive())||!this.space()._currentEvent
if(i==this._tail){if(i=this._space.trunk().stream().actionAtIndex(0)){this.apply(i)}}if(t==i){true}else if(t._prev==i){this.emit("sync:start",t,i,this)
i=this.apply(t,i)}else{this.emit("sync:start",t,i,this)
var o=this.compare(i,t)
if(o.revertTo){while(i!=o.revertTo){i=this.revert(i)
if(e&&Date.now()-r>e){t=i
break}}}if(o.stepTo){while(i!=o.stepTo){let n=i._next
i=this.apply(n,i)
if(e&&Date.now()-r>e){t=i
break}}}if(o.route){let e=0
let n=o.route
while(i!=t){let t=i._next
if(i==n[e]){t=n[++e].branch().stream()._first}i=this.apply(t)}}}this._current=this._target=t
this.setBranch(this._current.branch())
this._space.setTimeline(this._current.branch().timeline())
if(this.branch().isEditing()&&this._current._next){console.log("throw us out of editing mode",this._current)
this.branch().setMode("watching")}if(this._targets.length){for(let t=0,e=n(this._targets),i=e.length;t<i;t++){e[t].synced_()}}this._syncing=false
return this._targets}
a.prototype.markTarget=function(t){if(this._targets.indexOf(t)==-1){this._targets.push(t)}return}
a.prototype.apply=function(t,e){if(t==this._tail){return}if(e&&t._prev!=e){while(e&&e!=t._prev){e=this.revert(e)}}if(t.isEnabled()){t.commitWithCursor(this)}return t}
a.prototype.revert=function(t){this._reverting=true
if(t.isEnabled()){t.revertWithCursor(this)}this._reverting=false
return t._prev}},function(t,e,i){var n=i(28).Struct
var r=i(2),o=r.ACTION,s=r.CAST
var a=i(19).PointerUpdate
function u(t){this._stream=t
this}e.Pointer=u
u.prototype.last=function(t){return this._last}
u.prototype.setLast=function(t){this._last=t
return this}
u.prototype.stream=function(t){return this._stream}
u.prototype.setStream=function(t){this._stream=t
return this}
u.prototype.addFrame=function(t){var e=a.build(t)
this.stream()._owner.addLocalEvent(e)
return this}
u.prototype.view=function(){return this._view||(this._view=this._stream._owner._space._view._pointer)}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createTagCache,s=r.createElement
var a=i(2),u=a.MSG,c=a.ACTION,p=a.CAST
var l=i(12)
var h=i(122)
var d=function(t){if(t===undefined)t=1e3
return new Promise(function(e,i){return setTimeout(e,t)})}
var f=i(167).RecDoneDialog
var m=i(71).MediaRecording
var y=r.defineTag("VolumeMeter",function(t){t.prototype.__decibel={watch:"decibelDidSet",name:"decibel"}
t.prototype.decibel=function(t){return this._decibel}
t.prototype.setDecibel=function(t){var e=this.decibel()
if(t!=e){this._decibel=t}if(t!=e){this.decibelDidSet&&this.decibelDidSet(t,e,this.__decibel)}return this}
t.prototype.build=function(){var t=($_=this.$).$build$||($_.$build$=o(this))
return this.$open("build0").setChildren(this._meter=this._meter||s("div",this).flag("meter"),2).synced()}
t.prototype.decibelDidSet=function(t){let e=Math.min(Math.max(0,t+100),100)/100
this._meter.dom().style.transform="scaleX("+e+")"
return this}})
function g(t,e){if(e===undefined)e={}
this._branch=t
this._state="ready"
this._options=e
this._live=e.live||false
t.setRecording(this)
this._startTimeOffset=t.currentOffset()
this._startTime=t.timeline().endTime()
this._draftEnd=t.draft().end
this._initialState=t.state()
this}e.Recording=g
g.prototype.branch=function(t){return this._branch}
g.prototype.setBranch=function(t){this._branch=t
return this}
g.prototype.state=function(t){return this._state}
g.prototype.setState=function(t){this._state=t
return this}
g.prototype.options=function(t){return this._options}
g.prototype.setOptions=function(t){this._options=t
return this}
g.prototype.audio=function(t){return this._audio}
g.prototype.setAudio=function(t){this._audio=t
return this}
g.prototype.live=function(t){return this._live}
g.prototype.setLive=function(t){this._live=t
return this}
g.prototype.startTimeOffset=function(t){return this._startTimeOffset}
g.prototype.setStartTimeOffset=function(t){this._startTimeOffset=t
return this}
g.prototype.space=function(){return this.branch().space()}
g.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.api()).log.apply(t,[].concat(["rec"],Array.from(n)))}
g.prototype.api=function(){return this.space().api()}
g.prototype.stream=function(){return this.branch().stream()}
g.prototype.duration=function(){return this._startAt?(this._stopAt||Date.now())-this._startAt:0}
g.prototype.startTime=function(){return this._startTime}
g.prototype.currentTime=function(){return this.duration()}
g.prototype.isRecording=function(){return this.state()=="recording"}
g.prototype.volumeMeter=function(){let t=this.$$||(this.$$={})
return(this._volumeMeter=this._volumeMeter||s(y,this).flag("volumeMeter")).end()}
g.prototype.controls=function(){let t=this.$$||(this.$$={})
return(this._controls=this._controls||s("div",this).flag("controls")).setContent(this.volumeMeter(),3)}
g.prototype.start=function(){var t=this
return t._start||(t._start=new Promise(function(e,i){t.space().setRecording(t)
t._origin=t.space().cursor().current()
t._startTimeOffset=t.stream().lastTimeOffset()
t._isFirstRecording=n(t.stream().recordings())==0
t.api().analytics().castRecStart(t.branch().id())
t.setState("starting")
var r=l.delay(100)
if(t.options().mic){t.setAudio(window.MR=new m({chunkSize:2400,constraints:t.options().mic,space:t.space(),owner:t}))
r=t.audio().start()}let o=function(e){t.space().setRecording(null)
t.teardown()
return i(e)}
r.then(function(){t._startAt=t.audio()?t.audio().startedAt():Date.now()
t.setState("recording")
t.options().startTime=t._startAt
if(t.audio()){t._hark=h(t.audio().stream())
t._hark._stream=t.audio().stream()
t._hark.on("speaking",function(){return true})
t._hark.on("stopped_speaking",function(){return true})
t._hark.on("volume_change",function(e){return t._volumeMeter&&t._volumeMeter.setDecibel(e)})
t.options().audiofile=t.audio()._model.toJSON()}let i=[t.branch().toSnapshot({}),t.options()]
t.stream().anchorTime({offset:t._startTimeOffset,now:t._startAt})
t.stream().freezeTime(t._startAt,function(){console.log("setMode recording from",t.branch().mode())
t.branch().setMode("recording")
t._recEvent=t.branch().push_(c.RECSTART,i,{timeOffset:t._startTimeOffset})
t.space().view().focusViewport()
t.space().client().flushLocals()
t.space().pointerTracker().start()
return e(t)})
return t._interval=setInterval(function(){return t.branch().push_(c.PING,[Date.now()])},1e4)},o)
return t}))}
g.prototype.onaudioerror=function(t){return console.log("audio-error!",t)}
g.prototype.stop=async function(){if(this._stopAt){return this}clearInterval(this._interval)
this.setState("stopping")
this._stopAt=Date.now()
this.space().browser().stop()
this.space().pointerTracker().stop()
this.log("stop",this._stopAt)
await(this.audio()?this.stopAudio():Promise.resolve({}))
this._stopTimeOffset=Math.round(this._startTimeOffset+(this._stopAt-this._startAt))
this.stream().anchorTime({offset:this._stopTimeOffset,now:this._stopAt})
this._stopEvent=this.branch().push_(c.RECSTOP,[],{timeOffset:this._stopTimeOffset})
return s(f).flag("modal").setData(this).end().show()}
g.prototype.stopAudio=async function(){await d(300)
await this.audio().stop()
if(this._hark){this._hark.stop()
this._hark=null}this._stopAt=this._startAt+this.audio().duration()
console.log("audio.duration",this.audio().duration())
return this}
g.prototype.discard=async function(){var t
this.branch().timeline().pause()
await this.branch().trimToAction(this._origin);(t=this.audio())&&t.discard&&t.discard()
if(this.branch().timeline().duration()==0){this.branch().timeline().setState("watching")}this.teardown()
this.api().analytics().castRecDiscard(this.branch().id())
return Promise.resolve(this)}
g.prototype.finish=async function(){var t=await(this.audio()?this.audio().upload():{})
if(this.audio()){var e=[1,this._startTimeOffset,this._stopTimeOffset-this._startTimeOffset,this.audio()._model.id]
console.log("audioMarker",e,this.audio().duration(),this._stopTimeOffset-this._startTimeOffset)
this.branch().draft().audio.push(e)}if(this._isFirstRecording){this.branch().draft().start=this._startTimeOffset}this.branch().draft().end=this._stopTimeOffset
console.log("finishing",this._stopTimeOffset,this._startTimeOffset)
await this.branch().save({})
this.setState("stopped")
this.branch().setMode("paused")
this.teardown()
r.Scheduler.event({type:"recstop"})
this.api().analytics().castRecSave(this.branch().id())
return Promise.resolve(this)}
g.prototype.teardown=function(){var t
clearInterval(this._interval)
if(this.branch().state()!=this._initialState){this.branch().model().update({state:this._initialState})}this.branch().setRecording(null)
return this.space().setRecording(null),null}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(28).Struct
var s=i(19),a=s.StreamAction,u=s.RecStart,c=s.LockAction
var p=i(27).StreamBuffer
var l=i(2),h=l.ACTION,d=l.ACTION_MAP,f=l.MSG,m=l.SCON
var y=i(136).Pointer
var g=i(11).List
var v=i(9)
function _(t,e,i,n){var r=this
if(n===undefined)n={}
r._buffer=t
r._actions=[]
r._owner=e
r._options=n
r._offset=n.offset||0
r._byteOffset=0
r._localOffset=0
r._lastLocalIndex=-1
r._lastActions={}
r._lastTimeOffset=0
r._lastType=null
r._state={}
r._dupes={}
r._layouts={}
r._recordings=new g(r)
r._audio=new g(r)
r._tail=r._first=a.seed(r)
r._decoder=new v.Decoder({})
r._decoder.offset=0
if(i){r._tail._prev=r._seed=i}else{r._seed=r._tail}r.anchorTime()
r._ontrim=function(t){r.api().log("stream","ontrim",t)
return r.rollbackToAction(r.actionAtByteOffset(t))}
r._buffer.on("trim",r._ontrim)
r}e.Stream=_
_.prototype.buffer=function(t){return this._buffer}
_.prototype.setBuffer=function(t){this._buffer=t
return this}
_.prototype.owner=function(t){return this._owner}
_.prototype.setOwner=function(t){this._owner=t
return this}
_.prototype.parent=function(t){return this._parent}
_.prototype.setParent=function(t){this._parent=t
return this}
_.prototype.actions=function(t){return this._actions}
_.prototype.setActions=function(t){this._actions=t
return this}
_.prototype.realtime=function(t){return this._realtime}
_.prototype.setRealtime=function(t){this._realtime=t
return this}
_.prototype.seed=function(t){return this._seed}
_.prototype.setSeed=function(t){this._seed=t
return this}
_.prototype.tail=function(t){return this._tail}
_.prototype.setTail=function(t){this._tail=t
return this}
_.prototype.recordings=function(t){return this._recordings}
_.prototype.setRecordings=function(t){this._recordings=t
return this}
_.prototype.__currentLock={watch:"currentLockDidSet",name:"currentLock"}
_.prototype.currentLock=function(t){return this._currentLock}
_.prototype.setCurrentLock=function(t){var e=this.currentLock()
if(t!=e){this._currentLock=t}if(t!=e){this.currentLockDidSet&&this.currentLockDidSet(t,e,this.__currentLock)}return this}
_.prototype.lastActions=function(t){return this._lastActions}
_.prototype.setLastActions=function(t){this._lastActions=t
return this}
_.prototype.lastTimeOffset=function(t){return this._lastTimeOffset}
_.prototype.setLastTimeOffset=function(t){this._lastTimeOffset=t
return this}
_.prototype.state=function(t){return this._state}
_.prototype.setState=function(t){this._state=t
return this}
_.prototype.audio=function(t){return this._audio}
_.prototype.setAudio=function(t){this._audio=t
return this}
_.prototype.dupes=function(t){return this._dupes}
_.prototype.setDupes=function(t){this._dupes=t
return this}
_.prototype.layouts=function(t){return this._layouts}
_.prototype.setLayouts=function(t){this._layouts=t
return this}
_.prototype.dispose=function(){this._buffer.un("trim",this._ontrim)
return this}
_.prototype.id=function(){return this.owner().id()}
_.prototype.space=function(){return this.owner().space()}
_.prototype.api=function(){return this.space().api()}
_.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.api()).log.apply(t,[].concat(["stream"],Array.from(n)))}
_.prototype.pointer=function(){return this._pointer||(this._pointer=new y(this))}
_.prototype.anchorTime=function(t){if(t===undefined)t={}
return this._anchor={ts:t.now||Date.now(),offset:t.offset||this._tail.offset()||0,collapsed:!this.realtime(),rate:1}}
_.prototype.currentLockDidSet=function(t){if(this.owner().isEditing()&&t&&t.sid()!=this.api().sid()){return this.owner().stopEditing()}}
_.prototype.currentSID=function(){return this.currentLock()?this.currentLock().sid():null}
_.prototype.currentTime=function(){return Date.now()-this._anchor.ts}
_.prototype.lastTimeOffset=function(){return this._tail.offset()}
_.prototype.nextTimeOffset=function(){return Math.max(this.lastTimeOffset(),this._anchor.offset+(this.now()-this._anchor.ts)*this._anchor.rate)}
_.prototype.now=function(){return this._frozenTime||Date.now()}
_.prototype.freezeTime=function(t,e){let i=this._frozenTime
this._frozenTime=t||Date.now()
e()
this._frozenTime=i
return this}
_.prototype.byteLength=function(){return this._decoder.offset}
_.prototype.read=function(t){var e=this._decoder
var i=e.buffer=this._buffer._buffer
if(!i||e.offset>=this._buffer.size()){return null}let n=e.fetch()
if(typeof n=="number"){if(n>0){this._lastTimeOffset+=n}else if(n<0){this._lastType=-n}return this.read(t)}var r=this._lastType
var o=d[r]
if(!o){o=a}var s=this._actions.length
var u=this._lastActions[r]
var c=o.decode(n,u?u._params:null,this,s)
if(t){c.LOCAL=t}c.addToStream(this)
c.commitToStream(this)
return this._tail=c}
_.prototype.lock=function(){if(this.currentLock()&&this.currentLock().sid()==this.api().sid()){return true}var t=new c([this.api().sid(),this.api().uid()])
this.log("lock",t)
t.addToStream(this)
var e=p.encode([-h.LOCK,t.encode(this)])
this.buffer().add(e,this.byteLength())
this._lastType=t._type
this.sync({})
return true}
_.prototype.write=function(t,e){if(!this.lock()){return false}var i=this.nextTimeOffset()
if(e&&e.timeOffset!=null){i=e.timeOffset}var n=i-this.lastTimeOffset()
if(n>0&&n<3){n=0}if(!(this.space().recording()&&this.space().recording().isRecording())){if(!(e&&e.timeOffset)){n=0}}var r=t._type
if(!this.canPush(t)){console.warn("not allowed to write to stream!",t)
return this}var o=[]
if(n>0){o.push(n)}if(r!=this._lastType){o.push(-r)}t.addToStream(this)
var s=t.encode(this)
o.push(s)
var a=p.encode(o)
this.buffer().add(a,this.byteLength())
this.log.apply(this,[].concat([i,n,t.constructor.name],Array.from(s)))
this._lastLocalIndex=this._actions.length
return this.read(e)}
_.prototype.canPush=function(t){var e=this._recordings.last()
var i=!e||!e.stop()||t instanceof u
return i}
_.prototype.encode=function(){var t=new v.Encoder({})
var e=0
var i=0
var n=0
for(let i=0,o=r(this.actions()),s=o.length,a;i<s;i++){a=o[i]
let r=a.timeOffset()
if(r>n){t.write(r-n)
n=r}if(a._type!=e){t.write(-a._type)
e=a._type}let s=a.encode(this)
t.write(s)}return t.read()}
_.prototype.sync=function(t){if(t===undefined)t=null
var e=this._buffer.size()
var i=this._decoder.offset
if(i==e){return this}if(i>e){console.warn("we are ahead of buffer(?!)")
return this}while(this.read(t)){true}return this}
_.prototype.len=function(){return this._actions.length}
_.prototype.toArray=function(){return this._actions}
_.prototype.map=function(t){return this._actions.map(t)}
_.prototype.duration=function(){return this._tail.offset()}
_.prototype.actionAtIndex=function(t){if(t<0){t=this._actions.length+t}return this._actions[t]}
_.prototype.actionAtOffset=function(t){this.read()
var e=this._lastSearchCursor||this._actions[0]
if(!e){return null}var i=e
while(t>=this.duration()){if(!this.read()){return this._tail}}if(t<e.offset()){while(e&&t<e.offset()){e=e._prev}return this._lastSearchCursor=e||this._actions[0]}else{while(e&&t>=e.offset()){i=e
e=e._next}return this._lastSearchCursor=i}}
_.prototype.actionAtByteOffset=function(t){var e=this._tail
while(e&&e._byteEnd>t){e=e._prev}return e}
_.prototype.actionsOfType=function(t){return this._actions.filter(function(e){return e._type==t})}
_.prototype.rollbackToAction=function(t){var e=this._decoder
var i=this.space().cursor().compare(this.space().cursor().current(),t)
this.log("rollback-path",i)
if(i.revertTo){this.space().cursor().sync(t)}while(this._tail!=t){let t=this._tail._prev
this._tail.removeFromStream(this)
this._tail=t
t._next=null}var r=this._tail.timeOffset()
this._lastType=this._tail.type()
this._lastTimeOffset=r
this._lastSearchCursor=null
this._decoder.offset=this._tail.byteEnd()
this._actions.slice(0,t.index()+1)
var o=n(this._actions)-1
for(let t=this._dupes,e,i=0,n=Object.keys(t),r=n.length,s;i<r;i++){s=n[i]
e=t[s]
if(e>o){this._dupes[s]=undefined}}var s=this._owner&&this._owner.timeline&&this._owner.timeline()
if(s&&s.currentOffset()>r){s.seek(r)}return this}
_.prototype.rollbackToByteOffset=function(t){var e=this._tail
while(e&&e.byteEnd()>t){e=e._prev}this.rollbackToAction(e)
return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(2).MSG
var o=i(9)
var s=i(27).StreamBuffer
var a={READY:0,BUSY:1,CONFLICT:2,RECOVERING:3}
function u(t,e){var i=this
i._stream=t
i._buffer=t.buffer()
i._channel=e
i._counter=0
i._lastOffset=0
i._remoteOffset=0
i._timeout=null
i._requests=[]
i._state=a.READY
i._tick=function(){i._timeout=null
return i.sync()}
i._callback=function(t,e){return i.onresponse(t,e)}
i._ontrim=function(t){return i.ontrim(t)}
i._buffer.on("trim",i._ontrim)
i}e.StreamSyncer=u
u.prototype.stream=function(t){return this._stream}
u.prototype.setStream=function(t){this._stream=t
return this}
u.prototype.channel=function(t){return this._channel}
u.prototype.setChannel=function(t){this._channel=t
return this}
u.prototype.byteOffset=function(t){return this._byteOffset}
u.prototype.setByteOffset=function(t){this._byteOffset=t
return this}
u.prototype.__state={watch:"stateDidSet",name:"state"}
u.prototype.state=function(t){return this._state}
u.prototype.setState=function(t){var e=this.state()
if(t!=e){this._state=t}if(t!=e){this.stateDidSet&&this.stateDidSet(t,e,this.__state)}return this}
u.prototype.isRecovering=function(){return this.state()==a.RECOVERING}
u.prototype.branch=function(){return this.stream().owner()}
u.prototype.latency=function(){var t=Date.now()
var e=this._lastConfirmed
var i=this._requests[this._requests.indexOf(e)+1]
var n=e?e.ms:0
var r=i?t-i.ts:0
return Math.max(n,r)}
u.prototype.confirm=function(t){this._remoteOffset=this._lastOffset=t
return this}
u.prototype.onresponse=function(t,e){this._lastResponse=t
switch(t.CODE){case r.OK:{this._lastConfirmed=e
this._remoteOffset=e.byteEnd
if(this.isRecovering()){this.setState(a.READY)}break}case r.UNAUTHORIZED:{console.warn("got message from server that we are unauthorized!")
this
break}case r.ERR_OUT_OF_RANGE:{console.warn("server said we are out of range!",this.isRecovering())
if(!this.isRecovering()){this.setState(a.RECOVERING)
this._lastOffset=this._remoteOffset
this.sync()}this
break}}return this}
u.prototype.ontrim=function(t){this._stream.api().log("syncer","ontrim",t,this._lastOffset,this._remoteOffset)
this._lastOffset=Math.min(this._lastOffset,t)
this._remoteOffset=Math.min(this._buffer._verifiedOffset,t)
this._lastConfirmed=null
this._requests=[]
return this}
u.prototype.getPayload=function(){let t=this._lastOffset
let e=n(this._buffer)-1
if(this._buffer._verifiedOffset>this._lastOffset){this._stream.api().log("syncer","buffer already has a confirmed remote offset",this._lastOffset,this._buffer._verifiedOffset)
t=this._lastOffset=this._buffer._verifiedOffset}if(t>=e){return}let i=this.stream().id()
let a=o.encode([r.STREAMAPPEND,i,t])
var u=this._buffer.slice(t)
var c=s.concat([a,u])
return c}
u.prototype.sync=function(t){if(t===undefined)t=false
if(this.branch().isLocal()){return}if(!t&&this.branch().recording()&&!this.branch().recording().live()){return}var e=this.getPayload()
var i=n(this._buffer)
if(e){this._lastOffset=i
var r={byteEnd:i,handler:this._callback}
this._requests.push(r)
return this.channel().send(e,r)}}
u.prototype.schedule=function(){if(this._timeout){return}return this._timeout=setTimeout(this._tick,0)}
u.prototype.persist=function(){return this.sync(true)}
u.prototype.dispose=function(){this._buffer.un("trim",this._ontrim)
return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0)
var s=i(2),a=s.WIDGET,u=s.CAST,c=s.SCON
var p=i(45).TimelineCues
var l=i(29).AudioManager
var h=i(17).Delay
var d=i(10)
var f=250
var m=0
function y(t,e,i){this._shouldScheduleAudio=0
this._branch=t
this._data=e
this._options=i
this._localRef=m++
e.start||(e.start=0)
this._cues=new p(e)
if(e.end||t.isLocked()){this._initialOffset=e.start
this.anchorTime(this._initialOffset)
this.setState("paused")}else{this._initialOffset=this.endOffset()
this.anchorTime(this.endOffset())
this.setState("watching")}this}e.Timeline=y
y.prototype.branch=function(t){return this._branch}
y.prototype.setBranch=function(t){this._branch=t
return this}
y.prototype.data=function(t){return this._data}
y.prototype.setData=function(t){this._data=t
return this}
y.prototype.__active={default:false,name:"active"}
y.prototype.active=function(t){return this._active}
y.prototype.setActive=function(t){this._active=t
return this}
y.prototype._active=false
y.prototype.__isAnnotating={default:false,name:"isAnnotating"}
y.prototype.isAnnotating=function(t){return this._isAnnotating}
y.prototype.setIsAnnotating=function(t){this._isAnnotating=t
return this}
y.prototype._isAnnotating=false
y.prototype.__isBuffering={default:false,watch:"isBufferingDidSet",name:"isBuffering"}
y.prototype.isBuffering=function(t){return this._isBuffering}
y.prototype.setIsBuffering=function(t){var e=this.isBuffering()
if(t!=e){this._isBuffering=t}if(t!=e){this.isBufferingDidSet&&this.isBufferingDidSet(t,e,this.__isBuffering)}return this}
y.prototype._isBuffering=false
y.prototype.__playbackRate={watch:"playbackRateDidSet",default:1,name:"playbackRate"}
y.prototype.playbackRate=function(t){return this._playbackRate}
y.prototype.setPlaybackRate=function(t){var e=this.playbackRate()
if(t!=e){this._playbackRate=t}if(t!=e){this.playbackRateDidSet&&this.playbackRateDidSet(t,e,this.__playbackRate)}return this}
y.prototype._playbackRate=1
y.prototype.__loopSegment={watch:"loopSegmentDidSet",name:"loopSegment"}
y.prototype.loopSegment=function(t){return this._loopSegment}
y.prototype.setLoopSegment=function(t){var e=this.loopSegment()
if(t!=e){this._loopSegment=t}if(t!=e){this.loopSegmentDidSet&&this.loopSegmentDidSet(t,e,this.__loopSegment)}return this}
y.prototype.__state={watch:"stateDidSet",name:"state"}
y.prototype.state=function(t){return this._state}
y.prototype.setState=function(t){var e=this.state()
if(t!=e){this._state=t}if(t!=e){this.stateDidSet&&this.stateDidSet(t,e,this.__state)}return this}
y.prototype.cues=function(t){return this._cues}
y.prototype.setCues=function(t){this._cues=t
return this}
y.prototype.initialOffset=function(t){return this._initialOffset}
y.prototype.setInitialOffset=function(t){this._initialOffset=t
return this}
y.prototype.space=function(){var t
return(t=this.branch())&&t.space&&t.space()}
y.prototype.api=function(){return this.space()&&this.space().api()}
y.prototype.isBufferingDidSet=function(t,e){var i=this
i.space().dirty()
i.log("isBuffering",t,e,e&&i.bufferingDuration())
if(true){i._isBuffering=e
i.anchorTime()
i._isBuffering=t}if(t){let t=i._bufferingSince
i._bufferingSince=Date.now()
if(!t){i._bufferingSince-=f+10}return setTimeout(function(){return i.space().dirty()},f+2)}}
y.prototype.isStalled=function(){return this.state()=="playing"&&this.isBuffering()&&this.bufferingDuration()>f}
y.prototype.timeline=function(){return this}
y.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
if(this.api()){return(t=this.api()).log.apply(t,[].concat(["timeline"],Array.from(n)))}}
y.prototype.mode=function(){return this.state()}
y.prototype.isPlaying=function(){return this.playState()=="playing"}
y.prototype.isPaused=function(){return this.playState()=="paused"}
y.prototype.isSeeking=function(){return this.state()=="seeking"}
y.prototype.isWatching=function(){return this.state()=="watching"}
y.prototype.isRecording=function(){return this.state()=="recording"}
y.prototype.isEditing=function(){return this.state()=="editing"||this.isRecording()}
y.prototype.isLive=function(){return this.isWatching()||this.isEditing()}
y.prototype.play=function(){this.log("play",this.currentTime(),this.endTime())
if(!this.isPlaying()&&this.currentTime()>=this.endTime()){this.seek(this.startOffset())}return this.setState("playing").enter()}
y.prototype.pause=function(){return this.setState("paused")}
y.prototype.goLive=function(){return this.setState("live").enter()}
y.prototype.ended=function(){this.pause()
if(this.space()){return this.space().view().trigger("spaceend")}}
y.prototype.playState=function(){return this.state()=="seeking"?this._prevState:this.state()}
y.prototype.enter=function(){if(this.space()){this.space().setTimeline(this)}return this}
y.prototype.setState=function(t){var e
var i=this._state
if(i==t){return this}var n=this.currentOffset()
var r=this.currentTime()
this.anchorTime(n,r)
this._wasLive=this.isLive()
this._prevState=i
this._state=t
this.trackPlayState()
this.enterState(t,i,n);(e=this.space())&&e.emit&&e.emit(t,this,i,n,r)
return this}
y.prototype.enterState=function(t,e,i){this.log(""+e+"->"+t)
if(this._wasLive&&!this.isLive())this.liveLeave()
if(this[""+e+"Leave"]){this[""+e+"Leave"](t,i)}if(this.isLive()&&!this._wasLive)this.liveEnter()
if(this[""+t+"Enter"]){this[""+t+"Enter"](e,i)}return this}
y.prototype.liveEnter=function(){return this}
y.prototype.liveLeave=function(){return this}
y.prototype.compute=function(){this._cues.compute()
return this}
y.prototype.trackPlayState=function(){return this.api().sendTracking(d.TYPES.PLAYSTATE,[this._state,this.currentTime(),this.playbackRate()])}
y.prototype.addMarker=function(t){this._data.cues.push(t)
return this.compute()}
y.prototype.removeMarker=function(t){var e=this._data.cues.indexOf(t)
if(e>=0){this._data.cues.splice(e,1)}this.compute()
return this}
y.prototype.span=function(){return this.data().end||this.branch().stream().duration()}
y.prototype.duration=function(){return this.endTime()-this.startTime()}
y.prototype.progress=function(){return this.currentTime()/this.duration()}
y.prototype.bufferingDuration=function(){return this._bufferingSince?Date.now()-this._bufferingSince:0}
y.prototype.timeToOffset=function(t){return Math.round(this.cues().timeToOffset(t+this.startTime()))}
y.prototype.offsetToTime=function(t){return Math.round(this.cues().offsetToTime(t)-this.startTime())}
y.prototype.startOffset=function(){return this.data().start||0}
y.prototype.endOffset=function(){return Math.max(this.data().end||0,this.span())}
y.prototype.startTime=function(){return this.data().start?this.cues().offsetToTime(this.data().start):0}
y.prototype.endTime=function(){return this.cues().offsetToTime(this.endOffset())}
y.prototype.clampOffset=function(t){return Math.max(0,Math.min(t,this.endOffset()))}
y.prototype.deactivate=function(){this.setActive(false)
if(this.isPlaying())this.pause()
return this}
y.prototype.activate=function(){this.anchorTime()
this.setActive(true)
return this}
y.prototype.anchorTime=function(t,e){if(t==undefined){t=this.referenceOffset()}if(e==undefined){e=this.offsetToTime(t)}this._anchor={ts:Date.now(),offset:Math.round(t),elapsed:Math.round(e),speed:this.referencePlaybackRate()}
return this}
y.prototype.currentTime=function(){if(this.isLive()){return this.offsetToTime(this.currentOffset())}else if(this.state()=="playing"&&!this.isBuffering()){return this._anchor.elapsed+Math.round((Date.now()-this._anchor.ts)*this._anchor.speed)}else{return this._anchor.elapsed}}
y.prototype.currentOffset=function(){if(this.state()=="scrubbing"){return this._scrubOffset}else if(this.isLive()){return this.branch().stream().duration()}else if(this.state()=="playing"){return Math.round(Math.min(this.timeToOffset(this.currentTime()),this.endOffset()))}else{return this._anchor.offset}}
y.prototype.referenceTime=function(){return this.currentTime()}
y.prototype.referenceOffset=function(){return this.currentOffset()}
y.prototype.referencePlaybackRate=function(){return this.playbackRate()}
y.prototype.scrub=function(t){return this.seek(t,true)}
y.prototype.skip=function(t){let e=Math.max(this.currentTime()+t,0)
return this.seek(this.timeToOffset(e))}
y.prototype.seek=function(t,e){if(e===undefined)e=false
t=this.clampOffset(t)
if(t==this._seekOffset&&Date.now()-this._seekAt<200&&e==this._seekScrub){return this}this._seekScrub=e
this._seekOffset=t
this._seekAt=Date.now()
this.syncSeek(t,e)
this.unscheduleAudio()
this.branch().setCurrentOffset(t)
this.enter()
if(this.isPlaying()){this.scheduleAudio()}return this}
y.prototype.seekToEnd=function(){var t
if(t=this.branch().stream().tail()){this.seek(t.timeOffset())}return this}
y.prototype.syncSeek=function(t,e){return this.anchorTime(t)}
y.prototype.unscheduleAudio=function(){if(this._scheduledAudio){l.instance().unscheduleClips(this._scheduledAudio)
return this._scheduledAudio=null}}
y.prototype.scheduleAudio=function(){return this}
y.prototype.tick=function(){var t=this.currentOffset()
if(this.isPlaying()&&t>=this.endOffset()){this.anchorTime(t=this.endOffset())
this.ended()}this.branch().setCurrentOffset(t)
this.space().cursor().target(this.targetEvent())
return this}
y.prototype.targetEvent=function(){if(this.isLive()){this.branch().stream().sync()
return this.branch().head()}else{return this.branch().stream().actionAtOffset(this.currentOffset())}}
y.prototype.editingLeave=function(t){if(t!="recording"){this.space().browser().stop()
this.space().browser().node().resetLayout()
this.space().emit("watch")}return this}
y.prototype.recordingLeave=function(){this.space().browser().stop()
this.space().browser().node().resetLayout()
return this.space().emit("watch")}
y.prototype.editingEnter=function(){this.branch().forceToEnd()
return this.space().client().flushLocals()}
y.prototype.recordingEnter=function(){return this.branch().forceToEnd()}
y.prototype.watchingEnter=function(){return this}
y.prototype.pausedEnter=function(t){if(t=="playing")this.registerProgress()
return this}
y.prototype.registerProgress=function(){let t=this.currentOffset()
let e=this.currentTime()/this.duration()
return this.space().api().rpc("castSetProgress",[this.space().id(),e,t])}
y.prototype.stats=function(){return{cid:this._branch.id(),state:this.playState(),localref:this._localRef,played:0}}
y.prototype.describe=function(){const t=this.playbackRate().toFixed(1)
return"Speed: "+t}
function g(){return y.apply(this,arguments)}o.subclass(g,y)
e.AbsTimeline=g
g.prototype.loadAudio=function(){let t=[]
for(let e=0,i=r(this.cues().audio()),n=i.length;e<n;e++){t.push(l.instance().loadBufferForId(i[e][3]))}return t}
g.prototype.clips=async function(){var t=this
let e=false
setTimeout(function(){if(!e){console.log("forced buffering!")
return t.setIsBuffering(true),true}},20)
await Promise.all(t.loadAudio())
e=true
t.setIsBuffering(false)
return t.cues().audioclips(t.data().start,0)}
g.prototype.buffered=function(){return this._buffered||(this._buffered=[[0,1]])}
g.prototype.scheduleAudio=async function(){let t=++this._shouldScheduleAudio
var e=await this.clips()
if(this._shouldScheduleAudio==t){l.instance().scheduleClips(this._scheduledAudio=e,this.currentTime(),this.playbackRate())}return this}
g.prototype.unscheduleAudio=function(){++this._shouldScheduleAudio
if(this._scheduledAudio){l.instance().unscheduleClips(this._scheduledAudio)
this._scheduledAudio=null}return this}
g.prototype.enterState=function(t,e,i){this.unscheduleAudio()
return g.prototype.__super__.enterState.apply(this,arguments)}
g.prototype.playingEnter=function(){if(this.space()){this.space().setTimeline(this)}if(!this.isPlaying()){return}this.unscheduleAudio()
return this.scheduleAudio()}
function v(t,e,i){v.prototype.__super__.constructor.apply(this,arguments)
this._audioIsPlaying=false
this._audioIsPaused=true
this._audioWasPaused=0
if(true){this._playbackRate=this.space().api().sessionStore().getnum("playbackRate")||1
this.audio()}this}o.subclass(v,y)
e.PubTimeline=v
v.prototype.stats=function(){var t={localref:this._localRef,cid:this._branch.id(),state:this.playState(),played:0,ranges:[]}
var e=this._audio.played.length
var i=0
while(i<e){let e=Math.round(this._audio.played.start(i))
let n=Math.round(this._audio.played.end(i))
if(n-e>1){t.ranges.push(e,n)
t.played+=n-e}i++}return t}
v.prototype.playbackRateDidSet=function(t){if(true){this.space().api().sessionStore().set("playbackRate",t)}if(this._audio){var e=this.currentOffset()
this._audio.playbackRate=t
this.anchorTime(e)}return this}
v.prototype.isAnnotating=function(){return false}
v.prototype.audioSrc=function(){return this._data.audio&&l.instance().urlForId(this._data.audio.fid||this._data.audio)}
v.prototype.tick=function(){var t=this.currentOffset()
this.branch().setCurrentOffset(t)
this.space().cursor().target(this.targetEvent())
return this}
v.prototype.buffered=function(){if(this._buffered){return this._buffered}var t=[]
var e=this.duration()/1e3
var i=this.audio().buffered
var r=n(i)
var o=0
while(o<r){let n=i.start(o)
let r=i.end(o)
t.push([n/e,r/e])
o++}return this._buffered=t}
v.prototype.referenceTime=function(){return this._audio?Math.round(this._audio.currentTime*1e3):0}
v.prototype.referenceOffset=function(){return this.timeToOffset(this.referenceTime())}
v.prototype.referencePlaybackRate=function(){return!this._audio||this._audio.paused?0:this._audio.playbackRate}
v.prototype.audio=function(){if(this._audio){return this._audio}this._audio=document.createElement("audio")
this.bindAudio(this._audio)
this._audio.src=this.audioSrc()
this._audio.load()
this._audio.currentTime=this.currentTime()/1e3||0
this._audio.playbackRate=this.playbackRate()
SA=this._audio
return this._audio}
v.prototype.enterState=function(t,e,i){this.log("enterState "+e+"->"+t)
if(t!="playing"&&this._audio&&!this.audio().paused&&this._audioIsPlaying){this._ignorePauseEvent=true
this._audioWasPaused=Date.now()
this.audio().pause()}return v.prototype.__super__.enterState.apply(this,arguments)}
v.prototype.playingEnter=function(t,e){this.api().analytics().castPlay(this._branch.model().id)
this.branch().enter()
this.space().setTimeline(this)
this.anchorTime(e)
this.setIsBuffering(true)
if(this.audio().paused){l.instance().registerMedia(this.audio())
if(!this._audioIsPlaying){let t=Math.round(this._anchor.elapsed||0)
this.setAudioTime(t)
return this.audio().play()}else{return this._audioShouldPlay=true}}}
v.prototype.syncSeek=function(t,e){var i=this.offsetToTime(t)
if(e){return this.anchorTime(t)}else{this.anchorTime(t)
return this.setAudioTime(i)}}
v.prototype.setAudioTime=function(t){let e=Math.round(this.audio().currentTime*1e3)
if(e!=Math.round(t)){this.audio().currentTime=t/1e3}return t}
v.prototype.activate=function(){return v.prototype.__super__.activate.apply(this,arguments)}
v.prototype.deactivate=function(){v.prototype.__super__.deactivate.apply(this,arguments)
if(this._audio){if(!this._audio.paused){this._audio.pause()}l.instance().deregisterMedia(this._audio)}return this}
v.prototype.bindAudio=function(t){var e=this
t.widget=e
t.preload="auto"
var i=function(t){return true}
t.onpause=function(i){e.log("onpause @"+e.state())
e._audioIsPlaying=false
e._audioIsPaused=true
let n=Date.now()-e._audioWasPaused>300
if(e.state()=="playing"&&n){if(t.currentTime==t.duration){return e.ended()}else{return e.pause()}}else if(e.state()=="playing"&&!n){return t.play()}}
t.onplaying=function(i){e.log("onplaying")
e._audioIsPlaying=true
e._audioIsPaused=false
e.setIsBuffering(true)
if(e.isPaused()){return t.pause()}}
t.oncanplay=function(){return e.log("oncanplay")}
t.onprogress=function(t){e._buffered=null
return e.space().dirty()}
t.oncanplaythrough=function(){e.log("oncanplaythrough")
return e}
t.onwaiting=function(){return e.log("onwaiting")}
t.onplay=function(){e.log("onplay")
if(!e.isPlaying()){return e.play()}}
let n=e._lastTimeUpdate={threshold:0,elapsed:[],timestamps:[]}
t.ontimeupdate=function(i){clearTimeout(n.timeout)
if(t.paused){n.elapsed=[]
return n.timestamps=[]}else{e.anchorTime()
let i=t.currentTime*1e3
let r=Date.now()
let o=n.elapsed[0]
let s=n.timestamps[0]
n.elapsed.unshift(i)
n.timestamps.unshift(r)
n.timeout=setTimeout(function(){return e.setIsBuffering(true),true},n.threshold||500)
if(s){let t=(i-o)/((r-s)*e.playbackRate())
if(t>.8&&t<1.2){n.threshold=Math.max(n.threshold,20+r-s)
return e.setIsBuffering(false),false}}}}
t.onseeked=function(t){return true}
t.onended=function(t){if(e.state()=="playing"){return e.ended()}}
t.onstalled=function(t){return e.log("onstalled")}
t.onerror=i
t.onloadedmetadata=i
return t}
v.prototype.dispose=function(){return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0)
function s(t,e,i){this._defaults=t
this._selector=e
this._worker=i
this._disposables=[]
this._listener=Object.create(null)
this}e.Adapter=s
s.prototype.worker=function(t){return this._worker}
s.prototype.setWorker=function(t){this._worker=t
return this}
s.prototype.selector=function(t){return this._selector}
s.prototype.setSelector=function(t){this._selector=t
return this}
s.prototype.dispose=function(){for(let t=0,e=r(this._disposables),i=e.length;t<i;t++){e[t].dispose()}for(let t=this._listener,e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
e.dispose()}this._disposables=[]
this._listener=Object.create(null)
return this}
var a={base:{dark:{color:"#f3f1d5"},light:{color:"#509DB5"}},import:{dark:{color:"#e2b5e8"},light:{color:"#509DB5"}}}
function u(t,e,i){var n=this
u.prototype.__super__.constructor.apply(n,arguments)
var r=function(t){if(t.getModeId()!=n._selector){return}return n.addModel(t)}
var o=function(t){return n.removeModel(t)}
n._disposables.push(monaco.editor.onDidCreateModel(r))
n._disposables.push(monaco.editor.onWillDisposeModel(o))
n._disposables.push(monaco.editor.onDidChangeModelLanguage(function(t){o(t.model)
return r(t.model)}))
monaco.editor.getModels().forEach(r)}o.subclass(u,s)
e.DiagnosticsAdapter=u
u.prototype.addModel=function(t){var e=this
var i=t.uri.toString()
if(e._listener[i]){return}var n
t.IMBA_ADAPTER=e
var r=t.onDidChangeContent(function(t){e.prevalidate(i)
clearTimeout(n)
return n=setTimeout(function(){return e.validate(i)},500)})
e._listener[i]={dispose:function(){clearTimeout(n)
return r.dispose()}}
return e.validate(i)}
u.prototype.removeModel=function(t){var e
var i=t.uri.toString()
if(this._listener[i]){this._listener[i].dispose()
return e=this._listener[i],delete this._listener[i],e}}
u.prototype.locToRange=function(t,e){var i=t.getPositionAt(e[0])
var n=t.getPositionAt(e[1])
return new monaco.Range(i.lineNumber,i.column,n.lineNumber,n.column)}
u.prototype.varToDecoration=function(t,e,i){var n=this.locToRange(t,i)
n.name=e.name
var r=a[e.type]||a.base
return{range:n,renderOptions:{dark:{color:"#f3f1d5"},light:{color:"#509DB5"}},hoverMessage:"Variable",stickiness:1,options:{stickiness:1,inlineClassName:"l"+e.type,hoverMessage:"Variable",name:e.name||"itemname"}}}
u.prototype.warningToMarker=function(t,e){var i=this.locToRange(t,e.loc)
i.severity=3
i.message=e.message
return i}
u.prototype.warningToDecoration=function(t,e){var i=this.locToRange(t,e.loc)
return{range:i,options:{name:"error",linesDecorationsClassName:"error"}}}
u.prototype.prevalidate=function(t){var e=monaco.editor.getModel(t)
var i=e._imbaEntities||{}
if(i.warnings){monaco.editor.setModelMarkers(e,this._selector,[])}return this}
u.prototype.validate=async function(t){var e=await this._worker(t)
var i=await e.getDiagnostics(t)
var o=monaco.editor.getModel(t)
var s=[]
var a=[]
o._imbaEntities=i
for(let t=0,e=r(i.scopes),n=e.length,a;t<n;t++){a=e[t]
for(let t=0,e=r(a.vars),i=e.length,n;t<i;t++){n=e[t]
for(let t=0,e=r(n.refs),i=e.length;t<i;t++){s.push(this.varToDecoration(o,n,e[t].loc))}}}for(let t=0,e=r(i.warnings),n=e.length,u;t<n;t++){u=e[t]
s.push(this.warningToDecoration(o,u))
a.push(this.warningToMarker(o,u))}monaco.editor.setModelMarkers(o,this._selector,a)
if(!n(a)){o._varDecorations=o.deltaDecorations(o._varDecorations||(o._varDecorations=[]),s)}return[]}},function(t,e,i){var n={}
var r=i(141).DiagnosticsAdapter
var o=i(143).WorkerManager
e.setupMode=n.setupMode=function(t){var e="imba"
var i=window.MonacoEnvironment.imba
var n=new o(e,t)
var s=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return n.getLanguageServiceWorker.apply(n,i)}
var a=[n]
a.push(new r(t,e,s))
i&&a.push(monaco.languages.setMonarchTokensProvider(e,i.language))
i&&a.push(monaco.languages.setLanguageConfiguration(e,i.conf))
return s}},function(t,e){var i=2*60*1e3
function n(t){var e=this
e._defaults=t
e._worker=null
e._idleCheckInterval=setInterval(function(){return e.checkIfIdle()},30*1e3)
e._lastUsedTime=0}e.WorkerManager=n
n.prototype.stopWorker=function(){if(this._worker){this._worker.dispose()
this._worker=null}return this._client=null}
n.prototype.dispose=function(){clearInterval(this._idleCheckInterval)
return this.stopWorker()}
n.prototype.checkIfIdle=function(){if(!this._worker){return}var t=Date.now()-this._lastUsedTime
if(t>i){return this.stopWorker()}}
n.prototype.getClient=function(){this._lastUsedTime=Date.now()
if(!this._client){this._worker=monaco.editor.createWebWorker({moduleId:SCRIMBA_API.assetsPath("imba-worker.js"),label:"imba",createData:{defaults:this._defaults}})
this._client=this._worker.getProxy()}return this._client}
n.prototype.getLanguageServiceWorker=function(){var t=this
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return t.getClient().then(function(e){return t._worker.withSyncedResources(n).then(function(){return e})})}},function(t,e){var i={}
var n
e.inlineCompiledCode=i.inlineCompiledCode=function(t,e,i){if(i===undefined)i={}
return new monaco.Promise(async function(i,r){let o="compiles to:"
let s=String(t.uri)
let a=monaco.IMBA_WORKER
let u=t.getValue()
let c=t.FILE_MODEL.file()
let p=t.getValueInRange(e.getSelection())
u=u.split("\n### "+o)[0]
if(p.length>0){let e=t.getModeId()
n||(n=monaco.editor.createModel("",null,"tempSelFile."+e))
p+="\n"
n.setValue(p)
s=String(n.uri)}a=await a(s)
var l=await a.getCompiledCode(s)
l=l.split("\n/* "+o)[0]
if(l.slice(0,20).indexOf("var Imba =")>=0){l=l.slice(l.indexOf("\n")+1)}u=u+"\n### "+o+"\n\n"+l
if(c){c.replaceBody(u)}return i(true)})}},function(t,e){var i=e.language={tokenPostfix:".js",keywords:["break","case","catch","class","continue","const","constructor","debugger","default","delete","do","else","export","extends","false","finally","for","from","function","get","if","import","in","instanceof","let","new","null","return","set","super","switch","symbol","this","throw","true","try","typeof","undefined","var","void","while","with","yield","async","await","of"],builtins:["define","require","window","document","undefined"],operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],brackets:[{open:"(",close:")",token:"bracket.parenthesis"},{open:"{",close:"}",token:"bracket.curly"},{open:"[",close:"]",token:"bracket.square"}],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,exponent:/[eE][\-+]?[0-9]+/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/([a-zA-Z_\$][\w\$]*)(\s*)(:?)/,{cases:{"$1==import":{token:"keyword",next:"@import"},"$1@keywords":["keyword","white","delimiter"],$3:["key.identifier","white","delimiter"],"$1@builtins":["predefined.identifier","white","delimiter"],"@default":["identifier","white","delimiter"]}}],{include:"@whitespace"},[/\/(?=([^\\\/]|\\.)+\/(?!\/))/,{token:"regexp.slash",bracket:"@open",next:"@regexp"}],[/(<)([\:\w\.]+)/,["start.delimiter.tag",{token:"tag",next:"@tagContent"}]],[/(<)(>)/,["start.delimiter.tag",{token:"end.delimiter.tag",next:"@tagBody"}]],[/[{}()\[\]]/,"@brackets"],[/[;,.]/,"delimiter"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d+\.\d*(@exponent)?/,"number.float"],[/\.\d+(@exponent)?/,"number.float"],[/\d+@exponent/,"number.float"],[/0[xX][\da-fA-F]+/,"number.hex"],[/0[0-7]+/,"number.octal"],[/\d+/,"number"],{include:"@strings"}],strings:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"],[/`/,"string","@string_backtick"]],rootInBrace:[[/\}/,"delimiter","@pop"],{include:"@root"}],tagContent:[[/\/\s*>/,"end.delimiter.tag","@pop"],[/>/,{token:"end.delimiter.tag",switchTo:"@tagBody"}],[/"([^"]*)"/,"attribute.value"],[/'([^']*)'/,"attribute.value"],[/[\w\-]+/,"attribute.name"],[/\=/,"delimiter"],[/\{/,"delimiter","@rootInBrace"],{include:"@whitespace"}],tagBody:[[/\{/,"delimiter","@rootInBrace"],[/(<\/)([:\w\.]*)(>)/,["start.delimiter.tag","tag",{token:"end.delimiter.tag",next:"@pop"}]],[/(<)([:\w\.]+)/,["start.delimiter.tag",{token:"tag",next:"@tagContent"}]]],import:[[/;/,"delimiter","@pop"],[/^/,"white","@pop"],[/\b(from|as)\b/,"keyword"],{include:"@whitespace"},{include:"@strings"}],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\/\*/,"comment.invalid"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/\}/,"delimiter.bracket","@pop"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["@brackets.regexp.escape.control","regexp.escape.control","@brackets.regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["@brackets.regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["@brackets.regexp.escape.control","regexp.escape.control"]],[/[()]/,"@brackets.regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],["/",{token:"regexp.slash",bracket:"@close"},"@pop"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"@brackets.regexp.escape.control","@pop"]]}}},function(t,e){const i=e.conf={wordPattern:/(#?-?\d*\.\d\w*%?)|([@$#!.:]?[\w-?]+%?)|[@#!.]/g,comments:{blockComment:["/*","*/"],lineComment:"//"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{markers:{start:new RegExp("^\\s*\\/\\*\\s*#region\\b\\s*(.*?)\\s*\\*\\/"),end:new RegExp("^\\s*\\/\\*\\s*#endregion\\b.*\\*\\/")}}}
const n=e.language={defaultToken:"",tokenPostfix:".scss",ws:"[ \t\n\r\f]*",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@selector"}],selector:[{include:"@comments"},{include:"@import"},{include:"@variabledeclaration"},{include:"@warndebug"},["[@](include)",{token:"keyword",next:"@includedeclaration"}],["[@](keyframes|-webkit-keyframes|-moz-keyframes|-o-keyframes)",{token:"keyword",next:"@keyframedeclaration"}],["[@](page|content|font-face|-moz-document)",{token:"keyword"}],["[@](charset|namespace)",{token:"keyword",next:"@declarationbody"}],["[@](function)",{token:"keyword",next:"@functiondeclaration"}],["[@](mixin)",{token:"keyword",next:"@mixindeclaration"}],["url(\\-prefix)?\\(",{token:"meta",next:"@urldeclaration"}],{include:"@controlstatement"},{include:"@selectorname"},["[&\\*]","tag"],["[>\\+,]","delimiter"],["\\[",{token:"delimiter.bracket",next:"@selectorattribute"}],["{",{token:"delimiter.curly",next:"@selectorbody"}]],selectorbody:[["[*_]?@identifier@ws:(?=(\\s|\\d|[^{;}]*[;}]))","attribute.name","@rulevalue"],{include:"@selector"},["[@](extend)",{token:"keyword",next:"@extendbody"}],["[@](return)",{token:"keyword",next:"@declarationbody"}],["}",{token:"delimiter.curly",next:"@pop"}]],selectorname:[["#{",{token:"meta",next:"@variableinterpolation"}],["(\\.|#(?=[^{])|%|(@identifier)|:)+","tag"]],selectorattribute:[{include:"@term"},["]",{token:"delimiter.bracket",next:"@pop"}]],term:[{include:"@comments"},["url(\\-prefix)?\\(",{token:"meta",next:"@urldeclaration"}],{include:"@functioninvocation"},{include:"@numbers"},{include:"@strings"},{include:"@variablereference"},["(and\\b|or\\b|not\\b)","operator"],{include:"@name"},["([<>=\\+\\-\\*\\/\\^\\|\\~,])","operator"],[",","delimiter"],["!default","literal"],["\\(",{token:"delimiter.parenthesis",next:"@parenthizedterm"}]],rulevalue:[{include:"@term"},["!important","literal"],[";","delimiter","@pop"],["{",{token:"delimiter.curly",switchTo:"@nestedproperty"}],["(?=})",{token:"",next:"@pop"}]],nestedproperty:[["[*_]?@identifier@ws:","attribute.name","@rulevalue"],{include:"@comments"},["}",{token:"delimiter.curly",next:"@pop"}]],warndebug:[["[@](warn|debug)",{token:"keyword",next:"@declarationbody"}]],import:[["[@](import)",{token:"keyword",next:"@declarationbody"}]],variabledeclaration:[["\\$@identifier@ws:","variable.decl","@declarationbody"]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"meta",next:"@pop"}]],parenthizedterm:[{include:"@term"},["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],declarationbody:[{include:"@term"},[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],extendbody:[{include:"@selectorname"},["!optional","literal"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],variablereference:[["\\$@identifier","variable.ref"],["\\.\\.\\.","operator"],["#{",{token:"meta",next:"@variableinterpolation"}]],variableinterpolation:[{include:"@variablereference"},["}",{token:"meta",next:"@pop"}]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[".","comment"]],name:[["@identifier","attribute.value"]],numbers:[["(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","number.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","number","@pop"]],functiondeclaration:[["@identifier@ws\\(",{token:"meta",next:"@parameterdeclaration"}],["{",{token:"delimiter.curly",switchTo:"@functionbody"}]],mixindeclaration:[["@identifier@ws\\(",{token:"meta",next:"@parameterdeclaration"}],["@identifier","meta"],["{",{token:"delimiter.curly",switchTo:"@selectorbody"}]],parameterdeclaration:[["\\$@identifier@ws:","variable.decl"],["\\.\\.\\.","operator"],[",","delimiter"],{include:"@term"},["\\)",{token:"meta",next:"@pop"}]],includedeclaration:[{include:"@functioninvocation"},["@identifier","meta"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}],["{",{token:"delimiter.curly",switchTo:"@selectorbody"}]],keyframedeclaration:[["@identifier","meta"],["{",{token:"delimiter.curly",switchTo:"@keyframebody"}]],keyframebody:[{include:"@term"},["{",{token:"delimiter.curly",next:"@selectorbody"}],["}",{token:"delimiter.curly",next:"@pop"}]],controlstatement:[["[@](if|else|for|while|each|media)",{token:"keyword.flow",next:"@controlstatementdeclaration"}]],controlstatementdeclaration:[["(in|from|through|if|to)\\b",{token:"keyword.flow"}],{include:"@term"},["{",{token:"delimiter.curly",switchTo:"@selectorbody"}]],functionbody:[["[@](return)",{token:"keyword"}],{include:"@variabledeclaration"},{include:"@term"},{include:"@controlstatement"},[";","delimiter"],["}",{token:"delimiter.curly",next:"@pop"}]],functioninvocation:[["@identifier\\(",{token:"meta",next:"@functionarguments"}]],functionarguments:[["\\$@identifier@ws:","attribute.name"],["[,]","delimiter"],{include:"@term"},["\\)",{token:"meta",next:"@pop"}]],strings:[['~?"',{token:"string.delimiter",next:"@stringenddoublequote"}],["~?'",{token:"string.delimiter",next:"@stringendquote"}]],stringenddoublequote:[["\\\\.","string"],['"',{token:"string.delimiter",next:"@pop"}],[".","string"]],stringendquote:[["\\\\.","string"],["'",{token:"string.delimiter",next:"@pop"}],[".","string"]]}}},function(t,e,i){var n=i(38)
t.exports=n},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(18)
var a=i(2),u=a.ACTION,c=a.CAST,p=a.WIDGET,l=a.SCON,h=a.MSG
var d=i(11).List
var f=i(132),m=f.Branch,y=f.Trunk
var g=i(196).Widget
var v=i(85).Widgets
var _=i(173).SpaceView
var b=i(44),x=b.Action,w=b.ActionManager
var T=i(134).Client
var S=i(29).AudioManager
var k=i(135).Cursor
var A=i(15).Dimensions
var C=i(26).Cast
var E=i(151).PointerTracker
var D=i(182).FileSystemWidget
var P=i(192).SlidesWidget
var $=i(80).EditorWidget
var L=i(188).SidebarWidget
var O=i(183).ExplorerPanel
var M=i(181).DependenciesPanel
var I=i(42).Container
var R=i(10)
i(133)
r.extendTag("element",function(t){t.prototype.sref=function(){return this._sref||(this._sref=this.dataset("sref"))}
t.prototype.setSref=function(t){if(this._sref!=t){this.dataset("sref",this._sref=t)}return this
return this}})
var N=0
function F(t,e){var i=this
if(e===undefined)e={}
if(true){window.SP=i}i._data={}
i._model=t
i._id=i._model.id
i._promises={}
i._options=e
i._playlist=e.playlist||i._model.playlist()
i._namespace="sp"+N++
i._randomIncr=0
i._stats={viewers:0}
i._counters={ticks:0}
i._client=new T(i)
i._toucher=function(){return i.dirty()}
i.setReadyState("init")
if(true){i.container().setController(i)}i}e.Space=F
F.prototype.options=function(t){return this._options}
F.prototype.setOptions=function(t){this._options=t
return this}
F.prototype.playlist=function(t){return this._playlist}
F.prototype.setPlaylist=function(t){this._playlist=t
return this}
F.prototype.stats=function(t){return this._stats}
F.prototype.setStats=function(t){this._stats=t
return this}
F.prototype.offset=function(t){return this._offset}
F.prototype.setOffset=function(t){this._offset=t
return this}
F.prototype.trunk=function(t){return this._trunk}
F.prototype.setTrunk=function(t){this._trunk=t
return this}
F.prototype.branch=function(t){return this._branch}
F.prototype.setBranch=function(t){this._branch=t
return this}
F.prototype.cursor=function(t){return this._cursor}
F.prototype.setCursor=function(t){this._cursor=t
return this}
F.prototype.__agent={watch:"agentDidSet",name:"agent"}
F.prototype.agent=function(t){return this._agent}
F.prototype.setAgent=function(t){var e=this.agent()
if(t!=e){this._agent=t}if(t!=e){this.agentDidSet&&this.agentDidSet(t,e,this.__agent)}return this}
F.prototype.__timeline={watch:"timelineDidSet",name:"timeline"}
F.prototype.timeline=function(t){return this._timeline}
F.prototype.setTimeline=function(t){var e=this.timeline()
if(t!=e){this._timeline=t}if(t!=e){this.timelineDidSet&&this.timelineDidSet(t,e,this.__timeline)}return this}
F.prototype.__annotation={watch:"annotationDidSet",name:"annotation"}
F.prototype.annotation=function(t){return this._annotation}
F.prototype.setAnnotation=function(t){var e=this.annotation()
if(t!=e){this._annotation=t}if(t!=e){this.annotationDidSet&&this.annotationDidSet(t,e,this.__annotation)}return this}
F.prototype.widgets=function(t){return this._widgets}
F.prototype.setWidgets=function(t){this._widgets=t
return this}
F.prototype.files=function(t){return this._files}
F.prototype.setFiles=function(t){this._files=t
return this}
F.prototype.observers=function(t){return this._observers}
F.prototype.setObservers=function(t){this._observers=t
return this}
F.prototype.recording=function(t){return this._recording}
F.prototype.setRecording=function(t){this._recording=t
return this}
F.prototype.fs=function(t){return this._fs}
F.prototype.setFs=function(t){this._fs=t
return this}
F.prototype.layout=function(t){return this._layout}
F.prototype.setLayout=function(t){this._layout=t
return this}
F.prototype.console=function(t){return this._console}
F.prototype.setConsole=function(t){this._console=t
return this}
F.prototype.simulator=function(t){return this._simulator}
F.prototype.setSimulator=function(t){this._simulator=t
return this}
F.prototype.inspector=function(t){return this._inspector}
F.prototype.setInspector=function(t){this._inspector=t
return this}
F.prototype.browser=function(t){return this._browser}
F.prototype.setBrowser=function(t){this._browser=t
return this}
F.prototype.pointerTracker=function(t){return this._pointerTracker}
F.prototype.setPointerTracker=function(t){this._pointerTracker=t
return this}
F.prototype.primaryEditor=function(t){return this._primaryEditor}
F.prototype.setPrimaryEditor=function(t){this._primaryEditor=t
return this}
F.prototype.explorerPanel=function(t){return this._explorerPanel}
F.prototype.setExplorerPanel=function(t){this._explorerPanel=t
return this}
F.prototype.dependenciesPanel=function(t){return this._dependenciesPanel}
F.prototype.setDependenciesPanel=function(t){this._dependenciesPanel=t
return this}
F.prototype.slides=function(t){return this._slides}
F.prototype.setSlides=function(t){this._slides=t
return this}
F.prototype.sidebar=function(t){return this._sidebar}
F.prototype.setSidebar=function(t){this._sidebar=t
return this}
F.prototype.readyState=function(t){return this._readyState}
F.prototype.setReadyState=function(t){this._readyState=t
return this}
F.prototype.client=function(t){return this._client}
F.prototype.setClient=function(t){this._client=t
return this}
F.load=async function(t,e){if((""+t).match(/^\d+$/)){t="cast-"+t}var i=await e.load(t)
await(i.pub||i.draft||i.fetch())
if(!i||i.CODE==404){return null}return new this(i,{api:e})}
F.prototype.id=function(){return this._model.id}
F.prototype.model=function(){return this._model}
F.prototype.data=function(){return this._data}
F.prototype.namespace=function(){return this._namespace}
F.prototype.state=function(){return this.model().state}
F.prototype.type=function(){return this.model().type}
F.prototype.touch=function(t){var e=this._counters[t]||(this._counters[t]=0)
this._counters[t]+=1
this._dirty=true
return this}
F.prototype.counter=function(t){return this._counters[t]||0}
F.prototype.isEditing=function(){return this.branch().isEditing()}
F.prototype.actions=function(){return this._actions||(this._actions=new w(this))}
F.prototype.api=function(){return this._options.api}
F.prototype.container=function(){return I.instance()}
F.prototype.socket=function(){return this.api().socket()}
F.prototype.audio=function(){return S.instance()}
F.prototype.space=function(){return this}
F.prototype.branch=function(){return this.cursor().branch()}
F.prototype.emit=function(t){var e=arguments,i=e.length
var n=new Array(i>1?i-1:0)
while(i>1)n[--i-1]=e[i]
return r.emit(this,t,n)}
F.prototype.on=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.listen.apply(r,[].concat([this,t],Array.from(o)))}
F.prototype.once=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.once.apply(r,[].concat([this,t],Array.from(o)))}
F.prototype.un=function(t){var e
var i=arguments,n=i.length
var o=new Array(n>1?n-1:0)
while(n>1)o[--n-1]=i[n]
return r.unlisten.apply(r,[].concat([this,t],Array.from(o)))}
F.prototype.bundleFile=async function(t){if(t===undefined)t="/index.pack.js"
let e=this.toRunStaticSnapshot()
let i=await window.fetch("/rpc/bundle"+t,{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:JSON.stringify(e)})
let n=await i.json()
return n}
F.prototype.oncontainermessage=async function(t,e){if(t.type=="getState"){return e({data:this.toRunStaticSnapshot()})}if(t.type=="request"){this.browser().node().oncontainermessage(t,e)
return e({data:{history:this.browser().node().history().state(),tracker:document.location.origin+this.api().assetsPath("__sw__tracker.js")}})}if(t.type=="resolveFile"){let i=this.browser().rootPath()+t.path.replace(/^\//,"")
let n=this.fs().find(i)
if(i.match(/pack\.js|scss\.css|sass\.css/)){try{let n=await this.bundleFile(i)
if(n){e({type:"file",path:t.path,data:n})}return}catch(t){console.error(t)}}if(!n&&this.browser().catchallPath()){n=this.fs().find(this.browser().rootPath()+this.browser().catchallPath())}if(n){return e({type:"file",path:t.path,data:{path:n.path(),name:n.name(),body:n.currentBody(),blobId:n.blobId()}})}else{return e({data:null})}}}
F.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
if(true){return(t=this.api()).log.apply(t,[].concat(["space"],Array.from(n)))}}
F.prototype.async=function(t){var e=this
e._asyncTriggers||(e._asyncTriggers={})
var i=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()})
r.TICKER.add(i)
return e}
F.prototype.generateRandomId=function(){var t=this._randomIncr++
return t+""+s.uuid().substr(0,8)}
F.prototype.timelineDidSet=function(t,e){var i,n;(i=e)&&i.deactivate&&i.deactivate();(n=t)&&n.activate&&n.activate()
return this.dirty()}
F.prototype.annotationDidSet=async function(t,e){var i=this,n,r
i.log("annotationDidSet",t)
var o=i._preAnnotationAnchor
i._preAnnotationAnchor={branch:i.branch(),offset:i.timeline().currentOffset()}
if(e){(n=i.agent().file())&&n.deltaDecorations&&n.deltaDecorations(e.id,[])}if(!t){return}await i.navigateTo(t.cast())
if(t){var s=t.anchor||{}
let e=l.decodeURI(s.uri)
if(typeof(r=t.offset)=="number"||r instanceof Number){i.timeline().pause()
i.timeline().seek(t.offset)
i.tick()}if(e&&e.path&&e.selection){let n=i.space().fs().find(e.path)
i.agent().setFile(n)
var a={range:e.selection,options:{className:"question",stickiness:1,isWholeLine:!!e.selection[4],hoverMessage:{value:t.body||"Hlelo"},glyphMarginClassName:"question",linesDecorationsClassName:"question",marginClassName:"question"}}
n.deltaDecorations(t.id,[a])}i.cursor().once("sync:start",function(){var e,n;(e=i.agent().file())&&e.deltaDecorations&&e.deltaDecorations(t.id,[])
if(i.annotation()==t){return i.setAnnotation(null),null}})}return i}
F.prototype.clone=function(t){if(t===undefined)t={}
this.log("clone",t)
var e=m.modelDataFromEvent(this.cursor().current())
var i=this.cursor().branch().toSnapshot()
e.title=this.model().title
e.state="draft"
e.privacy="public"
e.type="lab"
e.parent_id=this.branch().model().id
e.snapshot=i
let n=this.branch()
while(!n.model().isPersisted()){n=n.parent()}if(n){e.parent_id=n.model().id}return e}
F.prototype.fork=async function(t){var e=this
if(t===undefined)t={}
var i=await e.api().tryLogin()
if(!i){return window.alert("Not allowed to fork without logging in")}e.navigateTo(e.trunk())
return e.trunk().upsertResponse().then(function(t){return e.navigateTo(t)})
return e}
F.prototype.simulator=function(){return this.__lookup(c.SIMULATOR)}
F.prototype.setup=function(){var t=this
return t._promises.setup||(t._promises.setup=new Promise(function(e,i){t.setReadyState("setup")
t._offset=0
t._widgets=new v(t)
t._files=new d(t)
t._observers=new d(t)
t._trunk=new y(t,null,t.model())
t._cursor=new k(t)
if(true){t._pointerTracker=new E(t)}t.setLayout(t.widgets().add(t.widgets().create("layout",{id:c.WORKSPACE})))
t.setConsole(t.widgets().add(t.widgets().create("console",{id:c.CONSOLE})))
t.setInspector(t.widgets().add(t.widgets().create("inspector",{id:c.INSPECTOR})))
t.setAgent(t.widgets().add(t.widgets().create("agent",{id:c.AGENT})))
t.setFs(t.widgets().add(new D(t,{id:c.FS,expanded:true})))
t.setPrimaryEditor(t.widgets().add(new $(t,{id:c.PRIMARY_EDITOR})))
t.setSidebar(t.widgets().add(new L(t,{id:c.SIDEBAR})))
t.setExplorerPanel(t.widgets().add(new O(t,{id:c.EXPLORER_PANEL})))
t.setDependenciesPanel(t.widgets().add(new M(t,{id:c.DEPENDENCIES_PANEL})))
t.setSlides(t.widgets().add(new P(t,{id:c.SLIDES})))
var n=A.build({left:1024-300-40,top:Math.round((768-300)*.3),width:300,height:300,vw:1024,vh:768,scaleX:100,scaleY:100,targetRef:c.BROWSER}).round()
t.setBrowser(t.widgets().add(t.widgets().create("browser",{id:c.BROWSER,layout:n._data,url:"index.html"})))
t.setTimeline(t.trunk().timeline())
t.view().render()
return e(t)}))}
F.prototype.load=function(){var t=this
return t._promises.load||(t._promises.load=new Promise(async function(e){if(true){var i=t.api().analytics().time("app","loadCast",t.id())}await t.setup()
await t.trunk().load()
if(true){t.api().socket().join(t.id())}t.view().render()
t.setReadyState("complete")
if(true){r.ticker().add(t)}r.listen(r,"commit",t._toucher)
if(true){i.end()
if(t.trunk().canRecord()){t.audio().devices()}}return e(t)}))}
F.prototype.isEditing=function(){return this.branch().isEditing()}
F.prototype.isRecording=function(){return this.branch().isRecording()}
F.prototype.isWatching=function(){return this.branch().isWatching()}
F.prototype.isPlaying=function(){return this.branch().isPlaying()}
F.prototype.isLive=function(){return this.branch().isLive()}
F.prototype.isPaused=function(){return this.branch().isPaused()}
F.prototype.isAnnotating=function(){return this.branch().isAnnotating()}
F.prototype.resolveBranchForModel=function(t){var e=this._trunk.model()
if(t==e){return Promise.resolve(this._trunk)}if(t.parent_id==e.id){return this._trunk.loadChildBranch(t)}}
F.prototype.navigateTo=function(t,e){var i=this
if(t instanceof C){i.log("resolve branch for model",t)
i._isNavigating=true
return i.resolveBranchForModel(t).then(function(t){i._isNavigating=false
return i.navigateTo(t,e)})}i.log("navigate to branch",t)
if(t!=i.branch()){i.api().sendTracking(R.TYPES.BRANCH,[t.id()])
t.enter()
if(e){t.setMode(e)}let n=t.model().url(i.playlist())
if(!t.isLocal()){let t=i.trunk().type()=="lab"
if(i.view().router().path()!=n){i.view().router().go(n,{},t)}}}return i}
F.prototype.sendStats=function(){var t=this.timeline().stats()
if(!l.compare(t,this._sentStats)&&t.played!=0){this._sentStats=t
this._sentStatsAt=Date.now()
this.log("sendStats",t)
this.api().send([h.VIEWSTATE,t])}return this}
F.prototype.apply=function(t){return}
F.prototype.revert=function(t){return}
F.prototype.reset=function(t){this.deserialize(t,{})
return this}
F.prototype.synced_=function(){return this}
F.prototype.createWidget=function(t,e){if(e===undefined)e={}
t.id||(t.id=this.widgets().getNextId())
return this.branch().push_(u.WIDGET_CREATE,[0,t],e)}
F.prototype.__push=function(t,e){var i
if(e===undefined)e={}
if(i=this.cursor().stack()[0]){return i.addSubAction(t,this.cursor())}t.LOCAL=e
let n=this.cursor().branch()
if(!this.cursor().canPush(t)){if(n.isWatching()&&n.canContribute()&&!this.cursor().current()._next){this.log("could be able to contribute??",t)
n.addLocalEvent(t,e)
return t}var r=m.branchFromEvent(this.cursor().current())
this.api().analytics().castBranch(this.id())
if(r.head()){this.cursor().sync(r.head())}this.client().flushLocals()
r.addLocalEvent(t,e)
this.api().sendTracking(R.TYPES.BRANCH,[r.id()])
return t}if(this.cursor().canPush(t)){this.cursor().branch().addLocalEvent(t,e)
this._dirty=true}else{t.discard()
this.log("CANNOT __push",t)}return t}
F.prototype.__lookup=function(t,e){if(e===undefined)e=0
var i
if(t instanceof Array){i=this.widgets().get(t[e++])
return e==t.length?i:i.__lookup(t,e)}return this.widgets().get(t)}
F.prototype.record=function(t){this.log("start recording!",t)
this.cursor().branch().record(t)
return this}
F.prototype.serialize=function(t){if(t===undefined)t={}
var e={id:this.id(),index:this.stream().index()}
var i=this.widgets().map(function(i){if(!(t.exclude&&r.indexOf(i.TYPE,t.exclude)>=0)){return i.serialize(t,e)}})
e.widgets=i.filter(function(t){return t})
return e}
F.prototype.deserialize=function(t,e){this._deserialized=true
t=l.clone(t)
var i={event:e,items:[],stack:[this]}
for(let r=0,o=n(t.widgets),s=o.length,a;r<s;r++){a=o[r]
if(a.type=="audio"){continue}g.load(this,a,e).deserialize(a,i)}for(let t=0,e=n(i.items),r=e.length;t<r;t++){e[t].deserialized(i)}return this}
F.prototype.isDeserialized=function(){return!!this._deserialized}
F.prototype.dirty=function(){return this._dirty=true}
F.prototype.syncWithContainer=function(){var t=this.toRunStaticSnapshot()
return this.container().send({type:"snapshot",data:t})}
F.prototype.toRunStaticSnapshot=function(){var t,e,i
var r=[]
for(let t=0,e=n(this.files()),i=e.length,o;t<i;t++){o=e[t]
r.push({path:o.path(),body:o.body(),blobId:o.blobId(),ref:o.id()})}return{files:r,npmPackages:(t=this.space().browser())&&t.npmPackages&&t.npmPackages(),rootPath:(e=this.space().browser())&&e.rootPath&&e.rootPath(),catchallPath:(i=this.space().browser())&&i.catchallPath&&i.catchallPath()}}
F.prototype.tick=function(){var t,e,i
if(this.readyState()=="disposing"){return}this._counters.ticks++;(t=this.timeline())&&t.tick&&t.tick();(e=this.branch())&&e.tick&&e.tick();(i=this.pointerTracker())&&i.tick&&i.tick()
var o=this._offset=this.timeline().currentOffset()
var s=this._currentEvent
var a=this.cursor().sync(this.cursor()._target,0)
if(s!=this.cursor().current()){this._currentEvent=this.cursor().current()
this._dirty=true}if(o!=this._lastOffset){this._lastOffset=o
this._dirty=true}if(this.api()._touches!=this._lastApiTouches){this._lastApiTouches=this.api()._touches
this._dirty=true}for(let t=0,e=n(this.observers()),i=e.length;t<i;t++){e[t].tick_(o,this)}var u=this.branch().mode()
var c=false
if(u!=this._mode){let t=this._mode
c=true
this._mode=u
this._dirty=true
this.emit("viewmode",u,t)}if(this._dirty||this.timeline().isPlaying()){this._dirty=false
this.view().render()}this.emit("ticked",o)
if(true){r.ticker().add(this)
if(this._counters.ticks%400==0||c)this.sendStats()}return this}
F.prototype.terminate=function(){var t,e
if(this.recording()){this.recording().stop()}if(true){this.api().socket().leave(this.id())}var i=document.body.querySelectorAll(".Dialog."+this.id())
for(let e=0,r=n(i),o=r.length;e<o;e++){(t=r[e]._tag)&&t.terminate&&t.terminate()}(e=this.timeline())&&e.pause&&e.pause()
return this}
F.prototype.dispose=function(){if(this.isDisposing()){return this}this.setReadyState("disposing")
this.emit("dispose")
r.unlisten(r,"commit",this._toucher)
this.tick=function(){return}
for(let t=0,e=n(this.widgets()),i=e.length;t<i;t++){e[t].dispose()}this._trunk&&this._trunk.dispose&&this._trunk.dispose()
this._view&&this._view.dispose&&this._view.dispose()
this._actions&&this._actions.dispose&&this._actions.dispose()
this._widgets=null
this.emit("disposed")
this.__listeners__=null
if(true){if(window.SP==this){window.SP=null}}return this}
F.prototype.isDisposing=function(){return this.readyState()=="disposing"}
F.prototype.isSyncing=function(){return this.cursor().syncing()}
F.prototype.view=function(){let t=this.$$||(this.$$={})
return this._view||(this._view=this._view||o(_,this).flag("view")).setData(this).end()}
F.prototype.pointer=function(){return this._view?this._view._pointer:null}
F.prototype.vw=function(){return this.view().box().width}
F.prototype.vh=function(){return this.view().box().height}},function(t,e){function i(t,e){var i=this
if(e===undefined)e={}
i._dom=t
i._node=t._tag
i._state="init"
i._options=e
i._contentEditableMode="true"
i.supportsPlaintextEditables=function(){var t=document.createElement("div")
t.setAttribute("contenteditable","plaintext-only")
return t.contentEditable==="plaintext-only"}
if(i.supportsPlaintextEditables()){i._contentEditableMode="plaintext-only"}if(t.ContentEditableInstance){return}t.ContentEditableInstance=i
i._handlers={}
i._handlers.keydown=function(t){console.log("keydown",t)
t.stopPropagation()
if(t.keyCode==13){t.preventDefault()
return i.submit()}}
i._handlers.keyup=function(t){t.stopPropagation()
if(t.keyCode==27){t.preventDefault()
return i.cancel()}}
i._handlers.blur=function(t){t.stopPropagation()
if(i._state=="init"){return i.cancel()}}
i.activate()
i}e.ContentEditable=i
i.prototype.node=function(t){return this._node}
i.prototype.setNode=function(t){this._node=t
return this}
i.prototype.dom=function(t){return this._dom}
i.prototype.setDom=function(t){this._dom=t
return this}
i.prototype.value=function(){return this._dom.innerText}
i.prototype.isValid=function(){if(this._options.pattern){return this._options.pattern.test(this.value())}else{return true}}
i.prototype.submit=function(){if(!this.isValid()){return this.cancel()}this._state="submit"
let t=this.value()
this.deactivate()
this._node.trigger("change",t)
return this}
i.prototype.cancel=function(){this._state="cancel"
this._dom.innerText=this._initialValue
this.deactivate()
return this}
i.prototype.activate=function(){var t=this
t._initialValue=t.value()
t.dom().tabindex=0
t.dom().contenteditable=true
t.dom().setAttribute("contenteditable",t._contentEditableMode)
t.dom().focus()
for(let e=t._handlers,i,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
i=e[s]
t.dom().addEventListener(s,i,true)}return setTimeout(function(){t.dom().focus()
return t.selectAll()},5)}
i.prototype.deactivate=function(){this.dom().contenteditable=false
this.dom().removeAttribute("contenteditable")
this.dom().blur()
this.dom().tabindex=null
window.getSelection().removeAllRanges()
this.dom().ContentEditableInstance=null
this._node._text_=this._node._tree_=null
for(let t=this._handlers,e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.dom().removeEventListener(o,e,true)}return this}
i.prototype.selectAll=function(){var t,e
if(window.getSelection&&document.createRange){e=document.createRange()
e.selectNodeContents(this._dom)
t=window.getSelection()
t.removeAllRanges()
t.addRange(e)}else if(document.body.createTextRange){e=document.body.createTextRange()
e.moveToElementText(this._dom)
e.select()}return this}},function(t,e,i){var n=i(0)
function r(t,e){var i=this
i._target=t
i._path=e
i._time=0
i._timeout=null
i._trigger=function(){return i.trigger()}
i}e.Delay=r
r.prototype.data=function(t){return this._data}
r.prototype.setData=function(t){this._data=t
return this}
r.delay=function(t,e,i,n){var o=t.__delays_||(t.__delays_={})
var s=o[e]||(o[e]=new r(t,e))
i==-1?s.cancel():s.delay(i)
return s}
r.prototype.async=function(t){var e=this
e._asyncTriggers||(e._asyncTriggers={})
var i=e._asyncTriggers[t]||(e._asyncTriggers[t]=function(){return e[t]()})
n.TICKER.add(i)
return e}
r.prototype.delay=function(t){let e=Date.now()+t
if(this._timeout&&e>=this._time){this._time=e}else{this._time=e
if(this._timeout){clearTimeout(this._timeout)}this._timeout=setTimeout(this._trigger,t)}return this}
r.prototype.cancel=function(){clearTimeout(this._timeout)
this._timeout=null
this._time=null
return this}
r.prototype.trigger=function(){clearTimeout(this._timeout)
this._timeout=null
if(this._time){let t=this._time-Date.now()
if(t>3){return this.delay(t)}}if(this._target instanceof Function){this._target(this)}else{this._target[this._path](this)}return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(2),o=r.ACTION,s=r.POINTERMASK
var a=i(19).PointerUpdate
function u(t){var e=this
e._space=t
e._handler=function(t){return e.onevent(t)}
e._intercept=["mousemove","mousedown","mouseup"]
e._last=Date.now()
e._captures=false
e._evoptions={passive:true,capture:false}
e._mask=0
e._hover=null
t.on("browserevent",function(t){return e.onbrowserevent(t)})
e}e.PointerTracker=u
u.prototype.space=function(t){return this._space}
u.prototype.setSpace=function(t){this._space=t
return this}
u.prototype.hover=function(t){return this._hover}
u.prototype.setHover=function(t){this._hover=t
return this}
u.prototype.lockedOnTarget=function(t){return this._lockedOnTarget}
u.prototype.setLockedOnTarget=function(t){this._lockedOnTarget=t
return this}
u.prototype.agent=function(){return this.space().agent()}
u.prototype.isActive=function(){return this._active}
u.prototype.start=function(){if(this._active){return}for(let t=0,e=n(this._intercept),i=e.length;t<i;t++){this.space().view().dom().addEventListener(e[t],this._handler,this._evoptions)}this._active=this._ts=Date.now()
return this}
u.prototype.stop=function(){if(!this._active){return}for(let t=0,e=n(this._intercept),i=e.length;t<i;t++){this.space().view().dom().removeEventListener(e[t],this._handler,this._evoptions)}this._active=false
return this}
u.prototype.targetForElement=function(t){var e=null
var i=false
var n=t
while(t){if(t._tag&&t._tag.targetForPointer){if(e=t._tag.targetForPointer(n)){break}}t=t.parentNode}return e}
u.prototype.onbrowserevent=function(t){var e=this.space().browser()._node
var i=this.space().view().layoutForNode(e)
var n={type:t.type,buttons:t.buttons,spaceX:i[1]+t.clientX*(i[2]/t.windowWidth),spaceY:i[0]+t.clientY*(i[3]/t.windowHeight),spaceTarget:e,shiftKey:t.shiftKey}
return this.onevent(n)}
u.prototype.onevent=function(t){var e=this.space().recording()
var i=Date.now()
var n=i-this._last
var r=this.space().view().box()
var o=t.spaceX!=null?t.spaceX:t.clientX-r.left
var s=t.spaceY!=null?t.spaceY:t.clientY-r.top
var a=this.lockedOnTarget()||t.spaceTarget||this.targetForElement(t.target)
o=Math.round(o)
s=Math.round(s)
var u=o!=this._x||s!=this._y
if(!e&&!t.shiftKey){return}if(t.type!="mousemove"){u=true}this._mask=t.buttons
if(a!=this._hover){this.setHover(a)
u=true}if(u){this._x=o
this._y=s
this.stamp()
return this._last=i}}
u.prototype.stamp=function(){var t={x:this._x,y:this._y,flags:this._mask,hover:this._hover?this._hover.sref():null}
this.push(t,this._hover)
return this}
u.prototype.push=function(t,e){if(this.space().isEditing()){if(e){this.space().view().pushNodeLayout(e)}var i=a.build(t)
i._branch=this.space().branch()
this.space().branch().addLocalEvent(i)
this.space().view()._pointer.render()}return this}
u.prototype.tick=function(){return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(63)
function s(t,e,i){var n=this
n._slide=t
n._space=t.space()
n._svg=e
n._steps=i
n._time=0
n._duration=0
n._stops=[]
n._animations=[]
n._updater=function(t){return n.update(t)}
n.build()
n}e.SlideAnimator=s
s.prototype.svg=function(t){return this._svg}
s.prototype.setSvg=function(t){this._svg=t
return this}
s.prototype.space=function(t){return this._space}
s.prototype.setSpace=function(t){this._space=t
return this}
s.prototype.steps=function(t){return this._steps}
s.prototype.setSteps=function(t){this._steps=t
return this}
s.prototype.duration=function(t){return this._duration}
s.prototype.setDuration=function(t){this._duration=t
return this}
s.prototype.animations=function(t){return this._animations}
s.prototype.setAnimations=function(t){this._animations=t
return this}
s.prototype.__animator={watch:"animatorDidSet",name:"animator"}
s.prototype.animator=function(t){return this._animator}
s.prototype.setAnimator=function(t){var e=this.animator()
if(t!=e){this._animator=t}if(t!=e){this.animatorDidSet&&this.animatorDidSet(t,e,this.__animator)}return this}
s.prototype.__currentStep={default:-1,watch:"currentStepDidSet",name:"currentStep"}
s.prototype.currentStep=function(t){return this._currentStep}
s.prototype.setCurrentStep=function(t){var e=this.currentStep()
if(t!=e){this._currentStep=t}if(t!=e){this.currentStepDidSet&&this.currentStepDidSet(t,e,this.__currentStep)}return this}
s.prototype._currentStep=-1
s.prototype.build=function(){var t=this
for(let e=0,i=r(t.steps()),n=i.length,s;e<n;e++){s=i[e]
let n=0
s.T0=t.duration()
s[0].map(function(e){let i=s.T0
if(e[6]==2){return}e.EL=t.svg().querySelector("#"+e[1])
let a=e.DUR=e[2]
let u=e.DELAY=e[3]
n=Math.max(n,e.DELAY+e.DUR)
e.PROGRESS=1
e.UPDATE=function(n){let s=Math.max(Math.min(n-i-u,a),0)
let c=s/a
let p=this.PROGRESS
let l=this.EL||(this.EL=t.svg().querySelector("#"+e[1]))
if(p==c||!this.EL){return}this.PROGRESS=c
let h=this.EL.style
for(let t=0,e=r(this[0]),i=e.length,n;t<i;t++){n=e[t]
let i
if(n[0]==0){i=n[1]+(n[2]-n[1])*c
h.opacity=i}else if(n[0]==3){let t=o.easings.easeInOutCubic(c,0,1,1)
let e=n[1]+(n[3]-n[1])*t
let i=n[2]+(n[4]-n[2])*t
h.transform="translate("+e*100+"%,"+i*100+"%)"}}return}
return t._animations.push(e)})
t.setDuration(t.duration()+n)
s.T1=t.duration()}return t}
s.prototype.reset=function(){this._time=this.duration()
this.update(0)
return this}
s.prototype.update=function(t){let e=this._time
let i=this.animations()
if(t>e){for(let n=0,o=r(i),s=o.length;n<s;n++){o[n].UPDATE(t,e)}}else if(t<e){let r=n(i)
while(r>0){i[--r].UPDATE(t,e)}}this._time=t
return this}
s.prototype.animate=function(t,e,i){if(i==undefined){i=Math.abs(e-t)}this.setAnimator(o.animate(t,e,i,this._updater,"linear"))
return this}
s.prototype.animatorDidSet=function(t,e){if(e){return e.cancel()}}
s.prototype.currentStepDidSet=function(t,e){let i=0
let n=this._steps[t]
if(n){i=n.T1}this.setAnimator(null)
if(t-e==1){let t=(n.T1-n.T0)/(this.space().timeline().playbackRate()||1)
this.animate(n.T0,i,t)}else{this.update(i)}return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(2).LCRange
var o=function(t,e){var i=t[0]-1
var n=t[1]-1
var r=t[0]+(t[3]||0)-1
var o=t[1]+(t[2]||0)-1
var s=e[0]-1
var a=e[1]-1
var u=e[0]+(e[3]||0)-1
var c=e[1]+(e[2]||0)-1
if(r==u){if(o==c){if(i==a){return n-a}return i-s}return o-c}return r-u}
var s=function(t,e){let i=o(t[0],e[0])
if(i==0){return t.I-e.I}return i}
var a=function(t,e){let i=o(t[0],e[0])
if(i==0){return e.I-t.I}return-i}
var u=e.diffString=function(t,e){var i=0
var n=t.length
var r=e.length
var o=Math.min(n,r)
var s=Math.max(n,r)
var a=s
var u=0
while(i<o){var c=t[i]
var p=e[i]
i++
if(c==p){u++}else{break}}if(u==i){if(n>r){return[u,n,""]}else if(r>n){return[u,u,e.slice(u)]}return[]}while(n>=u&&r>=u){c=t[--n]
p=e[--r]
if(c!=p){break}}var l=e.slice(u,r+1)
return[u,n+1,l]}
var c=e.patchString=function(t,e){if(e instanceof Array){return t.substr(0,e[0])+e[2]+t.slice(e[1])}else{return e}}
var p=e.getLineMaxColumn=function(t){return t.length}
var l=/\r\n|\r|\n/
function h(t){if(t===undefined)t=""
this._raw=t
this._lines=t.split(l)
this.reset()}e.TextModel=h
h.prototype.lines=function(t){return this._lines}
h.prototype.setLines=function(t){this._lines=t
return this}
h.prototype.reset=function(){this._edited=[]
this._body=null
return this}
h.prototype.reversedOperation=function(t){var e=this.textInRange(t[0])
var i=this.expandedRange(t[0],t[1])
return[i,e]}
h.prototype.expandedRange=function(t,e){var i
var n=(e||"").split(l)
var r=t[0]+(n.length-1)
var o=n[n.length-1].length
if(t[0]==r){o+=t[1]}else{o+=1}return i=[t[0],t[1],o-t[1],r-t[0]]}
h.prototype.textInRange=function(t,e){if(e===undefined)e=this._lines
var i=t[0]-1
var n=t[1]-1
var r=t[0]+(t[3]||0)-1
var o=t[1]+(t[2]||0)-1
if(i==r){return e[i].slice(n,o)}var s=e[i++].slice(n)
while(i<r){s+="\n"+e[i++]}s+="\n"+e[r].slice(0,o)
return s}
h.prototype.apply=function(t){var e=this._lines
var i=null
this._body=null
if(!t.UNDO){t.FWD=1
i=t.UNDO=[]
i.UNDO=t
i.REV=1}let n=t.length
let r=0
if(n>1&&t.FWD){t=t.map(function(t,e){t.I=e
return t}).sort(a)}while(r<n){let n=t[r++]
var o=n[0]
var s=n[1]||""
var u=o[0]-1
var c=o[1]-1
var p=o[0]+(o[3]||0)-1
var h=o[1]+(o[2]||0)-1
if(i){i.unshift(this.reversedOperation(n))}if(u!=p){let t=e[u].slice(0,c)
let i=e[p].slice(h)
e[u]=t+i
e.splice(u+1,p-u)
h=c}let a=e[u]
a=a.slice(0,c)+s+a.slice(h)
if(s.indexOf("\n")>=0){e.splice.apply(e,[].concat([u,1],Array.from(a.split(l))))}else{e[u]=a}}return t}
h.prototype.getValue=function(){return this.body()}
h.prototype.body=function(){return this._body||(this._body=this._lines.join("\n"))}
h.prototype.getDiff=function(t){var e=this._lines
if(typeof t=="string"||t instanceof String){t=t.split(l).map(function(t,e){return{_text:t}})}var i=t
var r=n(i)
var o=n(e)
var s=0
var a=0
var c=r-1
var h=0
var d
var f=o-1
var m=Math.min(r,o)
while(s<m){if(e[s]!=i[s]._text){break}s+=1}if(s==m){if(o==r){return null}else if(o>r){s=c
a=h=p(i[c]._text)
d="\n"+e.slice(r).join("\n")}else if(r>o){s=o-1
a=p(e[s])
c=r-1
h=p(i[c]._text)
d=""}}else{while(f>s&&c>s){if(e[f]!=i[c]._text){break}f-=1
c-=1}if(r>o&&false){c=c+1
h=0
d=""}else{h=p(i[c]._text)}if(s==c&&f>=c){var y=i[s]._text
var g=e.slice(s,f+1).join("\n")
var v=u(y,g)
a=v[0]
h=v[1]
d=v[2]}}var _=[s+1,a+1,h-a,c-s]
if(d==undefined){d=this.textInRange([s+1,a+1,1e3,f-s])}return[_,d]}},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField,u=o.TextArea
var c=n.defineTag("AskDialog",s,function(t){t.prototype.offset=function(t){return this._offset}
t.prototype.setOffset=function(t){this._offset=t
return this}
t.prototype.anchor=function(t){return this._anchor}
t.prototype.setAnchor=function(t){this._anchor=t
return this}
t.prototype.space=function(){return this.data()}
t.prototype.onuxasubmit=function(t){var e=this
return e.uxa().queue().add(200,async function(){var t
await e.api().tryLogin()
var i=e.formData()
if(typeof(t=e.offset())=="number"||t instanceof Number){i.offset=e.offset()}if(e.anchor()){i.anchor=e.anchor()}i.uid=e.api().uid()
console.log("commenting",i)
return await e.api().rpc("castComment",[e.space().id(),i])})}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent([e.$.A||r("h1",e.$,"A",e).setText("Ask question"),(e.$.B||r(u,e.$,"B",e).flag("autofocus").setName("body").setLabel("Your question")).end(),this.offset()?(e.$.C||r("h3",e.$,"C",e)).setText("Question is linked to offset "+this.offset()):void 0,this.anchor()?(e.$.D||r("h3",e.$,"D",e)).setText("Question is linked to anchor "+JSON.stringify(this.anchor())):void 0],1)}})
e.AskDialog=c},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(5).UserAvatar
var p=o.defineTag("Item",function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.isSelected=function(){return this.space().branch().model()==this.data()}
t.prototype.user=function(){return this.data()&&this.data().owner()}
t.prototype.render=function(){var t=this.$
var e=this.user()
return this.$open(0).flag("branch").flagIf("selected",this.isSelected()).setChildren(e?o.static([(t[0]||u(c,t,0,this).flag("bullet")).setData(e).end(),(t[1]||u("div",t,1,this).flag("body")).setContent([e.name?(t[2]||u("span",t,2,1).flag("name")).setContent(e.name,3):void 0,(t[3]||u("span",t,3,1).flag("username")).setContent(e.username,3)],1)],2,1):void 0,3).synced()}
t.prototype.ontap=function(){return this.trigger("select",this.data())}})
var l=o.defineTag("Mine",p,function(t){t.prototype.user=function(){return this.api().user()}
t.prototype.ontap=function(){if(this.data()){return this.trigger("select",this.data())}else{return this.space().fork()}}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("tool").flagIf("branch",this.data()).flagIf("selected",this.isSelected()).setChildren(t.$=t.$||[u("span",t,0,this).flag("label").setText("FORK"),u(c,t,1,this).flag("bullet")],2).synced((t[1].bindData(this,"user",[]).end(),true))}})
var h=o.defineTag("FullList",function(t){t.prototype.onwheel=function(t){return t.halt()}})
var d=o.defineTag("BranchesListView",function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.__list={watch:"listDidSet",name:"list"}
t.prototype.list=function(t){return this._list}
t.prototype.setList=function(t){var e=this.list()
if(t!=e){this._list=t}if(t!=e){this.listDidSet&&this.listDidSet(t,e,this.__list)}return this}
t.prototype.__filtered={watch:"filteredDidSet",name:"filtered"}
t.prototype.filtered=function(t){return this._filtered}
t.prototype.setFiltered=function(t){var e=this.filtered()
if(t!=e){this._filtered=t}if(t!=e){this.filteredDidSet&&this.filteredDidSet(t,e,this.__filtered)}return this}
t.prototype.__branch={watch:"branchDidSet",name:"branch"}
t.prototype.branch=function(t){return this._branch}
t.prototype.setBranch=function(t){var e=this.branch()
if(t!=e){this._branch=t}if(t!=e){this.branchDidSet&&this.branchDidSet(t,e,this.__branch)}return this}
t.prototype.expanded=function(t){return this._expanded}
t.prototype.setExpanded=function(t){this._expanded=t
return this}
t.prototype.myFork=function(t){return this._myFork}
t.prototype.setMyFork=function(t){this._myFork=t
return this}
t.prototype.build=function(){this._history=[]
return this}
t.prototype.commit=function(){this.setBranch(this.space().branch().model())
return t.prototype.__super__.commit.apply(this,arguments)}
t.prototype.owner=function(){return this.data().owner()}
t.prototype.dataDidSet=function(t,e){var i
if(!t){this.setList(null)
this.setFiltered(null)}this.setList((this.setFiltered(i=t.branches().sel(function(t){return t.type=="fork"})),i))
return this}
t.prototype.branchDidSet=function(t){this.resync()
if(this._history.indexOf(t)>=0){return this}else if(!t.isLocal()&&t!=this.data()&&t!=this.myFork()){this._history.unshift(t)
if(this._history.length>5){this._history.length=8}}return this}
t.prototype.onselect=function(t,e){this.space().navigateTo(e,"watching")
this.collapse()
return this}
t.prototype.resync=function(){var t=this
if(!t.list().synced(t)){t._myFork=t.list().filter(function(e){return e.uid==t.api().uid()})[0]
t._history=t._history.filter(function(e){return e!=t._myFork})}return t}
t.prototype.join=function(){return this}
t.prototype.ribbons=function(){var t=this.$$||(this.$$={}),e,i=this
var o=r(i.list())
var s=i._history
var c=i._myFork
if(o<10){s=i.list()}var h=o-r(s)
return(e=i._ribbons=i._ribbons||(e=u("div",i)).flag("ribbons")).setContent([(e.$.A||u(p,e.$,"A",e).flag("main")).bindData(i,"data",[]).setSpace(i.space()).end(),i.data().uid!=i.api().uid()?(e.$.B||u(l,e.$,"B",e)).setData(c).setSpace(i.space()).end():void 0,function t(e){var r=e.$iter()
for(let t=0,o=n(s),a=o.length,l;t<a;t++){l=o[t]
if(l==c){continue}r.push((e[t]||u(p,e,t).flag("history")).setData(l).setSpace(i.space()).end())}return r}(e.$["C"]||a(e.$,"C",i._ribbons)),h>0?(e.$.D||u("div",e.$,"D",e).flag("Item").flag("more").on$(0,["tap","toggle"],i).setContent(e.$.E||u("span",e.$,"E","D").flag("bullet").setContent(e.$.F||u("span",e.$,"F","E").flag("count"),2),2)).end((e.$.F.setText("+"+h),true)):void 0],1)}
t.prototype.expand=function(){this.flag("expanded")
this.setExpanded(true)
return this.render()}
t.prototype.collapse=function(){this.unflag("expanded")
this.setExpanded(false)
return this.render()}
t.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand()}
t.prototype.onfocusout=function(t){this.log("focusout",t)
var e=t.event().relatedTarget
if(!e||!this.dom().contains(e)){if(this.expanded()){return this.collapse()}}}
t.prototype.find=function(t){this.setFiltered(this.list().sel(function(e){var i=(e.owner().name+" "+e.owner().username).toLowerCase()
return i.indexOf(t.toLowerCase())>=0}))
return this}
t.prototype.oninput=function(t){this.find(this._quickfind.value())
this.render()
return this}
t.prototype.render=function(){var t=this.$,e=this,i
e.resync()
if(e.space().type()!="lab"){return}return e.$open(0).setTabindex(-1).setChildren([e.ribbons(),e.expanded()?(i=t[0]||(i=u(h,t,0,e)).flag("drawer").setContent([e._quickfind=e._quickfind||u("input",i).flag("quickfind").setType("text"),u("div",t,1,i).flag("list").flag("scroll")],2)).end((e._quickfind.end(),t[1].setContent(function t(i){for(let t=0,r=n(e.filtered()),o=i.taglen=r.length;t<o;t++){(i[t]||u(p,i,t)).setData(r[t]).setSpace(e.space()).end()}return i}(t[2]||s(t,2,t[1])),4),true)):void 0],1).synced()}})
e.BranchesListView=d},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(1).IconButton
var u=i(22),c=u.SidebarPanel,p=u.SidebarEntry
var l=r.defineTag("BranchEntry",p,function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.ondel=async function(t){t.halt()
var e=await t.uxa().confirm("Are you sure you want to remove "+this.data()+"?")
return this}
t.prototype.name=function(){if(this.data()==this.space().trunk()){return"screencast"}else if(this.data().isLocal()){return this.data().model().title}else{return this.data().model().title}}
t.prototype.ontap=function(t){t.halt()
return this.trigger("branchenter",this.data())}
t.prototype.render=function(){var t=this.$,e
return this.$open(0).flag("Entry").setFlag(-1,this.data().model().type).flagIf("active",this.space().branch()==this.data()).setChildren(e=this._head=this._head||(e=s("div",this)).flag("head").setContent([this._icon=this._icon||s("i",e).flag("icon"),s("div",t,0,e).flag("name"),s(a,t,1,e).setIcon("x").setAction("del")],2),2).synced((this._icon.flagIf("local",this.data().isLocal()).setFlag(0,this.data().model().type),t[0].setContent(this.name(),3),t[1].end(),true))}})
e.BranchEntry=l
var h=r.defineTag("BranchesPanel",c,function(t){t.prototype.branches=function(){return[]}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setChildren(t.$=t.$||[s("header",t,0,e).setContent([s("div",t,1,0).flag("title"),s("div",t,2,0).flag("tools").setContent(t[3]||s(a,t,3,2).flag("toggle").setIcon(">").setAction("toggle"),2)],2),e._main=e._main||s("div",e).flag("main")],2).synced((t[1].setContent(e.name()||"Branches",3),t[3].end(),e._main.setContent([t[4]||s(l,t,4,e._main).flag("trunk"),function t(i){for(let t=0,r=n(e.space().trunk().branches()),o=i.taglen=r.length;t<o;t++){(i[t]||s(l,i,t)).setData(r[t]).setSpace(e.space()).end()}return i}(t[5]||o(t,5,e._main))],1).end((t[4].bindData(e.space(),"trunk",[]).setSpace(e.space()).end(),true)),true))}})
e.BranchesPanel=h},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField
var u=n.defineTag("BrowserConfigurationDialog",s,function(t){t.prototype.browser=function(){return this.data()}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r(a,e.$,"A",e).setType("text").setName("rootPath").setLabel("Root directory").setRequired(false).setPlaceholder("/").setDesc("The browser will serve files from this directory"),r(a,e.$,"B",e).setType("text").setName("catchallPath").setLabel("Catch-all filename").setDesc("This file will be served if the URL doesn't match a static file. Relative to root path.")],2)).end((e.$.A.end(),e.$.B.end(),true))}
t.prototype.onuxasubmit=function(t){var e=this
return e.uxa().queue().add(200,function(){var t
var i=e.formData()
e.browser().setRootPath((i.rootPath+"/").replace(/\/+/g,"/"))
return e.browser().setCatchallPath(t=i.catchallPath||null),t})}})
e.BrowserConfigurationDialog=u},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0),s=o.createTagList,a=o.createElement
var u=i(1),c=u.IconButton,p=u.Menu,l=u.MenuItem
var h=i(22),d=h.SidebarPanel,f=h.SidebarEntry
var m=i(53).readTextFile
var y=o.defineTag("PackageEntry",f,function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.prefix=function(t){return this._prefix}
t.prototype.setPrefix=function(t){this._prefix=t
return this}
t.prototype.name=function(){return this.data().match(/.[^@]*/)[0]}
t.prototype.version=function(){return this.data().substr(r(this.name()))}
t.prototype.ondel=async function(t){t.halt()
var e=await t.uxa().confirm("Are you sure you want to remove "+this.name()+"?")
if(e){return this.space().browser().removePackage(this.name())}}
t.prototype.onupgrade=async function(t){t.halt()
var e=await t.uxa().confirm("Are you sure you want to upgrade "+this.name()+"?")
if(e){return this.space().browser().upgradePackage(this.name())}}
t.prototype.oncontextmenu=function(t){var e
t.prevent().halt()
return this._head.uxa().open((e=(e=a(p)).flag("dark").flag("narrow").setContent([a(l,e.$,"A",e).setIcon(">").setAction("upgrade").setLabel("Upgrade..."),a(l,e.$,"B",e).flag("neg").setIcon("x").setAction("del").setLabel("Remove module")],2)).end((e.$.A.end(),e.$.B.end(),true)))}
t.prototype.render=function(){var t=this.$,e
return this.$open(0).flag("Entry").setChildren(e=this._head=this._head||(e=a("div",this)).flag("head").setContent([this._icon=this._icon||a("i",e).flag("icon").flag("module"),a("div",t,0,e).flag("name").setContent([a("span",t,1,0).flag("name"),a("span",t,2,0).flag("semver").flag("muted")],2)],2),2).synced((t[1].setContent(this.name(),3),t[2].setContent(this.version(),3),true))}})
var g=o.defineTag("PackageEntries",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.path=function(t){return this._path}
t.prototype.setPath=function(t){this._path=t
return this}
t.prototype.dataDidSet=function(){return this.render()}
t.prototype.sortedQueries=function(){var t=this.data().resolved.slice()
return t.sort(function(t,e){return t.localeCompare(e)})}
t.prototype.render=function(){var t=this,e=this.$
return t.$open(0).setChildren(function e(i){for(let e=0,r=n(t.sortedQueries()),o=i.taglen=r.length;e<o;e++){(i[e]||a(y,i,e)).setData(r[e]).setSpace(t.space()).setSref(t.path()+e).end()}return i}(e[0]||s(e,0)),4).synced()}})
var v=o.defineTag("DependenciesPanel",d,function(t){t.prototype.bundle=function(){return this.space().browser().npmPackages()||{resolved:[]}}
t.prototype.oncontextmenu=function(t){t.prevent().stop()
return this.showMenu()}
t.prototype.onimportpackagejson=function(t){var e=this
t.stop()
var i=a("input").setType("file").end()
i.dom().onchange=async function(){for(let o=0,s=n(i.dom().files),a=s.length,u;o<a;o++){u=s[o]
if(u.name=="package.json"){var t=await m(u)
var r=JSON.parse(t)
e.space().browser().overwritePackages(r.dependencies)}else{}}return o.commit()}
return i.dom().click()}
t.prototype.showMenu=function(){var t
return this._header.uxa().open((t=(t=a(p)).flag("dark").flag("narrow").setContent([a(l,t.$,"A",t).setIcon("+").setAction("dependencyadd").setLabel("Add module"),a(l,t.$,"B",t).setIcon("+").setAction("importpackagejson").setLabel("Import package.json")],2)).end((t.$.A.end(),t.$.B.end(),true)))}
t.prototype.render=function(){var t=this.$
let e=""+this.data().id()+"$"
return this.$open(0).setSref(this.data().id()).setChildren(t.$=t.$||[this._header=this._header||a("header",this).flag("header").setContent([a("div",t,0,this._header).flag("title").setText("Dependencies"),a("div",t,1,this._header).flag("tools").setContent(t[2]||a("div",t,2,1).flag("tool").dataset("icon","mcog").on$(0,["tap","showMenu"],this),2)],2),this._main=this._main||a(g,this).flag("main")],2).synced((t[2].end(),this._main.setSpace(this.space()).setPath(e).setData(this.bundle()).end(),true))}})
e.DependenciesPanel=v},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1).Menu
var s=n.defineTag("EditorMenu",o,function(t){t.prototype.mount=function(){this.dom().focus()
return this.schedule({events:true})}
t.prototype.space=function(){return this.data().space()}
t.prototype.onfocusout=function(t){if(!this.dom().contains(t.native().relatedTarget)){return this.trigger("uxa:hide")}}
t.prototype.render=function(){var t=this.$
let e=this.api().ua().isMac()
return this.$open(0).flag("space-menu").setTabindex(-1).setChildren(t.$=t.$||[r("div",t,0,this).flag("item").setContent([r("label",t,1,0).setContent([r("span",t,2,1).setText("Font Size"),r("span",t,3,1).flag("value")],2),r("input",t,4,0).setType("range").setMin(8).setStep(1).setMax(24).setNumber(true)],2),r("div",t,5,this).flag("item").setContent([r("label",t,6,5).setText("Shortcuts"),r("div",t,7,5).flag("shortcut").setText("run code / reload"),r("div",t,8,5).flag("shortcut").setText("show/hide mini browser")],2)],2).synced((t[3].setContent(this.space().view().fontSize()+"px",3),t[4].bindData(this.space().view(),"userFontSize",[]).end(),t[7].dataset("shortcut",e?"cmd+s":"ctrl+s").end(),t[8].dataset("shortcut",e?"cmd+b":"ctrl+b").end(),true))}})
e.EditorMenu=s},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1).Dialog
var s=n.defineTag("LocalBranchDialog",o,function(t){t.prototype.branch=function(){return this.data()}
t.prototype.space=function(){return this.branch().space()}
t.prototype.trunk=function(){return this.space().trunk()}
t.prototype.cancelLabel=function(){return"play around"}
t.prototype.submitLabel=function(){return this.trunk().myFork()?"goto your fork":"create fork"}
t.prototype.onuxasubmit=function(){var t=this
return t.uxa().queue().add(100,async function(){var e=await t.api().tryLogin()
if(!e){throw new Error("You must be logged in to create a fork")}await t.space().navigateTo(t.trunk())
var i=await t.trunk().upsertResponse()
return t.space().navigateTo(i,"watching")})}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent(this.trunk().isLab()&&this.trunk().myFork()?n.static([e.$.A||r("p",e.$,"A",e).setText("You already have a fork of this playground.\nYou will not be able to save these changes."),e.$.B||r("p",e.$,"B",e).setText("Do you want to open your fork?")],2,1):this.trunk().isLab()?e.$.C||r("p",e.$,"C",e).setText("You have started editing a playground created by someone else.\nWould you like to create your own fork? (Recommended)"):void 0,3)}})
e.LocalBranchDialog=s},function(t,e,i){var n=i(0),r=n.createElement
var o=i(12)
var s=n.defineTag("MediaRecordingStats",function(t){t.prototype.s=function(t){return o.msToStr(t,3)+"s"}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([(t[0]||r("span",t,0,this).flag("state")).setContent(this.data().state(),3),(t[1]||r("span",t,1,this).flag("mime")).setContent(this.data().mimeType(),3),(t[2]||r("span",t,2,this).flag("size")).setContent(Math.round(this.data().size()/1e3)+"kb",3),this.data()._bufferDuration?(t[3]||r("span",t,3,this).flag("dur").flag("timecode")).setContent([this.s(this.data()._duration),t[4]||r("b",t,4,3).flag("diff")],1).end((t[4].setContent(Math.round(this.data()._duration-this.data()._calcDuration)+"ms",3),true)):(t[5]||r("span",t,5,this).flag("dur")).setContent(this.s(this.data().duration()),3)],1).synced()}})
e.MediaRecordingStats=s},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField
var u={}
u.html="<html>\n    <head></head>\n    <body>\n        \n    </body>\n</html>"
u.css="body { }"
u.imba="# FILENAME"
var c=n.defineTag("NewFileDialog",s,function(t){t.prototype.space=function(){return this.data()}
t.prototype.onuxasubmit=function(t){var e=this
return e.uxa().queue().add(200,function(){return new Promise(function(t,i){var n=e.formData()
var r=n.name
if(!r||e.space().files().any(function(t){return t.name()==r})){return i("File already exists")}var o=r.split(".").pop()
var s=(u[o]||"").replace("FILENAME",r)
var a={type:"file",name:r,body:s}
var c=e.space().createWidget(a).widget()
console.log("returned file",c)
e.space().agent().setFile(c)
e.space().agent().setFocus(c)
return t(c)})})}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h1",e.$,"A",e).setText("New file"),r(a,e.$,"B",e).flag("autofocus").setName("name").setLabel("Name your new file").setType("text").setPlaceholder("index.js")],2)).end((e.$.B.end(),true))}})
e.NewFileDialog=c},function(t,e,i){var n=i(0),r=n.createTagList,o=n.createElement
var s=i(1),a=s.Button,u=s.Menu
var c=i(21).InterfaceView
var p=i(176).TimelineView
var l=i(212).Slider
var h=i(5).UserAvatar
var d=i(46).Notification
var f=i(12)
var m=n.defineTag("PlaybackSettings",u,function(t){t.prototype.space=function(){return this.data().space()}
t.prototype.mount=function(){this.dom().focus()
return this.schedule({events:true})}
t.prototype.onfocusout=function(t){if(!this.dom().contains(t.native().relatedTarget)){return this.trigger("uxa:hide")}}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setTabindex(-1).setChildren([(t[0]||o("div",t,0,e).flag("item").setContent([o("label",t,1,0).setContent([o("span",t,2,1).setText("Speed"),o("span",t,3,1).flag("value")],2),o("input",t,4,0).setType("range").setMin(.4).setStep(.1).setMax(4).setNumber(true)],2)).end((t[3].setContent(e.data().playbackRate().toFixed(1)+"x",3),t[4].bindData(e.data(),"playbackRate",[]).end(),true)),e.space().trunk().canRecord()||e.space().trunk().canAnnotate()?(t[5]||o("div",t,5,e).flag("item").setContent([o("label",t,6,5).setText("Viewport"),o("div",t,7,5).flag("optgroup")],2)).end((t[7].setContent(function t(i){var n
for(let t=0,r=["auto","desktop","tablet","mobile"],s=i.taglen=r.length,a;t<s;t++){a=r[t];(n=i[t]||(n=o("label",i,t)).flag("action").flag("radio").setContent([o("input",n.$,"A",n).setType("radio"),o("span",n.$,"B",n)],2)).end((n.$.A.bindData(e.space().view(),"size",[]).setValue(a,1).end(),n.$.B.setContent(a,3),true))}return i}(t[8]||r(t,8,t[7])),4),true)):void 0,(t[9]||o("div",t,9,e).flag("item").setContent([o("label",t,10,9).setText("Shortcuts"),o("div",t,11,9).flag("shortcut").dataset("shortcut","space").setText("pause / resume"),o("div",t,12,9).flag("shortcut").dataset("shortcut","ctrl shift â").setText("slower playback"),o("div",t,13,9).flag("shortcut").dataset("shortcut","ctrl shift â").setText("faster playback"),o("div",t,14,9).flag("shortcut").dataset("shortcut","â").setText("go forward 10s"),o("div",t,15,9).flag("shortcut").dataset("shortcut","â").setText("go back 10s")],2)).end((t[11].end(),t[12].end(),t[13].end(),t[14].end(),t[15].end(),true))],1).synced()}})
var y=n.defineTag("SliderButton")
var g=n.defineTag("VolumeButton",y,function(t){t.prototype.toggle=function(t){t.halt()
return this.data().getMuted()?this.data().unmute():this.data().mute()}
t.prototype.value=function(){return this.data().getRealVolume()}
t.prototype.updateValue=function(t){this.data().setVolume(t)
if(this.data().getMuted()&&t>0){this.data().unmute()}return this}
t.prototype.onchange=function(t){return this.updateValue(t.target().value())}
t.prototype.icon=function(){if(this.value()==0){return"vol0"}else if(this.value()<.2){return"vol1"}else if(this.value()<.4){return"vol2"}else if(this.value()<.75){return"vol3"}else{return"vol3"}}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[o("a",t,0,this).flag("tool").on$(0,["tap","toggle"],this),o("div",t,1,this).flag("hitbox"),o(l,t,2,this).flag("vertical").flag("abs").setName("volume").setMin(0).setMax(1).setStep(.1)],2).synced((t[0].dataset("icon",this.icon()).end(),t[2].setValue(this.data().getRealVolume(),1).end(),true))}})
var v=n.defineTag("RecDuration",function(t){t.prototype.mount=function(){return this.schedule({raf:true})}
t.prototype.unmount=function(){return this.unschedule()}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("time").flag("rec").flag("label").setChildren(t[0]||o("span",t,0,this),2).synced((t[0].setContent(f.msToStr(this.data().duration(),3),3),true))}})
var _=n.defineTag("PlaybackOverlay",c,function(t){t.prototype.__visibility={default:true,name:"visibility"}
t.prototype.visibility=function(t){return this._visibility}
t.prototype.setVisibility=function(t){this._visibility=t
return this}
t.prototype._visibility=true
t.prototype.__mode={default:1,name:"mode"}
t.prototype.mode=function(t){return this._mode}
t.prototype.setMode=function(t){this._mode=t
return this}
t.prototype._mode=1
var e=["default","side"]
t.prototype.build=function(){this.setTabindex(-1)
this.setMode(this.api().isMobile()?0:1)
return this}
t.prototype.space=function(){return this.data()}
t.prototype.timeline=function(){return this.space().timeline()}
t.prototype.onmouseover=function(t){t.silence()
this.setHovered(true)
return}
t.prototype.onmouseout=function(t){t.silence()
if(!this.dom().contains(t.event().relatedTarget)){return this.setHovered(false),false}}
t.prototype.mount=function(){return this}
t.prototype.commit=function(){this.setEnabled(this.space().trunk().isTutorial())
return t.prototype.__super__.commit.apply(this,arguments)}
t.prototype.skip=function(t,e){if(e){e.halt().prevent()}let i=Math.max(this.space().timeline().currentTime()+t,0)
return this.space().timeline().seek(this.space().timeline().timeToOffset(i))}
t.prototype.navigateTo=function(t,e){e.halt().prevent()
this.log("navigateTo")
return this.trigger("spaceend")}
t.prototype.showSettings=function(t){t.uxa().open(o(m).flag("clickthrough").bindData(this,"timeline",[]).end())
return this}
t.prototype.togglePlayback=function(t){if(t.isPlaying()){t.pause()
this.trigger("spacepaused")}else if(t.isPaused()){t.play()
this.trigger("spaceplay")}return this}
t.prototype.toggleRecording=function(){if(this.space().isRecording()){this.trigger("recstop",this.space().branch())}else{this.trigger("recstart",this.space().branch())}return this}
t.prototype.toggleFullscreen=function(){d.show("You have entered playground mode â click the play button to resume watching",{info:true})
return this}
t.prototype.toggleBrushup=function(){if(this.space().branch().isAnnotating()){this.trigger("brushupstop")}else{this.trigger("annotate",this.space().branch())}return this}
t.prototype.publish=function(){return this.trigger("branchpublish",this.space().branch())}
t.prototype.unpublish=function(){return this.trigger("branchunpublish",this.space().branch())}
t.prototype.ontogglequeue=function(t){return t.halt()}
t.prototype.render=function(){var t=this.$,e
var i=this.data().model()
var r=i.owner()
var s=this.branch().isLocal()||this.branch().parent()&&this.branch().type()=="note"?this.branch().parent()||this.branch():this.branch()
var a=s.timeline()
var u=s.hasDuration()
return this.$open(0).setFlag(-1,this.space().trunk().type()).setFlag(-2,this.space().branch().type()).flagIf("in-note",this.branch().type()=="note").setFlag(-3,a.playState()).setChildren(e=t[0]||(e=o("div",t,0,this)).flag("body"),2).synced((t[0].setContent([(t[1]||o("div",t,1,0).flag("buttons").flag("play")).setContent([(t[2]||o("a",t,2,1).flag("tool").flag("pb").setContent([o("i",t,3,2).flag("sicon").flag("busy").dataset("name","spinner"),o("i",t,4,2).flag("sicon").flag("icn")],2)).setData(a).setFlag(0,a.playState()).flagIf("busy",a.isStalled()).on$(0,["tap","stop",["togglePlayback",a]],this).end((t[3].end(),true)),s.canRecord()?t[5]||o("a",t,5,1).flag("tool").flag("rec").on$(0,["tap","stop","toggleRecording"],this).setContent(t[6]||o("i",t,6,5).flag("rec"),2):void 0],1),s.isRecording()?n.static([(t[7]||o(v,t,7,0)).bindData(this.space(),"recording",[]).end(),this.space().recording().controls()],1,1):void 0,s.hasDuration()?(this._timeline=this._timeline||o(p,e).flag("timeline")).bindData(s,"timeline",[]).end():void 0,(t[8]||o("div",t,8,e).flag("buttons").flag("right")).setContent([this.space().branch().canAnnotate()?(t[9]||o("a",t,9,8).flag("tool").flag("brushup").dataset("icon","tlfilter").on$(0,["tap","toggleBrushup"],this)).flagIf("active",this.space().isAnnotating()).end():void 0,!this.api().isMobile()?(t[10]||o(g,t,10,8).flag("volume").flag("muted")).bindData(this.space(),"audio",[]).end():void 0,(t[11]||o("a",t,11,8).flag("tool").flag("settings").dataset("icon","tlcog").on$(0,["tap","showSettings"],this)).end(),this.space().branch().canPublish()?t[12]||o("a",t,12,8).flag("button").on$(0,["tap","publish"],this).setText("publish"):void 0,this.space().branch().canUnpublish()?t[13]||o("a",t,13,8).flag("button").on$(0,["tap","unpublish"],this).setText("unpublish"):void 0],1)],1),true))}})
e.PlaybackOverlay=_},function(t,e,i){var n=i(0),r=n.createTagCache,o=n.createElement
var s=i(2),a=s.POINTERMASK,u=s.LAYOUTMASK,c=s.ACTION
var p='<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n<polygon points="35 35 29.2102052 35.6469727 24.9999029 39 24.9987284 25" fill="#8BB2FF" fill-rule="evenodd"/>\n</svg>'
var l=n.defineTag("PointerView",function(t){t.prototype.keyframe=function(t){return this._keyframe}
t.prototype.setKeyframe=function(t){this._keyframe=t
return this}
t.prototype.__mask={watch:"maskDidSet",name:"mask"}
t.prototype.mask=function(t){return this._mask}
t.prototype.setMask=function(t){var e=this.mask()
if(t!=e){this._mask=t}if(t!=e){this.maskDidSet&&this.maskDidSet(t,e,this.__mask)}return this}
t.prototype.__hidden={watch:"hiddenDidSet",name:"hidden"}
t.prototype.hidden=function(t){return this._hidden}
t.prototype.setHidden=function(t){var e=this.hidden()
if(t!=e){this._hidden=t}if(t!=e){this.hiddenDidSet&&this.hiddenDidSet(t,e,this.__hidden)}return this}
t.prototype.__hover={watch:"hoverDidSet",name:"hover"}
t.prototype.hover=function(t){return this._hover}
t.prototype.setHover=function(t){var e=this.hover()
if(t!=e){this._hover=t}if(t!=e){this.hoverDidSet&&this.hoverDidSet(t,e,this.__hover)}return this}
t.prototype.__target={watch:"targetDidSet",name:"target"}
t.prototype.target=function(t){return this._target}
t.prototype.setTarget=function(t){var e=this.target()
if(t!=e){this._target=t}if(t!=e){this.targetDidSet&&this.targetDidSet(t,e,this.__target)}return this}
t.prototype.space=function(){return this.data()}
t.prototype.build=function(){var t=($_=this.$).$build$||($_.$build$=r(this)),e
this.$open("build0").setChildren(e=t[0]||(e=o("div",t,0,this)).flag("pointer-body").setContent(this._svg=this._svg||o("div",e).flag("svg").flag("Vector").flag("pointer-shape"),2),2).synced()
this._svg.dom().innerHTML=p
this._sx=this._sy=1
return this}
t.prototype.mount=function(){var t=this
t.space().on("resized",function(){t._frame=null
return t.render()})
t.space().on("ticked",function(e){return t.render(e)})
return t}
t.prototype.render=function(){var t
var e=this.keyframe()
var i=this._frame
if(!e||this.space().recording()||e._branch!=this.space().branch()||this.space().isEditing()){this.setHidden(true)
return}this.setHidden(false)
if(this.space().counter("locals")!=this._v){this._v=this.space().counter("locals")
i=null}var n=e.x()
var r=e.y()
let o=this.space().timeline().currentOffset()
if(e==i){let t=e.nextFrame()
if(t&&o!=this._currOffset){this._currOffset=o
let i=t.offset()-e.offset()
let s=Math.max(Math.min((o-e.offset())/i,1),0)
if(i<140){n=n+(t.x()-n)*s
r=r+(t.y()-r)*s
this.drawTarget(n,r)}else{return this.draw()}}else{return this.draw()}}this._frame=e
var s
var a
if(i&&i.sref()&&i.sref()==e.sref()){a=this._target}a||(a=this.space().view().lookup(e.sref()))
if(!a&&(typeof(t=e.hover())=="number"||t instanceof Number)){a=this.space().__lookup(e.hover())}this.flag("local",!!e.LOCAL)
var c=a||this._target
var p=e?e.targetLayout():null
var l=a?this.space().view().layoutForNode(a):null
if(c&&c.posToScreen){s=c.posToScreen(n,r)}if(!s&&a&&p&&l){let t=l[0]
let e=l[1]
let i=l[2]
let o=l[3]
let a=p[0]
let c=p[1]
let h=p[2]
let d=p[3]
let f=t-a
let m=e-c
let y=i-h
let g=o-d
let v=p[4]
if(v==null){f+=54
v=0}if(y==0&&g==0){s=[n+m,r+f]}else if(v&u.SCALED){let u=(n-(c+h*.5))/h
let p=(r-(a+d*.5))/d
n=e+i*.5+u*i
r=t+o*.5+p*o
s=[n,r]}}if(s){this.drawTarget(s[0],s[1],a)}this.flag("out-of-bounds",!a||!s)
this.setMask(e.flags())
if(a&&this._target!=a){this.setTarget(a)
this._sx=.2
this._sy=.2}this.draw()
return this}
t.prototype.draw=function(){var t=this._x1-this._x
var e=this._y1-this._y
if(t==0&&e==0){return}if(Math.abs(t)<5&&Math.abs(e)<5){this._x=this._x1
this._y=this._y1
this._sx=1
this._sy=1}else{this._x=this._x+t*this._sx
this._y=this._y+e*this._sy
if(this._sx<.6){this._sx+=.03}if(this._sy<.6){this._sy+=.03}}this._dom.style.transform="translate3d("+this._x+"px,"+this._y+"px,0px)"
return}
t.prototype.drawTarget=function(t,e){this._x1=t
this._y1=e
this._x||(this._x=t)
this._y||(this._y=e)
return}
t.prototype.drawAt=function(t,e){return this._dom.style.transform="translate3d("+(this._x=t)+"px,"+(this._y=e)+"px,0px)"}
t.prototype.targetDidSet=function(t,e){var i,n,r,o
if(e){(i=e)&&i.unflag&&i.unflag("agent-over");(n=e)&&n.setHasPointerFocus&&n.setHasPointerFocus(false)}if(t){(r=t)&&r.flag&&r.flag("agent-over");(o=t)&&o.setHasPointerFocus&&o.setHasPointerFocus(true)}return this}
t.prototype.hiddenDidSet=function(t){var e
this.flag("hidden",!!t)
if(this.target()){return(e=this.target())&&e.flag&&e.flag("agent-over",!t)}}
t.prototype.maskDidSet=function(t){return this.flag("left-button-pressed",t&a.LEFT_BUTTON)}
t.prototype.retargetStream=function(){let t=this.space().trunk().stream()
let e=t.actionsOfType(c.POINTER_UPDATE)
let i=function(t){var i
let n=t
let r=e[t]
let o=e[t+1]
let s
let a=8e3
let u=10
while(t+1<e.length){let i=e[t+1]
if(i.sref()==o.sref()){t++
o=i}else{s=i
break}}let c=o.timeOffset()-r.timeOffset()
let p=a*2
let l=u*c
if((i=s)&&i.target&&i.target()!=r.target()){l+=a}if(l<p){let i=n+1
while(i<=t){e[i].setSref(r.sref())
i++}}return t}
let n=0
while(n+1<e.length){if(e[n].sref()!=e[n+1].sref()){break}n++}var r=[]
while(n+1<e.length){r.push(n=i(n))}return r}})
e.PointerView=l},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField,u=o.TextArea
var c=i(25).PrivacyField
var p=n.defineTag("PublishDialog",s,function(t){t.prototype.model=function(){return this.data().model()}
t.prototype.toggleBusy=function(){return this.toggleFlag("busy")}
t.prototype.submitLabel=function(){return this.model().isPublished()?"publish again":"publish"}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h1",e.$,"A",e).setText("Publish screencast"),r(a,e.$,"B",e).setType("text").setName("title").setLabel("Title").setRequired(true).setPlaceholder("Untitled cast").setAutocomplete("off"),r(u,e.$,"C",e).flag("mb-md").setName("description").setLabel("Description").setDesc("Short description (markdown supported)"),r(c,e.$,"D",e)],2)).end((e.$.B.end(),e.$.C.end(),e.$.D.bindData(this,"data",[]).end(),true))}
t.prototype.onuxashow=function(t){var e
this.data().model().privacy="public"
return this.setFormData(e=this.data().model()),e}
t.prototype.onuxasubmit=function(t){var e=this
return e.uxa().queue().add(1e4,async function(){var t=e.formData()
await e.model().update({title:t.title,description:t.description,privacy:t.privacy})
var i=await e.data().publish(t)
return e.api().analytics().cast(e.model().id,"Published")})}})
e.PublishDialog=p},function(t,e,i){var n=i(0),r=n.createTagList,o=n.createTagMap,s=n.createElement
var a=i(1),u=a.Dialog,c=a.SelectField,p=a.Button
var l=i(71).MediaRecording
var h=i(161).MediaRecordingStats
var d=i(12)
var f=[["noiseSuppression","Noise Suppression"],["echoCancellation","Echo Cancellation"],["autoGainControl","Auto-Gain"],["typingNoiseDetection","Typing Noise Detection"]]
var m=null
var y=n.defineTag("RecDialog",u,function(t){t.prototype.sample=function(t){return this._sample}
t.prototype.setSample=function(t){this._sample=t
return this}
t.prototype.branch=function(){return this.data()}
t.prototype.space=function(){return this.branch().space()}
t.prototype.togglePrev=function(t){t.target().prev().setChecked(!t.target().prev().checked())
return t.halt()}
t.prototype.isSupported=function(){return this.space().audio().canRecordAudio()}
t.prototype.devices=function(){var t
return(t=this.space().audio().devices()).OPTIONS||(t.OPTIONS=this.space().audio().devices().map(function(t,e){return[t.deviceId,t.label||"Mic #"+(e+1)]}))}
t.prototype.supportedConstraints=function(){return this._supportedConstraints||(this._supportedConstraints=window.navigator.mediaDevices.getSupportedConstraints())}
t.prototype.constraints=function(){var t=this.supportedConstraints()
var e=this.formData()
var i={}
i.deviceId=e.audioDeviceId
i.channelCount=1
for(let n=0,r=f.length;n<r;n++){let r=f[n][0]
if(t[r]){i[r]=!!e[r]}}if(t.sampleRate){i.sampleRate=48e3}if(this.api().ua().isChrome()){i.googAutoGainControl=false}return i}
t.prototype.onsamplestart=function(){var t=this
t.setSample(new l({constraints:t.constraints(),debug:t.formData().debug}))
t.sample().start().then(function(){return true}).catch(function(e){var i
t.log("sample could not start!!",e)
t.uxa().flash(e.message)
return t.setSample(null),null})
t.schedule({raf:true})
return t}
t.prototype.onsamplestop=function(){return this.sample().stop()}
t.prototype.onsampleplay=function(){return this.sample().play()}
t.prototype.body=function(){var t=this.$$||(this.$$={}),e,i=this,r,a
return(e=i._body=i._body||(e=s("div",i)).flag("body")).setContent([e.$.A||s("h1",e.$,"A",e).flag("red").setText("Record"),e.$.B||s("p",e.$,"B",e).flag("dim").setText('Choose a microphone and click "CONFIRM" to start the recording.'),e.$.C||s("p",e.$,"C",e).flag("info").setText("If you make a mistake during your recording, don't worry. You can cut away, silence or speed up parts of your recording afterward. You can also redo the entire recording if you want."),i.isSupported()?(r=e.$.D||(r=s("div",e.$,"D",e)).flag("mic")).setContent([(i._deviceSelect=i._deviceSelect||s(c,r).flag("deviceSelect").flag("device").setLabel("Select microphone").setName("audioDeviceId")).setOptions(i.devices()).end(),(e.$.E||s("div",e.$,"E",r).flag("testing")).setContent([function t(e){var n,r=e.$iter()
for(let t=0,o=f.length,a;t<o;t++){a=f[t]
if(!i.supportedConstraints()[a[0]]){continue}r.push((n=e[t]||(n=s("label",e,t)).setContent([s("input",n.$,"A",n).setType("checkbox").setChecked(true),s("span",n.$,"B",n)],2)).end((n.$.A.setName(a[0]).end(),n.$.B.setContent(a[1],3),true)))}return r}(e.$["F"]||o(e.$,"F",e.$.E)),(e.$.G||s("label",e.$,"G","E").setContent([s("input",e.$,"H","G").setType("checkbox").setName("debug").setChecked(false),s("span",e.$,"I","G").setText("debug")],2)).end((e.$.H.end(),true)),!i.sample()||i.sample().audio()?(e.$.J||s(p,e.$,"J","E").flag("sm").flag("primary").flag("testButton").setNestedAttr("uxa","action","samplestart").setLabel("Test")).end():(e.$.K||s(p,e.$,"K","E").flag("sm").flag("primary").flag("testButton").setNestedAttr("uxa","action","samplestop").setLabel("Stop")).end()],1),i.sample()?n.static([(e.$.L||s(h,e.$,"L",r).flag("sample")).bindData(i,"sample",[]).end(),i.sample().error()?(e.$.M||s("div",e.$,"M",r).flag("sample").flag("error")).setContent(i.sample().error().message||i.sample().error(),3):void 0,i.sample().audio()?n.getTagForDom(i.sample().audio()):void 0],1,1):void 0,i._endOffset!=i._currOffset?(e.$.N||s("div",e.$,"N",r).flag("Alert").flag("danger").flag("large").flag("rerecord").setContent(a=e.$.O||(a=s("label",e.$,"O","N")).setContent([i._recFromOffset=i._recFromOffset||s("input",a).flag("recFromOffset").setType("checkbox"),s("span",e.$,"P",a)],2),2)).end((i._recFromOffset.end(),e.$.P.setNestedAttr("uxa","md","Re-record from current time *("+d.msToStr(i._currTime,3)+")*").end(),true)):void 0],1):e.$.Q||s("div",e.$,"Q",e).flag("Alert").flag("danger").flag("large").setText("Recording / streaming is currently only available from Chrome and Firefox.")],1)}
t.prototype.onchange=function(t){this.log("onchange")
if(this._recFromOffset&&this._recFromOffset.checked()){return this.space().timeline().seek(this._currOffset)}else{return this.space().timeline().seekToEnd()}}
t.prototype.setup=function(){this._currOffset=this.space().timeline().currentOffset()
this._currTime=this.space().timeline().offsetToTime(this._currOffset)
this._endOffset=this.space().timeline().endOffset()
this.log("initial offset",this._currOffset)
return t.prototype.__super__.setup.apply(this,arguments)}
t.prototype.mount=function(){if(this._recFromOffset){this._recFromOffset.dom().checked=true}this.schedule({events:true,interval:1e3})
if(m){this._deviceSelect.setValue(m)}return this}
t.prototype.unmount=function(){return this.unschedule()}
t.prototype.onuxasubmit=function(t){var e=this
e.log("onsubmit",e.formData())
if(e.sample()){e.sample().stop()}var i=e.formData()
var n={mic:e.constraints(),pointer:true,live:true}
m=i.audioDeviceId
if(e._recFromOffset&&e._recFromOffset.checked()){n.offset=e._currOffset
if(!window.confirm("Are you sure you want to restart recording from "+d.msToStr(e._currTime)+"? This cannot be undone")){return t.prevent().stop()}}return e.uxa().queue().add(300,function(){return e.branch().record(n)})}})
e.RecDialog=y},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1).Dialog
var s=i(34).LongPromise
var a=i(12)
var u=n.defineTag("RecDoneDialog",o,function(t){t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h1",e.$,"A",e).setText("Done recording"),r("p",e.$,"B",e).setText('Click "CONFIRM" to save your recording. If you don\'t want to save it, click "DISMISS".')],2)}
t.prototype.onuxadismiss=function(){var t=this
return t.uxa().queue().add(300,function(){return t.data().discard()})}
t.prototype.onuxasubmit=function(){var t=this
return t.uxa().queue().add(300,function(){return t.data().finish()})}})
e.RecDoneDialog=u},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField,u=o.TextArea,c=o.Button
var p=i(25).PrivacyField
var l=n.defineTag("SaveDialog",s,function(t){t.prototype.branch=function(){return this.data()}
t.prototype.model=function(){return this.branch().model()}
t.prototype.toggleBusy=function(){return this.toggleFlag("busy")}
t.prototype.loadFormData=function(){return this.applyFormData(this.model())}
t.prototype.submitLabel=function(){return this.model().isLocal()?"Save note":"Save"}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent(this.model().isLocal()?n.static([(this._typefield=this._typefield||r("input",e).flag("typefield").setType("hidden").setName("type").setValue("note",1)).end(),(e.$.A||r(a,e.$,"A",e).flag("mb-md").setType("text").setName("title").setLabel("Title").setRequired(true).setPlaceholder("Untitled note")).end(),(e.$.B||r(p,e.$,"B",e).setLabel("Privacy")).end()],2,1):n.static([(e.$.C||r(a,e.$,"C",e).setType("text").setName("title").setLabel("Title").setRequired(true).setPlaceholder("Untitled fork")).end(),(e.$.D||r(u,e.$,"D",e).flag("mb-md").setName("description").setLabel("Description").setDesc("Short description (markdown supported)")).end(),(e.$.E||r(p,e.$,"E",e).setLabel("Privacy")).end()],2,2),3)}
t.prototype.onuxasubmit=function(t,e){var i=this
return i.uxa().queue().add(async function(){var t
var n=i.branch().isLocal()
return t=await i.branch().save(e)})}})
e.SaveDialog=l},function(t,e,i){var n=i(0),r=n.createElement
var o=i(76).ExplorerView
var s=i(158).DependenciesPanel
var a=i(22).SidebarPanel
var u=i(79).WidgetPanel
var c=i(170).SlidesPanel
var p=i(156),l=p.BranchesPanel,h=p.BranchEntry
var d=i(78).SpaceMenu
var f=i(1),m=f.IconButton,y=f.Dialog,g=f.TextField,v=f.Button
var _=i(31).LogEntry
var b=i(20).ScrimbaGesture
var x=i(47).CastDialog
var w=n.defineTag("Resizer",function(t){t.prototype.ontouchstart=function(t){return b.wrap(t)}
t.prototype.onresizestart=function(t){return t._width=this.data().width()}
t.prototype.onresizeupdate=function(t){var e
return this.data().setWidth(e=t.clamp(100,t._width+t.dx(),320,10)),e}})
var T=n.defineTag("SidebarView",function(t){t.prototype.setup=function(){var t
return this.setSref(t=this.data().id()),t}
t.prototype.space=function(){return this.data().space()}
t.prototype.showMenu=function(t){return t.uxa().open(r(d).flag("sm").bindData(this,"space",[]).end())}
t.prototype.editMetadata=function(){return this.uxa().open(r(x).flag("modal").bindData(this.space(),"model",[]).setFormData(this.space().model()).end())}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[r(w,t,0,this).flag("resizer").flag("right").dataset("gesture","resize"),r("section",t,1,this).flag("main").setContent([r("header",t,2,1).flag("header"),r(o,t,6,1),r(s,t,7,1)],2)],2).synced((t[0].bindData(this,"data",[]).end(),t[2].setContent([t[3]||r("div",t,3,2).flag("title").setText("Project"),this.space().model().can(this.api().user(),"edit")?(t[4]||r("div",t,4,2).flag("tool").flag("edit").dataset("icon","medit").on$(0,["tap","editMetadata"],this)).end():void 0,(t[5]||r("div",t,5,2).flag("tool").flag("cog").dataset("icon","mcog").on$(0,["tap","showMenu"],this)).end()],1),t[6].bindData(this.space(),"explorerPanel",[]).setSpace(this.space()).end(),t[7].bindData(this.space(),"dependenciesPanel",[]).setSpace(this.space()).end(),true))}})
e.SidebarView=T},function(t,e,i){var n=i(0),r=n.createElement
var o=i(79).WidgetPanel
var s=i(1),a=s.Menu,u=s.MenuItem,c=s.IconButton
var p=n.defineTag("SlidesPanel",o,function(t){t.prototype.toggle=function(){if(this.data().currentSlide()){this.data().setVisible(!this.data().visible())}return this}
t.prototype.onshowmenu=function(t){var e
return this._header.uxa().open((e=(e=r(a)).flag("dark")).setContent([(e.$.A||r(u,e.$,"A",e).setIcon("+").setAction("importslides").setLabel("Import Google Slides")).end(),this.data().url()?(e.$.B||r(u,e.$,"B",e).setIcon("+").setAction("reimportslides").setLabel("Resync with Google Slides")).end():void 0],1).end())}
t.prototype.header=function(){let t=this.$$||(this.$$={}),e
return(e=this._header=this._header||(e=r("header",this)).flag("header").setContent([r("div",e.$,"A",e).flag("title").setText("Slides"),r("div",e.$,"B",e).flag("tools").setContent(e.$.C||r(c,e.$,"C","B").setIcon("*").setAction("showmenu"),2)],2)).end((e.$.C.end(),true))}})
e.SlidesPanel=p},function(t,e,i){var n=i(0),r=n.createElement
var o=i(2).LAYOUTMASK
var s=i(21).InterfaceView
var a=i(152).SlideAnimator
var u=n.defineTag("SlideView",function(t){t.prototype.__svg={watch:"svgDidSet",name:"svg"}
t.prototype.svg=function(t){return this._svg}
t.prototype.setSvg=function(t){var e=this.svg()
if(t!=e){this._svg=t}if(t!=e){this.svgDidSet&&this.svgDidSet(t,e,this.__svg)}return this}
t.prototype.__fetcher={watch:"fetcherDidSet",name:"fetcher"}
t.prototype.fetcher=function(t){return this._fetcher}
t.prototype.setFetcher=function(t){var e=this.fetcher()
if(t!=e){this._fetcher=t}if(t!=e){this.fetcherDidSet&&this.fetcherDidSet(t,e,this.__fetcher)}return this}
t.prototype.setup=function(){return this}
t.prototype.fetcherDidSet=function(t){var e=this
if(t&&t.then){t.then(function(t){return e.setSvg(t),t})}return}
t.prototype.svgDidSet=function(t){this.body().dom().innerHTML=t
this.initAnimations()
return this}
t.prototype.body=function(){let t=this.$$||(this.$$={})
return this._body=this._body||r("div",this).flag("body")}
t.prototype.isWiderThanViewport=function(){let t=this.data().width()/this.data().height()
return t>this.data().space().vw()/(this.data().space().vh()-30)}
t.prototype.initAnimations=function(){let t=this._body.dom().firstElementChild
this._animator=new a(this.data(),t,this.data().steps())
this._animator.reset()
return this}
t.prototype.render=function(){this.$open(0).setFetcher(this.data().fetchBody()).setChildren(this.body(),3).synced()
if(this._animator){this._animator.setCurrentStep(this.data().currentStep())}return this}
t.prototype.ontap=function(t){var e
try{if(e=t.native().target.closest("a")){let i=e.getAttribute("target")
t.stop()
if(i){t._responder=null}else{t.prevent()
window.open(e.getAttribute("href"),"_blank")}}}catch(t){}return this}})
var c=n.defineTag("SlidesBody",function(t){t.prototype.layoutMask=function(){return o.SCALED|o.BOUNDLESS}})
var p=n.defineTag("SlidesView",s,function(t){t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){this._data=t
return this}
t.prototype.space=function(){return this.data().space()}
t.prototype.commit=function(){this.setEnabled(true)
t.prototype.__super__.commit.apply(this,arguments)
return this.flag("pip",!this.data().visible())}
t.prototype.tapBody=function(t){t.stop().prevent()
if(!this.data().visible()&&this.data().currentSlide()){return this.data().setVisible(true),true}}
t.prototype.hide=function(){this.data().setVisible(false)
return this}
t.prototype.slideForId=function(t){let e,i=this.$$||(this.$$={}),n
return t&&(i[n="id$"+t]||r(u,i,n,this)).setData(this.data().space().widgets().get(t)).end()}
t.prototype.targetForPointer=function(t){return this._body}
t.prototype.reflow=function(){let t=this.space().vw()
let e=this.space().vh()
let i=this.data().width()
let n=this.data().height()
let r=(this.data().width()||16)/(this.data().height()||9)
let o=r>t/e
if(!this.invalidated(t,e,i,n)){return this._sizing}let s={}
let a={left:0,bottom:0,width:200}
if(o){s.width=Math.ceil(t*.9)
s.height=Math.round(s.width/r)}else{s.height=Math.round((e-30)*.9)
s.width=Math.ceil(s.height*r)}var u=(e-s.height)*.5
var c=(t-s.width)*.5
var p=u<64?64-u:0
this._body.css(s)
this.dom().style.setProperty("--pip-transform","scale("+a.width/s.width+")")
this.dom().style.setProperty("--max-transform","translate(-50%,50%) translateY(-"+p+"px)")
return this._sizing={max:s,pip:a}}
t.prototype.render=function(){var t=this.$,e,i,n;(e=this.data().nextSlide())&&e.fetchBody&&e.fetchBody();(i=this.data().prevSlide())&&i.fetchBody&&i.fetchBody()
this.$open(0).flagIf("empty",!this.data().currentSlideId()).setChildren(t.$=t.$||[this._cover=this._cover||r("div",this).flag("cover").on$(0,["tap","hide"],this),n=this._body=this._body||(n=r(c,this)).flag("body").on$(0,["tap","tapBody"],this)],2).synced((this._body.setSref(this.data().id()).setContent([this._shadow=this._shadow||r("div",n).flag("shadow"),this.data().currentSlideId()?this._slideView=this.slideForId(this.data().currentSlideId()):void 0],1).end(),true))
this.reflow()
return this}})
e.SlidesView=p},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
if(true){var c=i(43)
window.CE=c}var p=i(2).SCON
var l=i(21).InterfaceView
var h=i(5).UserAvatar
var d=i(14).Format
var f=i(48).CastPreview
var m=i(1),y=m.Button,g=m.TextArea,v=m.Form,_=m.Dialog,b=m.MenuItem,x=m.IconButton
var w=o.defineTag("SpaceDrawerHeader",function(t){t.prototype.render=function(){return this.$open(0).flag("NavBar").setText("Meta").synced()}})
e.SpaceDrawerHeader=w
var T=o.defineTag("CodeReference","span",function(t){t.prototype.render=function(){var t=this.$
let e=p.decodeURI(this.data().uri||this.data())||{}
let i=e.selection
return this.$open(0).setChildren([e.path?(t[0]||u("span",t,0,this).flag("path")).setContent(e.path.substr(1),3):void 0,i?(t[1]||u("span",t,1,this).flag("loc")).flagIf("whole",i[4]).flagIf("oneline",i[0]==i[2]).setContent([(t[2]||u("span",t,2,1).flag("a").setContent(["#L",u("span",t,3,2).flag("line"),u("span",t,4,2).flag("col")],2)).end((t[3].setContent(i[0],3),t[4].setText(":"+i[1]),true)),i[0]!=i[2]||i[1]!=i[3]?(t[5]||u("span",t,5,1).flag("b").setContent(["-",u("span",t,6,5).flag("line"),u("span",t,7,5).flag("col")],2)).end((t[6].setContent(i[2],3),t[7].setText(":"+i[3]),true)):void 0],1):void 0],1).synced()}})
var S=o.defineTag("CodeSnippet",function(t){t.prototype.uri=function(t){return this._uri}
t.prototype.setUri=function(t){this._uri=t
return this}
t.prototype.__code={watch:"codeDidSet",name:"code"}
t.prototype.code=function(t){return this._code}
t.prototype.setCode=function(t){var e=this.code()
if(t!=e){this._code=t}if(t!=e){this.codeDidSet&&this.codeDidSet(t,e,this.__code)}return this}
t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.dataDidSet=function(t){var e
if(t){this.setUri(t.uri)
return this.setCode(e=t.text),e}}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[u(T,t,0,this).flag("pill"),this._body=this._body||u("div",this).flag("body")],2).synced((t[0].bindData(this,"data",[]).end(),true))}
t.prototype.codeDidSet=function(t){var e=this
if(true){var i=t[t.length-1]=="\n"?t.slice(0,-1):t
try{var n=e.uri().match(/\#L(\d+)/)[1]}catch(t){}c.colorize(i,e.uri(),{startLine:n}).then(function(i){if(t==e._code){e.render()
return e._body.dom().innerHTML=i}})
return}}})
var k=o.defineTag("MessageView",function(t){t.prototype.__level={default:0,name:"level"}
t.prototype.level=function(t){return this._level}
t.prototype.setLevel=function(t){this._level=t
return this}
t.prototype._level=0
t.prototype.user=function(){return this.data().user()}
t.prototype.render=function(){var t=this.$
return this.$open(0).setFlag(-1,"l"+this.level()).setChildren([(t[0]||u("div",t,0,this).flag("chip").setContent([u(h,t,1,0).flag("avatar").flag("gutter"),u("div",t,2,0).flag("main").setContent([u("div",t,3,2).flag("h1").setContent(t[4]||u("a",t,4,3).flag("username"),2),u("ul",t,5,2).flag("h3").flag("details").flag("muted")],2)],2)).end((t[1].bindData(this,"user",[]).end(),t[4].setHref(this.user().url()).setContent(this.user().name||this.user().username,3).end(),t[5].setContent([(t[6]||u("li",t,6,5).flag("age")).setContent(d.timeAgo(this.data().ts),3),this.level()==0?(t[7]||u("li",t,7,5).setContent(t[8]||u("a",t,8,7).flag("action").setNestedAttr("uxa","action","reply").setText("reply"),2)).end((t[8].end(),true)):void 0],1),true)),this.data().anchor?(t[9]||u(S,t,9,this)).bindData(this.data(),"anchor").end():void 0,(t[10]||u("div",t,10,this).flag("content").flag("p").flag("sm")).setNestedAttr("uxa","md",this.data().body).end()],1).synced()}})
var A=o.defineTag("ThreadView",function(t){t.prototype.build=function(){var t
return this.setTabindex(t=-1),t}
t.prototype.select=function(){return this.trigger("showannotation",this.data())}
t.prototype.onreply=async function(t){t.halt()
await this.api().tryLogin()
if(this.api().user()){return o.mount(u(C).bindData(this,"data",[]).setThread(this.data()).end(),this._foot.dom())}}
t.prototype.onfocus=function(){return this.select()}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setChildren([t[0]||u("div",t,0,e).flag("gutter-line"),t[1]||u(k,t,1,e).setLevel(0),function t(i){for(let t=0,n=r(e.data().replies()),o=i.taglen=n.length;t<o;t++){(i[t]||u(k,i,t).setLevel(1)).setData(n[t]).end()}return i}(t[2]||s(t,2)),e._foot=e._foot||u("div",e).flag("foot"),t[3]||u("div",t,3,e).flag("hr")],1).synced((t[1].bindData(e,"data",[]).end(),true))}})
var C=o.defineTag("ReplyForm",v,function(t){t.prototype.thread=function(t){return this._thread}
t.prototype.setThread=function(t){this._thread=t
return this}
t.prototype.onuxasubmit=async function(t){var e=this.formData()
this.log("uxasubmit",e)
await this.api().tryLogin()
if(!(t.data().body&&this.api().user())){return}e.uid=this.api().uid()
await this.api().rpc("castCommentReply",[this.data().id,e])
return this.orphanize()}
t.prototype.oncancel=function(t){t.halt()
return this.orphanize()}
t.prototype.mount=function(){return this._field.input().focus()}
t.prototype.user=function(){return this.api().user()}
t.prototype.render=function(){var t=this.$,e
return this.$open(0).flag("MessageView").flag("l1").setChildren(t.$=t.$||[u("div",t,0,this).flag("chip").setContent([u(h,t,1,0).flag("avatar").flag("gutter"),u("div",t,2,0).flag("main").setContent([u("div",t,3,2).flag("h1"),u("div",t,4,2).flag("h3").flag("muted").setText("reply to question")],2)],2),e=(e=u("div",t,5,this)).flag("content").setContent(this._field=this._field||u(g,e).flag("field").setName("body").setPlaceholder("Add a public comment"),2),u("div",t,6,this).flag("flat").flag("buttons").setContent([u(y,t,7,6).flag("inline").flag("cancel").flag("muted").setAction("cancel").setType("button").setLabel("Cancel"),u(y,t,8,6).flag("inline").flag("submit").flag("primary").setType("submit").setLabel("Submit")],2)],2).synced((t[1].bindData(this,"user",[]).end(),t[3].setContent(this.user().name||this.user().username,3),this._field.end(),t[7].end(),t[8].end(),true))}})
var E=o.defineTag("DrawerDialog",_,function(t){t.prototype.hide=function(){return this.orphanize()}})
var D=o.defineTag("CommentDialog",E,function(t){t.prototype.build=function(){this.setSubmitLabel("Submit question")
return this}
t.prototype.space=function(){return this.data()}
t.prototype.currentCodeAnchor=function(){return this.space().view().editor().currentCodeAnchor()}
t.prototype.onuxasubmit=function(t){var e=this
var i=e.formData()
var n=e.currentCodeAnchor()
i.uid=e.api().uid()
i.offset=e.space().timeline().currentOffset()
if(n&&n.text!=null){i.anchor=n}console.log("submit!!",i)
return e.uxa().queue().add(200,async function(){return await e.api().rpc("castComment",[e.space().id(),i])})}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
var i=this.currentCodeAnchor()
return(e=this._body=this._body||(e=u("section",this)).flag("body")).setContent([e.$.A||u("h2",e.$,"A",e).setText("Ask question"),e.$.B||u("p",e.$,"B",e).setText("If your question is related to a specific piece of code, you can highlight this code in the editor. The question will then be linked directly to that snippet."),i&&i.text?o.static([(e.$.C||u(T,e.$,"C",e).flag("pill")).setData(i).end(),(e.$.D||u(S,e.$,"D",e)).setData(i).end()],2,1):void 0,(e.$.E||u("input",e.$,"E",e).setName("cid").setType("hidden")).setValue(this.space().branch().id(),1).end(),(e.$.F||u("input",e.$,"F",e).setName("anchor").setType("hidden")).setValue(i,1).end(),(this._field=this._field||u(g,e).flag("field").setName("body").setPlaceholder("Write your question here ...")).end()],1)}})
var P=o.defineTag("DrawerSection",function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}})
var $=o.defineTag("DiscussionSection",P,function(t){let e="Questions & answers related to this Scrimba. [Ask a question](#ask)."
t.prototype.ontaplink=function(t){if(t.data().href=="#ask"){t.prevent().halt()
return this.trigger("ask")}}
t.prototype.render=function(){var t=this.$,i=this
return i.$open(0).flag("section").setChildren([t[0]||u("header",t,0,i).flag("header").setText("Discussion"),t[1]||u("div",t,1,i).flag("body").flag("markdown").flag("sm"),function t(e){for(let t=0,n=r(i.data().questions()),o=e.taglen=n.length,s;t<o;t++){s=n[t];(e[t]||u(A,e,t)).setData(s).flagIf("selected",i.space().annotation()==s).end()}return e}(t[2]||s(t,2))],1).synced((t[1].setNestedAttr("uxa","md",e).end(),true))}})
var L=o.defineTag("AuthorSection",P,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[u(h,t,0,this).flag("avatar"),u("div",t,1,this).flag("h3").flag("name").setContent(t[2]||u("a",t,2,1),2),u("div",t,3,this).flag("social").setContent([u("a",t,4,3).dataset("icon","twitter").setTarget("blank").setText("twitter"),u("span",t,5,3).flag("vr"),u("a",t,6,3).dataset("icon","github").setTarget("blank").setText("github")],2)],2).synced((t[0].bindData(this,"data",[]).end(),t[2].setHref(this.data().url()).setContent(this.data().name||this.data().username,3).end(),t[4].end(),t[6].end(),true))}})
var O=o.defineTag("AboutSection",P,function(t){t.prototype.render=function(){var t=this.$
var e=this.data().owner()
return this.$open(0).setChildren(t[0]||u("div",t,0,this).flag("body").setContent([u(h,t,1,0).flag("avatar"),u("h1",t,2,0).flag("h2").flag("title"),u("div",t,3,0).flag("h3").flag("sm").flag("name").setContent(t[4]||u("a",t,4,3),2),u("ul",t,5,0).flag("bullets").flag("social").flag("details").flag("muted")],2),2).synced((t[1].setData(e).end(),t[2].setContent(this.data().title,3),t[4].setHref(e.url()).setContent(e.name||e.username,3).end(),t[5].setContent([e.github_handle||e.username?(t[6]||u("li",t,6,5).setContent(t[7]||u("a",t,7,6).dataset("icon","github").setTarget("blank").setText("github"),2)).end((t[7].setHref("https://github.com/"+(e.github_handle||e.username)).end(),true)):void 0,e.twitter_handle?(t[8]||u("li",t,8,5).setContent(t[9]||u("a",t,9,8).dataset("icon","twitter").setTarget("blank").setText("twitter"),2)).end((t[9].setHref("https://twitter.com/"+e.twitter_handle).end(),true)):void 0,e.medium_handle?(t[10]||u("li",t,10,5).setContent(t[11]||u("a",t,11,10).dataset("icon","medium").setTarget("blank").setText("medium"),2)).end((t[11].setHref("https://medium.com/@"+e.medium_handle).end(),true)):void 0],1),true))}})
var M=o.defineTag("AskSection",P,function(t){t.prototype.currentCodeAnchor=function(){return this.space().view().editor().currentCodeAnchor()}
t.prototype.onuxasubmit=function(t){var e=this
var i=e._form.formData()
var n=e.currentCodeAnchor()
i.uid=e.api().uid()
i.offset=e.space().timeline().currentOffset()
if(n&&n.text!=null){i.anchor=n}console.log("submit!!",i)
return e._form.uxa().queue().add(200,async function(){await e.api().rpc("castComment",[e.space().id(),i])
e._form.dom().reset()
e.trigger("gototab","discussion")
return e.log("returned!!")})}
t.prototype.oncancel=function(t){t.halt()
this._form.dom().reset()
return this.trigger("gototab","discussion")}
t.prototype.render=function(){var t=this.$,e
var i=this.currentCodeAnchor()
return this.$open(0).flag("section").setChildren(e=this._form=this._form||(e=u(v,this)).flag("form").flag("body"),2).synced((this._form.setContent([t[0]||u("p",t,0,this._form).flag("sm").setText("If your question is related to a specific piece of code, you can highlight this code in the editor. The question will then be linked directly to that snippet."),i&&i.text?(t[1]||u(S,t,1,this._form)).setData(i).end():void 0,(t[2]||u("input",t,2,this._form).setName("cid").setType("hidden")).setValue(this.space().branch().id(),1).end(),(t[3]||u("input",t,3,this._form).setName("anchor").setType("hidden")).setValue(i,1).end(),(this._field=this._field||u(g,e).flag("field").flag("mb-md").setName("body").setPlaceholder("Write your question here ...")).end(),(t[4]||u(y,t,4,e).setAction("cancel").setLabel("cancel")).end(),(t[5]||u(y,t,5,e).flag("primary").setType("submit").setLabel("submit")).end()],1).end(),true))}})
var I=o.defineTag("InfoSection",P,function(t){var e="This Scrimba has no description."
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("section").setChildren(t.$=t.$||[u(O,t,0,this),this._body=this._body||u("div",this).flag("body").flag("sm").flag("markdown")],2).synced((t[0].bindData(this,"data",[]).setSpace(this.space()).end(),this._body.setNestedAttr("uxa","md",this.data().description||e).end(),true))}})
var R=o.defineTag("NoteItem",function(t){t.prototype.ontap=function(t){t.halt()
return this.trigger("goto",this.data())}
t.prototype.onclose=function(t){t.halt()
return this.log("onclose",t)}
t.prototype.ondel=function(t){t.halt()
return this.log("ondel",t)}
t.prototype.render=function(){var t=this.$
var e=this.data().owner()
return this.$open(0).flag("list-item").setChildren(t[0]||u("div",t,0,this).flag("chip"),2).synced((t[0].setContent([e?(t[1]||u(h,t,1,0).flag("avatar").flag("gutter")).bindData(this.data(),"owner",[]).end():void 0,(t[2]||u("div",t,2,0).flag("main").setContent([u("div",t,3,2).flag("h1"),u("div",t,4,2).flag("h3").flag("details").flag("muted")],2)).end((t[3].setContent(this.data().title,3),t[4].setContent([(t[5]||u("span",t,5,4).flag("age")).setContent(d.timeAgo(this.data().edited_at),3),this.data().isLocal()?o.static([t[6]||u("span",t,6,4).flag("vr"),t[7]||u("span",t,7,4).flag("warn").setText("unsaved")],2,1):void 0],1),true)),this.data().isLocal()?o.static([(t[8]||u("div",t,8,0).flag("tool").flag("neg").setNestedAttr("uxa","action","notediscard").setContent(t[9]||u("i",t,9,8).flag("sicon").dataset("name","circlecross"),2)).bindData(this,"data",[]).end((t[9].end(),true)),(t[10]||u("div",t,10,0).flag("tool").flag("pos").setNestedAttr("uxa","action","notesave").setContent(t[11]||u("i",t,11,10).flag("sicon").dataset("name","circlecheck"),2)).bindData(this,"data",[]).end((t[11].end(),true))],2,2):(t[12]||u("div",t,12,0).flag("tool").setNestedAttr("uxa","action","notedel").setContent(t[13]||u("i",t,13,12).flag("sicon").dataset("name","trash2"),2)).bindData(this,"data",[]).end((t[13].end(),true))],1),true))}})
let N="Whenever you start playing around with the code, a note will be created. All your notes are listed below."
var F=o.defineTag("NotesSection",P,function(t){t.prototype.render=function(){var t=this.$
if(false){}var e=this.space().branch().model()
var i=this.data().usernotes(this.api().uid())
var o=n(i)
return this.$open(0).flag("section").setChildren([t[0]||u("header",t,0,this).flag("header").setText("Notes"),(t[1]||u("div",t,1,this).flag("body").flag("sm")).setNestedAttr("uxa","md",N).end(),o==0?t[2]||u("div",t,2,this).flag("body").flag("tip").flag("p").flag("sm").setText("You don't have any notes in this Scrimba. You can pause and edit the cast at any time to create a note."):(t[3]||u("div",t,3,this).flag("body").flag("items")).setContent(function t(n){for(let t=0,o=r(i),s=n.taglen=o.length,a;t<s;t++){a=o[t];(n[t]||u(R,n,t)).setData(a).flagIf("selected",a==e).end()}return n}(t[4]||s(t,4,t[3])),4)],1).synced()}})
var B=o.defineTag("PlaylistItem",function(t){t.prototype.playlist=function(t){return this._playlist}
t.prototype.setPlaylist=function(t){this._playlist=t
return this}
t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.onplay=function(t){t.halt()
return this.router().go(this.data().url(this.playlist()))}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("list-item").setTitle(this.data().title).flagIf("selected",this.space().model()==this.data()).setChildren(t[0]||u("div",t,0,this).flag("chip").setNestedAttr("uxa","action","play").setContent([u("div",t,1,0).flag("main").setContent([u("div",t,2,1).flag("h2").flag("ellipsis"),u("ul",t,3,1).flag("h3").flag("muted").flag("bullets")],2),u("div",t,6,0).flag("tool").flag("play").setNestedAttr("uxa","action","play").setContent(t[7]||u("i",t,7,6).flag("sicon").dataset("name","circleplay"),2)],2),2).synced((t[0].end((t[2].setContent(this.data().title,3),t[3].setContent([(t[4]||u("li",t,4,3)).setContent(this.data().owner().name,3),this.data().duration?(t[5]||u("li",t,5,3).flag("duration")).setContent(d.duration(this.data().duration),3):void 0],1),t[6].bindData(this,"data",[]).end((t[7].end(),true)),true)),true))}})
var z=o.defineTag("DrawerplaylistSection",P,function(t){t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).flag("section").setChildren(t.$=t.$||[u("header",t,0,e).flag("header").setText("Playlist"),u("div",t,1,e).flag("body").flag("items")],2).synced((t[1].setContent(function t(i){for(let t=0,n=r(e.data().items()),o=i.taglen=n.length;t<o;t++){(i[t]||u(B,i,t)).setData(n[t]).setSpace(e.space()).setPlaylist(e.data()).end()}return i}(t[2]||s(t,2,t[1])),4),true))}})
var U=o.defineTag("SpaceDrawer",l,function(t){t.prototype.space=function(t){return this._space}
t.prototype.setSpace=function(t){this._space=t
return this}
t.prototype.__mode={watch:"modeDidSet",name:"mode"}
t.prototype.mode=function(t){return this._mode}
t.prototype.setMode=function(t){var e=this.mode()
if(t!=e){this._mode=t}if(t!=e){this.modeDidSet&&this.modeDidSet(t,e,this.__mode)}return this}
t.prototype.__tab={default:"about",watch:"tabDidSet",name:"tab"}
t.prototype.tab=function(t){return this._tab}
t.prototype.setTab=function(t){var e=this.tab()
if(t!=e){this._tab=t}if(t!=e){this.tabDidSet&&this.tabDidSet(t,e,this.__tab)}return this}
t.prototype._tab="about"
var e=["about","notes","discussion","playlist","ask"]
var i={discussion:"q&a"}
t.prototype.onask=async function(t){t.halt()
await this.api().tryLogin()
if(this.api().user()){this.setEnabled(true)
this.setTab("ask")
return this.render()}}
t.prototype.build=function(){if(true){this.setEnabled(!!this.api().sessionStore().getobj("space-drawer-enabled",!this.api().isMobile()&&!this.api().isEmbed()))
this._tab=this.api().sessionStore().get("space-drawer-tab")||"about"}return this}
t.prototype.oncontextmenu=function(t){return t.stop()}
t.prototype.canViewTab=function(t){if(t=="playlist"){return!!this.space().playlist()}else{return true}}
t.prototype.tabDidSet=function(t,e){return this.api().sessionStore().set("space-drawer-tab",t)}
t.prototype.modeDidSet=function(t){return this.setFlag("mode",t)}
t.prototype.setup=function(){var e=this
t.prototype.__super__.setup.apply(e,arguments)
if(!e.canViewTab(e._tab)){e._tab="about"}e.space().on("branch:enter",function(t){var i
if(t.isNote()){return e.setTab(i="notes"),i}})
return e.space().on("playing",function(t,i,n,r){if(r==0&&e.api().vw()<1800){return e.setEnabled(false),false}})}
t.prototype.mount=function(){return this.schedule({events:true})}
t.prototype.toggle=function(){this.setEnabled(!this.enabled())
return this.api().sessionStore().setobj("space-drawer-enabled",this.enabled())}
t.prototype.onclose=function(t){t.stop()
return this.toggle()}
t.prototype.ongototab=function(t,e){t.stop()
return this.setTab(e),e}
t.prototype.closeDrawer=function(){return this.toggle()}
t.prototype.tick=function(){if(this.enabled()){this.render()}return this}
t.prototype.render=function(){var t=this.$,n=this
return n.$open(0).flag("dark").setChildren(t.$=t.$||[u("div",t,0,n).flag("shade").setNestedAttr("uxa","action","close"),u("div",t,1,n).flag("body"),n._dialogs=n._dialogs||u("div",n).flag("dialogs"),u("div",t,10,n).flag("tool").flag("close").dataset("icon","mright").on$(0,["tap","closeDrawer"],n)],2).synced((t[0].end(),t[1].setContent(n.data()?o.static([(t[2]||u("div",t,2,1).flag("tabs")).setContent(function t(r){var o=r.$iter()
for(let t=0,s=e.length,a;t<s;t++){a=e[t]
if(!n.canViewTab(a)){continue}o.push((r[t]||u("div",r,t).flag("tab")).setFlag(0,a).flagIf("selected",a==n.tab()).on$(0,["tap",["setTab",a]],n).setContent(i[a]||a,3))}return o}(t[3]||a(t,3,t[2])),5),(t[4]||u("div",t,4,1).flag("tabpane")).setContent(n.tab()=="about"?(t[5]||u(I,t,5,4)).bindData(n,"data",[]).setSpace(n.space()).end():n.tab()=="notes"?(t[6]||u(F,t,6,4)).bindData(n,"data",[]).setSpace(n.space()).end():n.tab()=="discussion"?(t[7]||u($,t,7,4)).bindData(n,"data",[]).setSpace(n.space()).end():n.tab()=="ask"?(t[8]||u(M,t,8,4)).bindData(n,"space",[]).setSpace(n.space()).end():n.tab()=="playlist"?(t[9]||u(z,t,9,4)).bindData(n.space(),"playlist",[]).setSpace(n.space()).end():void 0,3)],2,1):void 0,3),t[10].end(),true))}})
e.SpaceDrawer=U},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createElement
var s=i(2),a=s.SCON,u=s.DIRTY,c=s.ACTION
var p=i(75).EditorView
var l=i(17).Delay
var h=i(164).PointerView
var d=i(73).BrushupView
var f=i(155).BranchesListView
var m=i(46).Notification
var y=i(78).SpaceMenu
var g=i(166).RecDialog
var v=i(168).SaveDialog
var _=i(165).PublishDialog
var b=i(162).NewFileDialog
var x=i(50).GroupJoinDialog
var w=i(87).CastCreateDialog
var T=i(74).DependencyAddDialog
var S=i(154).AskDialog
var d=i(73).BrushupView
var k=i(21).InterfaceView
var p=i(75).EditorView
var A=i(76).ExplorerView
var C=i(169).SidebarView
var E=i(177).TitlebarView
var D=i(172).SpaceDrawer
var P=i(163).PlaybackOverlay
var $=i(26).Cast
var L=i(12)
Mousetrap=i(39)
if(true){var O=i(274)
var M}var I=r.defineTag("ViewportOverlay",k,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||o("div",t,0,this).flag("PlayButton").flag("button").setNestedAttr("uxa","action","play").setContent(t[1]||o("i",t,1,0).flag("scrimbacon").dataset("icon","play"),2),2).synced((t[0].end((t[1].end(),true)),true))}})
var R=r.defineTag("SpaceViewport",function(t){t.prototype.build=function(){var t
return this.setTabindex(t=-1),t}})
var N=i(31).LogEntry
var F=r.defineTag("LogEntryTip",function(t){var e
t.show=function(t,i){if(e){e.hide()
e=null}return r.mount(e=o(F).setData(t).setContainer(i).end(),i)}
t.prototype.container=function(t){return this._container}
t.prototype.setContainer=function(t){this._container=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("xl").flag("dark").setChildren(t[0]||o("div",t,0,this).flag("main"),2).synced((t[0].setContent([t[1]||o("div",t,1,0).flag("triangle"),n(this.data())>1?t[2]||o("div",t,2,0).flag("more").setText("..."):void 0,(t[3]||o(N,t,3,0)).bindData(this.data(),n(this.data())-1).end()],1),true))}
t.prototype.mount=function(){var t=this
t.dom().offsetWidth
t.flag("show")
return setTimeout(function(){return t.hide()},2500)}
t.prototype.setup=function(){this.render()
return this.autosize()}
t.prototype.autosize=function(){var t
let e=this.dom().innerText
let i=e.split("\n")
let n=Math.max.apply(Math,i.map(function(t){return t.length}))
let r=this.container().offsetWidth*.8
let o=r/(n*.6)
let s=Math.round(Math.min(Math.max(o,15),30))
this.css("fontSize",s+"px")
this.flag("overflows",o<15)
return this}
t.prototype.hide=function(){var t=this
if(t.hasFlag("hide")){return}t.flag("hide")
return setTimeout(function(){t.orphanize()
if(e==t){return e=null}},3e3)}})
var B=r.defineTag("SpaceView",function(t){t.prototype.dirty=function(t){return this._dirty}
t.prototype.setDirty=function(t){this._dirty=t
return this}
t.prototype.__activeNode={watch:"activeNodeDidSet",name:"activeNode"}
t.prototype.activeNode=function(t){return this._activeNode}
t.prototype.setActiveNode=function(t){var e=this.activeNode()
if(t!=e){this._activeNode=t}if(t!=e){this.activeNodeDidSet&&this.activeNodeDidSet(t,e,this.__activeNode)}return this}
t.prototype.__activeWidget={watch:"activeWidgetDidSet",name:"activeWidget"}
t.prototype.activeWidget=function(t){return this._activeWidget}
t.prototype.setActiveWidget=function(t){var e=this.activeWidget()
if(t!=e){this._activeWidget=t}if(t!=e){this.activeWidgetDidSet&&this.activeWidgetDidSet(t,e,this.__activeWidget)}return this}
t.prototype.shortcuts=function(t){return this._shortcuts}
t.prototype.setShortcuts=function(t){this._shortcuts=t
return this}
t.prototype.__showInspector={watch:"markLayout",name:"showInspector"}
t.prototype.showInspector=function(t){return this._showInspector}
t.prototype.setShowInspector=function(t){var e=this.showInspector()
if(t!=e){this._showInspector=t}if(t!=e){this.markLayout&&this.markLayout(t,e,this.__showInspector)}return this}
t.prototype.__showNavDrawer={watch:"markLayout",name:"showNavDrawer"}
t.prototype.showNavDrawer=function(t){return this._showNavDrawer}
t.prototype.setShowNavDrawer=function(t){var e=this.showNavDrawer()
if(t!=e){this._showNavDrawer=t}if(t!=e){this.markLayout&&this.markLayout(t,e,this.__showNavDrawer)}return this}
t.prototype.__mode={watch:"modeDidSet",name:"mode"}
t.prototype.mode=function(t){return this._mode}
t.prototype.setMode=function(t){var e=this.mode()
if(t!=e){this._mode=t}if(t!=e){this.modeDidSet&&this.modeDidSet(t,e,this.__mode)}return this}
t.prototype.__size={default:"auto",watch:"sizeDidSet",name:"size"}
t.prototype.size=function(t){return this._size}
t.prototype.setSize=function(t){var e=this.size()
if(t!=e){this._size=t}if(t!=e){this.sizeDidSet&&this.sizeDidSet(t,e,this.__size)}return this}
t.prototype._size="auto"
t.prototype.tab=function(t){return this._tab}
t.prototype.setTab=function(t){this._tab=t
return this}
t.prototype.__fontSize={default:12,watch:"fontSizeDidSet",name:"fontSize"}
t.prototype.fontSize=function(t){return this._fontSize}
t.prototype.setFontSize=function(t){var e=this.fontSize()
if(t!=e){this._fontSize=t}if(t!=e){this.fontSizeDidSet&&this.fontSizeDidSet(t,e,this.__fontSize)}return this}
t.prototype._fontSize=12
t.prototype.__userFontSize={watch:"userFontSizeDidSet",name:"userFontSize"}
t.prototype.userFontSize=function(t){return this._userFontSize}
t.prototype.setUserFontSize=function(t){var e=this.userFontSize()
if(t!=e){this._userFontSize=t}if(t!=e){this.userFontSizeDidSet&&this.userFontSizeDidSet(t,e,this.__userFontSize)}return this}
t.prototype.__sidebarWidth={watch:"syncStyleVar",unit:"px",reflow:true,name:"sidebarWidth"}
t.prototype.sidebarWidth=function(t){return this._sidebarWidth}
t.prototype.setSidebarWidth=function(t){var e=this.sidebarWidth()
if(t!=e){this._sidebarWidth=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__sidebarWidth)}return this}
t.prototype.syncStyleVar=function(t,e,i){let n=i.name
let r=i.unit
this.dom().style.setProperty("--"+n,r?t+r:t)
if(i.reflow){return this.space().emit("reflow")}}
t.prototype.userFontSizeDidSet=function(t){return this.setFontSize(t),t}
t.prototype.fontSizeDidSet=function(t){this.setFlag("fontSize","fs"+t)
if(true){this.api().setFontSize(t)}if(this._mounted){return this.reflow()}}
t.prototype.hasTouchInterface=function(){return this.hasFlag("touch-ux")}
t.prototype.space=function(){return this.data()}
t.prototype.browser=function(){return this.space().browser()}
t.prototype.model=function(){return this.space().model()}
t.prototype.branch=function(){return this.space().branch()}
t.prototype.timeline=function(){return this.space().timeline()}
t.prototype.client=function(){return this.data().client()}
t.prototype.setup=function(){if(true){this.setUserFontSize(this.api().fontSize())}this._autoFontSize=this.userFontSize()||12
this._dirty=u.SIZE
if(true){if(this.api().ua().isPhone()){this.setSize("phone")}else if(this.api().ua().isTablet()){this.setSize("tablet")}this._shortcuts=new Mousetrap(document.body)
this.data().actions().trap(this._shortcuts,"space")}return this}
t.prototype.mount=function(){var t=this
t._mounted=true
t.setTabindex(0)
t.space().emit("mounted")
t._onresized=new l(function(){t._dirty|=u.SIZE
return t.reflow()})
t._onresize=function(){t._resized=true
return t._onresized.delay(200)}
t._onreflow=function(){t._resized=false
return t.reflow()}
t._onwheel=function(t){let e=t.deltaX
if(e!=0){return t.preventDefault()}}
window.addEventListener("resize",t._onresize,true)
window.addEventListener("orientationchange",t._onreflow,true)
document.addEventListener("wheel",t._onwheel,true)
t.api().on("reflow",t._onreflow)
if(t.api().isEmbed()&&!M&&t.space().timeline().audio){M={}
setTimeout(function(){if(t.space().timeline().audio()){M=new O.HTML5Adapter(t.space().timeline().audio())
return M.ready()}},10)}if(t.model().group()&&t.model().privacy=="internal"&&!t.model().group().membership(t.api().uid())){t.uxa().open(o(x).flag("modal").setDismissable(false).bindData(t.model(),"group",[]).setCast(t.model()).end())}t.mountLogAlerts()
return t}
t.prototype.mountLogAlerts=function(){var t=this
let e=[]
let i=function(){let i=e[e.length-1]
let n=t.space().timeline().currentOffset()
if(i&&Math.abs(n-i.timeOffset())<1e3){F.show(e.map(function(t){return t._params}),t._viewport.dom())}return e=[]}
return t.space().on("log",function(t){e.push(t)
return e.TIMEOUT||(e.TIMEOUT=setTimeout(i,15))})}
t.prototype.unmount=function(){var t;(t=this.space())&&t.emit&&t.emit("unmounted")
window.removeEventListener("resize",this._onresize,true)
window.removeEventListener("orientationchange",this._onreflow,true)
document.removeEventListener("wheel",this._onwheel,true)
this.api().un("reflow",this._onreflow)
if(this._modeNotification){this._modeNotification.hide()
this._modeNotification=null}return this}
t.prototype.dispose=function(){var t=this
t._activeEl=null
t._controls&&t._controls.dispose&&t._controls.dispose()
t._shortcuts&&t._shortcuts.disable&&t._shortcuts.disable()
t._shortcuts=null
t.render=function(){return t}
return t}
t.prototype.alert=function(t,e){return m.show(t,e)}
t.prototype.box=function(){return this._box||(this._box={top:0,left:0,width:window.innerWidth,height:window.innerHeight})}
t.prototype.modeDidSet=function(t,e){if(this._modeNotification){this._modeNotification.hide()
this._modeNotification=null}let i
if(t=="paused"&&e=="playing"&&this.space().timeline().progress()<.99){i="_pause_ paused"}else if(t=="playing"&&e=="paused"&&this.space().timeline().currentTime()>50){i="_play_ resumed"}else if(t=="editing"&&this.branch().isLocal()){this.trigger("enterplayground")
i="You have entered playground mode â click the play button to resume watching"
return this.alert(this._modeNotification=o(m).flag("info").flag("l").setSticky(true).setText(i).end())}if(i){return this.alert(this._modeNotification=o(m).flag("system").setText(i).end())}}
t.prototype.checkActiveWidget=function(){var t
var e=document.activeElement
if(e&&e._tag&&this._viewport.contains(e)){return this.setActiveWidget(t=L.callClosest(e._tag,"focusWidgetForNode")),t}}
t.prototype.activeNodeDidSet=function(t,e){var i
if(t&&this._viewport.contains(t)){return this.setActiveWidget(i=L.callClosest(t,"focusWidgetForNode")),i}}
t.prototype.activeWidgetDidSet=function(t,e){this.log("activeWidgetDidSet",t&&t.TYPE,e&&e.TYPE)
if(e){this._prevActiveWidget=e}this.space().agent().setFocus(t)
if(!this.browser().windowed()){if(t==this.browser()){this.browser().setMinimized(false),false}if(e==this.browser()){return this.browser().setMinimized(true),true}}}
t.prototype.sizeDidSet=function(t,e){this.setFlag("size","size-"+t)
this.flagIf("centered",t&&t!="auto")
if(this._mounted){return this.reflow()}}
t.prototype.checkActiveElement=function(){this.setActiveNode(r.getTagForDom(document.activeElement))
return this}
t.prototype.focusViewport=function(){if(!this._viewport.contains(document.activeElement)){this._viewport.dom().focus()}return this}
t.prototype.reflow=function(){var t=this
var e=t._viewport&&t._viewport.dom()
if(!e){return}if(t._reflowing){return}var i=t._box
var n=e.getBoundingClientRect()
var r=n.width
var o=n.height
if(r==0){return}t._reflowing=true
t._box={top:Math.round(n.top),left:Math.round(n.left),width:Math.round(n.width),height:Math.round(n.height)}
if(!t.userFontSize()){let e=t._autoFontSize
t._autoFontSize=r<500?10:r<900?11:r<1280?12:13
if(t.fontSize()==e){t.setFontSize(t._autoFontSize)}}t._dirty|=u.SIZE
var s=r*o
if(s>0&&s<36e4&&!t.hasFlag("touch-ux")){t.flag("touch-controls")}t.flag("touch-ux",s<36e4&&"ontouchstart"in window)
t.flag("portrait",o>=r)
t.flag("landscape",o<r)
t.flag("sidebar-float",r<700)
if(t._dirty){t.flag("reflowing")
clearTimeout(t._reflowTimeout)
t._reflowTimeout=setTimeout(function(){return t.unflag("reflowing")},300)}t.space().agent().setVw(t._box.width)
t.space().agent().setVh(t._box.height)
t.space().emit("resize")
t.space().emit("reflow",t._dirty)
t.space().emit("resized")
t._dirty=0
t._reflowing=false
return t}
t.prototype.onfocusin=function(t){return}
t.prototype.onfocusout=function(t){return}
t.prototype.getStyleVar=function(t){var e=window.getComputedStyle(this.dom())
var i=e.getPropertyValue("--"+t)
return i}
t.prototype.setStyleVar=function(t,e){this.dom().style.setPropertyValue("--"+t,e)
return this}
t.prototype.targetForPointer=function(t){let e=this.space().browser()
if(this.space().agent().focus()==e&&!e.windowed()&&!e.minimized()&&!e.node().contains(t)){return e.node()}let i=t.closest("[data-sref]")
return i?i._tag||i:null}
t.prototype.lookup=function(t){if(t instanceof Element){return t._tag}if(t instanceof r.Tag){return t}if(!(typeof t=="string"||t instanceof String)){t=a.pathToStr(t)}let e=this.dom().querySelector('[data-sref="'+t+'"]')
return e?e._tag:null}
t.prototype.layoutForNode=function(t){var e
if(!(t instanceof r.Tag)){return null}if(t.nodeForLayout){t=t.nodeForLayout()}if(t.layoutForNode){return t.layoutForNode(this)}var i=t._dom||t
if(!this.dom().contains(i)){return null}let n=i.getBoundingClientRect()
let o=[Math.round(n.top-this.box().top),Math.round(n.left-this.box().left),Math.round(n.width),Math.round(n.height),(e=t)&&e.layoutMask&&e.layoutMask()||0]
return o}
t.prototype.pushNodeLayout=function(t,e){if(!this.space().isEditing()){return}var i=t.sref()
e||(e=this.layoutForNode(t))
var n=this.space().branch().stream().layouts()[i]
if(String(e)!=String(n)){this.log("force add layout!",i,e,n)
this.branch().push_(c.NODE_LAYOUT,[i,e],{})}return t}
t.prototype.oncontextmenu=function(t){return t.prevent().halt()}
t.prototype.onannotate=function(t,e){t.stop()
e.startAnnotating()
return this.dom().focus()}
t.prototype.onask=function(t){t.halt()
return this._drawer&&this._drawer.onask&&this._drawer.onask(t)}
t.prototype.onbrushupstop=function(t){t.halt()
return this.branch().stopAnnotating()}
t.prototype.oneditstart=function(t,e){e.startEditing()
return t.halt()}
t.prototype.oneditstop=function(t,e){t.halt()
return e.stopEditing()}
t.prototype.onrecstart=function(t,e){t.halt()
e.space().navigateTo(e)
return this.uxa().open(o(g).setData(e).end())}
t.prototype.onrecstop=function(t,e){t.halt()
e.stopRecording()
return this}
t.prototype.onspacezip=function(t){t.halt()
let e=this.space().cursor().current().index()
if(!this.space().branch().isLocal()){this.uxa().flash("Generating .zip")
return window.location="/casts/"+this.space().branch().id()+".zip?index="+e}else{return this.uxa().flash("You need to save before downloading .zip")}}
t.prototype.onspacefork=async function(t){var e=this.space().clone()
this.log("onspaceclone",t,e)
await this.api().tryLogin()
if(!this.api().user()){return}return this.uxa().open(o(w).setData(e).end())}
t.prototype.onspaceclone=async function(t){this.log("onspaceclone",t)
var e=await this.api().rpc("castClone",[this.space().branch().id()],{models:true})
if(e){return App.router().go(e.url())}}
t.prototype.onspacemenu=function(t){t.halt()
return t.uxa().open(o(y).bindData(this,"space",[]).end())}
t.prototype.onshowannotation=function(t,e){t.halt()
return this.space().setAnnotation(e),e}
t.prototype.onbranchsave=async function(t,e){var i
t.halt()
this.log("onbranchsave",e)
await this.api().tryLogin()
if(!this.api().user()){return}if(e.isLocal()){if(e.type()=="note"){e.model().privacy="private"}return e.save()}var n=a.clone(e.model())
n.stream=e.model().stream().toJSON()
n.snapshot=e._initialSnapshot
i=n.id,delete n.id,i
this.log("params is",n)
return this.uxa().open(o(w).setData(n).end())}
t.prototype.onbranchdiscard=function(t,e){t.halt()
e.discard()
return this}
t.prototype.onbranchpublish=function(t,e){t.halt()
return this.uxa().open(o(_).setData(e).end())}
t.prototype.onbranchunpublish=async function(t,e){t.halt()
var i=await t.uxa().confirm("Are you sure you want to unpublish '"+e.title()+"'?")
if(!i){return}return e.unpublish()}
t.prototype.onbranchenter=function(t,e){t.halt()
return this.space().navigateTo(e)}
t.prototype.onbranchdelete=async function(t,e){t.halt()
var i=await t.uxa().confirm("Are you sure you want to delete '"+e.title()+"'?")
if(!i){return}if(this.space().branch()==e){this.space().navigateTo(this.space().trunk())}return await e.model().update({archived_at:new Date})}
t.prototype.onnotedel=async function(t,e){t.halt()
var i=await t.uxa().confirm("Are you sure you want to delete '"+e.title+"'?")
if(!i){return}if(this.space().branch().model()==e){this.space().navigateTo(this.space().trunk())}await e.destroy()
return this}
t.prototype.onnotediscard=async function(t,e){t.halt()
let i=await this.space().resolveBranchForModel(e)
if(i&&e.isLocal()){return i.discard()}}
t.prototype.onnotesave=async function(t,e){t.halt()
let i=await this.space().resolveBranchForModel(e)
return this.onbranchsave(t,i)}
t.prototype.onbrowsertoggle=function(t){t.halt()
if(this.space().simulator()){this.space().simulator().setVisible(false)}this.space().browser().setVisible(!this.space().browser().visible())
return this}
t.prototype.onconsoletoggle=function(t){var e
t.halt()
return this.space().console().setEnabled(e=!this.space().console().enabled()),e}
t.prototype.onbrowserrun=function(t){t.halt()
this.space().browser().run()
return this}
t.prototype.onnewfile=function(t){t.halt()
return this.uxa().open(o(b).bindData(this,"space",[]).end())}
t.prototype.onplay=function(t){t.halt()
var e=this.space().timeline()
if(e.isPaused()){e.play()
return this.trigger("spaceplay")}}
t.prototype.ontoggleplayback=function(t,e){t.halt()
var i=e||this.space().timeline()
if(i.isPlaying()){i.pause()
return this.trigger("spacepaused")}else if(i.isPaused()){i.play()
return this.trigger("spaceplay")}}
t.prototype.resume=function(){if(this.space().timeline().isPaused()){this.space().timeline().play()
this.trigger("spaceplay")
this.dom().focus()}return this}
t.prototype.ondependencyadd=function(t){t.halt()
this.log("ondependencyadd")
return this.uxa().open(o(T).bindData(this,"space",[]).end())}
t.prototype.oncontrolsevent=function(t){if(t.event()instanceof Event){return}return t.redirect(this)}
t.prototype.onactionevent=function(t){if(t.event()instanceof Event){return}return t.redirect(this)}
t.prototype.ontoggledrawer=function(t){t.halt()
return this._drawer.toggle()}
t.prototype.onimportslides=function(t){t.halt()
var e=window.prompt("Link to presentation")
if(e&&e.match(/google\.com(.*)\/pub/)){return this.space().slides().importFromGoogleSlides(e)}else{return this.uxa().flash("Link must be to a 'Publish to the web' link from Google Slides")}}
t.prototype.onreimportslides=function(t){t.halt()
if(this.space().slides().url()){return this.space().slides().importFromGoogleSlides(this.space().slides().url())}}
t.prototype.ongoto=function(t,e){t.halt()
return this.space().navigateTo(e)}
t.prototype.markLayout=function(t,e,i){this.flag(i.name,!!t)
return this._dirty|=u.LAYOUT}
t.prototype.synced=function(){t.prototype.__super__.synced.apply(this,arguments)
if(this._dirty||!this._ow){this.reflow()}return this}
t.prototype.editor=function(){let t=this.$$||(this.$$={})
return this._editor||(this._editor=this._editor||o(p,this).flag("editor")).bindData(this.space(),"primaryEditor",[]).end()}
t.prototype.drawer=function(){let t=this.$$||(this.$$={})
return this._drawer||(this._drawer=this._drawer||o(D,this).flag("drawer")).bindData(this.space(),"model",[]).setSpace(this.space()).end()}
t.prototype.titlebar=function(){let t=this.$$||(this.$$={})
return this._titlebar||(this._titlebar=this._titlebar||o(E,this).flag("titlebar").setEnabled(true)).bindData(this,"space",[]).end()}
t.prototype.sidebar=function(){let t=this.$$||(this.$$={})
return this._sidebar||(this._sidebar=this._sidebar||o(C,this).flag("sidebar")).bindData(this.space(),"sidebar",[]).end()}
t.prototype.render=function(){var t=this.$,e,i
if(false){}if(this.data().readyState()=="init"||this.data().readyState()=="disposing"){return this}let n=this.data().readyState()=="complete"
if(n){this.flag("browser-on",this.data().browser().visible())
this.flag("simulator-on",(e=this.data().simulator())&&e.enabled&&e.enabled())
this.setShowInspector(this.data().console().enabled())
this.setShowNavDrawer(this.drawer().enabled())
this.setMode(this.space().timeline().playState())
this.flag("play",this.data().timeline().isPlaying())
this.setFlag("playstate","ps-"+this.data().timeline().state())
this.flag("is-annotating",this.branch().isAnnotating())
this.flag("ws-unstable",this.branch().syncer().latency()>1500)
this.flag("can-edit",this.branch().canEdit())
this.flag("unsaved",this.branch().isLocal())
this.flag("mine",this.branch().isMine())
this.setSidebarWidth(this.space().sidebar().width())
this.checkActiveElement()}if(this.space()._isNavigating){return}return this.$open(0).flag("resize").flag("night").setFlag(-1,"trunk-"+this.space().trunk().type()).setFlag(-2,this.space().state()).setFlag(-3,this.space().branch().type()).setChildren([this.drawer().end(),(i=this._viewport=this._viewport||(i=o(R,this)).flag("viewport")).setContent([this.titlebar().end(),this.editor().end(),this.space().inspector().node().end(),this.sidebar().end(),n&&this.space().simulator()?this.space().simulator().node().end():void 0,this.space().browser().node().end(),this.space().slides().node().end(),(this._pointer=this._pointer||o(h,i).flag("pointer")).bindData(this,"space",[]).end(),this.space().type()=="tutorial"?(t[0]||o(I,t,0,i)).bindData(this,"space",[]).setEnabled(this.space().timeline().currentTime()==0&&this.space().isPaused()&&this.branch()==this.space().trunk()).end():void 0,this.space().type()=="lab"?(t[1]||o(f,t,1,i)).bindData(this.space(),"model",[]).setSpace(this.space()).end():void 0],1).end(),this.branch().isAnnotating()?(t[2]||o(d,t,2,this).setEnabled(true)).bindData(this,"space",[]).end():void 0,(t[3]||o(P,t,3,this)).bindData(this,"space",[]).end()],1).synced()}})
e.SpaceView=B},function(t,e){function i(t){return t?t.toArray?t.toArray():t:[]}var n=e.Theme={base:"vs-dark",inherit:false,named:{background:"282f33",foreground:"D4D4D4",keyword:"ea9b80",operator:"ea9b80",string:"B7DE95",number:"598DA6",bool:"598DA6",symbol:"B7DE95",regex:"FD9231",regexgroup:"FFB26D",comment:"5D6E7A",constant:"BD9AC2",identifier:"d4d4d4",xml:"D9BB72",xmlref:"d2845f",decl:"75AAFF",key:"a7c9de",lineNumber:"3b4750",agentCursor:"89b0fc",localCursor:"ffe796",lvar:"dcdbc7",limport:"91b7ea",string:"7da4b7",tagbase:"D9BB73",tagname:"D9BB73",tagstr:"a0c6ca",tagop:"d17e53",tagbracket:"8e7f54",tagattr:"D9BB73",tagmodifier:"f6d18d",taglistener:"f6d18d",special:"ffdb59"},toMonaco:function(){var t=JSON.stringify(this)
var e=this.named
t=t.replace(/@(\w+)/g,function(t,i){return e[i]||t})
return JSON.parse(t)},toTheme:function(){var t,e
var n=this.toMonaco()
var r=n.tokenColors=[]
for(let t=0,e=i(n.rules),o=e.length,s;t<o;t++){s=e[t]
if(!s.foreground){continue}let i={name:s.token,scope:s.token,settings:{foreground:"#"+s.foreground}}
r.push(i)}t=n.rules,delete n.rules,t
e=n.colors,delete n.colors,e
n.type="dark"
n.name="Imba Dark"
return n},rules:[{token:"",foreground:"@foreground",background:"@background"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"@keyword"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"identifier",foreground:"@identifier"},{token:"identifier.const",foreground:"@constant"},{token:"identifier.const.class",foreground:"@decl"},{token:"identifier.class",foreground:"@decl"},{token:"identifier.const.tag",foreground:"@decl"},{token:"identifier.decl",foreground:"@decl"},{token:"identifier.tag",foreground:"@decl"},{token:"identifier.def",foreground:"@decl"},{token:"identifier.key",foreground:"@key"},{token:"identifier.env",foreground:"@keyword"},{token:"identifier.special",foreground:"@special"},{token:"identifier.import",foreground:"@limport"},{token:"entity.name.type",foreground:"@decl"},{token:"entity.name.function",foreground:"@decl"},{token:"entity.name.tag",foreground:"@xml"},{token:"storage.type.function",foreground:"@keyword"},{token:"storage.type.class",foreground:"@keyword"},{token:"comment",foreground:"@comment"},{token:"operator",foreground:"@operator"},{token:"number",foreground:"@number"},{token:"number.hex",foreground:"@number"},{token:"numeric.css",foreground:"@number"},{token:"regexp",foreground:"@regex"},{token:"regexp.escape",foreground:"@regexgroup"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"boolean",foreground:"@bool"},{token:"constant.numeric",foreground:"@number"},{token:"constant.language.boolean",foreground:"@bool"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.access.imba",foreground:"DCDCDB"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"delimiter.eq.tag",foreground:"ea9b7c"},{token:"tag",foreground:"@tagbase"},{token:"tag.name",foreground:"@tagname"},{token:"tag.open",foreground:"@tagbracket"},{token:"tag.close",foreground:"@tagbracket"},{token:"tag.attribute",foreground:"@tagattr"},{token:"tag.attribute.listener",foreground:"@taglistener"},{token:"tag.attribute.modifier",foreground:"@tagmodifier"},{token:"paren.open.tag",foreground:"@taglistener"},{token:"paren.close.tag",foreground:"@taglistener"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"@xml"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"@key"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"@key"},{token:"attribute.value",foreground:"@number"},{token:"attribute.value.number.css",foreground:"@number"},{token:"attribute.value.unit.css",foreground:"@number"},{token:"attribute.value.hex.css",foreground:"@number"},{token:"string",foreground:"@string"},{token:"string.sql",foreground:"@string"},{token:"keyword",foreground:"@keyword"},{token:"keyword.flow",foreground:"@keyword"},{token:"keyword.json",foreground:"@keyword"},{token:"keyword.flow.scss",foreground:"@keyword"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"},{token:"entity.name.selector.css",foreground:"@xml"},{token:"support.type.property-name.css",foreground:"@decl"},{token:"meta.object-literal.key",foreground:"@key"}],colors:{foreground:"#@foreground","editor.background":"#282f33","editorGutter.background":"#282f33","editor.selectionBackground":"#30455f","editorLineNumber.foreground":"#5D6E7A","editorWidget.background":"#20262a","editorWidget.border":"#20262a","list.focusBackground":"#33393f","list.hoverBackground":"#282f33","list.highlightForeground":"#ffffff","input.foreground":"#ffffff","editorSuggestWidget.foreground":"#@foreground","editorHoverWidget.background":"#20262a","editorCursor.foreground":"#@agentCursor"}}
if(true){window.TTH=n}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(29).AudioManager
var p=i(20).ScrimbaGesture
var l=i(45).Segment
var h=i(2).ACTION
var d=i(1),f=d.Menu,m=d.MenuItem,y=d.Button,g=d.IconButton
var v=i(18).msToStr
var _={MUTED:"î£",CUT:"î",FF:"î°"}
var b=function(t,e){if(e===undefined)e=.5
return Math.round(t/e)*e}
var x=o.defineTag("RangeView",function(t){t.prototype.timeline=function(t){return this._timeline}
t.prototype.setTimeline=function(t){this._timeline=t
return this}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){this._data=t
return this}
t.prototype.left=function(){return b(this.timeline().offset2px(this.data().start()))}
t.prototype.right=function(){return b(this.timeline().offset2px(this.data().end()))}
t.prototype.width=function(){return b(this.data().span()*this.timeline().ppms())}
t.prototype.render=function(){return this.$open(0).css("left",this.left()).css("width",this.width()).synced()}})
var w=o.defineTag("SegmentView",x,function(t){let e=["cue","audio","loop"]
t.prototype.render=function(){var t=this.$
let i=this.data().data()[3]
let n=i?this.data().span()/i:0
let r=this.left()
let o=this.right()-r+1
let s=this.data().options()
return this.$open(0).setFlag(-1,e[this.data().data()[0]]).flagIf("selected",this.data()._selected).css("left",r).css("width",o).setChildren([(t[0]||u("div",t,0,this).flag("handle").flag("left").dataset("gesture","segmove,start")).bindData(this,"data",[]).end(),(t[1]||u("div",t,1,this).flag("handle").flag("right").dataset("gesture","segmove,end")).bindData(this,"data",[]).end(),(t[2]||u("div",t,2,this).flag("middle").dataset("gesture","move")).end(),(t[3]||u("div",t,3,this).flag("label")).setContent([i>0?(t[4]||u("span",t,4,3).flag("dur")).setContent(i+"ms",3):i==0?t[5]||u("span",t,5,3).flag("dur").setText("â"):i<0?(t[6]||u("span",t,6,3).flag("dur")).setContent(this.data().span()+"ms",3):void 0,false?true:void 0],1),s&&this.timeline().isOffsetBased()?(t[7]||u("div",t,7,this).flag("subrange")).css("left",b(this.timeline().offset2px(s[0])-r)).css("width",b(s[1]*this.timeline().ppms())).end():void 0],1).synced()}
t.prototype.ontap=function(t){t.halt()
return this.trigger("segsel",this.data())}})
var T=o.defineTag("OffsetView",function(t){t.prototype.__left={watch:"draw",name:"left"}
t.prototype.left=function(t){return this._left}
t.prototype.setLeft=function(t){var e=this.left()
if(t!=e){this._left=t}if(t!=e){this.draw&&this.draw(t,e,this.__left)}return this}
t.prototype.draw=function(){return this.css({transform:"translateX("+this.left()+"px)"})}})
var S=o.defineTag("TimelineCanvas",function(t){t.prototype.cues=function(t){return this._cues}
t.prototype.setCues=function(t){this._cues=t
return this}
t.prototype.pxps=function(t){return this._pxps}
t.prototype.setPxps=function(t){this._pxps=t
return this}
t.prototype.startOffset=function(t){return this._startOffset}
t.prototype.setStartOffset=function(t){this._startOffset=t
return this}
t.prototype.startTime=function(t){return this._startTime}
t.prototype.setStartTime=function(t){this._startTime=t
return this}
t.prototype.endTime=function(t){return this._endTime}
t.prototype.setEndTime=function(t){this._endTime=t
return this}
t.prototype.options=function(t){return this._options}
t.prototype.setOptions=function(t){this._options=t
return this}
t.prototype.__currentOffset={watch:"currentOffsetDidSet",name:"currentOffset"}
t.prototype.currentOffset=function(t){return this._currentOffset}
t.prototype.setCurrentOffset=function(t){var e=this.currentOffset()
if(t!=e){this._currentOffset=t}if(t!=e){this.currentOffsetDidSet&&this.currentOffsetDidSet(t,e,this.__currentOffset)}return this}
t.prototype.markedRange=function(t){return this._markedRange}
t.prototype.setMarkedRange=function(t){this._markedRange=t
return this}
t.prototype.markers=function(t){return this._markers}
t.prototype.setMarkers=function(t){this._markers=t
return this}
t.prototype.timeline=function(){return this.data()}
t.prototype.cues=function(){return this.timeline().cues()}
t.prototype.viewRange=function(){return this._viewRange||this.data()._viewRange}
t.prototype.scrollLeft=function(){return this.startTime()*this.ppms()}
t.prototype.canvas=function(){let t=this.$$||(this.$$={})
return this._canvas=this._canvas||u("canvas",this).flag("canvas")}
t.prototype.build=function(){this._version=0
this._currentOffset=0
return this._defaults={clipColors:["#977f9e"],cutColor:"#c3c3c3",tickMinSpacing:10,tockMinSpacing:30,tickFontSize:10,actionsHeight:2}}
t.prototype.option=function(t,e){if(e===undefined)e=null
let i=this._options&&this._options[t]||this._defaults[t]
return i!=null?i:e}
t.prototype.setup=function(){return this._draws=0}
t.prototype.ppms=function(){return this.pxps()/1e3}
t.prototype.startTime=function(){return this.cues().offsetToTime(this.startOffset())}
t.prototype.startValue=function(){return this.isOffsetBased()?this.startOffset():this.startTime()}
t.prototype.isOffsetBased=function(){return!!this.options().renderCollapsed}
t.prototype.isTimeBased=function(){return!this.isOffsetBased()}
t.prototype.xToTimeOffset=function(t,e){if(e===undefined)e=0
let i=this.dom().getBoundingClientRect()
let n=this.startValue()+(t-i.left)/this.ppms()
if(this.isTimeBased()){n=this.cues().timeToOffset(n)}return e?Math.round(n*e)/e:n}
t.prototype.screenx2val=function(t){var e
let i=this.dom().getBoundingClientRect()
return e=this.startValue()+(t-i.left)/this.ppms()}
t.prototype.absTimeToX=function(t,e){if(e===undefined)e=0
let i=(t-this.startTime())*this.ppms()
return e?Math.round(i*e)/e:i}
t.prototype.round=function(t,e){if(e===undefined)e=0
return e?Math.round(t*e)/e:t}
t.prototype.px2val=function(t){return this.startValue()+t/this.ppms()}
t.prototype.time2px=function(t){if(this.isOffsetBased()){return this.offset2px(this.cues().timeToOffset(t))}return(t-this.startTime())*this.ppms()}
t.prototype.offset2px=function(t){if(this.isTimeBased()){return this.time2px(this.cues().offsetToTime(t))}return(t-this.startOffset())*this.ppms()}
t.prototype.offset2val=function(t){return this.isOffsetBased()?t:this.cues().offsetToTime(t)}
t.prototype.time2val=function(t){return this.isTimeBased()?t:this.cues().timeToOffset(t)}
t.prototype.val2offset=function(t){return this.isOffsetBased()?t:this.cues().timeToOffset(t)}
t.prototype.val2time=function(t){return this.isTimeBased()?t:this.cues().offsetToTime(t)}
t.prototype.yScale=function(){return.6}
t.prototype.showCues=function(){return true}
t.prototype.dpr=function(){return this._dpr||(this._dpr=window.devicePixelRatio)}
t.prototype.vh=function(){return this._vh}
t.prototype.vw=function(){return this._vw}
t.prototype.invalidated=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
let n=this._guard||[]
this._guard=i
for(let t=0,e=r(i),o=e.length;t<o;t++){if(i[t]!=n[t]){this._version++
return true}}return false}
t.prototype.drawClips=function(t,e){var i
var e=this.canvas().dom().getContext("2d")
let n=this.ppms()
var o=this.option("clipColors").slice()
var s=0
let a=this.startOffset()
let u=this.val2offset(this.startValue()+this._vw/n)
let c=this.startTime()
let p=c+this._vw/n
let l=this.isOffsetBased()?a:c
let h=this.isOffsetBased()?u:p
let d=Math.round(this._vh*this.option("waveAnchorY",.5)*this.dpr())
let f=this.vh()*.5/128*this.dpr()*-1*this.yScale()
let m=[]
e.save()
for(let n=0,a=r(t),u=a.length,c;n<u;n++){c=a[n]
let t=this.isOffsetBased()?c.o0:c.t0
let r=this.isOffsetBased()?c.o1:c.t1
let u=this.time2px(c.t0)
let p=this.time2px(c.t1)
let y=this.offset2px(c.o0)
let g=this.offset2px(c.o1)
let v=this.isOffsetBased()?y:u
let b=this.isOffsetBased()?g:p
let x=(i=c.source).COLOR||(i.COLOR=o[s++%o.length])
let w=c.source._wave
let T=c.cue
if(b-v==0){continue}if(v>this._vw||b<0){continue}let S=c.skip||0
let k=S
let A=r-t
if(this.isOffsetBased()&&c.realSkip){S=k=c.realSkip}if(this.pxps()<10){let t=Math.ceil(44100/(this.pxps()*this.dpr()))
w=w._lowres||(w._lowres=w.resample({scale:t}))}if(true){if(l>t){let e=l-t
S+=e
A-=e}if(r>h){A-=r-h}}let C=Math.max(w.at_time(S/1e3),0)
let E=Math.min(w.at_time((S+A)/1e3),w.offset_end)
let D=w.seconds_per_pixel
e.save()
e.fillStyle=c.cue?this.option("cutColor"):x
e.beginPath()
if(this.isOffsetBased()){e.translate(this.offset2px(t-k)*this.dpr(),d)}else{e.translate(this.time2px(t-k)*this.dpr(),d)}e.scale(this.dpr()*D*this.pxps(),f)
let P=C
while(P<E){e.lineTo(P,w.at(P*2))
P++}while(P>C){e.lineTo(--P,w.at(P*2+1))}e.closePath()
e.fill()
e.restore()
if(T&&m.indexOf(T)==-1){m.push(T)
e.save()
let t=v
let i=this.isOffsetBased()?this.offset2px(T.o1):this.time2px(T.t1)
let n=this.option("minimap")?10:this._vh*.3
e.strokeStyle=this.option("cutColor")
e.lineWidth=this.option("minimap")?1/this.dpr():1
e.translate(0,d)
e.scale(this.dpr(),this.dpr())
e.beginPath()
let r=_.MUTED
let o=7
if(T.duration==0){e.moveTo(t,-n)
e.lineTo(i,n)
e.moveTo(t,n)
e.lineTo(i,-n)
r=_.CUT}else if(T.duration<T.o1-T.o0){r=_.FF}e.strokeRect(t,-n,i-t,n*2)
this.drawIcon(e,t+(i-t)*.5,-n,o*this.dpr(),r)
e.stroke()
e.restore()}}return this}
t.prototype.drawIcon=function(t,e,i,n,r,o){if(this.option("minimap")){return}t.save()
t.font="normal "+n+"px 'scrimbacon'"
t.textAlign="center"
t.textBaseline="middle"
t.fillText(r,e,i)
return t.restore()}
t.prototype.ctx=function(){return this._ctx||(this._ctx=this.canvas().dom().getContext("2d"))}
t.prototype.draw=async function(){var t=this.pxps()
let e=this._vw=this.dom().offsetWidth
let i=this._vh=this.dom().offsetHeight
let n=!this.options().renderCollapsed
if(t==undefined&&this.endTime()){t=e/(this.endTime()/1e3)
this._pxps=t}if(!(this.invalidated(this.startOffset(),this.startTime(),t,this.cues().version(),e,i,n)&&e)){return this}let o=Date.now()
this._t=o
var s=++this._draws
for(let t=0,e=r(this.cues().audio()),i=e.length,n;t<i;t++){n=e[t]
n._wave=await c.instance().waveformForId(n[3])}if(s!=this._draws){return}var a=this.ctx()
this.canvas().dom().width=e*this.dpr()
this.canvas().dom().height=i*this.dpr()
let u=this.cues().audioclips(0,0,true)
this.drawTickLines(a)
this.drawClips(u)
this.drawActions(a)
this._wheelStartTime=null
return this}
t.prototype.drawTickLines=function(t){let e=this.pxps()
let i=0
let n=0
let r=0
let o=this.option("tickMinSpacing")
let s=this.option("tockMinSpacing")
let a=this.option("tickFontSize")
for(let t=0,i=[.05,.1,.25,.5,1,5,10,15,30,60,120,300,600,1200],a=i.length,u;t<a;t++){u=i[t]
if(e*u>o){n||(n=u)}if(e*u>s&&u>=1){r||(r=u)
break}}t.strokeStyle="#DDDDDD"
t.fillStyle="#CCCCCC"
t.beginPath()
t.font=""+a*this.dpr()+"px sans-serif"
t.textAlign="center"
t.textBaseline="bottom"
let u=t.measureText("0:00").width
let c=0
let p=this.ppms(),l=this.dpr()
let h=[]
let d=this.startOffset()
if(this.option("renderTimeTicks")){while(c<this._vw){c=this.time2px(i)
if(c>=0){h.push([c,0,v(i),i])}i+=n*1e3}}let f=Math.round(a*.5)*l
let m=this._vw*l
let y=u*.5+2*l
for(let e=0,i=h.length,n;e<i;e++){n=h[e]
let i=n[0]*l
let o=n[1]*this._vh*l
let s=n[2]
let a=n[3]
let u=a%(r*1e3)==0
let c=u?f*2:f*5
if(i>=m){continue}t.beginPath()
t.strokeStyle=u?"#D2D2D2":"#e0e0e0"
t.lineWidth=1
t.moveTo(i,c)
t.lineTo(i,this._vh*l-c)
t.stroke()
if(u){t.textBaseline=o?"bottom":"top"
t.textAlign="left"
t.fillText(s,i+4*l,o?o-f:c-2*l)}}return this}
t.prototype.getActions=function(){let t=this.timeline().branch().stream()
let e=t.actionAtOffset(this.startOffset())
let i=this.option("minimap")?t.duration():this.val2offset(this.startValue()+this._vw/this.ppms())
let n=this._lines={}
let r=(this.option("minimap")?3:2)/this.ppms()
while(e&&e.timeOffset()<i){let t=e.timeOffset()
let i=e._type
let o=n[i]||(n[i]=[])
let s=o[o.length-1]
if(s instanceof Array&&t-s[1]<r){s[1]=t}else if((typeof s=="number"||s instanceof Number)&&t-s<r){o[o.length-1]=[s,t]}else{o.push(t)}e=e._next}return n}
t.prototype.drawActionLayer=function(t,e,i,n,o){if(i instanceof Array){for(let s=0,a=r(i),u=a.length;s<u;s++){this.drawActionLayer(t,e,a[s],n,o)}return}let s=this.option("actionsHeight")||2
let a=e[i]
if(!a){return}let u=Math.max(this.ppms()*10,s/2)*this.dpr()
let c=(this._vh-this.option("tickFontSize")*2-o*(s*1.5))*this.dpr()
t.strokeStyle=n
t.lineWidth=s*this.dpr()
t.lineCap="round"
t.beginPath()
let p=0
let l=0
for(let e=0,i=r(a),n=i.length,o;e<n;e++){o=i[e]
let n=a[e+1]
if(o instanceof Array){p=this.offset2px(o[0])*this.dpr()
l=this.offset2px(o[1])*this.dpr()}else{p=this.offset2px(o)*this.dpr()
l=p+u}t.moveTo(p,c)
t.lineTo(l,c)}t.stroke()
return}
t.prototype.drawLines=function(t,e,i){if(i===undefined)i="#ff2c42"
t.strokeStyle=i
t.lineWidth=1*this.dpr()
t.lineCap="butt"
t.setLineDash([4*this.dpr(),2*this.dpr()])
t.beginPath()
for(let i=0,n=r(e),o=n.length;i<o;i++){let e=this.absTimeToX(n[i])*this.dpr()
t.moveTo(e,0)
t.lineTo(e,this._vh*this.dpr())}t.stroke()
return this}
t.prototype.drawActions=function(t){var e=this.getActions()
t.save()
this.drawActionLayer(t,e,h.LCSELECTION,"#e0929e",0)
this.drawActionLayer(t,e,[h.LCINSERT,h.LCDELETE,h.LCEDIT],"#91bba0",0)
this.drawActionLayer(t,e,h.POINTER_UPDATE,"#C3C3C3",1)
this.drawActionLayer(t,e,h.LAYOUT,"#FEC2BF",1)
this.drawActionLayer(t,e,[h.PAGE_LOAD,h.DOM_MUTATE,h.PAGE_LOG],"#66CCFF",2)
t.restore()
return this}
t.prototype.ontouchstart=function(t){let e=p.options(t,{data:this.data(),startValue:this.startValue(),startTime:this.startTime(),startOffset:this.startOffset()})
let i=t.button()
let n=t.event().altKey
let r=t.event().metaKey
let o=t.event().shiftKey
let s=e.type
if(!s){if(o&&n){s="mark"}else if(i==2||n){s="move"}else if(o){s="mark"
e.seek=true}else{s="seek"}}this.log("ontouchstart",i,n,r,o,s)
e.type=s
return p.wrap(t,e)}
t.prototype.ontouchend=function(t){if(t.dr()<10){this.trigger("segsel",null)}return this.trigger("autosave")}
t.prototype.oncontextmenu=function(t){return t.prevent().stop()}
t.prototype.onmoveupdate=function(t){let e=t.options().startValue-t.dx()/this.ppms()*2
this.trigger("showrange",{start:this.val2offset(e)})
return this}
t.prototype.onmoveend=function(t){return this}
t.prototype.onseekstart=function(t){this.timeline().setState("seeking")
return this.render()}
t.prototype.onseekupdate=function(t){return this.trigger("seek",{offset:this.val2offset(this.screenx2val(t.x()),1)})}
t.prototype.onseekend=function(t){var e
return this.timeline().setState(e=this.timeline().playState()),e}
t.prototype.onsegmoveinit=function(t){t.touch().capture()
let e=t.handler().data()
return this.trigger("segsel",e)}
t.prototype.onsegmovestart=function(t){let e=t.handler().data()
let i=t.options().start?e.start():e.end()
return t._adjustOffset=this.xToTimeOffset(t.x(),1)-i}
t.prototype.onsegmoveupdate=function(t){var e
if(e=t.handler().data()){if(t.options().start){e.setStart(this.xToTimeOffset(t.x(),1)-t._adjustOffset)}else{e.setEnd(this.xToTimeOffset(t.x(),1)-t._adjustOffset)}this.render()}return this}
t.prototype.onsegmoveend=function(t){let e=t.handler().data()
if(e.span()==0){this.cues().removeCue(e)
this.render()}return this}
t.prototype.onmarkstart=function(t){let e=this.xToTimeOffset(t.x(),1)
let i=e
if(t.options().seek){i=this.timeline().currentOffset()}this.setMarkedRange(t._seg=new l([0,i,e-i]))
t._seg._pin=i
this.trigger("segsel",t._seg)
return this.render()}
t.prototype.onmarkupdate=function(t){let e=this.xToTimeOffset(t.x(),1)
let i=t._seg._pin
if(e>i){t._seg.setStart(i)
t._seg.setEnd(e)}else{t._seg.setStart(e)
t._seg.setEnd(i)}if(t.options().seek){this.trigger("seek",{offset:e})}return this.render()}
t.prototype.onmarkend=function(t){var e=this,i
e.log("onmarkend")
let n=t._seg
let s=n.start()
let a=n.span()
if(!e._markedView){return}let c=null
for(let t=0,i=r(e.cues().cues()),o=i.length,a;t<o;t++){a=i[t]
if(s>=a.start()&&a.end()>=n.end()){c=a
break}}let p=function(t){var i
return e.setMarkedRange(null),null}
return e._markedView.uxa().open((i=i=u(f)).on$(0,["uxahide",p],e).setContent(c?(i.$.A||u(m,i.$,"A",i).setLabel("Set speedup audio")).on$(0,["activate",["setCueAudio",c,s,a]],e).end():o.static([(i.$.B||u(m,i.$,"B",i).setLabel("Cut")).setAction(["segcreate",0,s,a,0]).end(),(i.$.C||u(m,i.$,"C",i).setLabel("Silence")).setAction(["segcreate",0,s,a,-1]).end(),(i.$.D||u(m,i.$,"D",i).setLabel("Speedup")).setAction(["segcreate",0,s,a,500]).end(),(i.$.E||u(m,i.$,"E",i).setLabel("Loop playback")).setAction(["loopcreate",2,s,a]).end()],2,1),3).end())}
t.prototype.setCueAudio=function(t,e,i){this.log("setCueAudio",t,e,i)
if(t.duration()>0){t.setDuration(i)
t.setOptions([e,i])}return this}
t.prototype.onsegcreate=function(t,e){t.halt()
this.log("segcreate",e)
let i=this.cues().addCue(e)
this.trigger("segsel",i)
this.setMarkedRange(null)
return this.render()}
t.prototype.onloopcreate=function(t,e){this.timeline().setLoopSegment(new l(e,this.timeline().cues()))
this.setMarkedRange(null)
return this.render()}
t.prototype.tick=function(){return this.draw()}
t.prototype.mount=function(){this._mounted=true
TC=this
this.render()
return this}
t.prototype.render=function(){var t=this,e=this.$
if(!t._mounted){return}t.draw()
let i=t.startOffset()
let n=t.startTime()
let o=n+t._vw/t.ppms()
let s=t.val2offset(t.startValue()+t._vw/t.ppms())
t.$open(0).flagIf("collapsed",!t.isOffsetBased()).setChildren([t.canvas(),function e(n){var o=n.$iter()
for(let e=0,a=r(t.timeline().cues().cues()),c=a.length,p;e<c;e++){p=a[e]
if(p.end()<i||p.start()>s){continue}o.push((n[e]||u(w,n,e)).setData(p).setTimeline(t).end())}return o}(e[0]||a(e,0)),t.timeline().loopSegment()?(e[1]||u(w,e,1,t).flag("loop")).bindData(t.timeline(),"loopSegment",[]).setTimeline(t).end():void 0,t.markedRange()?(t._markedView=t._markedView||u(w,t).flag("markedView").flag("sel")).bindData(t,"markedRange",[]).setTimeline(t).end():void 0,(t._playhead=t._playhead||u(T,t).flag("playhead")).setLeft(b(t.offset2px(t.currentOffset()),2)).end()],1).synced()
return t}})
e.TimelineCanvas=S
var k=o.defineTag("TimelineRegionCanvas",S,function(t){t.prototype.onwheel=function(t){let e=t.event().shiftKey
let i=t.event().altKey
let n=t.event().deltaX
let r=t.event().deltaY
if(this._wheelStartTime==null){this._wheelStartTime=this.startValue()}t.prevent()
t.silence()
if(e){let e=t.event().clientX
let i=Math.max(10,this.pxps()+n)
let r=this.dom().getBoundingClientRect()
let o=e-r.left
let s=o/r.width
let a=this.val2offset(this.screenx2val(e))
let u=this.xToTimeOffset(e)
this.trigger("zoom",{scale:i})
this.setPxps(this.parent().pxps())
this.setCurrentOffset(this.parent().viewRange().start())
let c=this.offset2px(a)
let p=c-o
let l=this.px2val(p)
return this.parent().viewRange().moveTo(this.val2offset(l),0)}else{this._wheelStartTime+=t.event().deltaX/this.ppms()
this._wheelStartTime=Math.max(this._wheelStartTime,-100/this.ppms())
return this.trigger("showrange",{start:this.val2offset(Math.round(this._wheelStartTime))})}}})
e.TimelineRegionCanvas=k
var A=o.defineTag("TimelineOverview",S,function(t){t.prototype.viewRange=function(t){return this._viewRange}
t.prototype.setViewRange=function(t){this._viewRange=t
return this}
t.prototype.draw=function(){if(n(p.Active)>0){return}this.setStartOffset(0)
let e=this.offset2val(this.timeline().endOffset())
let i=4
this.setPxps((this.dom().offsetWidth-i*2)/(e/1e3))
this.setStartOffset(i/this.ppms()*-1)
return t.prototype.__super__.draw.apply(this,arguments)}
t.prototype.onwheel=function(){return this}
t.prototype.getActions=function(){if(this._lines){return this._lines}return t.prototype.__super__.getActions.apply(this,arguments)}
t.prototype.canvas=function(){let t=this.$$||(this.$$={})
return(this._canvas=this._canvas||u("canvas",this).flag("canvas").dataset("gesture","seek")).end()}
t.prototype.render=function(){var t=this.$
if(!this._mounted){return}this.draw()
return this.$open(0).setChildren([t[0]||u(x,t,0,this).flag("zoomed").flag("bg"),this.canvas(),t[1]||u(x,t,1,this).flag("zoomed").flag("front"),this._playhead=this._playhead||u(T,this).flag("playhead")],1).synced((t[0].bindData(this,"viewRange",[]).setTimeline(this).end(),t[1].bindData(this,"viewRange",[]).setTimeline(this).end(),this._playhead.setLeft(b(this.offset2px(this.currentOffset()),2)).end(),true))}
t.prototype.showCues=function(){return false}
t.prototype.yScale=function(){return.6}})
e.TimelineOverview=A},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(12)
var u=r.defineTag("Elapsed",function(t){t.prototype.__value={watch:"valueDidSet",name:"value"}
t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){var e=this.value()
if(t!=e){this._value=t}if(t!=e){this.valueDidSet&&this.valueDidSet(t,e,this.__value)}return this}
t.prototype.valueDidSet=function(t){return this.dom().style.transform="scaleX("+t+")"}})
e.Elapsed=u
var c=r.defineTag("BufferedRanges","canvas",function(t){t.prototype.setup=function(){this.css({position:"absolute",top:0,left:0,width:"100%",height:"100%"})
return this}
t.prototype.render=function(){var t=this.data().buffered()
if(t==this._ranges){return this}this._ranges=t
var e=this.dom().offsetWidth
var i=this.dom().offsetHeight
this.dom().width=e
this.dom().height=i
var r=this.dom().getContext("2d")
r.fillStyle="#3b4d5b"
for(let o=0,s=n(t),a=s.length,u;o<a;o++){u=s[o]
let t=u[0]*e
let n=u[1]*e
r.fillRect(t,0,n-t,i)}return this}})
e.BufferedRanges=c
var p=r.defineTag("Annotation",function(t){t.prototype.ontap=function(){return this.trigger("showannotation",this.data())}
t.prototype.ontouchstart=function(t){return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||s("i",t,0,this).dataset("icon","chat5"),2).synced((t[0].end(),true))}})
var l=r.defineTag("Annotations",function(t){t.prototype.timeline=function(){return this.data()}
t.prototype.collection=function(){return this.data().branch().model().questions()}
t.prototype.invalidated=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
let r=this._guard||[]
this._guard=i
for(let t=0,e=n(i),o=e.length;t<o;t++){if(i[t]!=r[t]){this._version++
return true}}return false}
t.prototype.commit=function(){if(this.invalidated(this.collection().version())){this.render()}return this}
t.prototype.render=function(){var t=this,e=this.$
t.log("render")
let i=t.timeline().duration()
let r=function(t){return(t*100).toFixed(3)+"%"}
return t.$open(0).setChildren(function e(o){for(let e=0,a=n(t.collection()),u=o.taglen=a.length,c;e<u;e++){c=a[e];(o[e]||s(p,o,e)).setData(c).css("left",r(t.timeline().offsetToTime(c.offset)/i)).end()}return o}(e[0]||o(e,0)),4).synced()}})
var h=r.defineTag("Timeline",function(t){t.prototype.space=function(){return this.data().space()}
t.prototype.timeline=function(){return this.data().timeline()}})
e.Timeline=h
var d=r.defineTag("TimelineView",h,function(t){t.prototype.setup=function(){var t=this
return t.data().space().on("resize",function(){t._dirty=true
return t})}
t.prototype.ontouchstart=function(t){this._box=this._track.dom().getBoundingClientRect()
this.flag("seeking")
return t.capture()}
t.prototype.ontouchupdate=function(t){let e=(t.x()-this._box.left)/this._box.width
let i=Math.max(Math.min(e,1),0)
let n=i*this.timeline().duration()
this.data().setState("seeking")
this.timeline().seek(this.timeline().timeToOffset(n))
return this}
t.prototype.ontouchend=function(){this.data().setState(this.data().playState())
this.unflag("seeking")
return this}
t.prototype.render=function(){var t=this.$,e
var i=this.data().branch()
let n=this.timeline().duration()
let r=Math.min(n,this.timeline().currentTime())
return this.$open(0).setFlag(-1,i.state()).setFlag(-2,"tl-"+this.data().state()).setChildren(t.$=t.$||[this._hitbox=this._hitbox||s("div",this).flag("hitbox"),e=this._track=this._track||(e=s("div",this)).flag("track").setContent(this._elapsed=this._elapsed||s(u,e).flag("elapsed"),2),s("div",t,0,this).flag("time").flag("elapsed").flag("label"),s("div",t,1,this).flag("time").flag("remaining").flag("label")],2).synced((this._elapsed.setValue(Math.min(r/n,1),1).end(),t[0].setContent(a.msToStr(r),3),t[1].setText("-"+a.msToStr(Math.max(n-r),0)),true))}})
e.TimelineView=d},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(21).InterfaceView
var u=i(159).EditorMenu
var c=r.defineTag("FilePath",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.path=function(t){return this._path}
t.prototype.setPath=function(t){this._path=t
return this}
t.prototype.dataDidSet=function(t){var e
return this.setPath(e=t?t.path().split("/"):[]),e}
t.prototype.render=function(){var t=this.$
var e=this.path()
return this.$open(0).flag("path").setChildren(function t(i){for(let t=0,r=n(e),o=i.taglen=r.length;t<o;t++){(i[t]||s("div",i,t).flag("part")).setContent(r[t],3)}return i}(t[0]||o(t,0)),4).synced()}})
var p=r.defineTag("TitlebarView",a,function(t){t.prototype.file=function(){return this.space().primaryEditor().currentFile()}
t.prototype.showMenu=function(t){return t.uxa().open(s(u).bindData(this.space(),"primaryEditor",[]).end())}
t.prototype.showBrowser=function(){return this.space().browser().setVisible(true),true}
t.prototype.toggleDrawer=function(){return this.space().view().drawer().toggle()}
t.prototype.reload=function(){return this.space().browser().refresh()}
t.prototype.openInBrowser=function(){let t=this.file().path().replace(/^\//,"")
return this.space().browser().node().go(t)}
t.prototype.render=function(){var t=this.$
let e=this.file()
let i=e&&e.ext()
return this.$open(0).setChildren(t.$=t.$||[s(c,t,0,this),s("div",t,1,this).flag("tools")],2).synced((t[0].setData(e).end(),t[1].setContent([i=="html"?t[2]||s("div",t,2,1).flag("button").flag("run").on$(0,["tap","openInBrowser"],this).setText("Run code (in mini browser)"):i=="css"?t[3]||s("div",t,3,1).flag("button").flag("css").flag("live").setText("css is updated live"):i?(t[4]||s("div",t,4,1).flag("button").flag("run").on$(0,["tap","reload"],this).dataset("icon","play").setText("run code / reload")).end():void 0,!this.space().browser().visible()?t[5]||s("div",t,5,1).flag("button").flag("blue").on$(0,["tap","showBrowser"],this).setText("show mini browser"):void 0,this.api().isEmbed()?(t[6]||s("a",t,6,1).flag("button").flag("blue").setTarget("_blank").setText("open on scrimba.com")).setHref(this.space().model().url()).end():void 0,(t[7]||s("div",t,7,1).flag("tool").flag("more").dataset("icon","morevert").on$(0,["tap","showMenu"],this)).end(),(t[8]||s("div",t,8,1).flag("tool").flag("drawer").dataset("icon","mleft").on$(0,["tap","toggleDrawer"],this)).end()],1),true))}})
e.TitlebarView=p},function(t,e,i){var n=i(0)
var r=i(2).AGENT
var o=i(3).Widget
var s=i(81).FileWidget
var a=r.FLAGS
function u(){return o.apply(this,arguments)}n.subclass(u,o)
e.Agent=u
u.register("agent",r)
u.prototype.name=function(t){return this.getAttribute("name")}
u.prototype.setName=function(t){this.setAttribute("name",t)
return this}
u.prototype.body=function(t){return this.getAttribute("body")}
u.prototype.setBody=function(t){this.setAttribute("body",t)
return this}
u.prototype.uid=function(t){return this.getAttribute("uid")}
u.prototype.setUid=function(t){this.setAttribute("uid",t)
return this}
u.prototype.sid=function(t){return this.getAttribute("sid")}
u.prototype.setSid=function(t){this.setAttribute("sid",t)
return this}
u.prototype.token=function(t){return this.getAttribute("token")}
u.prototype.setToken=function(t){this.setAttribute("token",t)
return this}
u.prototype.color=function(t){return this.getAttribute("color")}
u.prototype.setColor=function(t){this.setAttribute("color",t)
return this}
u.prototype.kind=function(t){return this.getAttribute("kind")}
u.prototype.setKind=function(t){this.setAttribute("kind",t)
return this}
u.prototype.user_id=function(t){return this.getAttribute("user_id")}
u.prototype.setUser_id=function(t){this.setAttribute("user_id",t)
return this}
u.prototype.editing=function(t){return this._editing}
u.prototype.setEditing=function(t){this._editing=t
return this}
u.prototype.audio=function(t){return this._audio}
u.prototype.setAudio=function(t){this._audio=t
return this}
u.option("focus",{type:"widget",triggerAsync:["refocus"],overridable:true})
u.option("file",{type:"widget",triggerAsync:["refocus"],override:"pause"})
u.option("hover",{type:"widget",overridable:true})
u.option("vw",{overridable:true})
u.option("vh",{overridable:true})
u.prototype.setup=function(){this.space().widgets().add(this,this.id())
return this}
u.prototype.file=function(t){return this.options().get("file",t)||this.space().files().at(0)}
u.prototype.isLocal=function(){return false}
u.prototype.isRecording=function(){return false}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createElement
var a=i(2),u=a.ACTION,c=a.DOM,p=a.KEYS,l=a.LAYOUTMASK
var h=i(15).Dimensions
var d=i(1).IconButton
var f=i(30).PaneWidget
var m=i(70).LayoutGesture
var y=i(150).Delay
var g=i(31).PlayerPage
var v=i(194).History
var _=i(149).ContentEditable
var b=i(1).Indicator
var x=i(213),w=x.SKCubeGrid,T=x.SKCubeMove,S=x.SKDoubleBounce
var k=i(157).BrowserConfigurationDialog
var A=i(82)
var C=e.BROWSER_MAX="max"
var E=e.BROWSER_MIN="min"
var D=e.BROWSER_WINDOWED="win"
var P=o.defineTag("BrowserPathField",function(t){t.prototype.ontap=function(t){t.halt()
new _(this.dom())
return this}
t.prototype.ontouchstart=function(t){return this}})
o.extendTag("iframe",function(t){t.prototype.srcdoc=function(t){return this.getAttribute("srcdoc")}
t.prototype.setSrcdoc=function(t){this.setAttribute("srcdoc",t)
return this}})
var $=o.defineTag("PlayerFrame","iframe",function(t){t.prototype.allow=function(t){return this.getAttribute("allow")}
t.prototype.setAllow=function(t){this.setAttribute("allow",t)
return this}
t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.build=function(){var t=this
t._dom.onload=function(){t._loaded=true
return t.render()}
return t}
t.prototype.dataDidSet=function(t){return this}
t.prototype.render=function(){if(this._loaded&&this.data()&&this.dom().contentWindow){this.data().render(this.dom().contentWindow)}return this}})
var L=o.defineTag("RunnerFrame","iframe",function(t){t.prototype.allow=function(t){return this.getAttribute("allow")}
t.prototype.setAllow=function(t){this.setAttribute("allow",t)
return this}
t.prototype.history=function(t){return this._history}
t.prototype.setHistory=function(t){this._history=t
return this}
t.prototype.page=function(){return this.data().browser().page()}
t.prototype.build=function(){var t=this
t._history=new v(t)
t._queuedMessages=[]
t._onmessage=function(e){if(t.parent()&&e.source===t.dom().contentWindow){if(t._winUnload&&Date.now()-t._winUnload<5e3){t.log("winUnload",Date.now()-t._winUnload)
return t._queuedMessages.push(e)}else{return t.data().onrunnermessage(e,e.data)}}}
t._onunload=function(e){t._winUnload=Date.now()
return setTimeout(function(){t.log("removed winUnload again",Date.now()-t._winUnload)
return t._winUnload=null},100)}
t.dom().onload=function(e){t.log("onload",e)
let i=t.data().currentRequest()
if(!i||i.loaded){setTimeout(function(){return t.go("/403.html")},20)}if(i){return i.loaded=true}}
return t}
t.prototype.onloadexternal=function(t){t.halt()
return this}
t.prototype.post=function(t){return this.dom().contentWindow.postMessage(t,"*")}
t.prototype.isActive=function(){return!!this.dom().offsetParent&&this.dom().contentWindow}
t.prototype.start=function(){this.log("start")
if(!this.parent()){this.data()._body.dom().appendChild(this.dom())
this.data()._body.flag("running")
window.addEventListener("message",this._onmessage)
window.addEventListener("beforeunload",this._onunload,true)
this.history().reset()}return this}
t.prototype.stop=function(){this.log("stop")
if(this.parent()){this.parent().unflag("running")
this.parent().dom().removeChild(this.dom())
window.removeEventListener("message",this._onmessage)
window.removeEventListener("beforeunload",this._onunload,true)
this.history().reset()}return this}
t.prototype.go=function(t){t=this.data().browser().encodeURI(t)
this.setSrc(t)
return this.start()}})
var O=o.defineTag("BrowserFrame",function(t){t.prototype.layoutMask=function(){return l.SCALED|l.BOUNDLESS}})
var M=o.defineTag("BrowserView",function(t){t.prototype.__autoPos={default:true,name:"autoPos"}
t.prototype.autoPos=function(t){return this._autoPos}
t.prototype.setAutoPos=function(t){this._autoPos=t
return this}
t.prototype._autoPos=true
t.prototype.__autoSize={default:true,name:"autoSize"}
t.prototype.autoSize=function(t){return this._autoSize}
t.prototype.setAutoSize=function(t){this._autoSize=t
return this}
t.prototype._autoSize=true
t.prototype.__autoMinimize={default:false,name:"autoMinimize"}
t.prototype.autoMinimize=function(t){return this._autoMinimize}
t.prototype.setAutoMinimize=function(t){this._autoMinimize=t
return this}
t.prototype._autoMinimize=false
t.prototype.__page={watch:"pageDidSet",name:"page"}
t.prototype.page=function(t){return this._page}
t.prototype.setPage=function(t){var e=this.page()
if(t!=e){this._page=t}if(t!=e){this.pageDidSet&&this.pageDidSet(t,e,this.__page)}return this}
t.prototype.__pipScale={watch:"pipScaleDidSet",name:"pipScale"}
t.prototype.pipScale=function(t){return this._pipScale}
t.prototype.setPipScale=function(t){var e=this.pipScale()
if(t!=e){this._pipScale=t}if(t!=e){this.pipScaleDidSet&&this.pipScaleDidSet(t,e,this.__pipScale)}return this}
t.prototype.fullScale=function(t){return this._fullScale}
t.prototype.setFullScale=function(t){this._fullScale=t
return this}
t.prototype.__visible={watch:"visibleDidSet",name:"visible"}
t.prototype.visible=function(t){return this._visible}
t.prototype.setVisible=function(t){var e=this.visible()
if(t!=e){this._visible=t}if(t!=e){this.visibleDidSet&&this.visibleDidSet(t,e,this.__visible)}return this}
t.prototype.__minimized={watch:"minimizedDidSet",name:"minimized"}
t.prototype.minimized=function(t){return this._minimized}
t.prototype.setMinimized=function(t){var e=this.minimized()
if(t!=e){this._minimized=t}if(t!=e){this.minimizedDidSet&&this.minimizedDidSet(t,e,this.__minimized)}return this}
t.prototype.__windowed={watch:"windowedDidSet",name:"windowed"}
t.prototype.windowed=function(t){return this._windowed}
t.prototype.setWindowed=function(t){var e=this.windowed()
if(t!=e){this._windowed=t}if(t!=e){this.windowedDidSet&&this.windowedDidSet(t,e,this.__windowed)}return this}
t.prototype.__focused={watch:"focusedDidSet",name:"focused"}
t.prototype.focused=function(t){return this._focused}
t.prototype.setFocused=function(t){var e=this.focused()
if(t!=e){this._focused=t}if(t!=e){this.focusedDidSet&&this.focusedDidSet(t,e,this.__focused)}return this}
t.prototype.userMinimized=function(t){return this._userMinimized}
t.prototype.setUserMinimized=function(t){this._userMinimized=t
return this}
t.prototype.__hasUserFocus={watch:"hasUserFocusDidSet",name:"hasUserFocus"}
t.prototype.hasUserFocus=function(t){return this._hasUserFocus}
t.prototype.setHasUserFocus=function(t){var e=this.hasUserFocus()
if(t!=e){this._hasUserFocus=t}if(t!=e){this.hasUserFocusDidSet&&this.hasUserFocusDidSet(t,e,this.__hasUserFocus)}return this}
t.prototype.__hasPointerFocus={watch:"hasPointerFocusDidSet",name:"hasPointerFocus"}
t.prototype.hasPointerFocus=function(t){return this._hasPointerFocus}
t.prototype.setHasPointerFocus=function(t){var e=this.hasPointerFocus()
if(t!=e){this._hasPointerFocus=t}if(t!=e){this.hasPointerFocusDidSet&&this.hasPointerFocusDidSet(t,e,this.__hasPointerFocus)}return this}
t.prototype.currentRequest=function(t){return this._currentRequest}
t.prototype.setCurrentRequest=function(t){this._currentRequest=t
return this}
t.prototype.__mode={watch:"modeDidSet",name:"mode"}
t.prototype.mode=function(t){return this._mode}
t.prototype.setMode=function(t){var e=this.mode()
if(t!=e){this._mode=t}if(t!=e){this.modeDidSet&&this.modeDidSet(t,e,this.__mode)}return this}
t.prototype.runner=function(t){return this._runner}
t.prototype.setRunner=function(t){this._runner=t
return this}
t.prototype.__minWidth={watch:"syncStyleVar",unit:"px",name:"minWidth"}
t.prototype.minWidth=function(t){return this._minWidth}
t.prototype.setMinWidth=function(t){var e=this.minWidth()
if(t!=e){this._minWidth=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__minWidth)}return this}
t.prototype.__maxWidth={watch:"syncStyleVar",unit:"px",name:"maxWidth"}
t.prototype.maxWidth=function(t){return this._maxWidth}
t.prototype.setMaxWidth=function(t){var e=this.maxWidth()
if(t!=e){this._maxWidth=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxWidth)}return this}
t.prototype.__maxHeight={watch:"syncStyleVar",unit:"px",name:"maxHeight"}
t.prototype.maxHeight=function(t){return this._maxHeight}
t.prototype.setMaxHeight=function(t){var e=this.maxHeight()
if(t!=e){this._maxHeight=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxHeight)}return this}
t.prototype.__winHeight={watch:"syncStyleVar",unit:"px",name:"winHeight"}
t.prototype.winHeight=function(t){return this._winHeight}
t.prototype.setWinHeight=function(t){var e=this.winHeight()
if(t!=e){this._winHeight=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__winHeight)}return this}
t.prototype.__winWidth={watch:"syncStyleVar",unit:"px",name:"winWidth"}
t.prototype.winWidth=function(t){return this._winWidth}
t.prototype.setWinWidth=function(t){var e=this.winWidth()
if(t!=e){this._winWidth=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__winWidth)}return this}
t.prototype.__winTop={watch:"syncStyleVar",unit:"px",name:"winTop"}
t.prototype.winTop=function(t){return this._winTop}
t.prototype.setWinTop=function(t){var e=this.winTop()
if(t!=e){this._winTop=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__winTop)}return this}
t.prototype.__winLeft={watch:"syncStyleVar",unit:"px",name:"winLeft"}
t.prototype.winLeft=function(t){return this._winLeft}
t.prototype.setWinLeft=function(t){var e=this.winLeft()
if(t!=e){this._winLeft=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__winLeft)}return this}
t.prototype.__winScale={watch:"syncStyleVar",name:"winScale"}
t.prototype.winScale=function(t){return this._winScale}
t.prototype.setWinScale=function(t){var e=this.winScale()
if(t!=e){this._winScale=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__winScale)}return this}
t.prototype.__winMinScale={watch:"syncStyleVar",name:"winMinScale"}
t.prototype.winMinScale=function(t){return this._winMinScale}
t.prototype.setWinMinScale=function(t){var e=this.winMinScale()
if(t!=e){this._winMinScale=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__winMinScale)}return this}
t.prototype.__maxMinScale={watch:"syncStyleVar",name:"maxMinScale"}
t.prototype.maxMinScale=function(t){return this._maxMinScale}
t.prototype.setMaxMinScale=function(t){var e=this.maxMinScale()
if(t!=e){this._maxMinScale=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxMinScale)}return this}
t.prototype.__maxScale={watch:"syncStyleVar",name:"maxScale"}
t.prototype.maxScale=function(t){return this._maxScale}
t.prototype.setMaxScale=function(t){var e=this.maxScale()
if(t!=e){this._maxScale=t}if(t!=e){this.syncStyleVar&&this.syncStyleVar(t,e,this.__maxScale)}return this}
t.prototype.browser=function(){return this.data()}
t.prototype.space=function(){return this.browser().space()}
t.prototype.syncStyleVar=function(t,e,i){let n=i.name
let r=i.unit
return this.dom().style.setProperty("--"+n,r?t+r:t)}
t.prototype.setup=function(){this._sentStyleSheets={}
this._layoutMask=0
this._runner=s(L).flag("runner").setAllow("geolocation").setData(this).end()
this.setSref(this.data().id())
return this}
t.prototype.stop=function(){return this.runner().stop()}
t.prototype.mount=function(){var t=this
t.data().space().on("reflow",function(){return t.reflow(true)})
t.data().space().on("playing",function(){return t.browser().options().discardLocals(["minimized","windowed","focused"])})
t._mounted=true
t.reflow(true)
return t}
t.prototype.go=function(t,e){if(e===undefined)e=null
this.runner().go(t)
this.render()
return this}
t.prototype.history=function(){return this.runner().history()}
t.prototype.back=function(){if(this.history().hasPrev()){if(this.history().isInvalidated()){let t=this.history().relative(-1)
this.history().reset()
this.runner().go(t)}else{this.runner().post({type:"back"})}}return this}
t.prototype.forward=function(){if(this.history().hasNext()){this.runner().post({type:"forward"})}return this}
t.prototype.refresh=function(){var t=this
if(t.runner().isActive()){t.runner().post({type:"reload"})}else{t.go(t.browser().url(),0)}return setTimeout(function(){if(!t.windowed()){return t._frame.dom().focus()}},20)}
t.prototype.onpathchange=function(t){let e=t.data()||"/"
return e==this.browser().url()?this.refresh():this.go(e)}
t.prototype.oncontainermessage=function(t){this.log("oncontainermessage",t)
if(t.type=="request"){this.setCurrentRequest(t)
let e=this.browser().normalizeURL(t.url)
if(!t.isHistoryNavigation){if(e!=this.history().current()){this.history().push(e)}}this.browser().push_(u.PAGE_REQUEST,[p.GET,e||null])}return this}
t.prototype.onrunnermessage=function(t,e){var i=this,n,o
if(e.type=="actions"){let t=i.space().pointerTracker().isActive()
let o=[]
for(let s=0,a=r(e.actions),p=a.length,l,h;s<p;s++){l=a[s]
let e=l[0]
if(!t&&(e==u.DOM_ACTIVEIN||e==u.DOM_HOVERIN||e==u.DOM_FOCUSIN)){continue}i.data().push_(l[0],l[1])
o.push(l[0]==u.PAGE_LOADED?(h=l[1][0],h=h.replace(/<script\b[^>]*>([^]*?)<\/script>/g,""),n=!/<body\b[^>]*>\s*<\/body>/.test(h),n&&i.browser().setVisible(true)):l[0]==c.MUTATE?i.browser().setVisible(true):l[0]==u.PAGE_LOG&&true)}return o}else if(e.type=="domevent"){return i.browser().space().emit("browserevent",e.data)}else if(e.type=="location"){return i.browser().setUrl(o=i.browser().normalizeURL(e.url)),o}else if(e.type=="history"){i.log("history",e)
if(e.action=="go"){i.history().go(e.delta)
return}let t=i.browser().normalizeURL(e.url)
i.browser().push_(u.PAGE_HISTORY,[e.action,e.state,t])
if(e.action=="pushState"){return i.history().push(t)}else if(e.action=="replaceState"){return i.history().replace(t).trim()}}else if(e.type=="beforeunload"){return i.log("beforeunload",e.predictedTarget)}else if(e.type=="cancelled"){i.log("cancelled")
i.browser().page().setCancelled(true)
i.runner().stop()
return i.render()}else if(e.type=="pageload"){var s=e.status
var a=i.browser().normalizeURL(e.url)
i.browser().push_(u.PAGE_LOAD,[s,a])
if(i.currentRequest()){return i.currentRequest().loading=true}}else if(e.type=="loader:busy"){i.browser().page().setLoading(true)
return i.render()}else if(e.type=="loader:done"){return setTimeout(function(){i.browser().page().setLoading(false)
return i.render()},100)}else{return i.log("tracker message",e.type)}}
t.prototype.posToScreen=function(t,e){return this.data().posToScreen(t,e)}
t.prototype.sendStyleSheets=function(){var t,e
let i=[]
for(let n=0,o=r(this.data().space().files()),s=o.length,a;n<s;n++){a=o[n]
i.push(a.lang()=="css"&&(t=a.path(),e=a.currentBody(),this._sentStyleSheets[t]!=e&&(this._sentStyleSheets[t]=e,this.runner().post({type:"stylesheet",path:t,body:A.process(e)}))))}return i}
t.prototype.isMovable=function(){return!this.api().isMobile()}
t.prototype.ontouchstart=function(t){if(this.autoMinimize()){this.setHasUserFocus(!this.hasUserFocus())
return this.render()}if(this.minimized()){t.event().preventDefault()
this._frame.dom().focus()
return this.browser().setMinimized(false),false}else if(this.isMovable()){let e=t.event().target
if(e&&!e.matches("input,.tool")){return m.wrap(t,{layout:this._layout})}}}
t.prototype.onmoveupdate=function(t,e){if(e===undefined)e=false
if(!(this.windowed()&&!this.minimized())){return}if(t.dx()||t.dy()){this.setAutoPos(false)}if(this.autoPos()==false){var i=e?this._layoutMask:h.MOVING
var n=Math.round(t.layout().left()+t.dx())
var r=Math.round(Math.max(t.layout().top()+t.dy(),40))
this._layout.set({left:n,top:r,targetRef:this.data().id(),mask:i}).ensureInsideParent()
this.data().setLayout(this._layout.clone())
this.redraw()
return this.data().space().emit("rearranging",this.data())}}
t.prototype.onmoveend=function(t){if(!(this.windowed()&&!this.minimized())){return}return this.onmoveupdate(t,true)}
t.prototype.onresizestart=function(t){this.flag("resizing")
let e=40
let i=this.space().view().box()
let n=t.x()-i.left
let r=t.y()-i.top
t._dxClamp=[i.width-n-e,-n+e]
t._dyClamp=[i.height-r-e,-r+e]
let o=h.RESIZING
if(!this.windowed()){t._maxWidth=this.browser().maxWidth()
t._maxHeight=this.browser().maxHeight()}if(t.ax()){o|=t.ax()>0?h.PIN_LEFT:h.PIN_RIGHT}if(t.ay()){o|=t.ay()>0?h.PIN_TOP:h.PIN_BOTTOM}return this._layoutMask=o}
t.prototype.clamp=function(t,e,i,n){if(n===undefined)n=1
return Math.min(Math.max(Math.round(e/n)*n,t),i)}
t.prototype.onresizeupdate=function(t,e){if(e===undefined)e=false
this.setAutoSize(false)
let i=t.dx()
let n=t.dy()
i=Math.min(t._dxClamp[0],Math.max(i,t._dxClamp[1]))
n=Math.min(t._dyClamp[0],Math.max(n,t._dyClamp[1]))
if(!this.windowed()){let e=t._maxWidth+i*t.ax()*2
let r=t._maxHeight+n*t.ay()*2
this.browser().setMaxWidth(this.clamp(240,e,1280,2))
this.browser().setMaxHeight(this.clamp(140,r,1080,2))
return this}let r=t.layout()
let o={width:r.width()+i*t.ax(),height:r.height()+n*t.ay(),left:r.left(),top:r.top(),targetRef:this.data().id(),mask:this._layoutMask||0}
o.width=Math.round(Math.max(o.width,120)/2)*2
o.height=Math.round(Math.max(o.height,80)/2)*2
if(t.ax()<0){o.left+=(o.width-r.width())*t.ax()
o.left=Math.max(o.left,20)}if(t.ay()<0){o.top+=(o.height-r.height())*t.ay()}this.redraw(this._layout.set(o).ensureInsideParent())
this.data().setLayout(this._layout.clone())
return this.data().space().emit("rearranging",this.data())}
t.prototype.onresizeend=function(t){this.log("onresizeend",this._layoutMask)
this._layoutMask=0
this.onresizeupdate(t,true)
return this.unflag("resizing")}
t.prototype.clientLayout=function(){return this._layout}
t.prototype.redraw=function(t){if(t===undefined)t=this._layout
let e=this._prevLayout
let i=t.anchorX()
let n=t.anchorY()
let r=this.space().vw()
let o=this.space().vh()
let s=Math.round(t.left())+"px"
let a=Math.round(t.top())+"px"
this.setMinWidth(r<500?100:140)
this.setWinHeight(Math.round(t.height()))
this.setWinWidth(Math.round(t.width()))
this.setWinMinScale(this.minWidth()/this.winWidth())
this.setWinTop(Math.round(t.top())+this.winHeight()*.5)
this.setWinLeft(Math.round(t.left())+this.winWidth()*.5)
this.setWinScale(r&&o?Math.min((r-40)/this.winWidth(),(o-100)/this.winHeight(),1):1)
this.setAutoMinimize(this.winWidth()>r*.3&&r<800)
this.flag("autofit",this.autoMinimize())
return this.flag("narrow",t.width()<150)}
t.prototype.reflow=function(t){if(t===undefined)t=false
var e=this.browser().agentLayout()
var i=this.browser().space().view().box()
var n=i.width
var r=i.height
this.setMinWidth(n<500?100:140)
this.setMaxWidth(this.browser().maxWidth()||Math.min(n-200,600))
this.setMaxHeight(this.browser().maxHeight()||Math.min(r-200,460))
this.setMaxMinScale(this.minWidth()/this.maxWidth())
this.setMaxScale(n&&r?Math.min((n-40)/this.maxWidth(),(r-100)/this.maxHeight(),1):1)
this.setWindowed(this.browser().windowed())
this.setMinimized(this.browser().minimized()||this.autoMinimize()&&!this.hasPointerFocus()&&!this.hasUserFocus())
this.setFocused(this.space().agent().focus()==this.browser())
var o=e._v
if(o==this._v&&!t){return}if(!e._data){return}var s=this._layout||(this._layout=e.clone())
var a=e.mask()
if(o!=this._v||t){if(this.autoPos()&&this.autoSize()){if(a&h.RESIZING){s.resizeParent(n,r).resize(e.width(),e.height(),a)}else{s.set(e.toObject()).resizeParent(n,r)}}else if(this.autoSize()){s.resizeParent(n,r).resize(e.width(),e.height())}else if(this.autoPos()){this}}else{s.resizeParent(n,r)}this._v=o
s.round()
this.redraw(this._layout=s)
if(t||!this.browser().space().isEditing()){this.data().setLayout(s.clone())}return}
t.prototype.visibleDidSet=function(t){this.flag("visible",t)
if(this._layout){var e=this._layout.clone().ensureInsideParent()
return this.data().setLayout(e)}}
t.prototype.minimizedDidSet=function(t){this.transitioning()
this.flag("minimized",t)
return this}
t.prototype.transitioning=function(t){var e=this
if(t===undefined)t=400
let i=e.space().timeline().mode()
if(i=="seeking"){return}clearTimeout(e._transitioningTimeout)
e.flag("transitioning")
return e._transitioningTimeout=setTimeout(function(){return e.unflag("transitioning")},t)}
t.prototype.windowedDidSet=function(t){this.transitioning()
if(t){this.flag("windowed")
return this.unflag("centered")}else{this.flag("centered")
return this.unflag("windowed")}}
t.prototype.targetForPointer=function(){return this}
t.prototype.nodeForLayout=function(){return this._frame}
t.prototype.resetLayout=function(){this.setAutoSize(true)
this.setAutoPos(true)
this._v=-1
this.reflow(true)
return this}
t.prototype.hasLocalLayout=function(){return!this.data().space().isEditing()&&(!this.autoPos()||!this.autoSize())}
t.prototype.dispose=function(){return this}
t.prototype.isLoading=function(){return this.browser().page()&&this.browser().page().isLoading()}
t.prototype.gotoUrlInput=function(t){try{t.stop().prevent()
let e=t.target().value()
if(e!=this.browser().url()){this.go(e)}return t.target().blur()}catch(t){}}
t.prototype.showSettings=function(){return this.uxa().open(s(k).flag("modal").bindData(this,"browser",[]).setFormData(this.browser().configurationData()).end())}
t.prototype.closeWindow=function(){this.browser().setVisible(false)
return this}
t.prototype.minimize=function(){this.browser().setMinimized(true)
return this}
t.prototype.toggleMinimized=function(){var t
return this.browser().setMinimized(t=!this.browser().minimized()),t}
t.prototype.toggleWindowed=function(){this.browser().setWindowed(!this.browser().windowed())
if(this.browser().windowed()){var t=this._layout.clone().ensureInsideParent()
t.set({height:Math.min(this.space().vh()-180,t.height())})
t.set({width:Math.min(this.space().vw()-80,t.width())})
this.redraw(this._layout=t)
this.browser().setLayout(this._layout.clone())}else if(!this.browser().maxWidth()){this.browser().setMaxWidth(this.clamp(800,this._layout.width(),this.space().vw()-200))
this.browser().setMaxHeight(this.clamp(460,this._layout.height(),this.space().vh()-200))}return}
t.prototype.focusWidgetForNode=function(){return this.browser()}
t.prototype.render=function(){var t=this.$,e,i,n
if(false){}if(this.browser().page()!=this.page()){let t=this.space().isPlaying()||this.space().isLive()
let e=this.browser().page()
if(t){this._indicator&&this._indicator.start&&this._indicator.start()}if(e&&e.loaded()){this._indicator&&this._indicator.stop&&this._indicator.stop()
this.setPage(e)}this}if(this.runner().isActive()&&!this.isLoading()){this.sendStyleSheets()}if(this.page()){this.page().syncStyleSheets(this.data().space().files())
this.setFlag("status","status-"+this.page().status())}if(this._mounted){this.reflow()}return this.$open(0).flagIf("loading",this.isLoading()).dataset("gesture","move").setVisible(this.browser().visible()).flagIf("detached",this.hasLocalLayout()).setChildren(t.$=t.$||[this._cover=this._cover||s("div",this).flag("cover").on$(0,["tap","minimize"],this),e=this._frame=this._frame||(e=s(O,this)).flag("frame").setContent([i=this._chrome=this._chrome||(i=s("div",e)).flag("chrome").setContent([s("div",t,0,this._chrome).flag("resizer").flag("left").dataset("gesture","resize,l"),s("div",t,1,this._chrome).flag("resizer").flag("right").dataset("gesture","resize,r"),this._header=this._header||s("div",i).flag("header").setContent([s("div",t,2,this._header).flag("tools").setContent([s("div",t,3,2).flag("tool").flag("round").flag("close").on$(0,["tap","stop","closeWindow"],this),s("div",t,4,2).flag("tool").flag("round").flag("min").on$(0,["tap","stop","minimize"],this),s("div",t,5,2).flag("tool").flag("round").flag("max").on$(0,["tap","stop","toggleWindowed"],this),s("div",t,6,2).flag("tool").on$(0,["tap","stop","back"],this).dataset("icon","browserback"),s("div",t,7,2).flag("tool").on$(0,["tap","stop","forward"],this).dataset("icon","browserforward"),s("div",t,8,2).flag("tool").on$(0,["tap","stop","refresh"],this).dataset("icon","browserrefresh")],2),s(P,t,9,this._header).flag("path").on$(0,["change","onpathchange"],this),s("div",t,10,this._header).flag("tool").dataset("icon","morevert").on$(0,["tap","stop","showSettings"],this)],2),s("div",t,11,i).flag("resizer").flag("bottom").dataset("gesture","resize,b"),s("div",t,12,i).flag("resizer").flag("br").dataset("gesture","resize,b,r"),s("div",t,13,i).flag("resizer").flag("bl").dataset("gesture","resize,b,l")],2),n=this._body=this._body||(n=s("div",e)).flag("body"),this._indicator=this._indicator||s(b,e).flag("indicator").flag("abs").flag("manual").setType("forward")],2)],2).synced((this._frame.setTabindex(-1).end((t[0].end(),t[1].end(),t[5].flagIf("active",!this.windowed()),t[6].flagIf("disabled",!this.history().hasPrev()).end(),t[7].flagIf("disabled",!this.history().hasNext()).end(),t[8].end(),t[9].setContent(this.browser().url()||"/index.html",3).end(),t[10].end(),t[11].end(),t[12].end(),t[13].end(),this._body.setContent([(this._frameCover=this._frameCover||s("div",n).flag("frameCover").flag("mainCover").setContent([s("div",t,14,this._frameCover).flag("tool").flag("run").dataset("icon","browserrefresh").on$(0,["tap","stop","refresh"],this),s("div",t,15,this._frameCover).flag("tool").flag("follow").dataset("icon","visibility").on$(0,["tap","stop","resetLayout"],this)],2)).end((t[14].end(),t[15].flagIf("disabled",!this.hasLocalLayout()).end(),true)),this.page()&&this.page().loading()?(t[16]||s("div",t,16,n).flag("frameCover").flag("bundler").setContent(t[17]||s(S,t,17,16),2)).end((t[17].end(),true)):void 0,this.page()&&this.page().cancelled()?(t[18]||s("div",t,18,n).flag("frameCover").flag("error").flag("sm").setContent(t[19]||s("div",t,19,18).setContent([s("h2",t,20,19).setText("Something went wrong"),s("p",t,21,19).setText("The tracker has stopped because of excessive amount of events originating from the page.\nThis could be due to certain browser extensions. Try disabling extensions to see if it helps."),s("p",t,22,19).setContent([s("span",t,23,22).setText("For more help, "),s("a",t,24,22).setHref("https://gitter.im/scrimba_community/Lobby").setTarget("_blank").setText("chat with us"),s("span",t,25,22).setText(" or "),s("a",t,26,22).setHref("https://github.com/scrimba/community/issues").setTarget("_blank").setText("file an issue")],2)],2),2)).end((t[24].end(),t[26].end(),true)):void 0,(this._player=this._player||s($,n).flag("player").setSrc("/__sw__blank.html").setSandbox("allow-same-origin").setAllow("geolocation")).bindData(this,"page",[]).end()],1),this._indicator.end(),true)),true))}})
function I(){return f.apply(this,arguments)}o.subclass(I,f)
e.Browser=I
I.register("browser")
I.option("npmPackages")
I.option("layout",{overridable:true,type:h,action:u.BROWSER_LAYOUT})
I.option("page",{type:g})
I.option("url")
I.option("rootPath",{default:"/"})
I.option("catchallPath")
I.option("visible",{default:false})
I.option("minimized",{default:false,overridable:true})
I.option("windowed",{default:true,overridable:true})
I.option("maxWidth")
I.option("maxHeight")
I.prototype.isResolvingPackages=function(t){return this._isResolvingPackages}
I.prototype.setIsResolvingPackages=function(t){this._isResolvingPackages=t
return this}
I.prototype.configurationData=function(){return{rootPath:this.rootPath(),catchallPath:this.catchallPath()}}
I.prototype.browser=function(){return this}
I.prototype.posToScreen=function(t,e,i,n){if(this.minimized()||!this.windowed()||this.node().autoMinimize()){return null}return I.prototype.__super__.posToScreen.apply(this,arguments)}
I.prototype.setup=function(){var t=this
t.space().on("quicksave",function(e){t.log("quicksave",e)
if(e){return t.fileDidSave(e)}})
t.node()
return t}
I.prototype.baseURI=function(){return this.space().container().origin()}
I.prototype.normalizeURL=function(t){if(t.startsWith(this.baseURI())){return t.slice(this.baseURI().length)}else{return t}}
I.prototype.encodeURI=function(t){if(t.indexOf(this.baseURI())==0){return t}if(t[0]!="/"){t="/"+t}return""+this.baseURI()+t}
I.prototype.clientLayout=function(){return(this._clientLayout||(this._clientLayout=new h(null))).wrap(this._node?this._node._layout:null)}
I.prototype.deserialize=function(t,e){if(t.page&&true){t.page=g.fromOptionValue(t.page,this)}return I.prototype.__super__.deserialize.apply(this,arguments)}
I.prototype.node=function(){return this._node||(this._node=s(M).setData(this).end())}
I.prototype.stop=function(){return this._node&&this._node.stop&&this._node.stop()}
I.prototype.run=function(){if(this.space().simulator()){this.space().simulator().convertToBrowser()}this.refresh()
return this}
I.prototype.refresh=function(){this.node().refresh()
return this}
I.prototype.fileDidSave=function(t){if(this.space().simulator()){return}if(t.ext()=="css"){return this}else if(t.ext()=="html"){if(this.url().indexOf(t.name())>=0){this.refresh()}}else{this.refresh()}return this}
I.prototype.enabled=function(){return true}
I.prototype.title=function(){return"Preview"}
I.prototype.npmPackageNames=function(){return(this.npmPackages()||{resolved:[]}).resolved}
I.prototype.parsePackageQuery=function(t,e){var i=t.match(/.[^@]*/)[0]
var r=t.substr(n(i)+1)
return e[i]=r||"*"}
I.prototype.currentPackageMap=function(){var t={}
for(let e=0,i=r(this.npmPackageNames()),n=i.length;e<n;e++){this.parsePackageQuery(i[e],t)}return t}
I.prototype.addPackages=function(t){var e=Object.assign(this.packageMap(),t)
return this.overwritePackages(e)}
I.prototype.overwritePackages=async function(t){var e=[]
for(let i in t){let n
n=t[i]
e.push(""+i+"@"+n)}var i=await this.resolvePackages(e)
this.setNpmPackages(i)
return this}
I.prototype.addPackage=function(t){var e=this.currentPackageMap()
this.parsePackageQuery(t,e)
return this.overwritePackages(e)}
I.prototype.removePackage=function(t){var e
var i=this.currentPackageMap()
e=i[t],delete i[t],e
return this.overwritePackages(i)}
I.prototype.upgradePackage=function(t){return this.addPackage(t)}
I.prototype.resolvePackages=async function(t){this.setIsResolvingPackages(true)
try{var e=await this._resolvePackages(t)}finally{this.setIsResolvingPackages(false)
o.commit()}return e}
I.prototype._resolvePackages=async function(t){if(n(t)==0){return}var e="/rpc/yaas/resolve?patterns="+window.encodeURIComponent(t.join(","))
var i=await window.fetch(e)
this.setIsResolvingPackages(false)
if(i.status==200){var r=await i.json()
this.log("returned from yaas",i,r)
return r}else{throw new Error("could not resolve "+t)}}
I.prototype.dispose=function(){return this._node&&this._node.dispose&&this._node.dispose()}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createTagLoopResult,c=o.createElement
var p=i(30),l=p.PaneWidget,h=p.PaneView
var d=i(2),f=d.CONSOLE,m=d.SIMULATOR,y=d.POINTER,g=d.ACTION
var v=i(3).Widget
var _=i(11).List
var b=i(12)
var x=0
var w=0
var T={}
if(o.Events){o.Events.register(["mouseover","mouseout"])}T.Instance=function t(e){this._type=e
this}
T.Instance.prototype.type=function(t){return this._type}
T.Instance.prototype.setType=function(t){this._type=t
return this}
T.Func=function t(e){this._type=e
this}
T.Func.prototype.type=function(t){return this._type}
T.Func.prototype.setType=function(t){this._type=t
return this}
T.Error=function t(e){this._data=e
this.message=e.message
this}
var S=null
var k=typeof window!="undefined"&&window
var A=function(t,e){var i=f.TYPES
if(e==null){return[i.MARKER,i.NULL]}else if(e==undefined){return[i.MARKER,i.UNDEFINED]}else if(e&&e._dom){e=e._dom}if(e&&e.nodeType&&e.nodeName){var n=e.ownerDocument
var r
return[i.MARKER,i.ELEMENT,typeof r=="number"||r instanceof Number?r:e.outerHTML]}else if(typeof e=="function"){var o=String(e).match(/function ([^\)]+\))/)
return[i.MARKER,i.FUNCTION,o?o[1]:""]}else if(typeof e=="object"){if(e.type=="error"){if(e.shim){return e}e.shim=1
return[i.MARKER,i.ERROR,e]}var s=e.constructor
var a=s.name
if(a=="Array"){return e}else if(a=="Error"){return e}else if(s==k.Object){return e}else{return[i.MARKER,i.INSTANCE,a]}}else{return e}}
var C=function(t,e){var i=f.TYPES
if(e instanceof Array&&e[0]==i.MARKER){switch(e[1]){case i.NULL:{return null
break}case i.UNDEFINED:{return undefined
break}case i.ELEMENT:{if(e[2]instanceof Array){return null}else{var n=document.createElement("div")
n.innerHTML=e[2]}return n.firstElementChild
break}case i.INSTANCE:{return new T.Instance(e[2])
break}case i.FUNCTION:{return new T.Func(e[2])
break}case i.ERROR:{return new T.Error(e[2])
break}}}return e}
var E=o.defineTag("ValPart",function(t){t.prototype.entry=function(){return this._entry||(this._entry=this.up(".ConsoleEntry"))}
t.prototype.offsetTopFromConsole=function(){var t=0
var e=this.dom()
var i=[]
var n=this.entry()
while(e){t+=e.offsetTop
i.push(t)
if(e.contains(n.dom())){break}e=e.offsetParent}return t}})
var D=o.defineTag("Val",E,function(t){t.prototype.ref=function(t){return this.getAttribute("ref")}
t.prototype.setRef=function(t){this.setAttribute("ref",t)
return this}
t.prototype.__expanded={watch:"expandedDidSet",name:"expanded"}
t.prototype.expanded=function(t){return this._expanded}
t.prototype.setExpanded=function(t){var e=this.expanded()
if(t!=e){this._expanded=t}if(t!=e){this.expandedDidSet&&this.expandedDidSet(t,e,this.__expanded)}return this}
t.prototype.render=function(){var t=this.$,e,i
x++
w++
this.$open(0).setChildren(typeof(e=this.data())=="string"||e instanceof String?(t[0]||c(L,t,0,this)).bindData(this,"data",[]).end():typeof(i=this.data())=="number"||i instanceof Number?(t[1]||c(O,t,1,this)).bindData(this,"data",[]).end():this.data()instanceof T.Instance?(t[2]||c(F,t,2,this)).bindData(this,"data",[]).end():this.data()instanceof T.Func?(t[3]||c(R,t,3,this)).bindData(this,"data",[]).end():this.data()instanceof T.Error?(t[4]||c(N,t,4,this)).bindData(this,"data",[]).end():this.data()==null?t[5]||c("div",t,5,this).flag("null").setText("null"):this.data()==undefined?t[6]||c("div",t,6,this).flag("cundefined").setText("undefined"):this.data()==true?t[7]||c("div",t,7,this).flag("cbool").flag("true").setText("true"):this.data()==false?t[8]||c("div",t,8,this).flag("cbool").flag("false").setText("false"):this.data()&&this.data()._dom?(t[9]||c(B,t,9,this)).bindData(this.data(),"_dom").end():this.data()instanceof Element?(t[10]||c(B,t,10,this)).bindData(this,"data",[]).end():typeof this.data()=="function"?(t[11]||c(R,t,11,this)).bindData(this,"data",[]).end():x>3?t[12]||c("div",t,12,this).flag("more").setText("..."):Array.isArray(this.data())?(t[13]||c($,t,13,this)).bindData(this,"data",[]).end():this.data()instanceof Object||typeof this.data()=="object"?(t[14]||c(I,t,14,this)).bindData(this,"data",[]).end():t[15]||c("span",t,15,this).flag("blank").setText(""),3).synced()
x--
return this}
t.prototype.__uid=function(){return this._uid||(this._uid=this.entry().refForElement(this.dom()))}
t.prototype.ontap=function(t){var e
t.halt()
return e=this.__uid()}
t.prototype.getChildByRef=function(t){var e=this._dom.firstElementChild._tag
if(e&&e.getChildByRef){return e.getChildByRef(t)}return this}
t.prototype.space=function(){return this.entry().space()}
t.prototype.entry=function(){return this.up(".ConsoleEntry")}
t.prototype.expandedDidSet=function(t){return this.first().flag("expanded",!!t)}
t.prototype.first=function(){return o.getTagForDom(this.dom().firstElementChild)}
t.prototype.up=function(t){if(!t){return this.parent()}return this.parent()&&this.parent().closest(t)}
t.prototype.ontap=function(t){t.halt()
if(t.event().target==this.dom()||t.event().target==this.first().dom()){return this.space().console().push_(g.CONSOLE_VAL_EXPAND,[this.space().console().id(),this.__uid(),!!!this._expanded])}}})
e.Val=D
D.DEPTH=0
var P=o.defineTag("Rich",E,function(t){t.prototype.ref=function(t){return this.getAttribute("ref")}
t.prototype.setRef=function(t){this.setAttribute("ref",t)
return this}
t.prototype.body=function(){return this}
t.prototype.entry=function(){return this.parent().entry()}
t.prototype.getChildByRef=function(t){var e=this.body().dom().children[t]
return e?e._tag:null}})
var $=o.defineTag("Arr",P,function(t){t.prototype.render=function(){var t=this,e=this.$
return t.$open(0).setChildren([function e(i){var n=i.$iter()
for(let e=0,o=r(t.data()),s=o.length;e<s;e++){if(e>=10){continue}n.push((i[e]||c(D,i,e)).setData(o[e]).dataset("ref",e).end())}return n}(e[0]||a(e,0)),t.data().length>10?e[1]||c("div",e,1,t).flag("more").setText("..."):void 0],1).synced()}})
var L=o.defineTag("Str",E,function(t){t.prototype.render=function(){return this.$open(0).setChildren(this.data(),3).synced()}})
var O=o.defineTag("Num",E,function(t){t.prototype.render=function(){return this.$open(0).setChildren(this.data(),3).synced()}})
var M=o.defineTag("KeyValPair",E,function(t){t.prototype.ref=function(t){return this.getAttribute("ref")}
t.prototype.setRef=function(t){this.setAttribute("ref",t)
return this}
t.prototype.entry=function(){return this._entry||(this._entry=this.up(".ConsoleEntry"))}
t.prototype.ontap=function(t){var e=this.__uid()
return this}
t.prototype.__uid=function(){return this._uid||(this._uid=this.entry().refForElement(this.dom()))}
t.prototype.getChildByRef=function(t){return this.dom().children[t]._tag}
t.prototype.scrollIntoView=function(){if(this.entry().data().isEnabled()){var t=this.offsetTopFromConsole()
return this.entry().parent().dom().scrollTop=Math.max(t-40,0)}}})
var I=o.defineTag("Obj",P,function(t){t.prototype.body=function(){return this._body}
t.prototype.name=function(){return this._name||(this._name=this.data().constructor.name)}
t.prototype.keys=function(){return Object.keys(this.data())}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).flag("inline").setChildren(e.name()=="Object"?(e._body=e._body||c("div",e).flag("body")).setContent(function t(i){var n
for(let t=0,o=r(e.keys()),s=i.taglen=o.length,a;t<s;t++){a=o[t];(n=i[t]||(n=c(M,i,t)).flag("pair").setContent([c("div",n.$,"A",n).flag("key"),c(D,n.$,"B",n).dataset("ref","1")],2)).dataset("ref",t).setFlag(0,"k"+t).end((n.$.A.setContent(a,3),n.$.B.bindData(e.data(),a).end(),true))}return i}(t[0]||s(t,0,e._body)),4):(t[1]||c("div",t,1,e).flag("type")).setContent(e.name(),3),3).synced()}})
var R=o.defineTag("Func",E,function(t){t.prototype.render=function(){return this.$open(0).setText("Function").synced()}})
var N=o.defineTag("Err",E,function(t){t.prototype.render=function(){return this.$open(0).setChildren(this.data().message,3).synced()}})
var F=o.defineTag("Instance",E,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||c("div",t,0,this).flag("type"),2).synced((t[0].setContent(this.data().type(),3),true))}})
var B=o.defineTag("El",function(t){var e={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,circle:true,line:true}
t.prototype.el=function(){return this.data()}
t.prototype.name=function(){return this.type()==8?"comment":this.el().tagName.toLowerCase()}
t.prototype.type=function(){return this.el().nodeType}
t.prototype.classNames=function(){var t=this.el().className||""
if(t.baseVal!=undefined){t=t.baseVal}return t.replace(/\b(rnd(\d+)|__hover|__focus|__active)(\s+|$)/g,"").trim()}
t.prototype.render=function(){var t=this.$,i=this
return i.$open(0).flag("el").setFlag(-1,"type"+i.type()).flagIf("selfclosing",e[i.name()]).setChildren(i.type()==8?(t[0]||c("span",t,0,i)).setContent(i.el().textContent,3):o.static([(t[1]||c("div",t,1,i).flag("open")).setContent([(t[2]||c("div",t,2,1).flag("name")).setText("<"+i.name()),function t(e){var n,o=e.$iter()
for(let t=0,a=r(i.el().attributes),u=a.length,p;t<u;t++){p=a[t]
var s=p.name=="class"?i.classNames():p.value
o.push((n=e[t]||(n=c("div",e,t)).flag("attr").setContent([c("div",n.$,"A",n).flag("name"),c("div",n.$,"B",n).flag("value")],2)).flagIf("hide",p.name=="class"&&!s).end((n.$.A.setContent(p.name,3),n.$.B.setContent(s,3),true)))}return o}(t[3]||a(t,3,t[1])),t[4]||c("div",t,4,1).flag("rb").setText(">")],1),(t[5]||c("div",t,5,i).flag("children")).flagIf("multi",i.el().children.length>0).setContent(function t(e,n,o){for(let t=0,s=r(i.el().childNodes),a=s.length,u;t<a;t++){u=s[t]
if(u.nodeType==3){o.push((e[t]||c("div",e,t).flag("text")).setContent(u.textContent,3))}else{o.push((n[t]||c(B,n,t)).setData(u).end())}}return o}(t[6]||a(t,6,t[5]),t[7]||a(t,7,t[5]),u()),5),(t[8]||c("div",t,8,i).flag("close")).setText("</"+i.name()+">")],2,1),3).synced()}
t.prototype.ontap=function(t){var e
console.log("tapped element!")
if(this.type()!=8){var i=o.getTagForDom(this.data())
return(e=i)&&e.ontap&&e.ontap(t)}}})
e.El=B
var z=o.defineTag("CommentEl",B,function(t){t.prototype.render=function(){return this.$open(0).flag("el").setChildren(this.el().textContent,3).synced()}
t.prototype.ontap=function(){return this}})
e.CommentEl=z
var U=o.defineTag("ConsoleEntry",function(t){t.prototype.type=function(t){return this._type}
t.prototype.setType=function(t){this._type=t
return this}
t.prototype.options=function(t){return this._options}
t.prototype.setOptions=function(t){this._options=t
return this}
t.prototype.offset=function(t){return this._offset}
t.prototype.setOffset=function(t){this._offset=t
return this}
t.prototype.entry=function(t){return this._entry}
t.prototype.setEntry=function(t){this._entry=t
return this}
t.prototype.__hover={watch:"hoverDidSet",name:"hover"}
t.prototype.hover=function(t){return this._hover}
t.prototype.setHover=function(t){var e=this.hover()
if(t!=e){this._hover=t}if(t!=e){this.hoverDidSet&&this.hoverDidSet(t,e,this.__hover)}return this}
t.prototype.__selected={watch:"selectedDidSet",name:"selected"}
t.prototype.selected=function(t){return this._selected}
t.prototype.setSelected=function(t){var e=this.selected()
if(t!=e){this._selected=t}if(t!=e){this.selectedDidSet&&this.selectedDidSet(t,e,this.__selected)}return this}
t.prototype.hoverDidSet=function(t){return this.flag("__hover",!!t)}
t.prototype.selectedDidSet=function(t){return this.flag("__selected",!!t)}
t.prototype.isError=function(){return this.type()==f.LOG_TYPES.ERROR}
t.prototype.icon=function(){switch(this.type()){case f.LOG_TYPES.INFO:{return"directions"
break}case f.LOG_TYPES.WARN:{return"warning"
break}case f.LOG_TYPES.ERROR:{return"error"
break}case f.LOG_TYPES.META:{return"report"
break}case f.LOG_TYPES.RESULT:{return"keyboard_arrow_left"
break}default:return"info"}}
t.prototype.render=function(){var t=this.$
x=0
w=0
this.$open(0).flag("scon").setFlag(-1,"t"+this.type()).setChildren([t[0]||c("span",t,0,this).flag("gutter").flag("icon"),this.counter()>1?(t[1]||c("div",t,1,this).flag("badge").flag("repeats")).setContent(this.counter(),3):void 0,this.body()],1).synced()
return this}
t.prototype.type=function(){return this.entry()[1]}
t.prototype.items=function(){var t
return(t=this.entry()).ITEMS||(t.ITEMS=this.data().deserializeParams(this.entry()[0]))}
t.prototype.ref=function(){return this.entry()[2]}
t.prototype.counter=function(){return this.entry()[3]||1}
t.prototype.space=function(){return this.data().space()}
t.prototype.body=function(){var t=this.$$||(this.$$={}),e,i=this
return(e=i._body=i._body||(e=c("div",i)).flag("body").flag("items")).flagIf("firstIsString",i.items()&&(typeof i.items()[0]=="string"||i.items()[0]instanceof String)).setContent([e.$.A||c("div",e.$,"A",e).flag("offset"),function t(e){for(let t=0,n=r(i.items()),o=e.taglen=n.length;t<o;t++){(e[t]||c(D,e,t)).setData(n[t]).dataset("ref",t).end()}return e}(e.$["B"]||s(e.$,"B",i._body))],1).end((e.$.A.setContent(i.offset()?b.msToStr(i.offset()):"",3),true))}
t.prototype.onmouseover=function(t){var e=t.event().relatedTarget
return
if(!this.dom().contains(t.event().relatedTarget)){if(this.data().space().recording()){return this.data().options().set("hoverEntry",this.ref())}}}
t.prototype.onmouseout=function(t){var e=t.event().relatedTarget
return
if(!this.dom().contains(e)){if(this.data().space().recording()&&(!e||!e.closest(".ConsoleEntry"))){return this.data().options().set("hoverEntry",null)}}}
t.prototype.ontap=function(t){return}
t.prototype.scrollIntoView=function(){var t
if(t=this.dom().parentNode){var e=t.scrollTop
var i=t.offsetHeight
var n=e+i
var r=this.dom().offsetTop
if(r<e){return t.scrollTop=r}else if(r>n){return t.scrollTop=r+20}}}
t.prototype.__uid=function(){return this._uid||(this._uid=[this.data().id(),this.ref()])}
t.prototype.__lookup=function(t,e){if(e===undefined)e=0
var i=this
if(t instanceof Array){while(e<n(t)){var r=t[e++]
i=i.getChildByRef(r)}}else{i=this.getChildByRef(t)}return i}
t.prototype.getChildByRef=function(t){return this._body.dom().children[t+1]._tag}
t.prototype.refForElement=function(t){var t=t._dom||t
var e=[]
var i
while(t&&this.dom().contains(t)){if(i=t.dataset.ref){if(i.match(/^\d+$/)){i=parseInt(i)}e.unshift(i)}t=t.parentNode}e.unshift(this.ref())
e.unshift(this.data().id())
return e}})
e.ConsoleEntry=U
var V=o.defineTag("ConsolePane",h,function(t){t.prototype.__hoverEntry={watch:"hoverEntryDidSet",name:"hoverEntry"}
t.prototype.hoverEntry=function(t){return this._hoverEntry}
t.prototype.setHoverEntry=function(t){var e=this.hoverEntry()
if(t!=e){this._hoverEntry=t}if(t!=e){this.hoverEntryDidSet&&this.hoverEntryDidSet(t,e,this.__hoverEntry)}return this}
t.prototype.space=function(){return this.data().space()}
t.prototype.body=function(){let t=this.$$||(this.$$={})
return this._body||(this._body=this._body||c("div",this).flag("body"))}
t.prototype.header=function(){let t=this.$$||(this.$$={}),e
return(e=this._header=this._header||(e=c("div",this)).flag("header").on$(0,["tap","toggleEnabled"],this).setContent([c("div",e.$,"A",e).flag("title").setText("Console"),c("div",e.$,"B",e).flag("tools").setContent(e.$.C||c("div",e.$,"C","B").flag("tool").flag("toggler").dataset("icon","mup"),2)],2)).end((e.$.C.end(),true))}
t.prototype.toggleEnabled=function(){var t
return this.data().setEnabled(t=!this.data().enabled()),t}
t.prototype.ontryclear=function(){return this.data().clear()}
t.prototype.onwheel=function(t){return t.halt()}
t.prototype.add=function(t){if(this._group){this._group.add(t)}else{this.body().dom().appendChild(t.dom())}return this}
t.prototype.rem=function(t){var e=t.parent()
t.orphanize()
if(t==this._group){this._group=t.PREV_GROUP}return this}
t.prototype.group=function(t){t.PREV_GROUP=this._group
this._group=t
this.body().dom().appendChild(this._group.dom())
return this}
t.prototype.refresh=function(){var t=this.body().dom().lastElementChild
if(t&&t.offsetParent){this.body().dom().scrollTop=t.offsetTop+t.offsetHeight}return this}
t.prototype.hoverEntryDidSet=function(t,e){return this}
t.prototype.relayout=function(){return this}
t.prototype.clear=function(){let t=[]
for(let e=0,i=r(this.body().dom().children),n=i.length;e<n;e++){t.push(i[e]._tag)}var e=t
this.body().dom().innerHTML=""
return e}
t.prototype.set=function(t){this.body().dom().innerHTML=""
for(let e=0,i=r(t),n=i.length;e<n;e++){this._body.dom().appendChild(i[e].dom())}return this}
t.prototype.revealEntriesInline=function(){return this}
t.prototype.render=function(){if(false){}return this.$open(0).setHoverEntry(this.data().getEntryForId(this.data().hoverEntry())).setChildren([this.header(),this.space().browser().page()?this.space().browser().page().logs().end():this.body(),this.footer()],1).synced()}})
e.ConsolePane=V
function j(){return l.apply(this,arguments)}o.subclass(j,l)
e.Console=j
j.register("console",f)
j.option("hoverEntry")
j.option("selectedEntry")
j.option("enabled",{default:false,overridable:true})
j.prototype.native=function(){return console}
j.prototype.setup=function(){this._entryMap={}
this._activeEntries=[]
return this}
j.prototype.nextEntryId=function(){return this.space().generateRandomId()}
j.prototype.addEntry=function(t,e){var i=this.serializeParams(e)
if(this._queue){var r=this._queue[n(this._queue)-1]
if(r&&JSON.stringify(r[1][0])==JSON.stringify(i)){console.log("second entry is the same!")
r[1][3]++}else{this._queue.push([f.LOG,[i,t,this.nextEntryId(),1]])}}else{this.push_(f.LOG,[i,t,this.nextEntryId(),1])}return undefined}
j.prototype.createEntry=function(t,e,i){if(i===undefined)i=1
var n=this.serializeParams(e)
return[f.LOG,[n,t,this.nextEntryId(),i]]}
j.prototype.getEntryForId=function(t){return t&&this._entryMap[t]}
j.prototype.getChildById=function(t){return t&&this._entryMap[t]}
j.prototype.startQueue=function(){this._queue=[]
return this}
j.prototype.flushQueue=function(){if(this._queue&&n(this._queue)){var t=n(this._queue)
var e=this._queue
if(t>30){var i=this._queue.slice(0,10)
var r=this._queue.slice(-10)
var o=this.createEntry(f.LOG_TYPES.META,["truncated "+(t-20)+" log entries"],t-20)
i.push(o)
e=i.concat(r)}this.batch_(e)
this}this._queue=null
return this}
j.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
this.addEntry(f.LOG_TYPES.LOG,n)
return(t=this.native()).log.apply(t,n)}
j.prototype.info=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this.addEntry(f.LOG_TYPES.INFO,i)}
j.prototype.error=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this.addEntry(f.LOG_TYPES.ERROR,i)}
j.prototype.warn=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this.addEntry(f.LOG_TYPES.WARN,i)}
j.prototype.result=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this.addEntry(f.LOG_TYPES.RESULT,i)}
j.prototype.clear=function(){return this.push_(g.CONSOLE_CLEAR,[])}
j.prototype.serializeParams=function(t){return JSON.parse(JSON.stringify(t,A))}
j.prototype.deserializeParams=function(t){if(t){t=JSON.stringify(t)}if(typeof t=="string"){var e=JSON.parse(t,C)
return e}else{return t}}
j.prototype.isEnabled=function(){return this.enabled()}
j.prototype.clearEntryCollections=function(){this._errors=null
return this._warnings=null}
j.prototype.errors=function(){return this._errors||(this._errors=this._activeEntries.filter(function(t){return t[1]==f.LOG_TYPES.ERROR}))}
j.prototype.apply=function(t){var e
var i=t._params
switch(t._type){case g.CONSOLE_CLEAR:{if(true){i.REV=this.node().clear()
i.REVTAB||(i.REVTAB=[this.tab().warnings(),this.tab().errors()])}i.REVACTIVE=this._activeEntries||[]
this._activeEntries=[]
this.tab().setWarnings(0)
this.tab().setErrors(0)
break}case g.CONSOLE_LOG:{this.clearEntryCollections()
var n=i[2]
var r=i[1]
var o=!i.ENTRY
if(true){var s=i.ENTRY||(i.ENTRY=c(U).flag("collapsed").setData(this).setEntry(i).setOffset(t._offset).end())
this._entryMap[n]||(this._entryMap[n]=s)
this.node().add(s)}this._activeEntries.push(i)
this.async("refresh")
break}case f.VAL_EXPAND:{var a=this.space().__lookup(i[0]);(e=a)&&e.setExpanded&&e.setExpanded(i[1])
break}}this.clearEntryCollections()
return this}
j.prototype.revert=function(t){var e
this.clearEntryCollections()
var i=t._params
if(i.ENTRY){if(true){this.node().rem(i.ENTRY)}let t=this._activeEntries.pop()
if(i!=t){console.warn("tried op.ENTRY opp")}}switch(t._type){case g.CONSOLE_CLEAR:{if(true){this.node().set(i.REV)
this.async("refresh")}this._activeEntries=i.REVACTIVE||[]
break}case g.CONSOLE_VAL_EXPAND:{var n=this.space().__lookup(i[0]);(e=n)&&e.setExpanded&&e.setExpanded(!!!i[1])
break}}if(i.REVTAB){this.tab().setWarnings(i.REVTAB[0])
this.tab().setErrors(i.REVTAB[1])}return this}
j.prototype.refresh=function(){return this.node().refresh()}
j.prototype.title=function(){return"Console"}
j.prototype.valForOp=function(t){return t.VAL||(t.VAL=c(D).setData(this.deserializeParams(t[0])).end())}
j.prototype.dispose=function(){this._entryMap=null
return this}
j.prototype.persist_=function(){var t
var e=this._activeEntries
if(e.length){this._data.activeEntries=e}else{t=this._data.activeEntries,delete this._data.activeEntries,t}return this}
j.prototype.deserialized=function(){j.prototype.__super__.deserialized.apply(this,arguments)
var t=this._data.activeEntries
if(t){for(let e=0,i=r(t),n=i.length;e<n;e++){let t={_offset:0,_params:i[e],_type:g.CONSOLE_LOG}
this.apply(t)}}return this}
j.prototype.node=function(){return this._node||(this._node=c(V).flag("normal").setData(this).end())}},function(t,e,i){var n=i(0)
var r=i(3).Widget
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.DependenciesPanel=o
o.prototype.view=function(t){return this._view}
o.prototype.setView=function(t){this._view=t
return this}
o.prototype.setup=function(){return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0)
var s=i(3).Widget
var a=i(2),u=a.ACTION,c=a.SCON
var p=i(11).List
function l(){return s.apply(this,arguments)}o.subclass(l,s)
e.DirWidget=l
l.register("dir")
l.option("name")
l.option("parent",{type:"widget"})
l.option("expanded")
l.prototype.setup=function(){return this}
l.prototype.entries=function(){return this._entries||(this._entries=new p(this,[]))}
l.prototype.uri=function(){return""+this.space().namespace()+"/"+this.name()}
l.prototype.ext=function(){return this.name().substr(this.name().lastIndexOf(".")+1)}
l.prototype.mkdir=function(t){var e={name:t,parent:this.id(),type:"dir"}
var i=this.space().createWidget(e).widget()
return i}
l.prototype.mkfile=function(t,e){if(e===undefined)e={}
var i={name:t,parent:this.id(),type:"file",body:e.body||""}
for(let t,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
t=e[s]
i[s]||(i[s]=t)}if(!t||this.entries().any(function(e){return e.name()==t})){console.log("file already exists "+t)
return null}return this.space().createWidget(i).widget()}
l.prototype.rename=function(t){if(!t||t==this.name()||this.parentDir().entries().any(function(e){return e.name()==t})){return this}return this.push_(u.FS_RENAME,[this.id(),t])}
l.prototype.rm=function(){if(r(this.entries())){this.log("Directory is not empty")
return this}return this.push_(u.FS_REMOVE,[this.id()])}
l.prototype.moveTo=function(t){this.log("moveTo",t)
if(t.path().indexOf(this.path())==0){this.log("target is inside folder - not allowed")
return this}if(this.parent()==t){return this}this.push_(u.FS_MOVE,[this.id(),t.id()])
return this}
l.prototype.mount_=function(){l.prototype.__super__.mount_.apply(this,arguments)
if(this.parentDir()){return this.parentDir().entries().add(this)}}
l.prototype.unmount_=function(){l.prototype.__super__.unmount_.apply(this,arguments)
if(this.parentDir()){return this.parentDir().entries().remove(this)}}
l.prototype.parentDir=function(){return this.parent()||this.space().fs()}
l.prototype.path=function(){return""+this.parentDir().path()+"/"+this.name()}
function h(){return l.apply(this,arguments)}o.subclass(h,l)
e.FileSystemWidget=h
h.register("fs")
h.prototype.name=function(){return"project"}
h.prototype.path=function(){return""}
h.prototype.rm=function(){return this}
h.prototype.parentDir=function(){return null}
h.prototype.find=function(t){if(t[0]!="/"){t="/"+t}for(let e=0,i=n(this.space().widgets()),r=i.length,o;e<r;e++){o=i[e]
if(o.TYPE!="file"){continue}if(o.path()==t){return o}}return null}
h.prototype.nodemap=function(){var t={}
for(let e=0,i=n(this.space().widgets()),r=i.length,o;e<r;e++){o=i[e]
if(o.TYPE!="file"){continue}t[o.path()]=o.id()}return t}},function(t,e,i){var n=i(0)
var r=i(3).Widget
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.ExplorerPanel=o
o.register("explorer")
o.prototype.view=function(t){return this._view}
o.prototype.setView=function(t){this._view=t
return this}
o.prototype.setup=function(){return this}},function(t,e,i){var n=i(0),r=n.createElement
var o=i(2).WIDGET
var s=i(3).Widget
var a=n.defineTag("InspectorView",function(t){t.prototype.flex=function(){return"0 0 "+Math.round(this.data().colspan()/1.2).toFixed()+"%"}
t.prototype.render=function(){return this.$open(0).flag("dark").flag("abs").flag("scroll").setFlag(-1,this.data().dock()).flagIf("show",this.data().shouldShow()).css("flex",this.flex()).setChildren(this.data().space().console().node().end(),3).synced()}})
e.InspectorView=a
function u(){return s.apply(this,arguments)}n.subclass(u,s)
e.InspectorWidget=u
u.register("inspector",o)
u.option("dock",{options:["right","bottom","detached"],default:"right"})
u.option("colspan",{default:40})
u.prototype.__reveal={default:-1,chainable:true,watch:"revealDidSet",name:"reveal"}
u.prototype.reveal=function(t){return t!==undefined?(this.setReveal(t),this):this._reveal}
u.prototype.setReveal=function(t){var e=this.reveal()
if(t!=e){this._reveal=t}if(t!=e){this.revealDidSet&&this.revealDidSet(t,e,this.__reveal)}return this}
u.prototype._reveal=-1
u.prototype.cssWidth=function(){return Math.round(this.colspan()/1.2).toFixed()+"%"}
u.prototype.shouldShow=function(){return this.space().console().isEnabled()}
u.prototype.node=function(){let t=this.$$||(this.$$={})
return this._node||(this._node=this._node||r(a,this).flag("node")).setData(this).end()}
u.prototype.revealDidSet=function(t){return this}},function(t,e,i){var n=i(0)
var r=i(3).Widget
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.LayoutWidget=o
o.register("layout")
o.option("renderWhitespace",{default:false,overridable:true})
o.option("viewport",{type:Array,overridable:true})
o.prototype.setup=function(){return this}
o.prototype.deserialized=function(){return this}},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("PaneView","section",function(t){t.prototype.__title={default:"Pane",name:"title"}
t.prototype.title=function(t){return this._title}
t.prototype.setTitle=function(t){this._title=t
return this}
t.prototype._title="Pane"
t.prototype.key=function(t){return this._key}
t.prototype.setKey=function(t){this._key=t
return this}
t.prototype.build=function(){this.setTabindex(0)
return t.prototype.__super__.build.apply(this,arguments)}
t.prototype.oncontextmenu=function(t){var e
t.prevent().halt()
if(e=this.contextmenu()){return e.showAt(t.x(),t.y())}}
t.prototype.contextmenu=function(){return null}
t.prototype.onfocusin=function(t){var e
t.halt()
if(this.data().space().cursor().canPush()){return this.data().space().agent().setFocus(e=this.data()),e}}
t.prototype.onfocusout=function(t){var e
t.halt()
if(!t.event().relatedTarget){if(this.data().space().cursor().canPush()){return this.data().space().agent().setFocus(null),null}}}
t.prototype.header=function(){return null}
t.prototype.footer=function(){return null}
t.prototype.body=function(){let t=this.$$||(this.$$={})
return(this._body=this._body||r("div",this).flag("body")).setText("Content of pane "+this.title())}
t.prototype.render=function(){return this.$open(0).setChildren([this.header(),this.body(),this.footer()],1).synced()}})
e.PaneView=o},function(t,e,i){var n=i(0)
var r=i(2),o=r.WIDGET,s=r.POINTER,a=r.SCON
var u=i(3).Widget
var c=i(17).Delay
var p=s.STATEFLAGS
var l=i(12)
function h(){return u.apply(this,arguments)}n.subclass(h,u)
e.PointerWidget=h
h.register("pointer",s)
h.prototype.setup=function(){return this}},function(t,e,i){var n=i(0)
var r=i(3).Widget
function o(){return r.apply(this,arguments)}n.subclass(o,r)
e.SidebarWidget=o
o.register("sidebar")
o.option("width",{default:200,overridable:true,cssvar:{name:"sidebar-width",unit:"px"}})
o.prototype.view=function(t){return this._view}
o.prototype.setView=function(t){this._view=t
return this}
o.prototype.setup=function(){return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(2),a=s.SIMULATOR,u=s.SCON
var c=i(11).List
var p=i(197).DOMPlayer
var l=i(84).Stylesheet
var h=i(72).WindowGesture
var d=i(70).LayoutGesture
var f=i(17).Delay
var m=i(15).Dimensions
var y=r.defineTag("Frame","iframe",function(t){t.prototype.sandbox=function(t){return this.getAttribute("sandbox")}
t.prototype.setSandbox=function(t){this.setAttribute("sandbox",t)
return this}
t.prototype.zoom=function(t){return this._zoom}
t.prototype.setZoom=function(t){this._zoom=t
return this}
t.prototype.src=function(t){return this._src}
t.prototype.setSrc=function(t){this._src=t
return this}
t.prototype.__baseStyle={watch:"baseStyleDidSet",name:"baseStyle"}
t.prototype.baseStyle=function(t){return this._baseStyle}
t.prototype.setBaseStyle=function(t){var e=this.baseStyle()
if(t!=e){this._baseStyle=t}if(t!=e){this.baseStyleDidSet&&this.baseStyleDidSet(t,e,this.__baseStyle)}return this}
t.prototype.cssFiles=function(t){return this._cssFiles}
t.prototype.setCssFiles=function(t){this._cssFiles=t
return this}
t.prototype.__frameContext={watch:"frameContextDidSet",name:"frameContext"}
t.prototype.frameContext=function(t){return this._frameContext}
t.prototype.setFrameContext=function(t){var e=this.frameContext()
if(t!=e){this._frameContext=t}if(t!=e){this.frameContextDidSet&&this.frameContextDidSet(t,e,this.__frameContext)}return this}
t.prototype.didFocus=function(){return this.data().focus_()}
t.prototype.cssOptions=function(){return{}}
t.prototype.addCSSFile=function(t){var e
this._cssFiles.add(t)
var i=this._cssSheets[e=t.id()]||(this._cssSheets[e]=new l(t,this.cssOptions()))
if(i){i.setDoc(this.doc())}return this}
t.prototype.removeCSSFile=function(t){var e
if(e=this._cssSheets[t.id()]){e.setDoc(null)}this._cssFiles.remove(t)
return this}
t.prototype.getSheetForCSSFile=function(t){return this._cssSheets[t.id()]}
t.prototype.setup=function(){var e=this
e._cssSheets={}
e._cssFiles=new c(e,[])
e._docflags={}
e.dom().src=e.src()
e.dom().onload=function(t){e.setFrameContext(e.dom().contentWindow)
return e.loaded(t)}
return t.prototype.__super__.setup.apply(e,arguments)}
t.prototype.reload=function(t){if(t){r.once(this,"ready",t)}return this.ctx().location.reload()}
t.prototype.ctx=function(){return this.dom().contentWindow}
t.prototype.doc=function(){return this.dom().contentDocument||this.ctx()&&this.ctx().document}
t.prototype.body=function(){return this.doc().body}
t.prototype.scripts=function(){return[]}
t.prototype.isReady=function(){return this._isReady}
t.prototype.resetStylesheets=function(){var t
for(let i=0,r=n(this.cssFiles()),o=r.length;i<o;i++){var e=this.getSheetForCSSFile(r[i])
e&&(e.setDoc(t=this.doc()),t)}return this}
t.prototype.cssSuffix=function(){return""}
t.prototype.loaded=function(t){var e=this
var i="<link href='/static/simulator/"+(e.baseStyle()||"normalize")+e.cssSuffix()+".css' rel='stylesheet' type='text/css' id='scrimbaBaseStyleLink' />"
e.doc().head.innerHTML=i
e.resetStylesheets()
var n=e.scripts().slice(0)
var r=function(){var t
if(t=n.shift()){var i=e.doc().createElement("script")
i.type="text/javascript"
i.src=t
e.doc().head.appendChild(i)
return i.onload=r}else{return e.onready(e)}}
r()
return e}
t.prototype.onready=function(){this._isReady=true
this.trigger("frameload")
r.emit(this,"ready")
return this}
t.prototype.setZoom=function(t){this._zoom=t
this
return this}
t.prototype.commit=function(){this.setBaseStyle(this.data().baseStyle())
return this}
t.prototype.resize=function(){return this}
t.prototype.baseStyleDidSet=function(t,e){if(this.ctx()&&this.ctx().scrimbaBaseStyleLink){this.ctx().scrimbaBaseStyleLink.setAttribute("href","/static/simulator/"+(t||"blank")+this.cssSuffix()+".css")}return this}
t.prototype.frameContextDidSet=function(t,e){if(e){e.ScrimbaConsole=null}if(t){t.NativeConsole=t.console}return this}
t.prototype.dispose=function(){var t=this
t.dom().onload=null
t.setFrameContext(null)
t._cssFiles.toClonedArray().map(function(e){return t.removeCSSFile(e)})
t._cssSheets=null
t._cssFiles=null
if(t.ctx()){t.ctx().location.reload()}return t}})
var g=r.defineTag("Player",y,function(t){t.prototype.cssOptions=function(){return{fakePseudoStates:true}}
t.prototype.cssSuffix=function(){return".preview"}
t.prototype.src=function(){return"/cast/"+this.data().space().id()+".preview"}
t.prototype.mutator=function(){return this._mutator||(this._mutator=new p(this))}
t.prototype.bridge=function(){return this.mutator()}
t.prototype.onready=function(){this.bridge().attachTo(this.ctx(),this.body())
t.prototype.__super__.onready.apply(this,arguments)
if(this._snapshot){this.bridge().fromSnapshot(this._snapshot)
this._snapshot=null}return this}
t.prototype.nodeForPath=function(t){return this.bridge().nodeForPath(t)}
t.prototype.dispose=function(){this._mutator&&this._mutator.dispose&&this._mutator.dispose()
this._mutator=null
return t.prototype.__super__.dispose.apply(this,arguments)}
t.prototype.deserialized=function(){if(false){}var t=this.data().data().body
this.bridge().fromSnapshot(t)
return this}})
var v=r.defineTag("Resizer")
var _=r.defineTag("SimulatorHeader",function(t){t.prototype.zoom=function(t){return this._zoom}
t.prototype.setZoom=function(t){this._zoom=t
return this}
t.prototype.close=function(t){t.halt()
return this.api().log("warn","SIM_CLOSE - not implemented - should stop running")}
t.prototype.min=function(t){t.halt()
return this.data().blur_()}
t.prototype.render=function(){var t=this.$
return this.$open(0).dataset("gesture","move").setChildren(t.$=t.$||[o("div",t,0,this).flag("center").setContent([o("div",t,1,0).flag("title").setText("Preview"),o("div",t,2,0).flag("sizing").setContent([o("span",t,3,2).flag("size").setContent([o("span",t,4,3).flag("w"),o("span",t,5,3).flag("x").setText("Ã"),o("span",t,6,3).flag("h")],2),o("span",t,7,2).flag("zoom")],2)],2),o("div",t,8,this).flag("lft")],2).synced((t[4].setContent(this.data().width(false),3),t[6].setContent(this.data().height(false),3),t[7].setText(" ("+((this.zoom()||1)*100).toFixed(0)+"%)"),true))}})
var b=r.defineTag("SimulatorView",function(t){t.prototype.title=function(t){return this._title}
t.prototype.setTitle=function(t){this._title=t
return this}
t.prototype.__playback={default:true,name:"playback"}
t.prototype.playback=function(t){return this._playback}
t.prototype.setPlayback=function(t){this._playback=t
return this}
t.prototype._playback=true
t.prototype.__show={watch:"showDidSet",name:"show"}
t.prototype.show=function(t){return this._show}
t.prototype.setShow=function(t){var e=this.show()
if(t!=e){this._show=t}if(t!=e){this.showDidSet&&this.showDidSet(t,e,this.__show)}return this}
t.prototype.zoom=function(t){return this._zoom}
t.prototype.setZoom=function(t){this._zoom=t
return this}
t.prototype.__autoPos={default:true,name:"autoPos"}
t.prototype.autoPos=function(t){return this._autoPos}
t.prototype.setAutoPos=function(t){this._autoPos=t
return this}
t.prototype._autoPos=true
t.prototype.__autoSize={default:true,name:"autoSize"}
t.prototype.autoSize=function(t){return this._autoSize}
t.prototype.setAutoSize=function(t){this._autoSize=t
return this}
t.prototype._autoSize=true
t.prototype.setup=function(){this._zoom=1
this.body()
return this}
t.prototype.mount=function(){var t=this
t.data().space().on("reflow",function(){return t.reflow(true)})
t.data().space().on("resize",function(){var e=t.data().space().view().box()
return t.log("viewport resized",e)})
t._mounted=true
t.reflow(true)
return t}
t.prototype.body=function(){let t=this.$$||(this.$$={})
return this._body=this._body||o("div",this).flag("body")}
t.prototype.onresizeupdate=function(t){var e
this.setAutoSize(false)
let i=t.layout()
let n={width:i.width()+t.dx()*t.ax(),height:i.height()+t.dy()*t.ay(),left:i.left(),top:i.top()}
if(t.ax()<0){n.left+=(n.width-i.width())*t.ax()}if(t.ay()<0){n.top+=(n.height-i.height())*t.ay()}this.redraw(this._layout.set(n))
return this.data().setLayout(e=this._layout.clone()),e}
t.prototype.onmoveupdate=function(t){this.setAutoPos(false)
var e=Math.round(t.layout().left()+t.dx())
var i=Math.round(Math.max(t.layout().top()+t.dy(),40))
this._layout.set({left:e,top:i})
this.data().setLayout(this._layout.clone())
return this.redraw()}
t.prototype.ondblclick=function(){this.setAutoPos(true)
this.setAutoSize(true)
return this.reflow(true)}
t.prototype.relayout=function(){return this}
t.prototype.redraw=function(t){if(t===undefined)t=this._layout
let e=100
let i="calc((100% - "+t.width()+"px) * "+t.anchorX()+")"
let n="calc((100% - "+t.height()+"px) * "+t.anchorY()+")"
this._body.css({width:1e4/e+"%",height:1e4/e+"%",transform:"scale("+100/e+")"})
this.css({width:t.width(),height:t.height(),left:i,top:n})
return this.flag("narrow",t.width()<150)}
t.prototype.reflow=function(t){if(t===undefined)t=false
var e=this.data().agentLayout()
var i=e._v
if(i==this._v&&!t){return}if(!e._data){return}var n=this.data().space().view().box()
var r=n.width
var o=n.height
var s=this._layout||(this._layout=e.clone())
if(i!=this._v){if(this.autoPos()&&this.autoSize()){s.set(e.toObject()).resizeParent(r,o)}else if(this.autoSize()){s.resizeParent(r,o).resize(e.width(),e.height())}else if(this.autoPos()){this}}else{s.resizeParent(r,o)}this._v=i
s.round()
this.redraw(this._layout=s)
return}
t.prototype.isMovable=function(){return!this.api().isMobile()}
t.prototype.ontouchstart=function(t){if(this.isMovable()){return d.wrap(t,{layout:this._layout})}}
t.prototype.discardLocalSize=function(){this.setAutoSize(true)
return this.reflow()}
t.prototype.dirty=function(){return this._dirty=true}
t.prototype.showDidSet=function(t,e){return this.flag("show",!!t)}
t.prototype.shouldFocus=function(){return this.data().isFocused()}
t.prototype.focus_=function(){return this.data().focus_()}
t.prototype.ontap=function(){if(!(this._resizedAt&&Date.now()-this._resizedAt<200)){if(this.data().space().branch().canPush()){return this.data().focus_()}}}
t.prototype.interact=function(){return this.data().space().actions().exec("run")}
t.prototype.onwheel=function(t){t.silence()
return this}
t.prototype.clientLayout=function(){return this._layout}
t.prototype.dispose=function(){this._player&&this._player.dispose&&this._player.dispose()
return this}
t.prototype.player=function(){let t=this.$$||(this.$$={})
return this._player||(this._player=this._player||o(g,this).flag("player").setSandbox("allow-same-origin")).bindData(this,"data",[]).end()}
t.prototype.render=function(){var t=this.$,e
if(!this.data().visible()&&this._rendered){this.setShow(false)
return this}if(this._mounted){this.reflow()}this._rendered=true
return this.$open(0).flag("reflow").dataset("gesture","move").flagIf("focus",this.shouldFocus()).flagIf("running",this.data().running()).setShow(this.data().visible()).setChildren(t.$=t.$||[e=this._chrome=this._chrome||(e=o("div",this)).flag("chrome").setContent([this._header=this._header||o(_,e).flag("header").flag("handle"),o(v,t,0,e).flag("left").dataset("gesture","resize,l"),o(v,t,1,e).flag("right").dataset("gesture","resize,r"),o(v,t,2,e).flag("bottom").dataset("gesture","resize,b"),o(v,t,3,e).flag("br").dataset("gesture","resize,b,r"),o(v,t,4,e).flag("bl").dataset("gesture","resize,b,l")],2),this._pointerframe=this._pointerframe||o("div",this).flag("pointerframe"),this._body=this._body||o("div",this).flag("body")],2).synced((this._header.bindData(this,"data",[]).setZoom(this._zoom).end(),t[0].end(),t[1].end(),t[2].end(),t[3].end(),t[4].end(),this._body.setContent(this.player().end(),3),true))}})
e.SimulatorView=b},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(2),a=s.SIMULATOR,u=s.ACTION,c=s.SPIV
var p=i(11).List
var l=i(3).Widget
var h=i(30).PaneWidget
var d=i(84).Stylesheet
var f=i(189).SimulatorView
var m=i(44).Action
var y=i(15).Dimensions
function g(){return h.apply(this,arguments)}r.subclass(g,h)
e.Simulator=g
g.register("simulator",a)
g.prototype.ctx=function(t){return this._ctx}
g.prototype.setCtx=function(t){this._ctx=t
return this}
g.prototype.player=function(t){return this._player}
g.prototype.setPlayer=function(t){this._player=t
return this}
g.prototype.bundle=function(t){return this._bundle}
g.prototype.setBundle=function(t){this._bundle=t
return this}
g.prototype.elements=function(t){return this._elements}
g.prototype.setElements=function(t){this._elements=t
return this}
g.prototype.running=function(t){return this._running}
g.prototype.setRunning=function(t){this._running=t
return this}
g.prototype.loading=function(t){return this._loading}
g.prototype.setLoading=function(t){this._loading=t
return this}
g.prototype.mode=function(t){return this.getAttribute("mode")}
g.prototype.setMode=function(t){this.setAttribute("mode",t)
return this}
g.option("baseStyle",{default:"normalize"})
g.option("area",{default:"aside",overridable:true})
g.option("resizing",{default:false})
g.option("autoIncludeCSS",{default:true})
g.option("externaljs")
g.option("visible",{default:false})
g.option("spiv")
g.prototype.width=function(){return this.layout()?this.layout()[2]:300}
g.prototype.height=function(){return this.layout()?this.layout()[3]:400}
g.prototype.clientLayout=function(){return(this._clientLayout||(this._clientLayout=new y(null))).wrap(this._node?this._node._layout:null)}
g.prototype.defaultLayout=function(){var t
var e=this.space().vw(),i=this.space().vh()
var n=300,r=400
var o=e-n-40
var s=(i-r)*.3
return t=y.build({left:o,top:s,width:n,height:r,vw:e,vh:i,scaleX:100,scaleY:100}).round()}
g.prototype.console=function(){return this.root_().console()}
g.prototype.node=function(){return this._node||(this._node=o(f).setTitle("Preview").setData(this).end())}
g.prototype.setup=function(){var t=this
t.node()
t.setPlayer(t.node().player())
if(true){for(let e=0,i=n(t.space().files()),r=i.length;e<r;e++){t.bindFile(i[e])}t.space().files().on("add",function(e){return t.bindFile(e)})
t.space().files().on("remove",function(e){return t.unbindFile(e)})}return t}
g.prototype.bindFile=function(t){t.on("modified",this,"onfilemodified")
if(t.lang()=="css"){this.player().addCSSFile(t)
return this}}
g.prototype.unbindFile=function(t){t.un("modified",this,"onfilemodified")
if(t.lang()=="css"){this.player().removeCSSFile(t)}return this}
g.prototype.onfilemodified=function(t){if(t.lang()!="css"){return this}}
g.prototype.persist_=function(){if(true){this._data.body=this.player().bridge().toSnapshot()}return this}
g.prototype.refresh=function(){return this}
g.prototype.root=function(){return this.player().doc()&&this.player().doc().body}
g.prototype.enabled=function(){return true}
g.prototype.deserializeWidgets=function(){return this}
g.prototype.deserialized=function(){var t
g.prototype.__super__.deserialized.apply(this,arguments)
return(t=this.player())&&t.deserialized&&t.deserialized()}
g.prototype.title=function(){return"Preview"}
g.prototype.stop=function(){if(this.running()){this.setRunning(false)}return this}
g.prototype.apply=function(t){let e=t.params()
if(t._type==u.SIM_BUILD){t.PREV=this.bundle()
if(!this.space().timeline().isPaused()){this.setLoading(true),true}}else if(t._type==u.SIM_RESULT){this.setLoading(false)
this.setVisible(!!e[1])}return this}
g.prototype.revert=function(t){switch(t._type){case u.SIM_BUILD:{this.setLoading(false)
break}}return this}
g.prototype.convertToBrowser=function(){if(this.spiv()==c){return}var t={}
for(let e=0,i=n(this.space().files()),r=i.length,o;e<r;e++){o=i[e]
t[o.name()]=o}var e=t["index.html"]
var i=t["index.css"]
var r=t["index.js"]
var o=[]
var s=[]
for(let t=0,e=n(this.externaljs()),i=e.length;t<i;t++){s.push('\t<script src="'+e[t]+'"><\/script>')}if(i){s.push('\t<link rel="stylesheet" href="'+i.name()+'">')}if(r){let t=r.name()
if(r.body().indexOf("require")>=0){t=t+".pack.js"}o.push('\t<script src="'+t+'"><\/script>')}var a=e?e.body():""
if(a.indexOf("<body")<0){a="<html>\n<head>\n"+s.join("\n")+"\n</head>\n<body>\n"+a+"\n"+o.join("\n")+"\n</body>\n</html>"}else{a=s.join("\n")+a+"\n"+o.join("\n")}if(!e){this.space().createWidget({type:"file",name:"index.html",body:a})}else{e.replaceBody(a,true)}if(this.layout()){this.space().browser().setLayout(this.streamLayout().clone().set({targetRef:this.space().browser().id()}))}this.setVisible(false)
this.setSpiv(c)
return this}
g.prototype.dispose=function(){this._lastResultEvent=null
return this.node().dispose()}},function(t,e,i){var n=i(0)
var r=i(3).Widget
var o=i(2),s=o.WIDGET,a=o.SCON,u=o.ACTION
var c=i(11).List
function p(){}p.equals=function(t,e){return t&&e&&JSON.stringify(t)==JSON.stringify(e)}
function l(){return r.apply(this,arguments)}n.subclass(l,r)
e.SlideWidget=l
l.register("slide")
l.option("extid")
l.option("name")
l.option("title")
l.option("blobId")
l.option("body")
l.option("meta")
l.option("width")
l.option("height")
l.option("steps",{type:p})
l.option("currentStep",{default:-1})
l.prototype.setup=function(){var t=this
t._bodies={}
t._fetches={inline:{then:function(e){return e(t.body())}}}
return t}
l.prototype.posToScreen=function(t,e,i,n){return this}
l.prototype.upload=async function(){var t
if(this.body()){var e=await this.space().api().uploadBlob(this.body())
this.setBlobId(e.id)
return this.setBody(null),null}}
l.prototype.preload=async function(){var t
var e=await this.space().api().fetchBlob(this.blobId())
return t=await e.text()}
l.prototype.fetchBody=function(){var t=this
let e=t.blobId()||"inline"
return t._fetches[e]||(t._fetches[e]=new Promise(async function(i,n){var r=await t.space().api().fetchBlob(e)
var o=await r.text()
t._bodies[e]=o
t._fetches[e]={then:function(t){return t(o)}}
return i(o)}))}
l.prototype.ext=function(){return this.name().substr(this.name().lastIndexOf(".")+1)}
l.prototype.commitAdd=function(){l.prototype.__super__.commitAdd.apply(this,arguments)
return this}
l.prototype.buffer=function(){return this.data().buffer||this.data().body}
l.prototype.toString=function(){return this.body()}
l.prototype.persist_=function(){return this}
l.prototype.node=function(){return this._editor}
l.prototype.isBinary=function(){return!!this.blobId()}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0),s=o.createElement
var a=i(3).Widget
var u=i(191).SlideWidget
var c=i(171).SlidesView
function p(){return a.apply(this,arguments)}o.subclass(p,a)
e.SlidesWidget=p
p.option("url")
p.option("visible",{default:false,overridable:true})
p.option("currentSlide")
p.option("currentIndex",{default:0})
p.option("items")
p.option("width")
p.option("height")
p.prototype.setup=function(){return this}
p.prototype.node=function(){return this._node||(this._node=s(c).setData(this).end())}
p.prototype.stepForward=function(t){if(t===undefined)t=false
let e=this.currentSlide()
if(e&&e.steps()&&e.steps()[e.currentStep()+1]){if(t){e.setCurrentStep(r(e.steps())-1)}else{e.setCurrentStep(e.currentStep()+1)}return this}this.setCurrentIndex(Math.min(this.currentIndex()+1,this.items().length-1))
if(t){this.currentSlide().setCurrentStep(r(this.currentSlide().steps()||[])-1)}else{this.currentSlide().setCurrentStep(-1)}return this}
p.prototype.stepBackward=function(t){if(t===undefined)t=false
let e=this.currentSlide()
if(e&&!t){if(e.currentStep()>=0){e.setCurrentStep(e.currentStep()-1)
return this}}if(this.currentIndex()>0){this.setCurrentIndex((this.currentIndex()||this.items().length)-1)}this.currentSlide().setCurrentStep(r(this.currentSlide().steps()||[])-1)
return this}
p.prototype.currentSlideId=function(){return this.items()?this.items()[this.currentIndex()]:null}
p.prototype.currentSlide=function(){return this.slides()[this.currentIndex()]}
p.prototype.nextSlide=function(){return this.slides()[this.currentIndex()+1]}
p.prototype.prevSlide=function(){return this.slides()[this.currentIndex()-1]}
p.prototype.slides=function(){var t=this,e
return t.items()?(e=t.items()).SLIDES||(e.SLIDES=t.items().map(function(e){return t.space().widgets().get(e)})):[]}
p.prototype.importFromGoogleSlides=async function(t){try{var e=await this.api().rpc("importSlidesFromGoogle",[t])
console.log(e)
var i={}
for(let t=0,e=n(this.space().widgets()),r=e.length,o;t<r;t++){o=e[t]
if(o instanceof u){i[o.name()]=o}}var o=[]
for(let t=0,r=n(e.slides),s=r.length,a;t<s;t++){a=r[t]
let e=i[a.name]
if(e){e.setTitle(a.title)
e.setWidth(a.width)
e.setHeight(a.height)
e.setBlobId(a.blobId)
e.setSteps(a.steps)
e.setBody(null)}let n=e||this.space().createWidget({type:"slide",name:a.name,title:a.title,width:a.width,height:a.height,blobId:a.blobId,steps:a.steps}).widget()
o.push(n.id())}if(String(this.items())!=String(o)){this.setItems(o)}this.setWidth(e.width)
this.setHeight(e.height)
this.setUrl(e.url)
this.space().view().uxa().flash("Imported "+r(o)+" slides")}catch(t){this.space().view().uxa().flash("Could not import slides")
console.log("something went wrong during import",t)}return this}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r={}
var o=i(2),s=o.WIDGET,a=o.SCON,u=o.ACTION,c=o.KEYS
r.isEqual=function(t,e){if(t===e){return true}if(t instanceof Array&&e instanceof Array){var i=t.length
if(i==e.length){while(i>0){if(t[--i]!=e[i]){return false}}return true}}return false}
function p(){}p.compare=function(t,e){return t==e}
function l(t){this._widget=t
this._changes={}
this._dirty=false
this._v=0}e.WidgetOptions=l
l.prototype.widget=function(t){return this._widget}
l.prototype.setWidget=function(t){this._widget=t
return this}
l.prototype.raw=function(){return this._widget._data}
l.prototype.schema=function(){return this._widget._schema_||(this._widget._schema_={})}
l.prototype.version=function(){return this._v}
l.prototype.api=function(){return this._widget.api()}
l.prototype.space=function(){return this._widget.space()}
l.prototype.touch=function(t){this._v++
if(!this._widget.space().isSyncing()){this._widget&&this._widget.optionsDidUpdate&&this._widget.optionsDidUpdate(t)}return this}
l.prototype.locals=function(){return this._locals||(this._locals=this._widget.space().client().optionsForItem(this._widget))}
l.prototype.get=function(t,e){if(e===undefined)e=this._locals
if(e==true||e===undefined){e=this._locals}var i=e?e[t]:undefined
var n=i!=undefined?i:this.raw()[t]
return this.deserializedValueFor(this.schema()[t],n)}
l.prototype.reset=function(t){var e
if(this.locals()[t]){e=this.locals()[t],delete this.locals()[t],e
this.space().touch("locals")}return this}
l.prototype.set=function(t,e){var i
if(t instanceof Object){for(let e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.set(o,e)}return this}let n=this.schema()[t]||{}
let r=n.type
let o=r&&r.equals||p.compare
var s=e&&e.valueOf?e.valueOf("option"):this.serializedValueFor(this.schema()[t],e)
var c=this.raw()[t]
var l=this._locals?this._locals[t]:undefined
let h
if(!this.space().isEditing()){let e=n&&n.overridable||n.override
if(e){if(!o(l,s)){this.locals()[t]=s
this.touch()
this.space().touch("locals")
if(e=="pause"&&this.space().isPlaying()){this.space().timeline().pause()}}return this}}if(l!=undefined){i=this.locals()[t],delete this.locals()[t],i}if(o(s,c)){return this}if(r&&r.diff){h=r.diff(c,s)
if(!h){return this}}let d=a.keyToRef(t)
if(n.action&&s instanceof Array){this._widget.push_(n.action,s)}else if(c&&h){this._widget.push_(u.PATCH,[this.widget().__uid(),d,h])}else{this._widget.push_(u.SET,[this.widget().__uid(),d,s])}return this}
l.prototype.proxy=function(t){var e=this
e._proxies||(e._proxies={})
return e._proxies[t]||(e._proxies[t]={name:t,schema:e.schema()[t],value:function(i){return e.get(t,i)},setValue:function(i){return e.set(t,i)}})}
l.prototype.discardLocals=function(t){var e
if(!this._locals){return}var i={}
for(let n=this._locals,r,o=0,s=Object.keys(n),a=s.length,u;o<a;o++){u=s[o]
r=n[u]
if(t&&t.indexOf(u)==-1){continue}if(r!=this.raw()[u]){i[u]=r}e=this._locals[u],delete this._locals[u],e}if(n(Object.keys(i))){this.touch(i)}return this
return this}
l.prototype.synced_=function(){if(!this._dirty){return this}this._widget.optionsDidUpdate(this._changes)
this._changes={}
this._dirty=false
return this}
l.prototype.flush=function(){return this}
l.prototype.serializedValueFor=function(t,e){if(t&&t.type=="widget"){return e&&e.__uid?e.__uid():e}else{return e}}
l.prototype.deserializedValueFor=function(t,e){if(t&&t.type=="widget"){return this._widget.space().__lookup(e)}else if(e===undefined&&t.default!=undefined){return t.default}else{return e}}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(2).ACTION
function o(t){this._browser=t
this._index=0
this._stack=[]
this}e.History=o
o.prototype.index=function(t){return this._index}
o.prototype.setIndex=function(t){this._index=t
return this}
o.prototype.replace=function(t){this._stack[this._index]=t
return this}
o.prototype.push=function(t){this._stack=this._stack.slice(0,this._index+1)
this._index=this._stack.push(t)-1
return this}
o.prototype.trim=function(){this._stack=this._stack.slice(0,this._index+1)
return this}
o.prototype.go=function(t,e){if(e===undefined)e=false
var i=this._index+t
var n=this._stack[this._index=i]
return n}
o.prototype.apply=function(t,e){var i=[this._index,this._stack.slice()]
if(e==null){this.push(t)}else if(e==0){this.replace(t)}else{let i=this.go(e)
this.replace(t)}return i}
o.prototype.reset=function(t){t||(t=[-1,[]])
this._index=t[0]
this._stack=t[1]
return this}
o.prototype.current=function(){return this._stack[this._index]}
o.prototype.relative=function(t){return this._stack[this._index+t]}
o.prototype.len=function(){return this._stack.length}
o.prototype.hasNext=function(){return n(this)>this._index+1}
o.prototype.hasPrev=function(){return this._index>0}
o.prototype.isInvalidated=function(){return this.current()&&this.current().match(/^\/([345]\d\d)\.html/)}
o.prototype.state=function(){return[this._index,this._stack]}},function(t,e,i){var n={}
var r=i(2),o=r.SCON,s=r.KEYS,a=r.ACTION
e.serializeReferences=n.serializeReferences=function(t){var e=/\/\*Â§SRÂ§(\w+)Â§START\*\/([^]*?)\/\*Â§SRÂ§END\*\//gm
return t.replace(e,function(t,e,i){return"/*Â§SRÂ§"+e+"Â§*/"})}
e.deserializeReferences=n.deserializeReferences=function(t,e){var i=/\/\*Â§SRÂ§(\w+)Â§\*\//gm
return t.replace(i,function(i,n){var r=e instanceof Function?e(t,n):e[n]
return"/*Â§SRÂ§"+n+"Â§START*/"+r+"/*Â§SRÂ§END*/"})}
e.wrapReferencedValue=n.wrapReferencedValue=function(t,e,i){if(i===undefined)i="html"
if(i=="css"){return"/*Â§SRÂ§"+t+"Â§START*/"+e+"/*Â§SRÂ§END*/"}else if(i=="html"){return"\x3c!--Â§SRÂ§"+t+"Â§START--\x3e"+e+"\x3c!--Â§SRÂ§END--\x3e"}else{return""}}
e.serializeAttributes=n.serializeAttributes=function(t){var e=[]
Array.from(t.attributes).forEach(function(t){let i=o.keyToRef(t.name)
e.push(i)
return e.push(t.value||null)})
e.RAW=true
return e}
e.serializeNode=n.serializeNode=function(t,e,i,r){var o
var s
var a=t.createNodeIterator(e,NodeFilter.SHOW_TEXT,null)
while(o=a.nextNode()){var u=s&&o.previousSibling==s
var c=o.textContent==""
if(u||c){if(!i){return n.serializeNode(t,e.cloneNode(true),true,r)}if(c){o.parentNode.insertBefore(t.createComment("Â§SÂ§B"),o)}else if(u){o.parentNode.insertBefore(t.createComment("Â§SÂ§"),o)}}s=o}var p=r?e.innerHTML:e.outerHTML
var l=/\/\*SCRIMBA:IGNORE:START\*\/([^]*?)\/\*SCRIMBA:IGNORE:END\*\//gm
p=p.replace(l," ")
p=n.serializeReferences(p)
return p}},function(t,e,i){var n=i(3).Widget
i(178)
i(187)
i(185)
i(81)
i(180)
i(190)
i(184)
i(179)
i(80)
e.Widget=n},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(2).DOM
var s=o.MUTS
var a=i(83).patchString
var u={head:"html",body:"html",thead:"table",tbody:"table",tr:"tbody",td:"tr",th:"td",option:"select"}
function c(t,e){if(e===undefined)e={}
this._owner=t
this._listener=null
this._options=e
this._queue=[]
if(true){this._context=window
this._root=document.createElement("body")}this}e.DOMPlayer=c
c.prototype.root=function(t){return this._root}
c.prototype.setRoot=function(t){this._root=t
return this}
c.prototype.__focusNode={watch:"focusNodeDidSet",name:"focusNode"}
c.prototype.focusNode=function(t){return this._focusNode}
c.prototype.setFocusNode=function(t){var e=this.focusNode()
if(t!=e){this._focusNode=t}if(t!=e){this.focusNodeDidSet&&this.focusNodeDidSet(t,e,this.__focusNode)}return this}
c.prototype.__hoverNode={watch:"hoverNodeDidSet",name:"hoverNode"}
c.prototype.hoverNode=function(t){return this._hoverNode}
c.prototype.setHoverNode=function(t){var e=this.hoverNode()
if(t!=e){this._hoverNode=t}if(t!=e){this.hoverNodeDidSet&&this.hoverNodeDidSet(t,e,this.__hoverNode)}return this}
c.prototype.__activeNode={watch:"activeNodeDidSet",name:"activeNode"}
c.prototype.activeNode=function(t){return this._activeNode}
c.prototype.setActiveNode=function(t){var e=this.activeNode()
if(t!=e){this._activeNode=t}if(t!=e){this.activeNodeDidSet&&this.activeNodeDidSet(t,e,this.__activeNode)}return this}
c.prototype.scrollNode=function(t){return this._scrollNode}
c.prototype.setScrollNode=function(t){this._scrollNode=t
return this}
c.prototype.__selection={watch:"selectionDidSet",name:"selection"}
c.prototype.selection=function(t){return this._selection}
c.prototype.setSelection=function(t){var e=this.selection()
if(t!=e){this._selection=t}if(t!=e){this.selectionDidSet&&this.selectionDidSet(t,e,this.__selection)}return this}
c.prototype.attachTo=function(t,e){if(this._root){var i=t.document.body
t.document.adoptNode(this._root)
e.parentNode.replaceChild(this._root,e)
this.reindexNodes()}else{this._root=e}this._context=t
this._context.onsubmit=function(t){t.stopPropagation()
t.preventDefault()
return false}
return this}
c.prototype.win=function(){return this._context}
c.prototype.doc=function(){return this.win().document}
c.prototype.indexNode=function(t,e){if(e===undefined)e=true
if(!t.hasChildNodes()){if(!e){return this}let i=this._nodes.push(t)
t.SCRIMBA_INDEX=i-1
return this}var i=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT
var n=this.doc().createNodeIterator(t,i,null)
var r
while(r=n.nextNode()){if(e||r!=t){r.SCRIMBA_INDEX=this._nodes.push(r)-1}}return this}
c.prototype.reindexNodes=function(){this._nodes=[]
this.indexNode(this.root())
return this}
c.prototype.nodeForPath=function(t){return this._nodes?this._nodes[t]:null}
c.prototype.deserializeNode=function(t){if(typeof t=="number"||t instanceof Number){return this.nodeForPath(t)}else{return this.nodeForHTML(t)}}
c.prototype.serializeRoot=function(){return this.root().innerHTML}
c.prototype.toSnapshot=function(t){if(t===undefined)t={}
return{html:this.serializeRoot()}}
c.prototype.fromSnapshot=function(t){if(t&&t.html){this.root().innerHTML=t.html}return this}
c.prototype.nodeForHTML=function(t){if(t instanceof Array){t="<div>placeholder</div>"}else if(t.text){return this.doc().createTextNode(t.text)}else if(t.comment){return this.doc().createComment(t.comment)}else if(t.TYPE==8){return this.doc().createComment(t.value)}var e=t.slice(1).match(/^\w+/)[0]
var i=this.doc().createElement(u[e]||"div")
i.innerHTML=t
return e=="body"?i.lastElementChild:i.firstElementChild}
c.prototype.cleanTextSplitters=function(t){var e=this.doc().createNodeIterator(t,NodeFilter.SHOW_COMMENT,null)
var i
while(i=e.nextNode()){if(i.textContent=="Â§SÂ§"){i.parentNode.removeChild(i)}else if(i.textContent=="Â§SÂ§B"){i.parentNode.replaceChild(this.doc().createTextNode(""),i)}}return t}
c.prototype.applyMutations=function(t){var e
var i=false
for(let l=0,h=r(t),d=h.length,f;l<d;l++){f=h[l]
if(f[0]==s.INIT){i=true
this.setSelection(null)
f.PREV||(f.PREV=[].slice.call(this.root().childNodes))
if(f.NODES){this.root().innerHTML=""
for(let t=0,e=r(f.NODES),i=e.length;t<i;t++){this.root().appendChild(e[t])}}else{this.root().innerHTML=f[1]
if(f[1].indexOf("Â§SÂ§")>=0){this.cleanTextSplitters(this.root())}f.NODES=[].slice.call(this.root().childNodes)}}else if(f[0]==s.INSERT){i=true
var n=this.nodeForPath(f[1])
var o=f[2]
var u=f.NODE||(f.NODE=this.deserializeNode(f[3]))
var c=n.childNodes[o]
if(c){n.insertBefore(u,c)}else{n.appendChild(u)}this.indexNode(u)}else if(f[0]==s.INSERT_ADJACENT){i=true
let t=f.RELNODE||(f.RELNODE=this.nodeForPath(f[1]))
let e=s.POS[f[2]]
if(f.NODES){for(let e=0,i=r(f.NODES),n=i.length,o;e<n;e++){o=i[e]
if(f[2]==0){t.parentNode.insertBefore(o,t)}else if(f[2]==2){t.appendChild(o)}else{console.log("node not added in M.INSERT_ADJACENT!!",f)}}continue}let n=f[3]
let o=t.previousSibling
let a=t.nextSibling
let u=t.parentNode
let c=t.lastChild
let p
let l=""
let h=[]
if(f[2]==0&&t.nodeType!=Node.ELEMENT_NODE){p=document.createElement("span")
u.insertBefore(p,t)
t=p}if(typeof n=="number"){let i=this.nodeForPath(n)
t.insertAdjacentElement(e,i)
h.push(i)
f.NODES=[i]
if(p){u.removeChild(p)}continue}else if(typeof n=="string"){t.insertAdjacentHTML(e,n)
l+=n}else{for(let i=0,o=r(n),s=o.length,a;i<s;i++){a=o[i]
if(typeof a=="string"){t.insertAdjacentHTML(e,a)
l+=a}else if(typeof a=="number"){let i=this.nodeForPath(a)
t.insertAdjacentElement(e,i)
h.push(i)}}}let d
let m=[]
if(l.indexOf("Â§SÂ§")>=0){this.cleanTextSplitters(u)}if(e=="beforeend"){d=c?c.nextSibling:t.firstChild}else if(e=="beforebegin"){d=o?o.nextSibling:u.firstChild}while(d){if(d==t){break}if(h.indexOf(d)<0){this.indexNode(d)}m.push(d)
d=d.nextSibling}if(p){u.removeChild(p)}f.NODES=m}else if(f[0]==s.REMOVE){i=true
if(e=f.NODE||(f.NODE=this.nodeForPath(f[1]))){f.REL||(f.REL=e.nextSibling)
f.PARENT||(f.PARENT=e.parentNode)
if(e.parentNode){e.parentNode.removeChild(e)}else{console.warn("M.REMOVE has no parent",e,e.parentNode,f,f.PARENT)}}}else if(f[0]==s.SETTEXT){if(e=f.NODE=this.nodeForPath(f[1])){f.PREV=e.textContent
e.textContent=a(f.PREV,f[2])}}else{e=f.NODE=this.nodeForPath(f[1])
if(e&&f[0]==s.SETPROP){var p=s.NAME_MAP[f[2]]||f[2]
f.PREV||(f.PREV=e[p])
e[p]=f[3]}else if(e&&f[0]==s.SETATTR){p=s.NAME_MAP[f[2]]||f[2]
f.PREV||(f.PREV=e.getAttribute(p))
if(p=="class"){f.STATEFLAGS||(f.STATEFLAGS=e.className.split(" ").filter(function(t){return t.match(/^__\w+/)}))}if(f[3]==null){e.removeAttribute(p)}else{e.setAttribute(p,f[3])}if(f.STATEFLAGS){f.STATEFLAGS.map(function(t){return e.classList.add(t)})}}}}if(i)this.reindexNodes()
return this}
c.prototype.revertMutations=function(t){var e
var i=false
var o=n(t)-1
while(o>=0){var a=t[o--]
if(a[0]==s.INIT){this.root().innerHTML=""
for(let t=0,e=r(a.PREV),i=e.length;t<i;t++){this.root().appendChild(e[t])}this.setSelection(null)
i=true}else if(a[0]==s.INSERT){i=true
if(e=a.NODE){if(e.parentNode){e.parentNode.removeChild(e)}else{console.warn("revert INSERT - no parent!",e)}}}else if(a[0]==s.INSERT_ADJACENT){i=true
for(let t=0,e=r(a.NODES),i=e.length,n;t<i;t++){n=e[t]
if(n.parentNode){n.parentNode.removeChild(n)}else{console.warn("revert INSERT_ADJACENT - no parent!",n,a)}}}else if(a[0]==s.REMOVE){i=true
var u=a.PARENT
a.REL?u.insertBefore(a.NODE,a.REL):u.appendChild(a.NODE)}else if(a[0]==s.SETTEXT&&a.NODE){a.NODE.textContent=a.PREV}else if(a[0]==s.SETPROP&&a.NODE){var c=s.NAME_MAP[a[2]]||a[2]
a.NODE[c]=a.PREV}else if(a[0]==s.SETATTR&&a.NODE){c=s.NAME_MAP[a[2]]||a[2]
if(a.PREV==null){a.NODE.removeAttribute(c)}else{a.NODE.setAttribute(c,a.PREV)}}}if(i)this.reindexNodes()
return this}
c.prototype.synced_=function(){return this}
c.prototype.refreshPseudoClass=function(t,e,i){while(i&&i!=this.root()&&(!e||!i.contains(e))){if(i.classList){i.classList.remove(t)}i=i.parentNode}while(e&&e!=this.root()&&this.root().contains(e)){if(e.classList){e.classList.add(t)}e=e.parentNode}return}
c.prototype.focusNodeDidSet=function(t,e){if(e&&e.classList){e.classList.remove("__focus")}if(t&&t.classList){return t.classList.add("__focus")}}
c.prototype.hoverNodeDidSet=function(t,e){return this.refreshPseudoClass("__hover",t,e)}
c.prototype.activeNodeDidSet=function(t,e){return this.refreshPseudoClass("__active",t,e)}
c.prototype.selectionDidSet=function(t,e){if(this.win()==window||!this.win()||!this.win().getSelection){return this}var i=this.win().getSelection()
if(!i){return}if(!t||!t.NODE||t.NODE==this.root()){if(i){i.removeAllRanges()}return this}var n=t.NODE
var r=t[1]
var o=t[2]
var s=t[3]?this.nodeForPath(t[3]):n
if(n.nodeName=="INPUT"||n.nodeName=="TEXTAREA"){var a=/text|search|password|tel|url/
if(n.nodeName=="INPUT"&&!a.test(n.type)){return}if(r<o){n.setSelectionRange(r,o,"forward")}else if(r>o){n.setSelectionRange(o,r,"backward")}else{n.setSelectionRange(r,o,"none")}}else{var u=this.doc().createRange()
if(n!=s){var c=n.compareDocumentPosition(s)
var p=c&Node.DOCUMENT_POSITION_PRECEDING
if(p){u.setStart(s,o)
u.setEnd(n,r)}else{u.setStart(n,r)
u.setEnd(s,o)}}else{if(n.nodeType==3){r=Math.min(n.length,r)
o=Math.min(n.length,o)}if(r<=o){u.setStart(n,r)
u.setEnd(n,o)}else{u.setStart(n,o)
u.setEnd(n,r)}if(r==o){u.collapse()}}i.removeAllRanges()
i.addRange(u)}return}
c.prototype.dispose=function(){this.setActiveNode(null)
this.setFocusNode(null)
this.setHoverNode(null)
this.setSelection(null)
this._nodes=[]
this._context=null
return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0),s=o.createTagCache,a=o.createTagList,u=o.createTagMap,c=o.createTagLoopResult,p=o.createElement
var l=i(1),h=l.Button,d=l.IconButton,f=l.Actionable,m=l.Icon
var y=i(5).UserAvatar
var g=i(204).KarmaCounter
var v=i(91).SpacePage
var _=i(92).UserPage
var b=i(90).HomePage
var x=i(26).Cast
var w=i(68).User
var T=i(67).Group
var S=i(41).Playlist
var k=o.defineTag("Item","a",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.dataDidSet=function(t){if(t){this.draw()
this.measure()}else{this.unflag("current")
this.unflag("first")}this.flag("current",t&&t.CURR)
this.flag("first",t&&t.FIRST)
this.flag("pre",t&&t.PRE)
return this.flag("on",!!t)}
t.prototype.measure=function(){if(true&&this._label){this.dom().offsetWidth
var t=this._label.dom().offsetWidth
this.dom().style.setProperty("--label-width",t+"px")}return this}
t.prototype.draw=function(){var t=($_=this.$).$draw$||($_.$draw$=s(this))
return this.$open("draw0").setHref(this.data()[0]).setChildren([(t[0]||p(m,t,0,this)).setData("#").end(),this.data().CURR?(this._label=this._label||p("h1",this).flag("label")).setContent(this.data()[1],3):(this._label=this._label||p("b",this).flag("label")).setContent(this.data()[1],3)],1).synced()}})
var A=o.defineTag("SiteHeader","header",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.page=function(t){return this._page}
t.prototype.setPage=function(t){this._page=t
return this}
t.prototype.path=function(t){return this._path}
t.prototype.setPath=function(t){this._path=t
return this}
t.prototype.__scope={default:0,watch:"scopeDidSet",name:"scope"}
t.prototype.scope=function(t){return this._scope}
t.prototype.setScope=function(t){var e=this.scope()
if(t!=e){this._scope=t}if(t!=e){this.scopeDidSet&&this.scopeDidSet(t,e,this.__scope)}return this}
t.prototype._scope=0
t.prototype.featuredBootcamp=function(t){return this._featuredBootcamp}
t.prototype.setFeaturedBootcamp=function(t){this._featuredBootcamp=t
return this}
t.prototype.user=function(){return this.data().user()}
t.prototype.refresh=function(){var t=[["/","Scrimba"]].concat(this.page().path())
var e=[]
var i=r(t)>2?1:0
for(let i=0,r=n(t),o=r.length,s;i<o;i++){s=r[i]
let n=t[i+1]
if(s instanceof x){let t=s.isFork()?""+s.owner().name+"'s fork":s.title
s=[s.url(),t]}else if(s instanceof w){s=[s.url(),s.username]}else if(s instanceof S){s=[s.url(),s.title]}else if(s instanceof T){s=[s.url(),s.title]}if(s instanceof Array){s.CURR=!n
e.push(s)}}while(r(e)<4){e.push(null)}this.setPath(e)
this.render()
this.setScope(i)
return this}
t.prototype.dataDidSet=function(t){var e
var i=this.api().db().groups().sel(function(t){return t.type=="bootcamp"&&t.style&&t.style.internal_ad&&t.style.internal_ad.is_main})
return this.setFeaturedBootcamp(e=i.at(0)),e}
t.prototype.scopeDidSet=function(t){return this
var e=this._breadcrumb.dom().children[t]
var i=e.offsetLeft
this._breadcrumb.css({transform:"translateX(-"+i+"px)"})
return this}
t.prototype.mount=function(){for(let t=0,e=n(this.dom().getElementsByClassName("Item")),i=e.length;t<i;t++){e[t]._tag.measure()}return this}
t.prototype.thankTweet=function(){var t
if((t=this.page())&&t.data&&t.data()){var e=""
var i=this.page().data().id
if(this.page().data().pid){e="p/"+this.page().data().pid+"/"+i}else{e="c/"+i}return"Check out this awesome @scrimba tutorial I just watched: https://scrimba.com/"+e+" %23scrimba"}}
t.prototype.navigateHome=function(){return App.router().go("/")}
t.prototype.isBootcamp=function(){return this.data()&&this.data().page()&&this.data().page().data()&&this.data().page().data().type=="bootcamp"}
t.prototype.showFeatured=function(){return this.featuredBootcamp()&&this.featuredBootcamp().style&&this.featuredBootcamp().style.internal_ad&&this.featuredBootcamp().style.internal_ad.show_in_header}
t.prototype.castIsInFeaturedBootcamp=function(){return this.isTutorial()&&this.featuredBootcamp()&&this.page().data().gid==this.featuredBootcamp().id}
t.prototype.isTutorial=function(){var t,e
return(t=(e=this.page())&&e.data&&e.data())&&t.type&&this.page().data().type=="tutorial"}
t.prototype.handleSignIn=function(){var t
var e=window.location.href
var i=""
if((t=this.page())&&t.data&&t.data()){if(this.page().data().id[0]=="p"){i="Playlist"}else if(this.page().data().id[0]=="c"){i="Cast"}else if(this.page().data().id[0]=="g"){i="Group"}else if(this.page().data().id[0]=="u"){i="Profile"}}else{if(e.includes("/allcourses")){i="All"}else if(e.includes("/about")){i="About"}else if(e.includes("/search")){i="Search"}else{i="Home"}}this.api().analytics().callToAction("SignIn Click",""+i+" Header")
return this.trigger("signin")}
t.prototype.showEnrollCta=function(){var t,e
if((t=(e=this.page())&&e.playlist&&e.playlist())&&t.gid&&!this.user()){return true}else{return false}}
t.prototype.enroll=async function(){var t,e
this.api().analytics().callToAction("Enroll Click","Cast Header")
var i=await this.api().tryLogin()
var n=(t=(e=this.page())&&e.playlist&&e.playlist())&&t.gid
if(this.api().user()){return await this.api().rpc("groupJoin",[n],{models:true})}}
t.prototype.trackShare=function(){return this.api().analytics().twitterShare("Cast Header")}
t.prototype.render=function(){var t=this.$,e=this,i,r
return e.$open(0).setChildren([e._breadcrumb=e._breadcrumb||p("div",e).flag("breadcrumb"),(i=e.page())&&i.masthead&&i.masthead(),r=e._right=e._right||(r=p("div",e)).flag("right")],1).synced((e._breadcrumb.setContent([function t(i,r,o,s){var a,u,c,l,h
for(let t=0,f=n(e.path()),m=f.length,y;t<m;t++){y=f[t]
if(t==0){s.push(a=i[t]||(a=p("div",i,t)).on$(0,["tap","navigateHome"],e).flag("iconClicker").setContent(a.$.A||p("div",a.$,"A",a).flag("svgWrapper"),2))}else if(e.isBootcamp()){break}else if(t==1&&(u=(c=e.page())&&c.playlist&&c.playlist())&&u.gid){var d=["/g/"+((l=(h=e.page())&&h.playlist&&h.playlist())&&l.gid),e.page().playlist().title,{CURR:false}]
s.push((r[t]||p(k,r,t)).setData(d).setFlag(0,"n"+t).end())}else{s.push((o[t]||p(k,o,t)).setData(y).setFlag(0,"n"+t).end())}}return s}(t[0]||u(t,0,e._breadcrumb),t[1]||u(t,1,e._breadcrumb),t[2]||u(t,2,e._breadcrumb),c()),e.showEnrollCta()?t[3]||p("span",t,3,e._breadcrumb).flag("enrollCta").on$(0,["tap","enroll"],e).setText("CLICK HERE TO ENROLL AND SAVE YOUR PROGRESS!"):void 0],1),e._right.setContent([e.isTutorial()?o.static([e.showFeatured()&&!e.castIsInFeaturedBootcamp()?(t[4]||p("a",t,4,e._right).flag("ad")).setHref("/g/"+e.featuredBootcamp().id).setContent(e.featuredBootcamp().style.internal_ad.header_text,3).end():void 0,(t[5]||p("a",t,5,e._right).flag("Button").flag("uxa").flag("tweet").flag("primary").setTarget("blank").on$(0,["tap","trackShare"],e).dataset("icon","twitter").setText(" Share on Twitter")).setHref("http://twitter.com/intent/tweet?text="+e.thankTweet()).end()],1,1):void 0,e.page()&&e.page().tools()?(e._tools=e._tools||p("div",r).flag("tools")).setContent(e.page().tools(),3):(e._tabs=e._tabs||p("div",r).flag("tabs")).setContent(!e.isBootcamp()?o.static([e.showFeatured()?(t[6]||p("a",t,6,e._tabs).flag("ad")).setHref("/g/"+e.featuredBootcamp().id).setContent(e.featuredBootcamp().style.internal_ad.header_text,3).end():void 0,(t[7]||p("a",t,7,e._tabs).flag("tab").setHref("/search").setContent(t[8]||p("b",t,8,7).setText("Search"),2)).end(),(t[9]||p("a",t,9,e._tabs).flag("tab").setHref("/allcourses").setContent(t[10]||p("b",t,10,9).setText("All courses"),2)).end()],1,2):void 0,3),e.user()?o.static([(t[11]||p("a",t,11,r).flag("create").dataset("icon","madd")).on$(0,["tap",["trigger","addcast",{type:"tutorial"}]],e).end(),(t[12]||p(f,t,12,r).flag("session").setAction("usermenu").setContent(t[13]||p(y,t,13,12).setS(60),2)).bindData(e,"user",[]).end((t[13].bindData(e,"user",[]).end(),true)),e.user().karma?(t[14]||p(g,t,14,r).setTitle("Karma (minutes watched of your casts)")).bindData(e,"user",[]).end():void 0],1,3):t[15]||p("a",t,15,r).flag("tab").flag("login").on$(0,["tap","handleSignIn"],e).setContent(t[16]||p("b",t,16,15).setText("Sign in"),2)],1),true))}})
e.SiteHeader=A},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s=i(56)
s.setOptions({sanitize:true})
r.extendTag("img",function(t){t.prototype.alt=function(t){return this.getAttribute("alt")}
t.prototype.setAlt=function(t){this.setAttribute("alt",t)
return this}})
var a=i(224).NotFoundPage
var u=i(221).ErrorPage
var c=i(90).HomePage
var p=i(92).UserPage
var l=i(91).SpacePage
var h=i(223).LoginPage
var d=i(219).AboutPage
var f=i(220).AllCoursesPage
var m=i(225).PlaylistPage
var y=i(222).GroupPage
var g=i(226).SearchPage
var v=i(227).TrackingPage
var _=i(93).Url
var b=i(228).Router
var x=i(5).UserAvatar
var w=i(13),T=w.CastTile,S=w.CastListItem
var k=i(87).CastCreateDialog
var A=i(47).CastDialog
var C=i(200).AddToPlaylistDialog
var E=i(206).PlaylistCreateDialog
var D=i(207).PlaylistDialog
var P=i(86).ResetPasswordDialog
var $=i(203).CollectionDialog
var L=i(50).GroupJoinDialog
var O=i(88).CastMenu
var M=i(216).UserMenu
var I=i(208).PlaylistMenu
var R=i(198).SiteHeader
var N=i(10)
var F=i(1),B=F.Button,z=F.IconButton,U=F.Actionable,V=F.Indicator
var j=r.defineTag("Scrimba","div",function(t){t.prototype.api=function(t){return this._api}
t.prototype.setApi=function(t){this._api=t
return this}
t.prototype.__url={watch:"urlDidSet",name:"url"}
t.prototype.url=function(t){return this._url}
t.prototype.setUrl=function(t){var e=this.url()
if(t!=e){this._url=t}if(t!=e){this.urlDidSet&&this.urlDidSet(t,e,this.__url)}return this}
t.prototype.__page={watch:"pageDidSet",name:"page"}
t.prototype.page=function(t){return this._page}
t.prototype.setPage=function(t){var e=this.page()
if(t!=e){this._page=t}if(t!=e){this.pageDidSet&&this.pageDidSet(t,e,this.__page)}return this}
t.prototype.requestedPage=function(t){return this._requestedPage}
t.prototype.setRequestedPage=function(t){this._requestedPage=t
return this}
t.prototype.req=function(t){return this._req}
t.prototype.setReq=function(t){this._req=t
return this}
t.prototype.router=function(t){return this._router}
t.prototype.setRouter=function(t){this._router=t
return this}
t.prototype.user=function(){return this.api().user()}
t.prototype.uid=function(){return this.api().uid()}
t.prototype.sid=function(){return this.api().sid()}
t.prototype.build=function(){if(true){App=this}this.onwinresize=this.onwinresize.bind(this)
return this}
t.prototype.scrollElement=function(){return document.scrollingElement||document.body}
t.prototype.scrollTop=function(){return this.scrollElement().scrollTop}
t.prototype.setScrollTop=function(t){this.scrollElement().scrollTop=t
this
return this}
t.prototype.root=function(){return this}
t.prototype.doc=function(){return r.getTagForDom(document.documentElement)}
t.prototype.onwinresize=function(t){var e=window.innerWidth
var i=window.innerHeight
var n=this._viewport.width-e
var r=this._viewport.height-i
this._viewport.width=e
this._viewport.height=i
this.doc().setFlag("drawerMode","drawer-float")
this.doc().setFlag("sidebarMode","sidebar-"+(e>800?"pin":"float"))
this.doc().flagIf("odd-width",e%2!=0)
this.doc().flagIf("odd-height",i%2!=0)
return this}
t.prototype.livesize=function(){if(false){}for(let e=0,i=n(document.querySelectorAll(".livesize")),r=i.length,o;e<r;e++){o=i[e]
var t=o.offsetWidth
if(o._tag){let e=Math.min(Math.round(t/100),14)
o._tag.setFlag("livesize","w"+e)}}return}
t.prototype.setup=function(){var t=this,e
t._pages={}
t._history=[]
t._viewport={width:0,height:0}
t.flag("desktop",!t.api().ua().isMobile())
t.flag("mobile",t.api().ua().isMobile())
t.flag("phone",t.api().ua().isPhone())
t.flag("tablet",t.api().ua().isTablet())
t.flag("safari",t.api().ua().isSafari())
t.flag("ios",t.api().ua().isIOS())
if(true){t.doc().flag("ios",t.api().ua().isIOS())
t.doc().flag("phone",t.api().ua().isPhone())
window.addEventListener("resize",t.onwinresize,false)
t.onwinresize()}t._router=new b(t,new _(false?true:window.location))
if(e=t._router.hash().match(/reset:([^:]+):([^:]+)/)){setTimeout(function(){return t.uxa().open(o(P).setAid(e[1]).setToken(e[2]).end())})}t.api().uid()&&t.uxa().queue().add(500,function(){return t.api().prefetch("viewings")})
t.uxa().queue().on("idle",function(){let e=this.$$||(this.$$={}),i=this.$$||(this.$$={})
if(t.uxa().queue().failed()){for(let e=0,i=n(t.uxa().queue().errors()),r=i.length;e<r;e++){t.reportError(i[e]._uxa.error)}t.uxa().queue().reset()
t.setRequestedPage((t._errorPage=t._errorPage||o(u,t).flag("errorPage")).end())}t.requestedPage().setIsLoaded(true)
var s=t.requestedPage().status()
if(s!=200){t.setRequestedPage((t._notFoundPage=t._notFoundPage||o(a,t).flag("notFoundPage")).end())}if(t.requestedPage()!=t.page()){t.setPage(t.requestedPage())}t.refreshTitle()
t.header().setPage(t.page())
t.render()
t.header().refresh()
if(true&&!t.dom().offsetParent){let e=document.querySelector(".Scrimba")
if(e){document.body.removeChild(e)}r.mount(t)
r.commit()}else{r.commit()}if(t.page()._timeMark){t.page()._timeMark.end()
return t.page()._timeMark=null}})
t.router().on("change",function(e,i){return t.setUrl(e),e})
return t}
t.prototype.pageDidSet=function(t){if(t){return this.setFlag("page","page-"+t.name())}}
t.prototype.matchUrl=function(t){var e
var i={id:"[\\w-]+",pid:"p[\\w-]+",cid:"c[\\w-]+",uid:"u[\\w-]+",gid:"g[\\w-]+"}
var n=function(t,e){if(typeof e=="string"||e instanceof String){e=e.replace(/\:(\w+)/g,function(t,e){return i[e]||t})
e=new RegExp("^"+e)}return t.match(e)}
if(e=n(t,"/$")){return{target:"$home"}}else if(e=n(t,"/about$")){return{target:"$about"}}else if(e=n(t,"/allcourses$")){return{target:"$allcourses"}}else if(e=n(t,"/(:uid)")){return{target:e[1]}}else if(e=n(t,"/(@|u/)(:id)")){return{target:"$user",username:e[2]}}else if(e=n(t,"/c(asts?)?/(:id)")){return{target:e[2]}}else if(e=n(t,"/g/(:gid)")){return{target:e[1]}}else if(e=n(t,"/p/(:pid)/(:cid)")){return{target:e[2],pid:e[1]}}else if(e=n(t,"/p(laylist)?/(:id)")){return{target:e[2]}}else if(e=n(t,"/search")){var r=this.router().url().queryParams().q
return{target:"$search",query:r}}else if(e=n(t,"/debug/tracking/(:id)")){return{target:"$tracking",sid:e[1]}}else{return{target:"$404"}}}
t.prototype.urlDidSet=function(t,e){var i=this.$$||(this.$$={}),n=this.$$||(this.$$={}),r=this.$$||(this.$$={}),s=this.$$||(this.$$={}),u=this.$$||(this.$$={}),h=this.$$||(this.$$={}),_=this.$$||(this.$$={}),b=this.$$||(this.$$={}),x=this.$$||(this.$$={}),w=this.$$||(this.$$={}),T=this.$$||(this.$$={}),S=this
var k=S._history.indexOf(e)
var A=S._history.indexOf(t)
var C
var E
var D=t.split("?")[0]
var P=S.matchUrl(D)
S.api().sendTracking(N.TYPES.ENTER,[P])
var $=P.target
if($=="$home"){E=(S._homePage=S._homePage||o(c,S).flag("homePage")).end()}else if($=="$about"){console.log("target about! ")
E=(S._aboutPage=S._aboutPage||o(d,S).flag("aboutPage")).end()}else if($=="$allcourses"){console.log("target all courses! ")
E=(S._allCoursesPage=S._allCoursesPage||o(f,S).flag("allCoursesPage")).end()}else if($=="$user"){E=(S._usernamePage=S._usernamePage||o(p,S).flag("usernamePage")).setUsername(P.username).end()}else if($[0]=="u"){E=(S._userPage=S._userPage||o(p,S).flag("userPage")).setUid($).end()}else if($[0]=="c"){E=(S._spacePage=S._spacePage||o(l,S).flag("spacePage")).setCid($).setPid(P.pid).end()}else if($[0]=="g"){E=(S._groupPage=S._groupPage||o(y,S).flag("groupPage")).setGid($).end()}else if($[0]=="p"){E=(S._plPage=S._plPage||o(m,S).flag("plPage")).setPid($).end()}else if($=="$search"){E=(S._searchPage=S._searchPage||o(g,S).flag("searchPage")).setQuery(P.query).end()}else if($=="$tracking"){E=(S._trackingPage=S._trackingPage||o(v,S).flag("trackingPage")).setSid(P.sid).end()}else if($=="$404"){E=(S._notFoundPage=S._notFoundPage||o(a,S).flag("notFoundPage")).end()}E.setIsLoaded(false)
S.setRequestedPage(E)
if(true){E._timeMark=S.api().analytics().time("app","load"+E.name(),t)}S.uxa().queue().add(2e3,function(){return S.requestedPage().load()})
if(A>=0){S.log("navigate",t,A,k)
S.setPage(S.requestedPage())
S.setScrollTop(0)
S.render()}else{S._history.push(t)}return S}
t.prototype.reportError=function(t){return console.error(t)}
t.prototype.load=function(){if(this.uxa().queue().state()=="idle"){return Promise.resolve(this)}else{return this.uxa().queue()}}
t.prototype.mount=function(){this.log("Scrimba#mount",document.visibilityState)
this.api().socket()
return this.livesize()}
t.prototype.router=function(){return this._router}
t.prototype.tapLogin=async function(){return await this.api().tryLogin()}
t.prototype.refreshTitle=function(){if(true){if(!this.page()||this.page().status()!=200){return document.title="Not found"}else{return document.title=this.page().title()}}}
t.prototype.onuxaaction=function(t,e){var i=this
var n=null
var r=e instanceof Array?e[0]:e
if(e instanceof Array){n=e.map(function(t){if(typeof t=="object"){if(t.id){return t.id instanceof Function?t.id():t.id}else{return"object"}}else{return t}})}return setTimeout(function(){return i.api().analytics().sendEvent("uxa",r,JSON.stringify(n))},0)}
t.prototype.onsignout=function(t,e){return this.api().tryLogout()}
t.prototype.onsignin=function(t){return this.api().tryLogin()}
t.prototype.onaddplaylist=function(t,e){return this.uxa().open(o(E).setData(e).end())}
t.prototype.onaddcast=async function(t,e){if(e===undefined)e={}
await this.api().tryLogin()
var i={type:e.type||"lab",uid:this.api().uid()}
return this.uxa().open(o(k).setData(i).end())}
t.prototype.oncastopen=function(t,e){t.halt()
let i=e[0]
let n=e[1]
let r=i.url(n)
this.log("oncastopen",i,r)
if(this.router().path()!=r){return this.router().go(r)}}
t.prototype.oncastedit=function(t,e){this.log("onspaceedit",t)
return this.uxa().open(o(A).flag("modal").setData(e).setFormData(e).end())}
t.prototype.oncastjoinplaylist=function(t,e){return this.uxa().open(o(C).setData(e).end())}
t.prototype.oncastfeature=function(t,e){return e.feature()}
t.prototype.oncastunfeature=function(t,e){return e.unfeature()}
t.prototype.oncastdel=async function(t,e){var i="## Are you sure you want to delete "+e.title+"?\nThis action is irreversible."
var n=await t.uxa().confirm(i)
console.log("result from castdel",n)
if(n){return this.api().rpc("castDel",[e.id])}}
t.prototype.oncastmenu=function(t,e){t.halt()
if(e instanceof Array){return t.uxa().open(o(O).bindData(e,0).setContext(e[1]).end())}else{return t.uxa().open(o(O).setData(e).end())}}
t.prototype.ongroupjoin=async function(t,e){t.halt()
await this.api().tryLogin()
if(this.api().user()){return this.uxa().open(o(L).setData(e).end())}}
t.prototype.onplaylistmenu=function(t,e){t.halt()
return t.uxa().open(o(I).setData(e).end())}
t.prototype.onplaylistedit=function(t,e){return this.uxa().open(o(D).setData(e).end())}
t.prototype.onplaylistdel=async function(t,e){var i="## Are you sure you want to delete "+e.title+"?\nThis action is not revertable."
var n=await t.uxa().confirm(i)
console.log("result from castdel",n)
if(n){return this.api().rpc("playlistDel",[e.id])}}
t.prototype.oncollectionlist=function(t,e){return this.uxa().open(o($).flag("vpanel").setData(e).setRenderer(S.Renderer).end())}
t.prototype.ontoggledrawer=function(){return this.toggleFlag("show-drawer")}
t.prototype.onusermenu=function(t,e){return t.uxa().open(o(M).setData(e).end())}
t.prototype.onbeforenavigate=function(t){var e
this.log("onbeforenavigate",t,t.data());(e=this.page())&&e.onbeforenavigate&&e.onbeforenavigate(t)
return this}
t.prototype.header=function(){let t=this.$$||(this.$$={})
return(this._header=this._header||o(R,this).flag("header").flag("masthead").flag("bar").flag("flat")).setData(this).end()}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([true?(t[0]||o(V,t,0,this).setType("forward").setThreshold(40)).bindData(this.uxa(),"queue",[]).end():void 0,this.page().end(),this.header()],1).synced()}
t.prototype.touch=function(){if(this._page){r.ticker().add(this)
return r.Scheduler.event({type:"dirty"})}}
t.prototype.tick=function(){return this.render()}
t.prototype.commit=function(){return this}})
e.Scrimba=j},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.SelectField
var u=i(23).Select
var c=n.defineTag("AddToPlaylistDialog",s,function(t){t.prototype.setup=function(){var e=this
t.prototype.__super__.setup.apply(e,arguments)
e.api().prefetch(["user",e.api().uid()]).then(function(){return e.render()})
return e}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
var i=this.api().user().playlists().map(function(t){return[t.id,t.title]})
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r(a,e.$,"A",e).setName("pid").setLabel("Select playlist"),r("label",e.$,"B",e).setContent([r("input",e.$,"C","B").setType("checkbox").setName("toFront").setChecked(false),r("span",e.$,"D","B").setText("Add to top of playlist")],2)],2)).end((e.$.A.setOptions(i).end(),e.$.C.end(),true))}
t.prototype.onuxasubmit=function(t,e){var i=this
var n=e.hasOwnProperty("toFront")?true:false
return i.uxa().queue().add(300,function(){return i.api().rpc("playlistAddItems",[e.pid,[i.data().id],n])})}})
e.AddToPlaylistDialog=c},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(23).Radio
var u=r.defineTag("CastTopicField",function(t){t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.render=function(){var t=this.$,e=this
var i=e.value()
return e.$open(0).setChildren([e.label()?(t[0]||s("label",t,0,e).flag("title")).setContent(e.label(),3):void 0,(t[1]||s("div",t,1,e).flag("Radios").flag("group")).setContent(function t(i){for(let t=0,r=n(e.api().db().topics().all()),o=i.taglen=r.length,u;t<o;t++){u=r[t];(i[t]||s(a,i,t).setName("topic_id")).setFlag(0,u.id).setValue(u.id,1).setLabel(u.name).end()}return i}(t[2]||o(t,2,t[1])),4)],1).synced()}
t.prototype.value=function(){var t=this.dom().querySelector("input:checked")
return t&&t.value||null}
t.prototype.onchange=function(t){this.render()
return this}})
e.CastTopicField=u},function(t,e,i){var n=i(0),r=n.createTagList,o=n.createTagMap,s=n.createElement
var a=i(23).Radio
var u={lab:"Allows audience to follow along with their own live versions. All changes will be broadcasted live.",tutorial:"Tutorials are not visible to others until you have decided to publish them.",template:"Create a template for your own use"}
var c=[{value:"lab",title:"Playground",desc:"Experiment"},{value:"tutorial",title:"Screencast",desc:"Record a tutorial"},{value:"template",title:"Template",desc:"Create & reuse"}]
var p=n.defineTag("CastTypeField",function(t){t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.pattern=function(t){return this._pattern}
t.prototype.setPattern=function(t){this._pattern=t
return this}
t.prototype.render=function(){var t=this.$,e=this
var i=e.value()
return e.$open(0).setChildren([e.label()?(t[0]||s("label",t,0,e).flag("caption")).setContent(e.label(),3):void 0,(t[1]||s("div",t,1,e).flag("Radios").flag("group").flag("xl")).setContent(function t(i){var n=i.$iter()
for(let t=0,r=c.length,o;t<r;t++){o=c[t]
if(e.pattern()&&!e.pattern().test(o.value)){continue}n.push((i[t]||s(a,i,t).setName("type").setTabindex(1)).setValue(o.value,1).setLabel(o.title).setDesc(o.desc).end())}return n}(t[2]||o(t,2,t[1])),5)],1).synced()}
t.prototype.value=function(){var t=this.dom().querySelector("input:checked")
return t&&t.value||null}
t.prototype.onchange=function(t){this.log("onchange",t)
this.render()
return this}})
e.CastTypeField=p},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o=i(0),s=o.createElement
var a=i(1),u=a.Dialog,c=a.TextField,p=a.IconButton,l=a.Menu,h=a.MenuItem
var d=o.defineTag("CollectionDialog",u,function(t){t.prototype.renderer=function(t){return this._renderer}
t.prototype.setRenderer=function(t){this._renderer=t
return this}
t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.items=function(t){return this._items}
t.prototype.setItems=function(t){this._items=t
return this}
t.prototype.setup=function(){this.setItems(this.data().sel(function(){return true}))
this.dom().style.setProperty("--li-len",r(this.items()))
return this}
t.prototype.onshowoptions=function(t){var e
return t.uxa().open((e=(e=s(l)).setContent([s(h,e.$,"A",e).setAction(["sort","title"]).setLabel("Alphabeticall"),s(h,e.$,"B",e).setAction(["sort","-created_at"]).setLabel("Newest"),s(h,e.$,"C",e).setAction(["sort","created_at"]).setLabel("Oldest")],2)).end((e.$.A.end(),e.$.B.end(),e.$.C.end(),true)))}
t.prototype.onsort=function(t,e){t.halt()
this.items().setSorter(e[0])
return this.render()}
t.prototype.onrouted=function(t){this.log("routed from inside collection")
return this.hide()}
t.prototype.body=function(){var t=this.$$||(this.$$={}),e,i=this
return(e=i._body=i._body||(e=s("div",i)).flag("body").setContent(e.$.A||s("div",e.$,"A",e).flag("List"),2)).end((e.$.A.setContent(function t(e){for(let t=0,r=n(i.items()),o=r.length;t<o;t++){e.push(i._renderer(r[t],t,i.context()||i))}return e}([]),3),true))}
t.prototype.header=function(){let t=this.$$||(this.$$={}),e
return(e=this._header=this._header||(e=s("header",this)).flag("header").flag("hbar").setContent([this._query=this._query||s("input",e).flag("query").setType("text").setName("query").setPlaceholder("Type to filter"),s(p,e.$,"A",e).setAction("showoptions").setIcon(".")],2)).end((this._query.end(),e.$.A.end(),true))}
t.prototype.oninput=function(t){console.log("oninput TextField",this._query.value())
let e=this._query.value().toLowerCase()
let i=new RegExp(e)
this.items().filters().set("fulltext",i)
return this.render()}
t.prototype.footer=function(){let t=this.$$||(this.$$={})
return this._footer=this._footer||s("footer",this).flag("footer")}})
e.CollectionDialog=d},function(t,e,i){var n=i(0)
var r=n.defineTag("KarmaCounter",function(t){t.prototype.user=function(){return this.data()}
t.prototype.render=function(){return this.$open(0).setChildren((this.data().karma/60).toFixed(0)||0,3).synced()}})
e.KarmaCounter=r},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.IconButton,a=o.Button
var u=i(13).CastTile
var c=n.defineTag("Circle",function(t){t.prototype.__rounds={default:0,name:"rounds"}
t.prototype.rounds=function(t){return this._rounds}
t.prototype.setRounds=function(t){this._rounds=t
return this}
t.prototype._rounds=0
t.prototype.__radius={default:26,name:"radius"}
t.prototype.radius=function(t){return this._radius}
t.prototype.setRadius=function(t){this._radius=t
return this}
t.prototype._radius=26
t.prototype.setup=function(){var t=60
var e=this.radius()
var i=2*Math.PI*e
var n="<circle cx='"+t*.5+"' cy='"+t*.5+"' r='"+e+"' stroke-dasharray='"+i+"' stroke-dashoffset='0'/>"
this.dom().innerHTML="<svg viewBox='0 0 "+t+" "+t+"' version='1.1' width='"+t+"' height='"+t+"' xmlns='http://www.w3.org/2000/svg'>"+n+"</svg><div class='circle' data-icon='play'></div>"
this._element=this._dom.children[0].childNodes[0]
this._div=this._dom.children[1]
this._div.style.width=this._div.style.height=e*2+"px"
this.render()
return this}
t.prototype.draw=function(t){if(t===undefined)t=0
var e=2*Math.PI*this.radius()
this._progress=t
this._element.style["stroke-dashoffset"]=e*(1-t)
return this}
t.prototype.cancel=function(){var t=this
if(t._animation){t._animation&&t._animation.cancel&&t._animation.cancel()
t._animation=null
t.anim().animate(t._progress,0,300,function(e){return t.draw(e)},"linear")}return t}
t.prototype.ontap=function(){return this}
t.prototype.animate=function(t){var e=this
return e._animation=e.anim().animate(0,1,1e4,function(t){return e.draw(t)},"linear",function(){return t?t(e):null})}
t.prototype.render=function(){return this}})
var p=null
var l=n.defineTag("NextUpView",function(t){t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.oncancel=function(t){t.halt()
return this.cancel()}
t.prototype.onfinish=function(t){var e=this.data().url(this.context())
this.router().un("change",this.cancel)
this.router().go(e)
this.trigger("uxa:hide")
return this}
t.prototype.play=function(){this._circle.cancel()
return this.trigger("finish")}
t.prototype.cancel=function(){var t=this
t.router().un("change",t.cancel)
t._circle.cancel()
return setTimeout(function(){return t.trigger("uxa:hide")},200)}
t.prototype.mount=function(){var t=this
t.cancel=t.cancel.bind(t)
t.router().on("change",t.cancel)
l.Instance=t
t._circle.animate(function(){return t.trigger("finish")})
return t}
t.prototype.unmount=function(){l.Instance=null
this.router().un("change",this.cancel)
return this}
t.prototype.render=function(){var t=this.$,e
return this.$open(0).setChildren(t.$=t.$||[this._tile=this._tile||r(u,this).flag("tile").flag("float"),e=(e=r("div",t,0,this)).flag("over").setContent([this._circle=this._circle||r(c,e).flag("circle").on$(0,["tap","play"],this),r(a,t,1,e).flag("cancel").flag("sm").setAction("cancel").setLabel("cancel")],2)],2).synced((this._tile.bindData(this,"data",[]).setContext(this.context()).end(),this._circle.end(),t[1].end(),true))}})
e.NextUpView=l},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField,u=o.TextArea
var c=n.defineTag("PlaylistCreateDialog",s,function(t){t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r(a,e.$,"A",e).setType("text").setName("title").setLabel("Title").setRequired(true).setPlaceholder("Untitled playlist"),r(a,e.$,"B",e).setType("text").setName("tagline").setLabel("Tagline").setRequired(false).setDesc("A sentence to describe the playlist (will appear in search results)").setPlaceholder("Tagline"),r(u,e.$,"C",e).flag("mb-md").setName("description").setLabel("Description").setRequired(true).setDesc("Full description (markdown supported)")],2)).end((e.$.A.end(),e.$.B.end(),e.$.C.end(),true))}
t.prototype.onuxasubmit=function(){var t=this
return t.uxa().queue().add(200,async function(){try{await t.api().rpc("playlistCreate",[t.formData()],{models:true})
return window.alert("Your playlist has been created. Click on the settings icon of a screencast's tile to add it to the playlist.")}catch(t){throw t}})}})
e.PlaylistCreateDialog=c},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextArea,u=o.TextField
var c=i(25).PrivacyField
var p=n.defineTag("PlaylistDialog",s,function(t){t.prototype.loadFormData=function(){return this.applyFormData(this.data())}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r(u,e.$,"A",e).setType("text").setName("title").setLabel("Title").setRequired(true).setPlaceholder("Untitled playlist"),r(u,e.$,"B",e).setType("text").setName("tagline").setLabel("Tagline").setRequired(false).setDesc("A sentence to describe the playlist (will appear in search results)").setPlaceholder("Tagline"),r(a,e.$,"C",e).flag("mb-md").setName("description").setLabel("Description").setRequired(true).setDesc("Full description (markdown supported)"),r(c,e.$,"D",e)],2)).end((e.$.A.end(),e.$.B.end(),e.$.C.end(),e.$.D.bindData(this,"data",[]).end(),true))}
t.prototype.onuxasubmit=function(){var t=this
return t.uxa().queue().add(200,function(){return t.data().update(t.formData())})}})
e.PlaylistDialog=p},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Menu,a=o.MenuItem
var u=n.defineTag("PlaylistMenu",s,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[r(a,t,0,this).setIcon(">").setAction("playlistedit").setLabel("Edit playlist"),r("hr",t,1,this),r(a,t,2,this).flag("neg").setIcon("x").setAction("playlistdel").setLabel("Delete playlist")],2).synced((t[0].end(),t[2].end(),true))}})
e.PlaylistMenu=u},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0),o=r.createElement
var s=i(5).UserAvatar
var a=i(14),u=a.TimeAgo,c=a.Duration,p=a.ShortCount
var l=i(48).CastPreview
var h=i(33).Tile
var d=i(32).CoverArt
var f=i(1).IconButton
var m=r.defineTag("PlaylistTile",h,function(t){t.reg("p")
t.Renderer=function(t,e){let i,n=this.$$||(this.$$={}),r
return(n[r="key$"+e]||o(m,n,r,this)).setData(t).end()}
t.prototype.url=function(){return this.data().gid?"/g/"+this.data().gid:this.data().url()}
t.prototype.render=function(){var t=this.$
var e=this.data().items()
var i=e[0]||{}
return this.$open(0).setFlag(-1,this.data().id).setFlag(-2,this.data().type).setFlag(-3,this.data().privacy).setFlag(-4,this.data().topic_id).setChildren(t.$=t.$||[o(l,t,0,this).flag("figure"),o("div",t,1,this).flag("aside").setContent([o("span",t,2,1).flag("count"),o("b",t,3,1).setText("casts")],2),o("div",t,4,this).flag("summary")],2).synced((t[0].setData(i).end(),t[2].setContent(n(e),3),t[4].setContent([this.data().can(this.api().user(),"edit")?(t[5]||o("div",t,5,4).flag("actions").flag("sm").setContent(t[6]||o(f,t,6,5).flag("inspect").setIcon("*"),2)).end((t[6].setAction(["playlistmenu",this.data()]).end(),true)):void 0,(t[7]||o("div",t,7,4).flag("title").setContent(t[8]||o("a",t,8,7),2)).end((t[8].setHref(this.url()).setContent(this.data().title,3).end(),true))],1),true))}})
e.PlaylistTile=m},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Menu,a=o.MenuItem
var u=n.defineTag("PurchaseMenu",s,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).flag("inset").setChildren(t.$=t.$||[r(a,t,0,this).setIcon(">").setLabel("Credit Card").setAction("stripeenroll"),r(a,t,1,this).setIcon(">").setLabel("Paypal").setAction("paypalenroll")],2).synced((t[0].end(),t[1].end(),true))}})
e.PurchaseMenu=u},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.Button,u=o.TextArea,c=o.TextField,a=o.Button
var p=n.defineTag("ShareDialog",s,function(t){t.prototype.featuredBootcamp=function(t){return this._featuredBootcamp}
t.prototype.setFeaturedBootcamp=function(t){this._featuredBootcamp=t
return this}
t.prototype.setup=function(){var t
if(this.showFeatured()){this.setSubmitLabel("Visit course page")}else if(this.data().owner().twitter_handle){this.setSubmitLabel("Say thanks via Twitter")}else{this.setSubmitLabel("Share on Twitter")}return this.setCancelLabel(t="No thanks"),t}
t.prototype.showFeatured=function(){return this.featuredBootcamp()&&this.featuredBootcamp().style&&this.featuredBootcamp().style.internal_ad&&this.featuredBootcamp().style.internal_ad.show_in_dialog&&this.data().gid!=this.featuredBootcamp().id}
t.prototype.navigateToCourse=function(t){this.hide()
return App.router().go("/g/"+this.featuredBootcamp().id)}
t.prototype.onuxasubmit=function(t,e){if(this.showFeatured()){return this.navigateToCourse()}else{window.open("https://twitter.com/intent/tweet?text="+this.thankTweet())
return this.api().analytics().twitterShare("Cast Dialog")}}
t.prototype.url=function(){if(this.data().gid){return"https://scrimba.com/g/"+this.data().gid}else if(this.data().pid){return"https://scrimba.com/p/"+this.data().pid+"/"+this.data().id}else{return"https://scrimba.com/c/"+this.data().id}}
t.prototype.thankTweet=function(){if(this.data().owner().twitter_handle){return"Thanks a lot for your awesome @scrimba tutorial @"+this.data().owner().twitter_handle+"! "+this.url()+" %23scrimba"}else{return"Check out this awesome @scrimba tutorial I just watched: "+this.url()+" %23scrimba"}}
t.prototype.creator=function(){return this.data().owner().name||this.data().owner().username}
t.prototype.body=function(){let t=this.$$||(this.$$={}),e
var i="Share this tutorial on Twitter!"
var n="If you liked this tutorial, we'd greatly appreciate if you'd be willing to share it on Twitter so that other people can discover Scrimba as well."
if(this.showFeatured()){i=this.featuredBootcamp().style.internal_ad.dialog_title
n=this.featuredBootcamp().style.internal_ad.dialog_text}else if(this.data().owner().twitter_handle){i="Thank "+this.creator()+" for the tutorial on Twitter!"
n=""+this.creator()+" put in a lot of effort to create this lesson. Do you want to show your gratitude with a tweet?"}return(e=this._body=this._body||(e=r("div",this)).flag("body")).setContent([(e.$.A||r("h2",e.$,"A",e)).setContent(i,3),(e.$.B||r("p",e.$,"B",e)).setContent(n,3),this.showFeatured()?(e.$.C||r("a",e.$,"C",e).on$(0,["tap","navigateToCourse"],this).setContent(e.$.D||r("img",e.$,"D","C"),2)).end((e.$.D.setSrc("/static/art/"+this.featuredBootcamp().id+".png").end(),true)):void 0],1)}})
e.ShareDialog=p},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("Slider",function(t){t.prototype.name=function(t){return this._name}
t.prototype.setName=function(t){this._name=t
return this}
t.prototype.__min={default:0,name:"min"}
t.prototype.min=function(t){return this._min}
t.prototype.setMin=function(t){this._min=t
return this}
t.prototype._min=0
t.prototype.__max={default:1,name:"max"}
t.prototype.max=function(t){return this._max}
t.prototype.setMax=function(t){this._max=t
return this}
t.prototype._max=1
t.prototype.__step={default:.01,name:"step"}
t.prototype.step=function(t){return this._step}
t.prototype.setStep=function(t){this._step=t
return this}
t.prototype._step=.01
t.prototype.__value={watch:"valueDidSet",name:"value"}
t.prototype.value=function(t){return this._value}
t.prototype.setValue=function(t){var e=this.value()
if(t!=e){this._value=t}if(t!=e){this.valueDidSet&&this.valueDidSet(t,e,this.__value)}return this}
t.prototype.valueDidSet=function(t){var e=this.relativeValue(t)
var i=(e*100).toFixed(0)+"%"
var n=(-100+e*100).toFixed(0)+"%"
var r=this.isVertical()?"bottom":"left"
var o=this.isVertical()?"translateY("+i+")":"translateX(-"+i+")";(this._thumb||this.thumb()).css(r,i);(this._thumb||this.thumb()).css("transform",o);(this._bar||this.bar()).css(r,n)
if(this._vstr){this._vstr.setText(this.displayValue(t))}return this}
t.prototype.relativeValue=function(t){if(t===undefined)t=this.value()
return(t-this.min())/(this.max()-this.min())}
t.prototype.steppedValue=function(t){var e=1/this.step()
return Math.round(t*e)/e}
t.prototype.displayValue=function(t){if(t===undefined)t=this.value()
return this.value()}
t.prototype.thumb=function(){let t=this.$$||(this.$$={}),e
return(e=this._thumb=this._thumb||(e=r("div",this)).flag("thumb").setContent([r("img",e.$,"A",e).setSrc("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),this._vstr=this._vstr||r("span",e).flag("vstr")],2)).end((e.$.A.end(),true))}
t.prototype.bar=function(){let t=this.$$||(this.$$={})
return this._bar=this._bar||r("div",this).flag("bar")}
t.prototype.isVertical=function(){return this._isVertical==null?this._isVertical=this.hasFlag("vertical"):this._isVertical}
t.prototype.ontouchstart=function(t){var e=this
var i=t.event()
e._box=e.dom().getBoundingClientRect()
e._lx=t.x()-e._box.left
e._ly=t.y()-e._box.top
e._ow=e._box.width
e._oh=e._box.height
e.setValue=function(){return e}
t.capture()
return e.ontouchupdate(t)}
t.prototype.ontouchupdate=function(t){if(this.isVertical()){return this.update((this._oh-(this._ly+t.dy()))/this._oh)}else{return this.update((this._lx+t.dx())/this._ow)}}
t.prototype.ontouchend=function(t){var e
this.trigger("change")
e=this.setValue,delete this.setValue,e
return this}
t.prototype.update=function(t){t=Math.max(Math.min(1,t),0)
t=this.steppedValue((this.max()-this.min())*t+this.min())
this.valueDidSet(this._value=t)
return this.trigger("changeslider",{value:t})}
t.prototype.ontap=function(t){return t.halt()}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||r("div",t,0,this).flag("track"),2).synced((t[0].setContent([t[1]||r("div",t,1,0).flag("bar-track"),this.thumb()],1).end((t[1].setContent(this.bar(),3),true)),true))}})
e.Slider=o},function(t,e,i){var n=i(0),r=n.createElement
var o=n.defineTag("SKCubeGrid",function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).flag("sk-cube-grid").setChildren(t.$=t.$||[r("div",t,0,this).flag("sk-cube").flag("sk-cube1"),r("div",t,1,this).flag("sk-cube").flag("sk-cube2"),r("div",t,2,this).flag("sk-cube").flag("sk-cube3"),r("div",t,3,this).flag("sk-cube").flag("sk-cube4"),r("div",t,4,this).flag("sk-cube").flag("sk-cube5"),r("div",t,5,this).flag("sk-cube").flag("sk-cube6"),r("div",t,6,this).flag("sk-cube").flag("sk-cube7"),r("div",t,7,this).flag("sk-cube").flag("sk-cube8"),r("div",t,8,this).flag("sk-cube").flag("sk-cube9")],2).synced()}})
e.SKCubeGrid=o
var s=n.defineTag("SKCubeMove",function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).flag("sk-cube-move").setChildren(t.$=t.$||[r("div",t,0,this).flag("cube"),r("div",t,1,this).flag("cube")],2).synced()}})
e.SKCubeMove=s
var a=n.defineTag("SKDoubleBounce",function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[r("div",t,0,this),r("div",t,1,this)],2).synced()}})
e.SKDoubleBounce=a},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createElement
var s
var a=function(){return s||(s=new Promise(function(t){window.twttr={_e:[t]}
var e=o("script").setSrc("https://platform.twitter.com/widgets.js").end()
return document.body.appendChild(e.dom())}))}
var u=function(t){var e=t.length-1
while(e>0){var i=Math.floor(Math.random()*(e+1))
var n=t[e]
t[e]=t[i]
t[i]=n
e--}return t}
var c=["901662547409080320","865044147333283844","935101393223933952","930832142942093312","867423978297622529","883448000567103488","892811504000610317","900307093835714560"]
var p=r.defineTag("TweetView",function(t){t.prototype.__ids={default:c,name:"ids"}
t.prototype.ids=function(t){return this._ids}
t.prototype.setIds=function(t){this._ids=t
return this}
t.prototype._ids=c
t.prototype.__count={default:6,name:"count"}
t.prototype.count=function(t){return this._count}
t.prototype.setCount=function(t){this._count=t
return this}
t.prototype._count=6
t.prototype.setup=async function(){t.prototype.__super__.setup.apply(this,arguments)
if(false){}if(!(this.ids()instanceof Array)){return this}await a()
var e=u(this.ids().slice()).slice(0,this.count())
for(let t=0,r=n(e),s=r.length;t<s;t++){var i=o("div")
window.twttr.widgets.createTweet(r[t],i.dom(),{cards:"hidden",width:360,conversation:"none",dnt:true})
this.dom().appendChild(i.dom())}return this}})
e.TweetView=p},function(t,e,i){var n={},r=i(0),o=r.createElement
var s=i(218).UserUpdateDialog
n.onchangeemail=function(t,e){var i
return i=n.uxa().open(o(s).setData(e).end())}
var a=r.defineTag("UserLinks",function(t){t.prototype.usersOwnProfile=function(){if(!this.api().user()){return false}if(!this.data().id){return false}return this.data().id==this.api().user().id}
t.prototype.changeEmail=function(){return this.uxa().open(o(s).bindData(this,"data",[]).end())}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([this.data().username?(t[0]||o("span",t,0,this).flag("profile").setContent(t[1]||o("a",t,1,0),2)).end((t[1].setHref(this.data().url()).setText("@"+this.data().username).end(),true)):void 0,this.data().github_handle||this.data().username?(t[2]||o("span",t,2,this).flag("gh").setContent(t[3]||o("a",t,3,2).dataset("icon","github").setTarget("blank").setContent(t[4]||o("span",t,4,3).setText("github"),2),2)).end((t[3].setHref("https://github.com/"+(this.data().github_handle||this.data().username)).end(),true)):void 0,this.data().twitter_handle?(t[5]||o("span",t,5,this).flag("twitter").setContent(t[6]||o("a",t,6,5).dataset("icon","twitter").setTarget("blank").setContent(t[7]||o("span",t,7,6).setText("twitter"),2),2)).end((t[6].setHref("https://twitter.com/"+this.data().twitter_handle).end(),true)):void 0,this.data().medium_handle?(t[8]||o("span",t,8,this).flag("medium").setContent(t[9]||o("a",t,9,8).dataset("icon","medium").setTarget("blank").setContent(t[10]||o("span",t,10,9).setText("medium"),2),2)).end((t[9].setHref("https://medium.com/@"+this.data().medium_handle).end(),true)):void 0,this.usersOwnProfile()?(t[11]||o("span",t,11,this).flag("email").on$(0,["tap","changeEmail"],this)).setText(""+this.api().user().email):void 0],1).synced()}})
e.UserLinks=a},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Menu,a=o.MenuItem
var u=n.defineTag("UserMenu",s,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).flag("inset").setChildren(t.$=t.$||[r(a,t,0,this).setIcon(">").setLabel("View profile"),r("hr",t,1,this).flag("sm"),r(a,t,2,this).setIcon(">").setLabel("New workspace").setAction("addcast"),r(a,t,3,this).setIcon(">").setLabel("New playlist").setAction("addplaylist"),r("hr",t,4,this).flag("sm"),r(a,t,5,this).setIcon(">").setLabel("Sign out").setAction("signout")],2).synced((t[0].setHref(""+this.data().url()).end(),t[2].end(),t[3].end(),t[5].end(),true))}})
e.UserMenu=u},function(t,e,i){var n=i(0),r=n.createElement
var o=i(5).UserAvatar
var s=i(14),a=s.TimeAgo,u=s.Duration,c=s.ShortCount,p=s.Format
var l=i(33).Tile
var h=i(1).IconButton
var d=i(32).CoverArt
var f=n.defineTag("UserTile",l,function(t){t.Renderer=function(t,e,i){let n,o=this.$$||(this.$$={}),s
return(o[s="key$"+e]||r(f,o,s,this)).setData(t).setContext(i).end()}
t.prototype.context=function(t){return this._context}
t.prototype.setContext=function(t){this._context=t
return this}
t.prototype.url=function(){return this.data().url()}
t.prototype.render=function(){var t=this.$
return this.$open(0).setFlag(-1,this.data().id).setChildren(t[0]||r("div",t,0,this).flag("summary").flag("abs").setContent([r("img",t,1,0).flag("Avatar").setAlt("Profile picture of the user"),r("div",t,2,0).flag("title").setContent(t[3]||r("a",t,3,2),2),r("div",t,4,0).flag("credits").flag("muted").flag("bullets").flag("social")],2),2).synced((t[1].setSrc(this.data().avatarUrl(128)).end(),t[3].setHref(this.url()).setContent(this.data().name,3).end(),t[4].setContent([this.data().username?(t[5]||r("span",t,5,4).flag("profile").setContent(t[6]||r("a",t,6,5),2)).end((t[6].setHref(this.data().url()).setText("@"+this.data().username).end(),true)):void 0,this.data().github_handle||this.data().username?(t[7]||r("span",t,7,4).flag("gh").setContent(t[8]||r("a",t,8,7).dataset("icon","github").setTarget("blank"),2)).end((t[8].setHref("https://github.com/"+(this.data().github_handle||this.data().username)).end(),true)):void 0,this.data().twitter_handle?(t[9]||r("span",t,9,4).flag("twitter").setContent(t[10]||r("a",t,10,9).dataset("icon","twitter").setTarget("blank"),2)).end((t[10].setHref("https://twitter.com/"+this.data().twitter_handle).end(),true)):void 0,this.data().medium_handle?(t[11]||r("span",t,11,4).flag("medium").setContent(t[12]||r("a",t,12,11).dataset("icon","medium").setTarget("blank"),2)).end((t[12].setHref("https://medium.com/@"+this.data().medium_handle).end(),true)):void 0],1),true))}})
e.UserTile=f},function(t,e,i){var n=i(0),r=n.createElement
var o=i(1),s=o.Dialog,a=o.TextField
var u=n.defineTag("UserUpdateDialog",s,function(t){t.prototype.body=function(){let t=this.$$||(this.$$={}),e
return(e=this._body=this._body||(e=r("div",this)).flag("body").setContent([r("h1",e.$,"A",e).setText("Update your email"),r(a,e.$,"B",e).setType("email").setName("email").setLabel("Email").setRequired(true)],2)).end((e.$.B.setPlaceholder(this.data().email).end(),true))}
t.prototype.onuxasubmit=function(t){var e=this
return e.uxa().queue().add(200,async function(){let i=await e.api().rpc("userChangeEmail",[e.formData().email],{models:true})
if(i){e.uxa().flash(i)
return t.cancel()}})}})
e.UserUpdateDialog=u},function(t,e,i){var n=i(0),r=n.createElement
var o=i(6).Page
var s=n.defineTag("AboutPage",o,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||r("section",t,0,this).setContent([r("h2",t,1,0).flag("about-title").setText("about scrimba"),r("div",t,2,0).setContent([r("p",t,3,2).flag("about-text").setText("Scrimba is the next-generation platform for learning how to code. Our screencasts enable you to interact with the code directly in the player. This way, you'll have more fun and learn faster. Our courses subjects like HTML, CSS, JavaScript, React, Vue, Angular, and more."),r("p",t,4,2).flag("about-text").setText("The content on Scrimba is a mix between community generated tutorials, and courses initiated by the Scrimba team itself. Everyone can create tutorials on the platform, in any language of your choice. If you're intersted in creating a full course that we'll also feature on the front page, please get in touch! However, these courses have to be in English.")],2),r("h2",t,5,0).flag("about-title").setText("creating Scrimba tutorials"),r("p",t,6,0).flag("about-text").setContent(["Once you've signed up with GitHub, you can start creating screencasts instantly. It's very easy, but you can check out this ",t[7]||r("a",t,7,6).setHref("https://medium.com/scrimba/how-to-create-a-scrimba-screencast-e5ca244bc531").setText("this Medium post")," if you want detailed instructions."],2),r("h2",t,8,0).flag("about-title").setText("the company"),r("p",t,9,0).flag("about-text").setContent(["Scrimba AS is based in Oslo, Norway. It's run by the two co-founders Sindre and Per. We're backed by StartupLab, Nordic Makers and Alliance Venture. You can follow the company on Twitter ",t[10]||r("a",t,10,9).setHref("https://twitter.com/scrimba").setText("here.")],2),r("h2",t,11,0).flag("team-title").setText("the team"),r("div",t,12,0).flag("team-members").setContent([r("div",t,13,12).flag("team-member").setContent([r("img",t,14,13).setAlt("One of the co-founders of Scrimba").setSrc("https://avatars.githubusercontent.com/somebee?s=240"),r("h4",t,15,13).setText("Sindre AarsÃ¦ther"),r("p",t,16,13).setContent(["Sindre is also the creator of the programming language ",r("a",t,17,16).setHref("http://imba.io/home").setText("Imba.")," Follow him on Twitter ",r("a",t,18,16).setHref("https://twitter.com/sindreaars").setText("here.")],2)],2),r("div",t,19,12).flag("team-member").setContent([r("img",t,20,19).setAlt("One of the co-founders of Scrimba").setSrc("https://avatars.githubusercontent.com/perborgen?s=240"),r("h4",t,21,19).setText("Per Harald Borgen"),r("p",t,22,19).setContent(["Per likes to write about ",r("a",t,23,22).setHref("https://medium.com/@perborgen").setText("learning to code.")," Follow him on Twitter ",r("a",t,24,22).setHref("https://twitter.com/perborgen").setText("here.")],2)],2)],2),r("p",t,25,0).flag("contact").setText("hello@scrimba.com")],2),2).synced((t[7].end(),t[10].end(),t[14].end(),t[17].end(),t[18].end(),t[20].end(),t[23].end(),t[24].end(),true))}})
e.AboutPage=s},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(6).Page
var u=i(24).GroupTile
var c=r.defineTag("AllCoursesPage",a,function(t){t.prototype.courses=function(t){return this._courses}
t.prototype.setCourses=function(t){this._courses=t
return this}
t.prototype.load=async function(){var t,e
await this.api().prefetch("home")
return(t=this.courses())||(this.setCourses(e=this.api().db().groups().sel({sort:"-created_at"},function(t){return t.coverart&&t.privacy=="public"&&t.featured_at})),e)}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setChildren([t[0]||s("header",t,0,e).setContent(t[1]||s("div",t,1,0).flag("wide").flag("what").setContent([s("p",t,2,1),s("h1",t,3,1).setText("All courses")],2),2),t[4]||s("div",t,4,e).flag("grid"),e.footer()],1).synced((t[4].setContent(function t(i){for(let t=0,r=n(e.courses()),o=i.taglen=r.length;t<o;t++){(i[t]||s(u,i,t)).setData(r[t]).end()}return i}(t[5]||o(t,5,t[4])),4),true))}})
e.AllCoursesPage=c},function(t,e,i){var n=i(0)
var r=i(6).Page
var o=n.defineTag("ErrorPage",r,function(t){t.prototype.isLoaded=function(){return true}
t.prototype.title=function(){return"An error occurred"}
t.prototype.render=function(){return this.$open(0).flag("dark").setText("An error occurred when loading the page. Please try again later.").synced()}})
e.ErrorPage=o},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(0),s=o.createTagList,a=o.createTagMap,u=o.createElement
var c=i(6).Page
var p=i(5).UserAvatar
var l=i(16).Carousel
var h=i(13),d=h.CastTile,f=h.CastListItem
var m=i(51).PlaylistSection
var y=i(49).CollectionSection
var g=i(214).TweetView
var v=i(24).GroupTile
var _=i(14).Format
var b=i(32).CoverArt
var x=i(210).PurchaseMenu
var w=i(50).GroupJoinDialog
var T=i(1),S=T.Menu,k=T.MenuItem,A=T.IconButton,C=T.Button
o.extendTag("iframe",function(t){t.prototype.frameborder=function(t){return this.getAttribute("frameborder")}
t.prototype.setFrameborder=function(t){this.setAttribute("frameborder",t)
return this}
t.prototype.allow=function(t){return this.getAttribute("allow")}
t.prototype.setAllow=function(t){this.setAttribute("allow",t)
return this}})
var E=o.defineTag("Tab",function(t){t.prototype.name=function(t){return this._name}
t.prototype.setName=function(t){this._name=t
return this}
t.prototype.href=function(t){return this._href}
t.prototype.setHref=function(t){this._href=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||u("a",t,0,this),2).synced((t[0].setHref(this.href()).setContent(this.name(),3).end(),true))}})
var D=o.defineTag("Casts",y,function(t){t.prototype.groups=function(t){return this._groups}
t.prototype.setGroups=function(t){this._groups=t
return this}
t.prototype.__items={watch:"itemsDidSet",name:"items"}
t.prototype.items=function(t){return this._items}
t.prototype.setItems=function(t){var e=this.items()
if(t!=e){this._items=t}if(t!=e){this.itemsDidSet&&this.itemsDidSet(t,e,this.__items)}return this}
t.prototype.__view={watch:"viewDidSet",name:"view"}
t.prototype.view=function(t){return this._view}
t.prototype.setView=function(t){var e=this.view()
if(t!=e){this._view=t}if(t!=e){this.viewDidSet&&this.viewDidSet(t,e,this.__view)}return this}
t.prototype.filterGroup=function(t){return this.setView(t),t}
t.prototype.itemsDidSet=function(t){var e
return this.setView(e=this.groups()&&this.groups()[0]||null),e}
t.prototype.viewDidSet=function(t,e){if(e){for(let i=e[1],n,r=0,o=Object.keys(i),s=o.length,a;r<s;r++){a=o[r]
n=i[a]
if(!(t&&t[a])){this.items().filters().del(a)}}}if(t){for(let e=t[1],i,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
i=e[s]
this.items().filters().set(s,i)}}this.render()
return this}
t.prototype.header=function(){var t=this.$$||(this.$$={}),e,i=this
return(e=i._header=i._header||(e=u("header",i)).flag("header").flag("flat").setContent([u("div",e.$,"A",e).flag("actions").setContent(e.$.B||u(A,e.$,"B","A").setAction("showoptions").setIcon("."),2),u("div",e.$,"C",e).flag("heading").flag("tabs")],2)).end((e.$.B.end(),e.$.C.setContent(function t(e){for(let t=0,n=r(i.groups()),o=e.taglen=n.length,s;t<o;t++){s=n[t];(e[t]||u("div",e,t).flag("tab")).flagIf("selected",s==i.view()).on$(0,["tap",["filterGroup",s]],i).setContent(s[0],3)}return e}(e.$["D"]||s(e.$,"D",e.$.C)),4),true))}})
var P=o.defineTag("ProjectCard",function(t){t.prototype.index=function(t){return this._index}
t.prototype.setIndex=function(t){this._index=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("project-card").setChildren(t.$=t.$||[u("img",t,0,this),u("div",t,1,this).flag("text").setContent([u("h3",t,2,1).flag("title"),u("p",t,3,1)],2)],2).synced((t[0].setSrc(this.data().img).end(),t[2].setContent(this.data().title,3),t[3].setContent(this.data().desc,3),true))}})
var $=o.defineTag("Countdown",function(t){t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.date=function(t){return this._date}
t.prototype.setDate=function(t){this._date=t
return this}
t.prototype.dataDidSet=function(t){if(t){return this._date=new Date(t)}}
t.prototype.render=function(){if(!this.date()){return}let t=Math.floor((this.date()-Date.now())/1e3)
this.flag("ended",t<0)
let e=Math.floor(t/60)
let i=Math.floor(t/60/60)
let n=("00"+i+":00"+e%60+":00"+t%60).replace(/0+(\d\d\d?)\b/g,"$1")
return this.$open(0).setText("Offer ends in "+n).synced()}
t.prototype.mount=function(){return this.schedule({interval:1e3})}
t.prototype.unmount=function(){return this.unschedule()}})
var L=o.defineTag("EnrollButton",function(t){t.prototype.location=function(t){return this._location}
t.prototype.setLocation=function(t){this._location=t
return this}
t.prototype.__showTagline={default:true,name:"showTagline"}
t.prototype.showTagline=function(t){return this._showTagline}
t.prototype.setShowTagline=function(t){this._showTagline=t
return this}
t.prototype._showTagline=true
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t[0]||u("div",t,0,this).flag("PurchaseButton"),2).synced((t[0].setContent([(t[1]||u("button",t,1,0).flag("buy").setText("Enroll for free")).setNestedAttr("uxa","action",["enroll",this.location()]).end(),this.showTagline()?t[2]||u("div",t,2,0).flag("metadata").setContent(t[3]||u("span",t,3,2).setText("Join now to ensure lifetime access"),2):void 0],1),true))}})
e.EnrollButton=L
var O=o.defineTag("GroupPage",c,function(t){t.prototype.gid=function(t){return this._gid}
t.prototype.setGid=function(t){this._gid=t
return this}
t.prototype.__data={watch:"dataDidSet",name:"data"}
t.prototype.data=function(t){return this._data}
t.prototype.setData=function(t){var e=this.data()
if(t!=e){this._data=t}if(t!=e){this.dataDidSet&&this.dataDidSet(t,e,this.__data)}return this}
t.prototype.__status={default:404,name:"status"}
t.prototype.status=function(t){return this._status}
t.prototype.setStatus=function(t){this._status=t
return this}
t.prototype._status=404
t.prototype.membership=function(t){return this._membership}
t.prototype.setMembership=function(t){this._membership=t
return this}
t.prototype.playlists=function(t){return this._playlists}
t.prototype.setPlaylists=function(t){this._playlists=t
return this}
t.prototype.related=function(t){return this._related}
t.prototype.setRelated=function(t){this._related=t
return this}
t.prototype.creator=function(t){return this._creator}
t.prototype.setCreator=function(t){this._creator=t
return this}
t.prototype.stripe=function(t){return this._stripe}
t.prototype.setStripe=function(t){this._stripe=t
return this}
t.prototype.__disableEnrolment={default:false,name:"disableEnrolment"}
t.prototype.disableEnrolment=function(t){return this._disableEnrolment}
t.prototype.setDisableEnrolment=function(t){this._disableEnrolment=t
return this}
t.prototype._disableEnrolment=false
t.prototype.featuredBootcamp=function(t){return this._featuredBootcamp}
t.prototype.setFeaturedBootcamp=function(t){this._featuredBootcamp=t
return this}
t.prototype.currentCoupon=function(t){return this._currentCoupon}
t.prototype.setCurrentCoupon=function(t){this._currentCoupon=t
return this}
t.prototype.path=function(){return[this.data()]}
t.prototype.build=function(){if(true){this.setStripe(Stripe(""+this.api().manifest().stripeKey))}return this}
t.prototype.load=async function(t){var e
this.setData(await this.api().prefetch(["group",this.gid()]))
if(!this.data().style){this.data().style={}}return this.setCreator(e=this.data().creator()),e}
t.prototype.checkRelatedTags=function(t){for(let e=0,i=r(this.data().tags),n=i.length,o;e<n;e++){o=i[e]
if(t.indexOf(o)>=0){return true}}return false}
t.prototype.dataDidSet=function(t){var e
if(!t){return this.setStatus(e=404),e}this.setStatus(200)
this.setPlaylists(t.playlists().sel({sort:"created_at"},function(t){return t.privacy!="private"}))
this.setRelated(this.api().db().groups().sel("-created_at",function(e){return e.coverart&&e.id!=t.id&&e.privacy=="public"}))
var i=this.api().db().groups().sel(function(t){return t.type=="bootcamp"&&t.style&&t.style.internal_ad&&t.style.internal_ad.is_main})
this.setFeaturedBootcamp(i.at(0))
if(true){App.setScrollTop(0)}return}
t.prototype.title=function(){return this.data()&&this.data().meta_title||this.data().title||"Learn to code with interactive tutorials | Scrimba"}
t.prototype.desc=function(){return this.data()&&this.data().tagline||"Learn to code with interactive screencasts. Our courses and tutorials will teach you React, Vue, Angular, JavaScript,Â HTML, CSS, and more. Scrimba is the fun and easy way to learn web development."}
t.prototype.image=function(){if(this.data()&&this.data().coverart){return"https://scrimba.com/static/art/"+this.data().id+".png"}else{return null}}
t.prototype.membership=function(){return this.api().user()&&this.data()&&this.data().membership(this.api().uid())}
t.prototype.tab=function(){return this.params().tab||"casts"}
t.prototype.firstCastUrl=function(){var t=this.playlists().toArray()[0].item_ids[0]
var e=this.playlists().toArray()[0].id
var i="/p/"+e+"/"+t
return i}
t.prototype.mount=async function(){this.schedule({events:true})
let e=this.api().getCoupon()
if(e){var i=await this.api().rpc("validateCoupon",[e.code,this.data().id,this.api().user()?this.api().user().id:undefined])
if(i.coupon){this.setCurrentCoupon(e)}}this.render()
if(this.gid()=="gresponsive"||this.gid()=="greact"&&!window.LOADED_CHAT&&true){window.LOADED_CHAT=true
document.head.appendChild(u("script").setSrc("https://embed.small.chat/TBJ4355M0GMJ6109K4.js").setAsync(true).end().dom())}return t.prototype.__super__.mount.apply(this,arguments)}
t.prototype.onshowpurchasemenu=function(t,e){t.stop()
this.api().analytics().callToAction("Buy Click",e)
return t.uxa().open(u(x).bindData(this,"data",[]).end())}
t.prototype.oncastopen=function(t,e){let i=e[0]
if(this.data().isPaid()&&!this.membership()&&i.privacy=="internal"){t.stop()
return this.trigger("enroll")}}
t.prototype.onenroll=async function(t,e){var i=this
i.api().analytics().callToAction("Enroll Click","Group "+e)
t.halt()
App.setScrollTop(0)
var n=await i.api().tryLogin()
if(i.api().user()){return i.api().rpc("groupJoin",[i.data().id],{models:true}).then(function(){i.setDisableEnrolment(false)
i.api().analytics().courseEnrolled(i.data().id)
return App.router().go(i.firstCastUrl())})}}
t.prototype.oncouponenroll=async function(t){var e=this
t.halt()
App.setScrollTop(0)
var i=e.api().analytics().getClientId()
var n=e.currentCoupon()?e.currentCoupon().code:undefined
var r=await e.api().tryLogin()
if(e.api().user()){return e.api().rpc("couponPurchase",[e.data().id,i,n]).then(function(t){e.setDisableEnrolment(false)
e.api().analytics().courseEnrolled(e.data().id)
return App.router().go(e.firstCastUrl())})}}
t.prototype.onjoinwaitlist=function(){return window.open(this.data().waitlistUrl())}
t.prototype.onstripeenroll=async function(t){var e=this
t.halt()
if(e.disableEnrolment()){return}e.setDisableEnrolment(true)
App.setScrollTop(0)
var i=await e.api().tryLogin()
if(e.api().user()){if(e.data().isPaid()&&!e.membership()){return e.openStripe()}else{return e.api().rpc("groupJoin",[e.data().id],{models:true}).then(function(){e.setDisableEnrolment(false)
e.api().analytics().courseEnrolled(e.data().id)
return App.router().go(e.firstCastUrl())})}}else{return e.setDisableEnrolment(false),false}}
t.prototype.onpaypalenroll=async function(t){var e=this
t.halt()
if(e.disableEnrolment()){return}e.setDisableEnrolment(true)
App.setScrollTop(0)
var i=await e.api().tryLogin()
if(e.api().user()){if(e.data().isPaid()&&!e.membership()){return e.openPaypal()}else{return e.api().rpc("groupJoin",[e.data().id],{models:true}).then(function(){e.setDisableEnrolment(false)
e.api().analytics().courseEnrolled(e.data().id)
return App.router().go(e.firstCastUrl())})}}else{return e.setDisableEnrolment(false),false}}
t.prototype.openStripe=function(){var t=this
var e=t.api().analytics().getClientId()
let i=t.currentCoupon()?t.currentCoupon().code:undefined
return t.api().rpc("stripePurchase",[t.data().id,e,i]).then(async function(e){if(e!=null&&e.session){await t.stripe().redirectToCheckout({sessionId:e.session.id})
return t.setDisableEnrolment(false),false}else{return console.log("Stoped payment because of something..",e.message)}})}
t.prototype.openPaypal=async function(){var t=this
var e=t.api().analytics().getClientId()
let i=t.currentCoupon()?t.currentCoupon().code:undefined
return await t.api().rpc("initPaypalPurchase",[t.data().id,e,i]).then(function(e){if(e&&e.redirect_url){window.location=e.redirect_url}else{console.log("error initiating paypal payment.",e.message)}return t.setDisableEnrolment(false),false})}
t.prototype.timeConversion=function(t){var e=(t/1e3).toFixed(0)
var i=(t/(1e3*60)).toFixed(0)
var n=(t/(1e3*60*60)).toFixed(0)
if(e<60){return e+" seconds"}else{return i+" minutes"}}
t.prototype.getMetadata=function(){var t
var e=0
var i=0
for(let t=0,o=r(this.playlists()),s=o.length,a;t<s;t++){a=o[t]
if(!n(a.item_ids)){continue}for(let t=0,n=r(a.items()),o=n.length;t<o;t++){i++
e=e+n[t].duration}}var o=this.timeConversion(e)
return t={length:o,numCasts:i}}
t.prototype.showVideo=function(){return this.data().type=="bootcamp"&&this.data().style.videoUrl}
t.prototype.video=function(){let t=this.$$||(this.$$={})
if(false){}return(this._videoFrame=this._videoFrame||u("iframe",this).flag("videoFrame").setFrameborder("0").setAllow("autoplay; fullscreen").setAllowfullscreen("allowfullscreen")).setSrc(this.data().style.videoUrl).end()}
t.prototype.showFeatured=function(){return this.featuredBootcamp()&&this.featuredBootcamp().style&&this.featuredBootcamp().style.internal_ad&&this.featuredBootcamp().style.internal_ad.show_in_group}
t.prototype.giveawayDescription=function(){return(this.data().giveawayData().description||"").replace("$COUNT",this.data().giveawaysLeft()||0)}
t.prototype.bestPrice=function(){var t=this.data().style.price
var e=this.calculateDiscount(t,this.data().style.discount_price)
var i=this.calculateCouponDiscount(t,this.currentCoupon())
if(i&&e){return i.price<e.price?i:e}else if(e){return e}else if(i){return i}else{return{fullPrice:t}}}
t.prototype.calculateCouponDiscount=function(t,e){if(!e){return}var i=e.sum?Math.max(0,t-e.sum):Math.ceil((1-e.percent/100)*t)
var n=t-i
var r=e.percent||Math.round(n/t*100,0)
var o=e.description?e.description:e.code.toUpperCase()
return{fullPrice:t,price:i,reduction:t-i,percent:r,message:"Price reduced "+r+"% with coupon "+o}}
t.prototype.calculateDiscount=function(t,e){if(!(t&&e)){return}var i=Math.round((t-e)/t*100,0)||0
var n=this.data().style?this.data().style.discount_text:"Buy now for a {percent}% discount!"
return{fullPrice:t,price:e,reduction:t-e,percent:i,message:n}}
t.prototype.tweetBtn=function(){var t=this.creatorName()?this.creatorName().split(" ")[0]:"them"
if(this.data().isComingSoon()){return"Tell "+t+" you're looking forward to it!"}else{return"Thank "+t+" for the course"}}
t.prototype.creatorName=function(){return this.creator().name}
t.prototype.thankTweet=function(){var t
var e=""
if(this.data().tags){var i=(t=this.data().tags)&&t.filter&&t.filter(function(t){return t!="#featured"})
var n=i.map(function(t){return t.replace("#","%23")})
e=n.join(" ")}if(this.data().isComingSoon()){return"I'm really looking forward to your upcoming @scrimba course, @"+this.creator().twitter_handle+"! https://scrimba.com/g/"+this.data().id+" "+e+" %23scrimba"}else{return"Thanks a lot for your awesome @scrimba course, @"+this.creator().twitter_handle+"! https://scrimba.com/g/"+this.data().id+" "+e+" %23scrimba"}}
t.prototype.trackShare=function(){return this.api().analytics().twitterShare("Group Page")}
t.prototype.render=function(){var t=this.$,e=this
var i=n(e.playlists())>1
var c=e.bestPrice()
return e.$open(0).setChildren([(t[0]||u("header",t,0,e).setContent(t[1]||u("section",t,1,0),2)).end((t[1].setContent([e.data().isComingSoon()?t[2]||u("h3",t,2,1).flag("top-tagline").setText("Upcoming course:"):void 0,e.data().topTagline()?(t[3]||u("h3",t,3,1).flag("top-tagline")).setContent(e.data().topTagline(),3):void 0,(t[4]||u("h1",t,4,1).flag("title")).setContent(e.data().title,3),(t[5]||u("h3",t,5,1).flag("tagline").flag("narrow")).setContent(e.data().tagline,3),!e.data().isComingSoon()?(t[6]||u("div",t,6,1).flag("metadata").setContent(t[7]||u("span",t,7,6),2)).end((t[7].setText(""+e.getMetadata().numCasts+" lessons | "+e.getMetadata().length),true)):void 0,e.data().isComingSoon()&&e.data().waitlistUrl()&&!e.membership()&&!e.data().isPreorder()?(t[8]||u("div",t,8,1).flag("PurchaseButton").setContent([u("button",t,9,8).flag("buy").setNestedAttr("uxa","action","joinwaitlist").setText("Join the waitlist!"),u("div",t,10,8).flag("metadata").setContent(t[11]||u("span",t,11,10).setText("Get sneak peeks and early bird access"),2)],2)).end((t[9].end(),true)):e.data().isComingSoon()&&!e.membership()&&e.data().isPreorder()?(t[12]||u("div",t,12,1).flag("PurchaseButton")).setContent([(t[13]||u("button",t,13,12).flag("buy").setNestedAttr("uxa","action",["showpurchasemenu","Group Hero"])).flagIf("inactive",e.disableEnrolment()).setContent([t[14]||u("span",t,14,13).setText("Pre-order now! "),c.reduction?o.static([t[15]||u("span",t,15,13).flag("separator").setText(" | "),(t[16]||u("s",t,16,13)).setText("$"+c.fullPrice),(t[17]||u("span",t,17,13).flag("discountedPrice")).setText("$"+c.price+" ")],2,1):(t[18]||u("span",t,18,13)).setText(" $"+c.fullPrice)],1).end(),c.percent>0?(t[19]||u("p",t,19,12).flag("discount")).setText(""+c.message):void 0],1):e.data().isComingSoon()&&e.membership()?t[20]||u("p",t,20,1).flag("preordered").setText("You have pre-ordered this course. It will be available for you soon!"):!e.membership()?e.data().isPaid()&&c.price==0?(t[21]||u("div",t,21,1).flag("PurchaseButton").setContent([u(C,t,22,21).flag("uxa").flag("flat").flag("enroll").setNestedAttr("uxa","action","couponenroll").setLabel("Enroll for $0"),u("p",t,23,21).flag("discount")],2)).end((t[22].end(),t[23].setText(""+c.message),true)):e.data().isPaid()?(t[24]||u("div",t,24,1).flag("PurchaseButton")).setContent([(t[25]||u("button",t,25,24).flag("buy").setNestedAttr("uxa","action",["showpurchasemenu","Group Hero"])).flagIf("inactive",e.disableEnrolment()).setContent([t[26]||u("span",t,26,25).setText("Get the full course "),c.reduction?o.static([t[27]||u("span",t,27,25).flag("separator").setText(" | "),(t[28]||u("s",t,28,25)).setText("$"+c.fullPrice),(t[29]||u("span",t,29,25).flag("discountedPrice")).setText("$"+c.price+" ")],2,2):(t[30]||u("span",t,30,25)).setText(" $"+c.fullPrice)],1).end(),c.percent>0?(t[31]||u("p",t,31,24).flag("discount")).setText(""+c.message):void 0,e.data().style.discount_end_date?(t[32]||u($,t,32,24).flag("timer")).bindData(e.data().style,"discount_end_date").end():void 0],1):(t[33]||u(L,t,33,1).setLocation("Hero")).end():void 0],1),true)),e.data().isComingSoon()&&e.data().teaserCastId()?(t[34]||u("section",t,34,e).flag("top").setContent(t[35]||u("section",t,35,34).flag("narrow").flag("mb-lg").setContent(t[36]||u("a",t,36,35).setContent(t[37]||u("img",t,37,36).flag("thumbnail-image").setSrc("/static/art/coming-soon-cover.svg"),2),2),2)).end((t[36].setHref("/c/"+e.data().teaserCastId()).end((t[37].end(),true)),true)):e.data().isBootcamp()?(t[38]||u("section",t,38,e).flag("top")).setContent(e.membership()?(t[39]||u("section",t,39,38).flag("narrow")).setContent(function t(i){var o=i.$iter()
for(let t=0,s=r(e.playlists()),a=s.length,c;t<a;t++){c=s[t]
if(!n(c.item_ids)){continue}o.push((i[t]||u(m,i,t).setLayout("list").setSize("md").setShowTime(false)).setData(c).setMembership(e.membership()).end())}return o}(t[40]||a(t,40,t[39])),5):e.video(),3):(t[41]||u("section",t,41,e).flag("full").flag("playlists")).flagIf("multi",i).setContent(function t(o){var s,a=o.$iter()
for(let t=0,c=r(e.playlists()),p=c.length,l;t<p;t++){l=c[t]
if(!n(l.item_ids)){continue}a.push((s=o[t]||(s=u("article",o,t)).flag("playlist")).setContent([i?(s.$.A||u("header",s.$,"A",s).setContent([u("h2",s.$,"B","A").flag("title"),u("h3",s.$,"C","A").flag("tagline")],2)).end((s.$.B.setContent(l.title,3),s.$.C.setContent(l.description,3),true)):void 0,(s.$.D||u("div",s.$,"D",s).flag("listItems").setContent(s.$.E||u(m,s.$,"E","D").setLayout("singleList").setSize("md").setShowTime(false).setLimit(6),2)).end((s.$.E.setData(l).setMembership(e.membership()).end(),true))],1))}return a}(t[42]||a(t,42,t[41])),5),(t[43]||u("section",t,43,e).flag("full").flag("about").flag("medium-spacy").setContent(t[44]||u("section",t,44,43).flag("narrow"),2)).setFlag(0,e.data().type).end((t[44].setContent([e.data().isBootcamp()?e.data().isComingSoon()&&!e.membership()?t[45]||u("h1",t,45,44).flag("section-title").flag("mb-lg").setText("why join the waitlist? ð¤"):t[46]||u("h1",t,46,44).flag("section-title").flag("mb-lg").setText("why this course rocks ð¤"):void 0,(t[47]||u("div",t,47,44)).setNestedAttr("uxa","md",e.data().description).end()],1),true)),e.data().isBootcamp()&&e.membership()?(t[48]||u("section",t,48,e).flag("modules").flag("full").flag("spacy")).setContent(e.video(),3):void 0,e.data().isBootcamp()&&!e.membership()&&!e.data().isComingSoon()?(t[49]||u("section",t,49,e).flag("full").flag("spacy").setContent(t[50]||u("section",t,50,49).flag("narrow"),2)).end((t[50].setContent([(t[51]||u("p",t,51,50).flag("section-title").flag("mb-lg").flag("mt-lg")).setText(""+e.getMetadata().numCasts+" value-packed lessons ð"),(t[52]||u("p",t,52,50).flag("section-tagline").flag("narrow").flag("mb-lg").flag("mt-lg")).setText("This course contains "+e.getMetadata().numCasts+" interactive screencasts spread across "+n(e.playlists())+" modules."),function t(i){var o=i.$iter()
for(let t=0,s=r(e.playlists()),a=s.length,c;t<a;t++){c=s[t]
if(!n(c.item_ids)){continue}o.push((i[t]||u(m,i,t).setLayout("list").setSize("md").setShowTime(false)).setData(c).end())}return o}(t[53]||a(t,53,t[50]))],1),true)):void 0,e.data().hasLearningsection()?(t[54]||u("section",t,54,e).flag("full").flag("learn").flag("spacy").setContent([u("p",t,55,54).flag("section-title").flag("mb-lg").setText("What you'll learn ð©âð«"),u("p",t,56,54).flag("section-tagline").flag("narrow").flag("mt-lg").setText("By the end of this course you'll have a solid understanding of the following subjects."),u("section",t,57,54).flag("narrow")],2)).end((t[57].setContent([(t[58]||u("div",t,58,57).flag("grid")).setContent(function t(i){var n
for(let t=0,o=r(e.data().style.learnings),s=i.taglen=o.length;t<s;t++){(n=i[t]||(n=u("div",i,t)).flag("item").setContent([u("span",n.$,"A",n).flag("check").dataset("icon","check"),u("span",n.$,"B",n)],2)).end((n.$.A.end(),n.$.B.setText(" "+o[t]),true))}return i}(t[59]||s(t,59,t[58])),4),!e.data().isBootcamp()&&!e.data().isPaid()&&!e.membership()?(t[60]||u(L,t,60,57).setLocation("Learning Section")).end():e.data().isPaid()&&!e.membership()&&c.price!=0&&!e.data().isPreorder()?(t[61]||u("div",t,61,57).flag("PurchaseButton")).setContent([(t[62]||u("button",t,62,61).flag("buy").setNestedAttr("uxa","action",["showpurchasemenu","Learning Section"])).flagIf("inactive",e.disableEnrolment()).setContent([t[63]||u("span",t,63,62).setText("Get the full course "),c.reduction?o.static([t[64]||u("span",t,64,62).flag("separator").setText(" | "),(t[65]||u("s",t,65,62)).setText("$"+c.fullPrice),(t[66]||u("span",t,66,62).flag("discountedPrice")).setText("$"+c.price+" ")],2,3):(t[67]||u("span",t,67,62)).setText(" $"+c.fullPrice)],1).end(),c.percent>0?(t[68]||u("p",t,68,61).flag("discount")).setText(""+c.message):void 0,e.data().style.discount_end_date?(t[69]||u($,t,69,61).flag("timer")).bindData(e.data().style,"discount_end_date").end():void 0],1):void 0],1),true)):void 0,e.data().hasProjects()?(t[70]||u("section",t,70,e).flag("full").flag("projects").flag("spacy").setContent([u("p",t,71,70).flag("section-title").setText("what you'll build ð¨"),u("p",t,72,70).flag("section-tagline").flag("narrow").flag("mb-lg").setText("Perfect to add to your portfolio."),u("div",t,73,70).flag("content")],2)).end((t[73].setContent(function t(i){for(let t=0,n=r(e.data().style.projects),o=i.taglen=n.length;t<o;t++){(i[t]||u(P,i,t)).setData(n[t]).end()}return i}(t[74]||s(t,74,t[73])),4),true)):void 0,(t[75]||u("section",t,75,e).flag("full").flag("instructor").flag("spacy").setContent([u("p",t,76,75).flag("section-title").flag("mb-sm").setText("Meet your teacher ð"),u("div",t,77,75).flag("bio").setContent([u("img",t,78,77).flag("Avatar").setAlt("The course creator"),u("div",t,79,77).flag("text").setContent([u("h2",t,80,79).flag("name"),u("p",t,81,79),u("a",t,82,79).flag("Button").flag("uxa").flag("primary").on$(0,["tap","trackShare"],e).setTarget("blank").dataset("icon","twitter")],2)],2)],2)).end((t[78].setSrc(e.creator().avatarUrl(512)).end(),t[80].setText(""+e.creatorName()),t[81].setContent(e.creator().bio,3),t[82].setHref("https://twitter.com/intent/tweet?text="+e.thankTweet()+"&related=scrimba").setContent(e.tweetBtn(),3).end(),true)),e.data().slackChannel()?(t[83]||u("section",t,83,e).flag("full").flag("slack").flag("spacy").setContent([u("p",t,84,83).flag("section-title").flag("mb-lg"),u("p",t,85,83).flag("section-tagline").flag("narrow").flag("mb-xl"),u("section",t,86,83).flag("narrow").setContent(t[87]||u("img",t,87,86),2)],2)).end((t[84].setContent(e.data().slackChannel().title,3),t[85].setContent(e.data().slackChannel().text,3),t[87].setSrc(e.data().slackChannel().img).end(),true)):void 0,e.data().tweets&&!e.data().isComingSoon()?(t[88]||u("section",t,88,e).flag("full").flag("tweets").flag("spacy").setContent([u("p",t,89,88).flag("section-title").setText("people love this course ð"),u("p",t,90,88).flag("section-tagline").flag("mb-xl").setText("And we think you will as well."),u(g,t,91,88).flag("tweetwiew")],2)).end((t[91].setIds(e.data().tweets).end(),true)):void 0,!e.data().isComingSoon()?(t[92]||u("section",t,92,e).flag("full").flag("scrimba").flag("spacy").setContent([u("p",t,93,92).flag("section-title").flag("mb-lg").setText("why you'll learn faster ð¥"),u("p",t,94,92).flag("section-tagline").flag("narrow").setContent(["Scrimba is the ultimate code learning experience. Don't believe us? See what people say ",u("a",t,95,94).setHref("https://twitter.com/search?q=scrimba%20amazing&src=typed_query&f=live").setTarget("_blank").setText(" at Twitter"),u("span",t,96,94).flag("section-tagline").setText(" or watch the screencast below and judge for yourself.")],2),u("section",t,97,92).flag("narrow").flag("mb-lg").setContent(t[98]||u("a",t,98,97).setHref("/c/c8gp4WfE").setContent(t[99]||u("img",t,99,98).flag("thumbnail-image").setSrc("/static/art/castcover-no-header.png"),2),2)],2)).end((t[95].end(),t[98].end((t[99].end(),true)),true)):void 0,e.data().isPaid()&&!e.membership()?(t[100]||u("section",t,100,e).flag("guarantee").flag("full").flag("spacy").setContent(t[101]||u("section",t,101,100).flag("narrow").setContent([u("p",t,102,101).flag("section-title").flag("mb-sm").setText("Money-back guarantee"),u("p",t,103,101).flag("section-tagline").flag("mb-xl").setText("If you didn't like course, just let us know within a month and we'll issue a full refund."),u("img",t,104,101).setSrc("/static/img/guarantee.svg")],2),2)).end((t[104].end(),true)):void 0,e.data().isPaid()&&!e.membership()&&!e.data().isPreorder()?(t[105]||u("section",t,105,e).flag("full").flag("cta").flag("spacy").setContent(t[106]||u("section",t,106,105).flag("narrow").setContent(t[107]||u("div",t,107,106),2),2)).end((t[107].setContent([e.data().hasDiscount()?t[108]||u("p",t,108,107).flag("section-title").flag("mb-lg").setText("get it while it's cheap"):t[109]||u("p",t,109,107).flag("section-title").flag("mb-lg").setText("get the full package"),e.data().style.content?(t[110]||u("div",t,110,107).flag("cta-wrapper").setContent(t[111]||u("div",t,111,110).flag("cta-list"),2)).end((t[111].setContent(function t(i){for(let t=0,n=r(e.data().style.content),o=i.taglen=n.length;t<o;t++){(i[t]||u("span",i,t).dataset("icon","check")).setText(" "+n[t]).end()}return i}(t[112]||s(t,112,t[111])),4),true)):void 0,c.price!=0?(t[113]||u("div",t,113,107).flag("PurchaseButton")).setContent([(t[114]||u("button",t,114,113).flag("buy").setNestedAttr("uxa","action",["showpurchasemenu","Bottom Section"])).flagIf("inactive",e.disableEnrolment()).setContent([t[115]||u("span",t,115,114).setText("Get the full course "),c.reduction?o.static([t[116]||u("span",t,116,114).flag("separator").setText(" | "),(t[117]||u("s",t,117,114)).setText("$"+c.fullPrice),(t[118]||u("span",t,118,114).flag("discountedPrice")).setText("$"+c.price+" ")],2,4):(t[119]||u("span",t,119,114)).setText(" $"+c.fullPrice)],1).end(),c.percent>0?(t[120]||u("p",t,120,113).flag("discount")).setText(""+c.message):void 0,e.data().style.discount_end_date?(t[121]||u($,t,121,113).flag("timer")).bindData(e.data().style,"discount_end_date").end():void 0],1):void 0],1),true)):void 0,e.data().isPaid()&&!e.membership()&&!e.data().isComingSoon()?t[122]||u("section",t,122,e).flag("full").flag("spacy").setContent(t[123]||u("section",t,123,122).flag("narrow").setContent([u("p",t,124,123).flag("section-title").flag("mb-sm").setText("Buying for a group?"),u("p",t,125,123).flag("section-tagline").flag("mb-xl").setText("We have group discounts for people that buy more than one seat. Let us know in the chat box in the bottom right corner (refresh if you don't see it), or email per@scrimba.com. Invoice will be sent via Stripe or PayPal.")],2),2):void 0,e.data().isBootcamp()&&e.data().giveawayData()&&e.data().giveawaysLeft()&&!e.membership()?(t[126]||u("section",t,126,e).flag("full").flag("giveaway").flag("spacy").setContent([u("p",t,127,126).flag("section-title").flag("mb-sm"),u("section",t,128,126).flag("narrow").setContent([u("p",t,129,128).flag("section-tagline").flag("mb-xl"),u("img",t,130,128).setSrc("/static/img/giveaway.svg")],2)],2)).end((t[127].setContent(e.data().giveawayData().title,3),t[129].setContent(e.giveawayDescription(),3),t[130].end(),true)):void 0,!e.data().isPaid()&&!e.membership()&&!e.data().isComingSoon()?(t[131]||u("section",t,131,e).flag("full").flag("cta").flag("spacy").setContent([u("p",t,132,131).flag("section-title").flag("mb-sm").setText("secure your free spot"),u("p",t,133,131).flag("section-tagline").setText("Enroll to ensure that you'll have free life-time access to this course."),u(L,t,134,131).setShowTagline(false).setLocation("Bottom Section")],2)).end((t[134].end(),true)):void 0,!e.membership()&&!e.data().isComingSoon()?(t[135]||u("section",t,135,e).flag("full").flag("spacy").setContent([u("section",t,136,135).flag("narrow").setContent([u("p",t,137,136).flag("section-title").setText("100,000 people can't be wrong"),u("p",t,138,136).flag("section-tagline").flag("mb-xl").setText("Well over one hundred thousand people have enrolled in Scrimba courses. And as you can see below, quite a few of them have had their minds blown.")],2),u(g,t,139,135).flag("tweetwiew").setIds(["947120964801875968","949719086128345088","839475301730123776","972567284303716353","1148437832312094726","1086229411513257990"])],2)).end((t[139].end(),true)):void 0,e.data().hasFaq()?(t[140]||u("section",t,140,e).flag("full").flag("faq").flag("spacy").setContent([u("p",t,141,140).flag("section-title").flag("mb-lg").setText("FAQ"),u("section",t,142,140).flag("container").flag("article")],2)).end((t[142].setContent(function t(i){var n
for(let t=0,o=r(e.data().style.faq),s=i.taglen=o.length,a;t<s;t++){a=o[t];(n=i[t]||(n=u("div",i,t)).flag("item").setContent([u("p",n.$,"A",n).flag("question"),u("p",n.$,"B",n).flag("answer")],2)).end((n.$.A.setContent(a.question,3),n.$.B.setContent(a.answer,3),true))}return i}(t[143]||s(t,143,t[142])),4),true)):void 0,e.data().tags&&!e.data().isPaid()&&!e.showFeatured()?(t[144]||u("section",t,144,e).flag("full").flag("related").setContent([u("h2",t,145,144).flag("title").setText("Other courses"),u(l,t,146,144).flag("sm").setLimit(24).setInfinite(true)],2)).end((t[146].bindData(e,"related",[]).setRenderer(v.Renderer).end(),true)):e.showFeatured()&&!e.data().isPaid()&&!e.data().isComingSoon()?(t[147]||u("section",t,147,e).flag("featured").flag("full").flag("spacy").setContent([u("p",t,148,147).flag("section-title").flag("mb-sm"),u("p",t,149,147).flag("section-tagline").flag("mb-lg"),u("a",t,150,147).setContent(t[151]||u(b,t,151,150).flag("art"),2)],2)).end((t[148].setContent(e.featuredBootcamp().style.internal_ad.group_title,3),t[149].setContent(e.featuredBootcamp().style.internal_ad.group_text,3),t[150].setHref("/g/"+e.featuredBootcamp().id).end((t[151].bindData(e,"featuredBootcamp",[]).end(),true)),true)):void 0,e.footer()],1).synced()}})
e.GroupPage=O},function(t,e,i){var n=i(0),r=n.createElement
var o=i(6).Page
var s=n.defineTag("LoginPage",o,function(t){t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren(t.$=t.$||[r("form",t,0,this).setMethod("POST").setAction("/login").setContent([r("input",t,1,0).setName("username").setPlaceholder("username"),r("input",t,2,0).setType("password").setName("password"),r("button",t,3,0).setType("submit").setText("Sign in")],2),r("a",t,4,this).flag("external").setHref("/auth/github").setText("Sign in with GitHub")],2).synced((t[0].end((t[1].end(),t[2].end(),t[3].end(),true)),t[4].end(),true))}})
e.LoginPage=s},function(t,e,i){var n=i(0)
var r=i(6).Page
var o=n.defineTag("NotFoundPage",r,function(t){t.prototype.isLoaded=function(){return true}
t.prototype.path=function(){return[["/","Not found"]]}
t.prototype.title=function(){return"Page not found"}
t.prototype.render=function(){return this.$open(0).flag("dark").setText("The page you are looking for does not exist").synced()}})
e.NotFoundPage=o},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(6).Page
var u=i(16).Carousel
var c=i(13).CastTile
var p=r.defineTag("PlaylistPage",a,function(t){t.prototype.pid=function(t){return this._pid}
t.prototype.setPid=function(t){this._pid=t
return this}
t.prototype.course=function(t){return this._course}
t.prototype.setCourse=function(t){this._course=t
return this}
t.prototype.title=function(){return""+this.titleToDisplay()+" - Scrimba Playlist"}
t.prototype.image=function(){var t
if((t=this.data())&&t.gid){return"https://scrimba.com/static/art/"+this.data().gid+".png"}else{return"https://scrimba.com/static/art/maincover.png"}}
t.prototype.load=async function(){var t,e
this.setData(await this.api().prefetch(["playlist",this.pid()]))
if((t=this.data())&&t.gid){return this.setCourse(e=await this.api().prefetch(["group",this.data().gid])),e}}
t.prototype.reload=function(){return this.fetch()}
t.prototype.canonical=function(){var t
if((t=this.data())&&t.gid){return"https://scrimba.com/g/"+this.data().gid}else{return false}}
t.prototype.path=function(){return[this.data()]}
t.prototype.desc=function(){var t
return(t=this.course())&&t.description||this.data().description}
t.prototype.taglineToDisplay=function(){var t
return(t=this.course())&&t.title||this.data().tagline}
t.prototype.titleToDisplay=function(){var t
return(t=this.course())&&t.title||this.data().title}
t.prototype.isMine=function(){return true&&this.data().uid==this.api().uid()}
t.prototype.render=function(){var t=this.$,e=this
var i=e.isMine()?{playlist:e.data(),list:e.data().items()}:{}
return e.$open(0).setChildren([t[0]||s("header",t,0,e).setContent(t[1]||s("div",t,1,0).flag("wide"),2),t[4]||s("article",t,4,e).flag("wide").setContent(t[5]||s("section",t,5,4).flag("full").flag("playlists").setContent(t[6]||s("div",t,6,5).flag("playlist-grid").flag("sm"),2),2),t[8]||s("section",t,8,e).flag("full").setContent(t[9]||s("section",t,9,8).flag("narrow").setContent(t[10]||s("div",t,10,9),2),2),e.footer()],1).synced((t[1].setContent([(t[2]||s("h1",t,2,1)).setContent(e.titleToDisplay(),3),e.taglineToDisplay()?(t[3]||s("h3",t,3,1).flag("tagline")).setContent(e.taglineToDisplay(),3):void 0],1),t[6].setContent(function t(i){for(let t=0,r=n(e.data().items()),o=i.taglen=r.length;t<o;t++){(i[t]||s(c,i,t)).setData(r[t]).setContext(e.data()).end()}return i}(t[7]||o(t,7,t[6])),4),t[10].setNestedAttr("uxa","md",e.desc()).end(),true))}})
e.PlaylistPage=p},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(6).Page
var u=i(13).CastTile
var c=i(1),p=c.TextField,l=c.Button
var h=i(89).GroupGrid
var d=i(209).PlaylistTile
var f=r.defineTag("ResultGrid",function(t){t.prototype.casts=function(t){return this._casts}
t.prototype.setCasts=function(t){this._casts=t
return this}
t.prototype.render=function(){var t=this,e=this.$
return t.$open(0).flag("grid").setChildren(function e(i){var r
for(let e=0,o=n(t.casts()),a=i.taglen=o.length;e<a;e++){(r=i[e]||(r=s("div",i,e)).flag("Item").setContent(r.$.A||s(u,r.$,"A",r),2)).end((r.$.A.setData(o[e]).end(),true))}return i}(e[0]||o(e,0)),4).synced()}})
var m=r.defineTag("PlaylistGrid",function(t){t.prototype.playlists=function(t){return this._playlists}
t.prototype.setPlaylists=function(t){this._playlists=t
return this}
t.prototype.render=function(){var t=this,e=this.$
return t.$open(0).flag("grid").setChildren(function e(i){var r
for(let e=0,o=n(t.playlists()),a=i.taglen=o.length;e<a;e++){(r=i[e]||(r=s("div",i,e)).flag("Item").setContent(r.$.A||s(d,r.$,"A",r),2)).end((r.$.A.setData(o[e]).end(),true))}return i}(e[0]||o(e,0)),4).synced()}})
var y=r.defineTag("SearchPage",a,function(t){t.prototype.__ids={default:[],name:"ids"}
t.prototype.ids=function(t){return this._ids}
t.prototype.setIds=function(t){this._ids=t
return this}
t.prototype._ids=[]
t.prototype.groupIds=function(t){return this._groupIds}
t.prototype.setGroupIds=function(t){this._groupIds=t
return this}
t.prototype.playlistIds=function(t){return this._playlistIds}
t.prototype.setPlaylistIds=function(t){this._playlistIds=t
return this}
t.prototype.query=function(t){return this._query}
t.prototype.setQuery=function(t){this._query=t
return this}
t.prototype.title=function(){if(!this.query()){return"Scrimba - Search"}return"Scrimba - Search for "+this.query()}
t.prototype.casts=function(){var t=this
return t.ids().map(function(e){return t.api().db().get(e)})}
t.prototype.playlists=function(){var t=this
return t.playlistIds().map(function(e){return t.api().db().get(e)})}
t.prototype.groups=function(){var t=this
return t.groupIds().map(function(e){return t.api().db().get(e)})}
t.prototype.load=async function(){var t
var e=await(this.query()?this.api().rpc("search",[this.query()]):[])
this.setIds(e.spaces||[])
this.setGroupIds(e.groups||[])
return this.setPlaylistIds(t=e.playlists||[]),t}
t.prototype.reload=function(){return this.fetch()}
t.prototype.onsubmit=function(t){t.prevent().stop()
return this.router().go("/search?q="+this._input.value())}
t.prototype.render=function(){var t=this.$,e
return this.$open(0).setChildren([t[0]||s("header",t,0,this).setContent(e=t[1]||(e=s("form",t,1,0)).flag("wide").flag("search").setContent(this._input=this._input||s("input",e).flag("input").setType("text").setPlaceholder("Search..."),2),2),t[2]||s("article",t,2,this).flag("wide"),this.footer()],1).synced((t[1].end((this._input.end(),true)),t[2].setContent(this.query()?r.static([(t[3]||s("section",t,3,2).flag("section")).setContent([this.ids().length==0&&this.groupIds().length==0?t[4]||s("div",t,4,3).flag("header").setContent(t[5]||s("div",t,5,4).flag("desc").flag("muted").setText("Could not find any results"),2):(t[6]||s("div",t,6,3).flag("header").setContent(t[7]||s("div",t,7,6).flag("desc").flag("muted"),2)).end((t[7].setText("Found "+this.groupIds().length+" course"+(this.groupIds().length>1?"s":"")+", "+this.playlistIds().length+" playlist"+(this.playlistIds().length>1?"s":"")+", and "+this.ids().length+" screencast"+(this.ids().length>1?"s":"")),true)),(t[8]||s(h,t,8,3)).bindData(this,"groups",[]).end()],1),this.playlistIds().length>0?(t[9]||s("section",t,9,2).flag("section").setContent([s("h2",t,10,9),s(m,t,11,9)],2)).end((t[10].setText(""+this.playlistIds().length+" Playlists"),t[11].setPlaylists(this.playlists()).end(),true)):void 0,this.ids().length>0?(t[12]||s("section",t,12,2).flag("section").setContent([s("h2",t,13,12),s(f,t,14,12)],2)).end((t[13].setText(""+this.ids().length+" Casts"),t[14].setCasts(this.casts()).end(),true)):void 0],1,1):void 0,3),true))}})
e.SearchPage=y},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=i(6).Page
var u=i(10).Decoder
var c=r.defineTag("TrackingPage",a,function(t){t.prototype.sid=function(t){return this._sid}
t.prototype.setSid=function(t){this._sid=t
return this}
t.prototype.load=async function(){this._stream=await this.api().rpc("trackingstream",[this.sid()])
this._decoder=new u(this._stream.data)
this._events=this._decoder.fetchAll()
return this}
t.prototype.reload=function(){return this.fetch()}
t.prototype.render=function(){var t=this.$,e=this
return e.$open(0).setChildren(t[0]||s("table",t,0,e).setContent([s("thead",t,1,0).setContent([s("th",t,2,1).setText("Timestamp"),s("th",t,3,1).setText("Name"),s("th",t,4,1).setText("Params")],2),s("tbody",t,5,0)],2),2).synced((t[5].setContent(function t(i){var r
for(let t=0,o=n(e._events),a=i.taglen=o.length,u;t<a;t++){u=o[t];(r=i[t]||(r=s("tr",i,t)).setContent([s("td",r.$,"A",r),s("td",r.$,"B",r),s("td",r.$,"C",r)],2)).end((r.$.A.setContent(u.date(),3),r.$.B.setContent(u.name(),3),r.$.C.setContent(JSON.stringify(u.params()),3),true))}return i}(t[6]||o(t,6,t[5])),4),true))}})
e.TrackingPage=c},function(t,e,i){var n=i(0)
var r=i(93).Url
function o(t,e,i){var n=this
if(i===undefined)i={}
n._url=e
n._app=t
n._defaults=i
n._routes={}
if(true){n._history=t.api().sessionStore().getobj("router:history")||[e.path()]
window.onhashchange=function(t){return n.hashDidChange(t)}
window.onpopstate=function(t){return n.onpopstate(t)}
window.history.scrollRestoration="manual"
window.onbeforeunload=function(e){t.api().sessionStore().set("router:history",n._history)
if(n.canNavigate(null,e)){return}return true}}n}e.Router=o
o.prototype.path=function(t){return this._path}
o.prototype.setPath=function(t){this._path=t
return this}
o.prototype.shouldReload=function(t){return this._shouldReload}
o.prototype.setShouldReload=function(t){this._shouldReload=t
return this}
o.prototype.history=function(t){return this._history}
o.prototype.setHistory=function(t){this._history=t
return this}
o.slug=function(t){t=t.replace(/^\s+|\s+$/g,"").toLowerCase()
var e="Ã Ã¡Ã¤Ã¢Ã¥Ã¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®Ã²Ã³Ã¶Ã´Ã¹ÃºÃ¼Ã»Ã±Ã§Â·/_,:;"
var i="aaaaaeeeeiiiioooouuuunc------"
t=t.replace(/[^a-z0-9 -]/g,"")
t=t.replace(/\s+/g,"-")
t=t.replace(/-+/g,"-")
return t}
o.prototype.emit=function(t){var e=arguments,i=e.length
var r=new Array(i>1?i-1:0)
while(i>1)r[--i-1]=e[i]
return n.emit(this,t,r)}
o.prototype.on=function(t){var e
var i=arguments,r=i.length
var o=new Array(r>1?r-1:0)
while(r>1)o[--r-1]=i[r]
return n.listen.apply(n,[].concat([this,t],Array.from(o)))}
o.prototype.once=function(t){var e
var i=arguments,r=i.length
var o=new Array(r>1?r-1:0)
while(r>1)o[--r-1]=i[r]
return n.once.apply(n,[].concat([this,t],Array.from(o)))}
o.prototype.un=function(t){var e
var i=arguments,r=i.length
var o=new Array(r>1?r-1:0)
while(r>1)o[--r-1]=i[r]
return n.unlisten.apply(n,[].concat([this,t],Array.from(o)))}
o.prototype.api=function(){return this._app.api()}
o.prototype.refresh=function(t){if(true&&this.path()!=this._gpath){this._url=new r(window.location)
this._gpath=this.path()
this._history.unshift(this.path())
n.emit(this,"change",[this.path(),t])
ga("send","pageview",this.path())}return this}
o.prototype.reload=function(){document.location.reload()
return this}
o.prototype.hashDidChange=function(t){return n.emit(this,"hashchange")}
o.prototype.onpopstate=function(t){if(this._repushState&&Date.now()-this._repushState<1e3){this._repushState=null
return this}var e=this.canNavigate(this.path())
if(e){return this.refresh({pop:true})}else{this._repushState=Date.now()
return this.forward()}}
o.prototype.canNavigate=function(t,e){var i=this._app&&this._app.trigger&&this._app.trigger("beforenavigate",{path:t,sourceEvent:e})
if(i&&(i._prevented||i._cancel)){if(!e){let t=window.confirm("Are you sure you want to navigate away from this page?","Changes that you made may not be saved.")
if(t){return true}}return false}return true}
o.prototype.forward=function(){return window.history.forward()}
o.prototype.back=function(){return window.history.back()}
o.prototype.url=function(){return this._url}
o.prototype.path=function(){return this.url().path()}
o.prototype.hash=function(){return this.url().hash()}
o.prototype.setHash=function(t){this.url().setHash(t)
return this}
o.prototype.ext=function(){var t=this.path()
var e=t.match(/\.([^\/]+)$/)
return e&&e[1]||""}
o.prototype.segment=function(t){if(t===undefined)t=0
return this.path().split("/")[t+1]||""}
o.prototype.go=function(t,e,i){if(e===undefined)e={}
if(i===undefined)i=false
if(t==this.path()){return}var n=this.canNavigate(t)
if(!n){return}if(window.top!=window&&!t.match(/^\/(c|p)/)){window.open(t)}else if(i){history.replaceState(e,null,t)}else{history.pushState(e,null,t)}this.shouldReload()?this.reload():this.refresh()
return this}
o.prototype.get=function(){return null}
n.extendTag("element",function(t){t.prototype.router=function(){return this.root().router()}})
n.extendTag("a",function(t){t.prototype.onclick=function(t){if(!t.event()._imbaSimulatedTap){t.event()._imbaSimulatedTap=true
return this.ontap(t)}}
t.prototype.ontap=function(t){t.event()._imbaSimulatedTap=true
if(!this.href()){t._responder=null
return}var e=this.href().replace(document.location.origin,"")
if(t.event().metaKey||t.event().altKey||this.hasFlag("external")||this.dom().hasAttribute("target")){t._responder=null
return t.stop()}let i=this.trigger("taplink",{href:e,originalEvent:t})
if(i.isPrevented()){t._responder=null
return t.prevent().stop()}if(e[0]=="#"||e[0]=="/"){t.prevent().stop()
this.router().go(e,{})
this.trigger("routed",e)
n.Events.trigger("route",this)}else{t._responder=null
return t.stop()}return this}})},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o={0:"connecting",1:"open",2:"closing",3:"closed"}
var s=i(2),a=s.MSG,u=s.Packet,c=s.SPIV
var p=i(10)
var l=i(18)
var h=i(9)
function d(t,e){this._api=t
this._options=e
this._queue=[]
this._counter=0
this._callbacks=[]
this._attempts=0
this._channels=[]
this._data={}
this._socketState=0
this._cbcounter=1
this._roundtrips=[]
this._latency=0
this.open(false)
this}e.Socket=d
d.prototype.id=function(t){return this._id}
d.prototype.setId=function(t){this._id=t
return this}
d.prototype.ws=function(t){return this._ws}
d.prototype.setWs=function(t){this._ws=t
return this}
d.prototype.api=function(t){return this._api}
d.prototype.setApi=function(t){this._api=t
return this}
d.prototype.client=function(t){return this._client}
d.prototype.setClient=function(t){this._client=t
return this}
d.prototype.latency=function(t){return this._latency}
d.prototype.setLatency=function(t){this._latency=t
return this}
d.prototype.timeDiff=function(t){return this._timeDiff}
d.prototype.setTimeDiff=function(t){this._timeDiff=t
return this}
d.prototype.data=function(t){return this._data}
d.prototype.setData=function(t){this._data=t
return this}
d.prototype.set=function(t,e){var i=this._data[t]
this._data[t]=e
return i}
d.prototype.get=function(t){return this._data[t]}
d.prototype.log=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this._api.log.apply(this._api,[].concat(["socket"],Array.from(i)))}
d.prototype.state=function(){return this._ws?this._ws.readyState:this._socketState}
d.prototype.offline=function(){return this.state()>1}
d.prototype.stateName=function(){return o[this.state()]}
d.prototype.ws=function(){return this._ws}
d.prototype.id=function(){return this._api.sid()}
d.prototype.url=function(){let t=document.location.protocol=="http:"?"ws":"wss"
return""+t+"://"+document.location.host+"/socket?r="+this.channelsUrl().join(",")+"&id="+(this.id()||"")+"&spiv="+c+"&scv="+this._api.clientVersion()}
d.prototype.open=function(t){var e=this
if(e._attempts>20){e._socketState=3
return}var i=e._ws=new WebSocket(e.url())
i.binaryType="arraybuffer"
var n=setTimeout(function(){e._timedOut=true
i.close()
return e._timedOut=false},5e3)
i.onopen=function(t){clearTimeout(n)
return e.onopen(t)}
i.onclose=function(t){clearTimeout(n)
e.onclose(t)
i.onmessage=null
e._socketState=3
e._ws=null
if(i.autoReconnect){return e.open()}if(e._forcedClose){return}var r=Math.min(1e3*Math.pow(1.5,e._attempts),3e4)
return setTimeout(function(){e._attempts++
return e.open(true)},r)}
i.onerror=function(t){return e.onerror(t)}
return i.onmessage=function(t){return e.onmessage(t)}}
d.prototype.reopen=function(){this._attempts=0
if(this._ws){this._ws.autoReconnect=true
this._ws.close()}else{this.open()}return this}
d.prototype.close=function(t){if(t===undefined)t=false
this._forcedClose=t
if(this._ws){return this._ws.close()}}
d.prototype.send=function(t,e){var i
if(e){if(e instanceof Function){e={handler:e}}e.ref=this._cbcounter++
e.ts=Date.now()
this._callbacks.push(e)}if(!(t instanceof ArrayBuffer||t instanceof Uint8Array)){t=l.mpencode(t)}if(e){t=l.mpconcat([l.mpencode(e.ref),t])}if(this._ws&&this.state()==1){return this._ws.send(t,{binary:true})}else{this._queue||(this._queue=[])
return this._queue.push(t)}}
d.prototype.heartbeat=function(){var t=this
var e=Date.now()
t.send([a.PING,e],function(i){var n=Date.now()
t._roundtrips.push(n-e)
t._latency=(n-e)*.5
return true})
return t}
var f=h.Decoder.prototype.bufferish
d.prototype.sendTracking=function(t,e){if(e===undefined)e=[]
var i=p.encode(t,e)
return this.sendTrackingPayload(i)}
d.prototype.sendTrackingPayload=function(t){var e=h.encode([a.TRACKING])
var i=f.concat([e,t])
return this.send(i)}
d.prototype.onopen=function(t){var e=this._queue
this._queue=null
if(e&&r(e)){for(let t=0,i=n(e),r=i.length;t<r;t++){this.send(i[t])}}this._api.touch()
return this}
d.prototype.onerror=function(t){return this._api.touch()}
d.prototype.onclose=function(t){this._api.touch()
return this}
d.prototype.onmessage=function(t){var e=Date.now()
this._attempts=0
var i=new u(t.data,this,t)
var n=this._callbacks
if(i._ref){let t=0
while(t<n.length){let r=n[t]
if(r&&r.ref==i._ref){i._req=r
r.ms=e-r.ts
t==0?n.shift():n.splice(t,1)
return r.handler(i,r)}t++}}this.api().receive(i)
return this}
d.prototype.modelForRoom=function(t){if(this.api().db().storeForId(t)){return this.api().db().get(t)}}
d.prototype.channelsUrl=function(){let t=[]
for(let e=0,i=n(this._channels),r=i.length;e<r;e++){t.push(this.channelRef(i[e]))}return t}
d.prototype.channelRef=function(t){var e=this.modelForRoom(t)
return e?e.channelRef(t):t}
d.prototype.join=function(t){if(this._channels.indexOf(t)<0){this._channels.push(t)
this.send([a.JOIN,this.channelRef(t)])}return this}
d.prototype.leave=function(t){var e=this._channels.indexOf(t)
if(e>=0){this._channels.splice(e,1)
this.send([a.LEAVE,t])}return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}function r(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var o={LOADING:1}
var s=i(231).Collection
var a=i(4),u=a.Resource,c=a.ACCESS
var p=i(52).LocalStore
var l=i(18)
var h=function(t,e){for(let i,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
i=e[s]
t[s]=i}return t}
function d(t,e,i,n){var r=this
r._type=i||u
r._name=e
r._db=t
r._ts=Date.now()
r._options=n||{}
t[e]=function(){return r}
t.stores().push(r)
t.stores()[e]=r
if(n.ns){t._prefixes[n.ns]=r}r._flags=0
r._version=0
r._isReady=false
r._map={}
r._array=[]
r._requested={}
r._reader=function(t){return r.read(t)}
if(true){r._kvs=new p(r._db.cacheKey()+":"+r._name+":","temporary")}if(i){i.prototype._db=t
i.prototype._store=r}if(r._options.preload==false&&r._knex){r._isReady=true}else if(r._knex){r.loadIntoMemory()}r}e.Store=d
d.prototype.name=function(t){return this._name}
d.prototype.setName=function(t){this._name=t
return this}
d.prototype.isReady=function(t){return this._isReady}
d.prototype.setIsReady=function(t){this._isReady=t
return this}
d.prototype.version=function(t){return this._version}
d.prototype.setVersion=function(t){this._version=t
return this}
d.prototype.type=function(t){return this._type}
d.prototype.setType=function(t){this._type=t
return this}
d.prototype.kvs=function(t){return this._kvs}
d.prototype.setKvs=function(t){this._kvs=t
return this}
d.prototype.api=function(){if(true){return SCRIMBA_API}}
d.prototype.log=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
if(true){(t=this.api()).log.apply(t,[].concat(["db:"+this._name],Array.from(n)))}return this}
d.prototype.dexie=function(){if(!this._dexie){this._dexie=this._db.dexie()[this.name()]
this._dexie.hook("reading",this._reader)}return this._dexie}
d.prototype.inMemoryOnly=function(){return true}
d.prototype.loadIntoMemory=function(){if(this._isReady||this._isLoading){return this}this._isLoading=true
var t=Date.now()
if(true){return Promise.resolve(this.didLoadFromMemory())}if(false){}return this}
d.prototype.didLoadFromMemory=function(){this._isReady=true
this._isLoading=false
this.touch()
return this._db.storeDidLoad(this)}
d.prototype.touch=function(){this._version++
return this._db.touch()}
d.prototype.drop=function(){return this.clear()}
d.prototype.clear=function(){this.kvs().clear()
return this}
d.prototype.generateId=function(){var t=l.uuid()
return this._options.ns+"o"+t.substr(20)}
d.prototype.build=function(t){t.id||(t.id=this.generateId())
t.v=-2
return this.read(t)}
if(false){}else{d.prototype.put=async function(t){await this.saveLocal(t)
var e=await SCRIMBA_API.rpc("put",[t])
return this.read(e,true)}
d.prototype.ins=async function(t){var e=await SCRIMBA_API.rpc("ins",[t,this.generateId()])
return this.read(e,true)}
d.prototype.del=function(t){let e=t.id
if(t.isLocal()){t.archived_at||(t.archived_at=new Date)
let i=this._array.indexOf(t)
if(i>=0){this._array.splice(i,1)}if(this._map[e]){this._map[e]=null}this.touch()}return this}
d.prototype.fetch=async function(t){var e=typeof t=="string"||t instanceof String?this.get(t):this.read(t)
if(e&&e.isLocal()){return Promise.resolve(e)}var i=await SCRIMBA_API.rpc("fetch",[t.id||t])
return this.read(i,true)}}d.prototype.all=function(){return this._array}
d.prototype.has=function(t){return!!this._map[t]}
d.prototype.get=function(t){if(!(t&&this._map[t])){if(false){}var e={id:t,v:-3,CODE:200}
var i=this._map[t]=this._type?new this._type(e,this):e
this._array.push(this._map[t])
this._requested[t]=true
if(true){this._db.autoload(i)}}return this._map[t]}
d.prototype.read=function(t,e){if(e===undefined)e=false
if(!(t&&t.id)){return}var i=this._map[t.id]
if(i==t){return t}else if(i){let n=i.v
let r=t.v-n
if(r>0||n==null||e){t.CODE||(t.CODE=200)
if(i instanceof u){i.patch(t)}else{h(i,t)}this._version++}}else{if(this._type&&!(t instanceof this._type)){t.v||(t.v=-4)
t.CODE||(t.CODE=200)
t=new this._type(t,this)}this._map[t.id]=t
this._array.push(t)
this._version++}return i||t}
d.prototype.syncLocal=function(){return this}
d.prototype.patch=function(t){if(!t[1]){return}var e=t[1]
var i=t[2]
var o=this.lastVersion(e)
var s=t[3]||[]
this.lastVersion(e,i)
console.log("patch",e)
if(!r(s)){return this}for(let t=0,e=n(s),i=e.length;t<i;t++){this.read(e[t])}this.touch()
return}
d.prototype.persist=function(){return this}
d.prototype.saveLocal=function(t){if(this.inMemoryOnly()){return Promise.resolve(t)}var e=t.v
if(e<-1){t.v=-1}var i=this._dexie.put(t)
return i.then(function(e){if(t.v<-1){t.v=-1}return t}).catch(function(i){if(t.v==-1){t.v=e}return t})}
d.prototype.lastVersion=function(t,e){if(e!=undefined){this.kvs().set(t,e)}return this.kvs().getnum(t)}
d.prototype.sync=async function(t){if(t===undefined)t={}
var e=JSON.stringify(t)
if(false){}console.log("Store.sync",this._name)
var i=this.lastVersion(e)
var n=[this._name,t,this.lastVersion(e)]
var r=await this.api().rpc("sync",[[n]])
if(r[0]){this.patch(r[0])}this.log("returned from sync",n,r)
return this}
d.prototype.where=function(t){if(false){}}
d.prototype.first=function(t){if(t instanceof Function){return this.filter(t)[0]}if(false){}}
d.prototype.slice=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this._array.slice.apply(this._array,i)}
d.prototype.filter=function(t){return this._array.filter(t)}
d.prototype.sel=function(t,e){if(e==undefined&&typeof t=="function")e=t,t={}
if(t==undefined)t={}
var i=new s(this,t)
if(e){i.setQuery(e),e}return i}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}var r=i(0)
var o=function(t){var e
if(typeof t=="string"||t instanceof String){var i=false
if(t[0]=="-"){i=true
t=t.substr(1)}e=function(e,n){var r=e[t]||0,o=n[t]||0
var s=r>o?1:o>r?-1:0
return i?s*-1:s}}else if(t instanceof Array){var r=t.map(function(t){return o(t)})
if(n(t)==2){e=function(t,e){return r[0](t,e)||r[1](t,e)}}}return e}
var s=i(233).Filters
var a=0
function u(t,e){if(e===undefined)e={}
this._ref="C"+a++
this._options=e
this._source=t
this._array=[]
this._dirty=false
this._version=0
this._sourceVersion=-1
this._sorter=e.sort
if(e.sort){this._sortFn=o(e.sort)}}e.Collection=u
u.prototype.version=function(t){return this._version}
u.prototype.setVersion=function(t){this._version=t
return this}
u.prototype.source=function(t){return this._source}
u.prototype.setSource=function(t){this._source=t
return this}
u.prototype.__sorter={watch:"sorterDidSet",name:"sorter"}
u.prototype.sorter=function(t){return this._sorter}
u.prototype.setSorter=function(t){var e=this.sorter()
if(t!=e){this._sorter=t}if(t!=e){this.sorterDidSet&&this.sorterDidSet(t,e,this.__sorter)}return this}
u.prototype.__query={watch:"queryDidSet",name:"query"}
u.prototype.query=function(t){return this._query}
u.prototype.setQuery=function(t){var e=this.query()
if(t!=e){this._query=t}if(t!=e){this.queryDidSet&&this.queryDidSet(t,e,this.__query)}return this}
u.prototype.filters=function(t){return this._filters}
u.prototype.setFilters=function(t){this._filters=t
return this}
u.prototype.store=function(){return this._source}
u.prototype.filters=function(){return this._filters||(this._filters=new s)}
u.prototype.queryDidSet=function(t,e){this.touch()
return this}
u.prototype.sorterDidSet=function(t){if(typeof t=="string"||t instanceof String){this._sortFn=o(t)}else{this._sortFn=t}if(this._sorter){return this._array=this._array.sort(this._sortFn)}}
u.prototype.touch=function(){this._dirty=true
return this}
u.prototype.check=function(){var t;(t=this.source())&&t.check&&t.check()
if(this._dirty||this._sourceVersion!=this.source().version()){this.sync()}else if(this._filters&&this._filters.version()!=this._filtersVersion){this.sync()}else if(this.source()!=this.store()&&this.store().version()!=this._storeVersion){this.sync()}return this._version}
u.prototype.sync=function(){var t=this.source().version()
var e=this._filters?this._filters.version():-1
var i=this.store().version()
this._sourceVersion=t
this._filtersVersion=e
this._storeVersion=i
this._dirty=false
var r=this._query?this.source().filter(this._query):this.source().slice()
if(!(r instanceof Array)){return this}if(this._filters){r=r.filter(this._filters.fn())}if(this._sortFn){r=r.sort(this._sortFn)}var o=n(this._array)
var s=n(r)
var a=0
var u=s!=o
while(!u&&a<s){if(r[a]!=this._array[a]){u=true}a++}if(u){this._array=r
this._version++}return this}
u.prototype.filter=function(t){return this.toArray().filter(t)}
u.prototype.first=function(t){return this.filter(t)[0]}
u.prototype.map=function(t){return this.toArray().map(t)}
u.prototype.slice=function(){var t
var e=arguments,i=e.length
var n=new Array(i>0?i:0)
while(i>0)n[i-1]=e[--i]
return(t=this.toArray()).slice.apply(t,n)}
u.prototype.at=function(t){return this.toArray()[t]}
u.prototype.len=function(){return this.toArray().length}
u.prototype.toArray=function(){this.check()
return this._array}
u.prototype.version=function(){this.check()
return this._version}
u.prototype.sel=function(t,e){if(e==undefined&&typeof t=="function")e=t,t={}
if(t==undefined)t={}
var i=new c(this,t)
if(e){i.setQuery(e),e}return i}
u.prototype.transform=function(t,e){var i=new c(this,this.o())
if(e){i.setQuery(e),e}return i}
u.prototype.synced=function(t,e){var i=this.check()
if(t&&t[this._ref]!=i){e&&e(this)
t[this._ref]=i
return false}return true}
function c(){return u.apply(this,arguments)}r.subclass(c,u)
e.SubCollection=c
c.prototype.store=function(){return this._source.store()}},function(t,e,i){function n(t){return t&&(t.len instanceof Function?t.len():t.length)||0}function r(t){return t?t.toArray?t.toArray():t:[]}var o=i(230).Store
var s=i(124).Action
var a=i(129).Topic
var u=i(125).File
var c=i(26).Cast
var p=i(41).Playlist
var l=i(68).User
var h=i(128).Message
var d=i(67).Group
var f=i(127).Membership
var m=i(131).Viewing
var y=i(130).ViewSession
var g=i(126).Giveaway
var v=i(52).LocalStore
var _=i(9)
var b=i(2),x=b.MSG,w=b.SCON,T=b.SPIV
if(false){}function S(){this._value=undefined
this._resolved=false
this._listeners=[]
this}S.prototype.then=function(t){if(this._resolved){t(this._value)}else{this._listeners.push(t)}return this}
S.prototype.resolve=function(t){this._resolved=true
this._value=t
for(let t=0,e=r(this._listeners),i=e.length;t<i;t++){e[t](this._value)}this._listeners=[]
return this}
function k(t){var e=this
e._api=t
e._ts=Date.now()
e._dbname="scrimba2"
e._scope={}
e._stores=[]
e._prefixes={}
e._loadQueue=[]
if(true){e._kvs=new v("db:"+e._dbname+":","temporary")}e._spaces=new o(e,"spaces",c,{ns:"c"})
e._topics=new o(e,"topics",a,{ns:"t"})
e._users=new o(e,"users",l,{ns:"u"})
e._messages=new o(e,"messages",h,{ns:"m"})
e._playlists=new o(e,"playlists",p,{ns:"p"})
e._actions=new o(e,"actions",s,{ns:"a"})
e._groups=new o(e,"groups",d,{ns:"g"})
e._memberships=new o(e,"memberships",f,{ns:"x"})
e._viewings=new o(e,"viewings",m,{ns:"y",preload:false})
e._viewsessions=new o(e,"viewsessions",y,{ns:"v",preload:false})
e._files=new o(e,"files",u,{ns:"f",preload:false})
e._giveaways=new o(e,"giveaways",g,{ns:"d",preload:false})
e._autosyncer=function(){return e.autosync()}
e._loadPromise=new S
e._readyPromise=new S
e._sync
e._local=true
if(false){}e}e.DB=k
k.prototype.api=function(t){return this._api}
k.prototype.setApi=function(t){this._api=t
return this}
k.prototype.stores=function(t){return this._stores}
k.prototype.setStores=function(t){this._stores=t
return this}
k.prototype.dexie=function(t){return this._dexie}
k.prototype.setDexie=function(t){this._dexie=t
return this}
k.prototype.scope=function(t){return this._scope}
k.prototype.setScope=function(t){this._scope=t
return this}
k.prototype.kvs=function(t){return this._kvs}
k.prototype.setKvs=function(t){this._kvs=t
return this}
k.prototype.touch=function(){if(true){App.touch()}this.time()
return this}
k.instance=function(){return this._instance||(this._instance=new this)}
if(false){}if(true){k.prototype.open=function(){var t=this
return t._open||(t._open=new Promise(function(e,i){var n=Date.now()
var o=function(i){t._loadPromise.resolve(t)
for(let e=0,i=r(t.stores()),n=i.length;e<n;e++){i[e].loadIntoMemory()}return e(t)}
var s=function(i){t._inmemory=true
t._loadPromise.resolve(t)
e(t)
return}
return o()}))}}k.prototype.autoload=function(t){if(this._loadQueue.indexOf(t)<0){this._loadQueue.push(t)}clearTimeout(this._autoloader)
this._autoloader=setTimeout(this._autosyncer,10)
return this}
k.prototype.autosync=function(){if(!n(this._loadQueue)){return}var t=this._loadQueue.filter(function(t){return t.v==-3}).map(function(t){return t.id})
this._loadQueue=[]
this._api.rpc("get",[t],{models:true})
return this}
k.prototype.scoped=function(t,e){var i=this._scope
this._scope=t
var n=e()
this._scope=i
return n}
k.prototype.cacheKey=function(){return true&&""+this._dbname+":"+(this._api.uid()||"anon")}
k.prototype.casts=function(){return this._spaces}
k.prototype.knex=function(){return this.serverDB().db}
k.prototype.storeForId=function(t){return this._prefixes[t[0]]}
k.prototype.storeDidLoad=function(t){if(n(this.stores().filter(function(t){return!t.isReady()}))==0){this._readyPromise.resolve(this)
return this}}
k.prototype.storesDidLoad=function(){return this._readyPromise}
k.prototype.get=function(t){if(!t){return}var e=this.storeForId(t)
return e?e.get(t):null}
k.prototype.read=function(t,e){if(e===undefined)e=false
if(!(t&&t.id)){return}var i=this.storeForId(t.id)
return i?i.read(t,e):null}
k.prototype.put=function(t){return this.storeForId(t.id).put(t)}
k.prototype.fetch=function(t){if(!t){return}var e=this.storeForId(t)
return e?e.fetch(t):null}
k.prototype.cache=function(){return this._cache||(this._cache={})}
k.prototype.cacheGet=function(t){return Promise.resolve(this.cache()[t])
if(!this._dexie||this._inmemory){return Promise.resolve(null)}return this._dexie.cache.get(t)}
k.prototype.cacheSet=function(t,e){this.cache()[t]=e
return Promise.resolve(true)
if(!this._dexie||this._inmemory){return Promise.resolve(null)}e.id=t
return this._dexie.cache.put(e)}
k.prototype.deserialize=function(t,e){if(e===undefined)e=true
if(t instanceof Array){for(let i=0,n=r(t),o=n.length;i<o;i++){t[i]=this.read(n[i],e)}}else if(t instanceof Object&&t.id){t=this.read(t,e)}return t}
k.prototype.preload=function(t){for(let e=0,i=r(t),n=i.length;e<n;e++){this.read(i[e])}return this}
k.prototype.drop=function(){return this}
k.prototype.migrate=function(){return this}
k.prototype.persist=function(){for(let t=0,e=r(this.stores()),i=e.length;t<i;t++){this.stores().persist()}return this}
k.prototype.sync=async function(t){var e={}
var i=[]
if(t instanceof Object){for(let e,n=0,r=Object.keys(t),o=r.length,s,a;n<o;n++){s=r[n]
e=t[s]
if(a=this._stores[s]){i.push([s,e,a.lastVersion(e)])}}}else if(t instanceof Array){i=t}else if(typeof t=="string"||t instanceof String){this.stores().map(function(i){return e[i.name()]=i.lastVersion(t)})
i=[t,e]}else{i=this.stores().map(function(e){return[e.name(),"all",t?-1:e.lastVersion("all")]})}if(true){this.log("db.sync",i)
var n=await this.api().rpc("sync",[i])
return this.patch(n,i)}}
k.prototype.prefetch=async function(t,e){var i=this
e||(e=i.api())
let o=i.kvs().getobj(t)
if(o&&Date.now()-o.ts<1e3){let t=null
if(o.result instanceof Array){t=o.result.map(function(t){return i.get(t)})}else if(o.result){t=i.get(o.result)}return Promise.resolve(t)}var s={}
i.stores().map(function(e){return s[e.name()]=true&&e.lastVersion(t)})
var a=[t,s]
var u=await(true&&e.rpc("syncFind",a))
if(!u||n(u)==0){return null}for(let t=0,e=r(u[1]),n=e.length;t<n;t++){i.read(e[t])}if(true){for(let e=u[2],n,r=0,o=Object.keys(e),s=o.length,a;r<s;r++){a=o[r]
n=e[a]
var c=i.stores()[a]
c.lastVersion(t,n)}}if(false){}if(u[0]instanceof Array){return u[0].map(function(t){return i.get(t)})}else if(u[0]){return i.get(u[0])}else{return null}}
k.prototype.prefetched=function(t,e){for(let t=0,i=r(e[1]),n=i.length;t<n;t++){this.read(i[t])}for(let n=e[2],r,o=0,s=Object.keys(n),a=s.length,u;o<a;o++){u=s[o]
r=n[u]
var i=this.stores()[u]
i.lastVersion(t,r)}this.kvs().set(t,{ts:Date.now(),result:e[0]})
return this}
k.prototype.patch=function(t,e){var i
var n=t[0]
var o=t[1]
for(let t=0,e=r(n),i=e.length;t<i;t++){this.read(e[t])}for(let t=0,n=r(o),u=n.length;t<u;t++){var s=e[t]
var a=this.stores()[s[0]];(i=a)&&i.lastVersion&&i.lastVersion(s[1],n[t])}return this}
k.prototype.rebuild=function(){for(let t=0,e=r(this.stores()),i=e.length;t<i;t++){e[t].clear()}return this.sync(true)}
k.prototype.rebuildHard=function(){for(let t=0,e=r(this.stores()),i=e.length;t<i;t++){e[t].clear()}return setTimeout(function(){return document.location.reload()},2e3)}
k.prototype.syncLocal=function(){let t=[]
for(let e=0,i=r(this.stores()),n=i.length;e<n;e++){t.push(i[e].syncLocal())}return t}
k.prototype.log=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
if(true){return this._api.log.apply(this._api,[].concat(["db"],Array.from(i)))}}
k.prototype.rpc=function(t,e,i){var n=this
if(i===undefined)i={}
var r=n._api.rpc(t,e,i)
var o=function(t){if(typeof t=="string"||t instanceof String){return n.get(t)}else if(t&&t.id){return n.read(t)}}
return r.then(function(t){if(t instanceof Array){return t.map(o)}else{return o(t)}})}
k.prototype.time=function(){return this}
k.prototype.presets=function(){return this._presets||(this._presets=this.casts().sel(function(t){return t.type=="template"&&t.spiv==T}))}},function(t,e){function i(){this._params={}
this._version=0}e.Filters=i
i.prototype.version=function(t){return this._version}
i.prototype.setVersion=function(t){this._version=t
return this}
i.prototype.touch=function(){return this._version++}
i.prototype.get=function(t){return this._params[t]}
i.prototype.reset=function(){this._params={}
this.touch()
return this}
i.prototype.set=function(t,e){if(e==undefined){return this.del(t)}if(this._params[t]!=e){this._params[t]=e
this.touch()}return this}
i.prototype.del=function(t){var e
if(this._params[t]!=undefined){e=this._params[t],delete this._params[t],e
this.touch()}return this}
i.prototype.fn=function(){var t=this
return t._fn||(t._fn=function(e){for(let n=t._params,r,o=0,s=Object.keys(n),a=s.length,u;o<a;o++){u=s[o]
r=n[u]
if(r==undefined){continue}var i=e[u]
if(i instanceof Function){i=e[u]()}if(r instanceof RegExp){if(!r.test(i||"")){return false}}else if(r instanceof Array){return r.indexOf(i)>=0}else if(i!=r){return false}}return true})}
if(false){}},function(t,e){function i(t){return t?t.toArray?t.toArray():t:[]}function n(){}n.prototype.now=function(){return Date.now()}
n.prototype.mark=function(){return this}
n.prototype.measure=function(){return this}
n.prototype.getEntriesByType=function(){return[]}
n.prototype.clearMeasures=function(){return this}
n.prototype.clearMarks=function(){return this}
function r(t){this._api=t
this._perf=true&&window.performance||new n
this._flushTimings=null
this.sendMeasures=this.sendMeasures.bind(this)
this}e.Analytics=r
r.prototype.api=function(t){return this._api}
r.prototype.setApi=function(t){this._api=t
return this}
r.prototype.sendEvent=function(t,e,i,n){this.api().log("analytics:event",t,e,i,n)
if(window.ga){return ga("send","event",t,e,i,n)}}
r.prototype.sendTiming=function(t,e,i,n){this.api().log("analytics:timing",t,e,i,n)
if(window.ga){return ga("send","timing",t,e,i,n)}}
r.prototype.cast=function(t,e){return this.sendEvent("Cast",e,t)}
r.prototype.castLoaded=function(t){return this.cast(t,"Loaded")}
r.prototype.castPlay=function(t){return this.cast(t,"Played")}
r.prototype.castEnd=function(t){return this.cast(t,"Ended")}
r.prototype.castEdit=function(t){return this.cast(t,"Edited")}
r.prototype.castBranch=function(t){return this.cast(t,"Branched")}
r.prototype.castRun=function(t){return this.cast(t,"Run")}
r.prototype.castCreated=function(t){return this.cast(t,"Created")}
r.prototype.castRecStart=function(t){return this.cast(t,"Recording Started")}
r.prototype.castRecDiscard=function(t){return this.cast(t,"Recording Discarded")}
r.prototype.castRecSave=function(t){return this.cast(t,"Recording Saved")}
r.prototype.courseEnrolled=function(t){return this.sendEvent("Course","Enrolled",t,0)}
r.prototype.twitterShare=function(t){return this.sendEvent("Share","Twitter Click",t)}
r.prototype.callToAction=function(t,e){return this.sendEvent("CTA",t,e)}
r.prototype.getClientId=function(){var t
ga(function(e){return t=e.get("clientId")})
return t}
r.prototype.now=function(){return this._perf.now()}
r.prototype.timing=function(){return this}
r.prototype.time=function(t,e,i){var n=this
let r=[t,e||"time",i||""].join("::")
n._perf&&n._perf.mark&&n._perf.mark(r+"Start")
return{end:function(){n._perf&&n._perf.mark&&n._perf.mark(r+"End")
n._perf&&n._perf.measure&&n._perf.measure(r,r+"Start",r+"End")
clearTimeout(n._flushTimings)
return n._flushTimings=setTimeout(n.sendMeasures,500)}}}
r.prototype.mark=function(t){return this._perf&&this._perf.mark&&this._perf.mark(t)}
r.prototype.measure=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
return this._perf&&this._perf.measure&&this._perf.measure.apply(this._perf,i)}
r.prototype.sendMeasures=function(){var t
if(!this._perf.getEntriesByType){return}var e=this._perf.getEntriesByType("measure")
this._perf.clearMeasures()
for(let s=0,a=i(e),u=a.length,c;s<u;s++){c=a[s]
if(c.SENT_GA){continue}c.SENT_GA=true
var t=i(c.name.split("::"))
var n=t[0],r=t[1],o=t[2]
if(r){this.sendTiming(n,r,Math.round(c.duration),o)}}return this}},function(t,e,i){var n=i(120)
function r(){this._contexts={}
this._enabled=true&&!!localStorage.debug
this}e.Logger=r
r.prototype.enabled=function(t){return this._enabled}
r.prototype.setEnabled=function(t){this._enabled=t
return this}
r.prototype.log=function(t){var e=arguments,i=e.length
var r=new Array(i>1?i-1:0)
while(i>1)r[--i-1]=e[i]
if(!this._enabled){return}var o=this._contexts[t]||(this._contexts[t]=n("scrimba:"+t))
return o.apply(this,r)}},function(t,e){function i(t){this._ua=t}e.UserAgent=i
i.prototype.detect=function(t){return t.test(this._ua)}
i.prototype.platform=function(){return true&&window.navigator.platform}
i.prototype.isIE=function(){return this.detect(/\bTrident\b/)}
i.prototype.isChrome=function(){return this.detect(/webkit\W.*(chrome|chromium)\W/i)}
i.prototype.isFirefox=function(){return this.detect(/mozilla.*\Wfirefox\W/i)}
i.prototype.isGecko=function(){return this.detect(/mozilla(?!.*webkit).*\Wgecko\W/i)}
i.prototype.isKindle=function(){return this.detect(/\W(kindle|silk)\W/i)}
i.prototype.isMobile=function(){return this.detect(/(iphone|ipod|((?:android)?.*?mobile)|blackberry|nokia)/i)}
i.prototype.isOpera=function(){return this.detect(/opera.*\Wpresto\W|OPR/i)}
i.prototype.isSafari=function(){return this.detect(/webkit\W(?!.*chrome).*safari\W/i)}
i.prototype.isTablet=function(){return this.detect(/(ipad|android(?!.*mobile)|tablet)/i)}
i.prototype.isTV=function(){return this.detect(/googletv|sonydtv/i)}
i.prototype.isWebKit=function(){return this.detect(/webkit\W/i)}
i.prototype.isAndroid=function(){return this.detect(/android/i)}
i.prototype.isIOS=function(){return this.detect(/(ipad|iphone|ipod)/i)}
i.prototype.isIPad=function(){return this.detect(/ipad/i)}
i.prototype.isIPhone=function(){return this.detect(/iphone/i)}
i.prototype.isIPod=function(){return this.detect(/ipod/i)}
i.prototype.isPhone=function(){return this.isMobile()&&!this.isTablet()}
i.prototype.isMac=function(){return this.platform().indexOf("Mac")>=0}
i.prototype.isWindows=function(){return this.platform().indexOf("Mac")==-1}
i.prototype.whoami=function(){return this._ua}},function(t,e){var i={}
var n=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/
e.containsEmoji=i.containsEmoji=function(t){return n.test(t)}
e.isEmail=i.isEmail=function(t){return/^\S+@\S+\.\S+$/.test(t)}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
i(94)
var o=["keydown","keyup","keypress","textInput","input","change","submit","focusin","focusout","focus","blur","contextmenu","selectstart","dblclick","selectionchange","mousewheel","wheel","scroll","beforecopy","copy","beforepaste","paste","beforecut","cut","dragstart","drag","dragend","dragenter","dragover","dragleave","dragexit","drop","mouseup","mousedown","mouseenter","mouseleave","mouseout","mouseover","mousemove","transitionstart","transitionend","transitioncancel","animationstart","animationiteration","animationend"]
r.EventManager=function t(e,i){var r=this
if(!i||i.constructor!==Object)i={}
var o=i.events!==undefined?i.events:[]
r._shimFocusEvents=true&&window.netscape&&e.onfocusin===undefined
r.setRoot(e)
r.setListeners([])
r.setDelegators({})
r.setDelegator(function(t){r.delegate(t)
return true})
for(let t=0,e=n(o),i=e.length;t<i;t++){r.register(e[t])}return r}
r.EventManager.prototype.root=function(t){return this._root}
r.EventManager.prototype.setRoot=function(t){this._root=t
return this}
r.EventManager.prototype.count=function(t){return this._count}
r.EventManager.prototype.setCount=function(t){this._count=t
return this}
r.EventManager.prototype.__enabled={default:false,watch:"enabledDidSet",name:"enabled"}
r.EventManager.prototype.enabled=function(t){return this._enabled}
r.EventManager.prototype.setEnabled=function(t){var e=this.enabled()
if(t!=e){this._enabled=t}if(t!=e){this.enabledDidSet&&this.enabledDidSet(t,e,this.__enabled)}return this}
r.EventManager.prototype._enabled=false
r.EventManager.prototype.listeners=function(t){return this._listeners}
r.EventManager.prototype.setListeners=function(t){this._listeners=t
return this}
r.EventManager.prototype.delegators=function(t){return this._delegators}
r.EventManager.prototype.setDelegators=function(t){this._delegators=t
return this}
r.EventManager.prototype.delegator=function(t){return this._delegator}
r.EventManager.prototype.setDelegator=function(t){this._delegator=t
return this}
var s=[]
r.EventManager.prototype.enabledDidSet=function(t){t?this.onenable():this.ondisable()
return this}
r.EventManager.bind=function(t){if(r.Events){return r.Events.autoregister(t)}else if(s.indexOf(t)==-1&&o.indexOf(t)>=0){return s.push(t)}}
r.EventManager.activate=function(){var t
if(r.Events){return r.Events}r.Events=new r.EventManager(r.document(),{events:[]})
if(false){}r.POINTER||(r.POINTER=new r.Pointer)
var e=window&&window.ontouchstart!==undefined
if(e){r.Events.listen("touchstart",function(t){return r.Touch.ontouchstart(t)})
r.Events.listen("touchmove",function(t){return r.Touch.ontouchmove(t)})
r.Events.listen("touchend",function(t){return r.Touch.ontouchend(t)})
r.Events.listen("touchcancel",function(t){return r.Touch.ontouchcancel(t)})}r.Events.register("click",function(t){if(t.timeStamp-r.Touch.LastTimestamp>r.Touch.TapTimeout){t._imbaSimulatedTap=true
var e=new r.Event(t)
e.setType("tap")
e.process()
if(e._responder&&e.defaultPrevented){return t.preventDefault()}}return r.Events.delegate(t)})
r.Events.listen("mousedown",function(t){if(t.timeStamp-r.Touch.LastTimestamp>r.Touch.TapTimeout){if(r.POINTER){return r.POINTER.update(t).process()}}})
r.Events.listen("mouseup",function(t){if(t.timeStamp-r.Touch.LastTimestamp>r.Touch.TapTimeout){if(r.POINTER){return r.POINTER.update(t).process()}}})
r.Events.register(["mousedown","mouseup"])
r.Events.register(s)
r.Events.setEnabled(true)
return r.Events}
r.EventManager.prototype.register=function(t,e){if(e===undefined)e=true
if(t instanceof Array){for(let i=0,r=n(t),o=r.length;i<o;i++){this.register(r[i],e)}return this}if(this.delegators()[t]){return this}var i=this.delegators()[t]=e instanceof Function?e:this.delegator()
if(this.enabled()){return this.root().addEventListener(t,i,true)}}
r.EventManager.prototype.autoregister=function(t){if(o.indexOf(t)==-1){return this}return this.register(t)}
r.EventManager.prototype.listen=function(t,e,i){if(i===undefined)i=true
this.listeners().push([t,e,i])
if(this.enabled()){this.root().addEventListener(t,e,i)}return this}
r.EventManager.prototype.delegate=function(t){var e=r.Event.wrap(t)
e.process()
if(this._shimFocusEvents){if(t.type=="focus"){r.Event.wrap(t).setType("focusin").process()}else if(t.type=="blur"){r.Event.wrap(t).setType("focusout").process()}}return this}
r.EventManager.prototype.create=function(t,e,i){if(!i||i.constructor!==Object)i={}
var n=i.data!==undefined?i.data:null
var o=i.source!==undefined?i.source:null
var s=r.Event.wrap({type:t,target:e})
if(n!=undefined){s.setData(n),n}if(o){s.setSource(o),o}return s}
r.EventManager.prototype.trigger=function(){return this.create.apply(this,arguments).process()}
r.EventManager.prototype.onenable=function(){for(let t=this.delegators(),e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.root().addEventListener(o,e,true)}for(let t=0,e=n(this.listeners()),i=e.length,r;t<i;t++){r=e[t]
this.root().addEventListener(r[0],r[1],r[2])}if(true){window.addEventListener("hashchange",r.commit)
window.addEventListener("popstate",r.commit)}return this}
r.EventManager.prototype.ondisable=function(){for(let t=this.delegators(),e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.root().removeEventListener(o,e,true)}for(let t=0,e=n(this.listeners()),i=e.length,r;t<i;t++){r=e[t]
this.root().removeEventListener(r[0],r[1],r[2])}if(true){window.removeEventListener("hashchange",r.commit)
window.removeEventListener("popstate",r.commit)}return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
var o={esc:27,tab:9,enter:13,space:32,up:38,down:40}
var s=r.Tag.prototype
s.stopModifier=function(t){return t.stop()||true}
s.preventModifier=function(t){return t.prevent()||true}
s.silenceModifier=function(t){return t.silence()||true}
s.bubbleModifier=function(t){return t.bubble(true)||true}
s.ctrlModifier=function(t){return t.event().ctrlKey==true}
s.altModifier=function(t){return t.event().altKey==true}
s.shiftModifier=function(t){return t.event().shiftKey==true}
s.metaModifier=function(t){return t.event().metaKey==true}
s.keyModifier=function(t,e){return e.keyCode()?e.keyCode()==t:true}
s.delModifier=function(t){return t.keyCode()?t.keyCode()==8||t.keyCode()==46:true}
s.selfModifier=function(t){return t.event().target==this._dom}
s.leftModifier=function(t){return t.button()!=undefined?t.button()===0:s.keyModifier(37,t)}
s.rightModifier=function(t){return t.button()!=undefined?t.button()===2:s.keyModifier(39,t)}
s.middleModifier=function(t){return t.button()!=undefined?t.button()===1:true}
s.getHandler=function(t,e){if(this[t]){return this}if(this._owner_&&this._owner_.getHandler){return this._owner_.getHandler(t,e)}}
r.Event=function t(e){this.setEvent(e)
this._bubble=true}
r.Event.prototype.event=function(t){return this._event}
r.Event.prototype.setEvent=function(t){this._event=t
return this}
r.Event.prototype.prefix=function(t){return this._prefix}
r.Event.prototype.setPrefix=function(t){this._prefix=t
return this}
r.Event.prototype.source=function(t){return this._source}
r.Event.prototype.setSource=function(t){this._source=t
return this}
r.Event.prototype.data=function(t){return this._data}
r.Event.prototype.setData=function(t){this._data=t
return this}
r.Event.prototype.responder=function(t){return this._responder}
r.Event.prototype.setResponder=function(t){this._responder=t
return this}
r.Event.wrap=function(t){return new this(t)}
r.Event.prototype.setType=function(t){this._type=t
this
return this}
r.Event.prototype.type=function(){return this._type||this.event().type}
r.Event.prototype.native=function(){return this._event}
r.Event.prototype.name=function(){return this._name||(this._name=this.type().toLowerCase().replace(/\:/g,""))}
r.Event.prototype.bubble=function(t){if(t!=undefined){this.setBubble(t)
return this}return this._bubble}
r.Event.prototype.setBubble=function(t){this._bubble=t
return this}
r.Event.prototype.stop=function(){this.setBubble(false)
return this}
r.Event.prototype.stopPropagation=function(){return this.stop()}
r.Event.prototype.halt=function(){return this.stop()}
r.Event.prototype.prevent=function(){if(this.event().preventDefault){this.event().preventDefault()}else{this.event().defaultPrevented=true}this.defaultPrevented=true
return this}
r.Event.prototype.preventDefault=function(){console.warn("Event#preventDefault is deprecated - use Event#prevent")
return this.prevent()}
r.Event.prototype.isPrevented=function(){return this.event()&&this.event().defaultPrevented}
r.Event.prototype.cancel=function(){console.warn("Event#cancel is deprecated - use Event#prevent")
return this.prevent()}
r.Event.prototype.silence=function(){this._silenced=true
return this}
r.Event.prototype.isSilenced=function(){return!!this._silenced}
r.Event.prototype.target=function(){return r.getTagForDom(this.event()._target||this.event().target)}
r.Event.prototype.responder=function(){return this._responder}
r.Event.prototype.redirect=function(t){this._redirect=t
return this}
r.Event.prototype.processHandlers=function(t,e){let i=1
let s=e.length
let a=this._bubble
let u=e.state||(e.state={})
let c
if(a){this._bubble=1}while(i<s){let s=false
let a=e[i++]
let c=null
let p=t
let l=false
if(a instanceof Array){c=a.slice(1)
l=true
a=a[0]}if(typeof a=="string"){if(o[a]){c=[o[a]]
a="key"}let e=a+"Modifier"
if(t[e]){s=true
c=(c||[]).concat([this,u])
a=t[e]}}if(typeof a=="string"){let e=t
let i=null
let n=u.context
if(n){if(n.getHandler instanceof Function){n=n.getHandler(a,this)}if(n[a]instanceof Function){a=i=n[a]
p=n}}if(!i){console.warn("event "+this.type()+": could not find '"+a+"' in context",n)}}if(a instanceof Function){if(l){for(let e=0,i=n(c),r=i.length,o;e<r;e++){o=i[e]
if(typeof o=="string"&&o[0]=="~"&&o[1]=="$"){let i=o.slice(2)
if(i=="event"){c[e]=this}else if(this[i]instanceof Function){c[e]=this[i]()}else if(t[i]instanceof Function){c[e]=t[i]()}else{console.warn("Missing special handler $"+i)}}}}let e=a.apply(p,c||[this])
if(!s){this._responder||(this._responder=t)}if(e==false){break}if(e&&!this._silenced&&e.then instanceof Function){e.then(r.commit)}}}if(this._bubble===1){this._bubble=a}return null}
r.Event.prototype.process=function(){var t=this.name()
var e="on"+(this._prefix||"")+t
var i=null
var r=this.event()._target||this.event().target
var o=r._responder||r
var s
var a
while(o){this._redirect=null
let r=o._dom?o:o._tag
if(r){if(a=r._on_){for(let e=0,i=n(a),o=i.length,s;e<o;e++){s=i[e]
if(!s){continue}let n=s[0]
if(t==s[0]&&this.bubble()){this.processHandlers(r,s)}}if(!this.bubble()){break}}if(this.bubble()&&r[e]instanceof Function){this._responder||(this._responder=r)
this._silenced=false
s=i?r[e].apply(r,i):r[e](this,this.data())}if(r.onevent){r.onevent(this)}}if(!(this.bubble()&&(o=this._redirect||(r?r.parent():o.parentNode)))){break}}this.processed()
if(s&&s.then instanceof Function){s.then(this.processed.bind(this))}return this}
r.Event.prototype.processed=function(){if(!this._silenced&&this._responder){r.emit(r,"event",[this])
r.commit(this.event())}return this}
r.Event.prototype.x=function(){return this.native().x}
r.Event.prototype.y=function(){return this.native().y}
r.Event.prototype.button=function(){return this.native().button}
r.Event.prototype.keyCode=function(){return this.native().keyCode}
r.Event.prototype.ctrl=function(){return this.native().ctrlKey}
r.Event.prototype.alt=function(){return this.native().altKey}
r.Event.prototype.shift=function(){return this.native().shiftKey}
r.Event.prototype.meta=function(){return this.native().metaKey}
r.Event.prototype.key=function(){return this.native().key}
r.Event.prototype.which=function(){return this.event().which}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
r.defineTag("fragment","element",function(t){t.createNode=function(){return r.document().createDocumentFragment()}})
r.extendTag("html",function(t){t.prototype.parent=function(){return null}})
r.extendTag("canvas",function(t){t.prototype.context=function(t){if(t===undefined)t="2d"
return this.dom().getContext(t)}})
function o(t,e,i){this._node=t
this._path=e
this._args=i
if(this._args){this._setter=r.toSetter(this._path)}}o.bind=function(t,e,i,n){let r=t._data||(t._data=new this(t,i,n))
r.bind(e,i,n)
return t}
o.prototype.bind=function(t,e,i){if(t!=this._data){this._data=t}return this}
o.prototype.getFormValue=function(){return this._setter?this._data[this._path]():this._data[this._path]}
o.prototype.setFormValue=function(t){return this._setter?this._data[this._setter](t):this._data[this._path]=t}
var s=function(t){return t&&t.splice&&t.sort}
var a=function(t,e){let i=t.length,n=0
if(i!=e.length){return false}while(n++<i){if(t[n]!=e[n]){return false}}return true}
r.extendTag("input",function(t){t.prototype.lazy=function(t){return this._lazy}
t.prototype.setLazy=function(t){this._lazy=t
return this}
t.prototype.number=function(t){return this._number}
t.prototype.setNumber=function(t){this._number=t
return this}
t.prototype.bindData=function(t,e,i){o.bind(this,t,e,i)
return this}
t.prototype.checked=function(){return this._dom.checked}
t.prototype.setChecked=function(t){if(!!t!=this._dom.checked){this._dom.checked=!!t}return this}
t.prototype.setValue=function(t,e){if(this._localValue==undefined||e==undefined){this.dom().value=this._value=t
this._localValue=undefined}return this}
t.prototype.setType=function(t){this.dom().type=this._type=t
return this}
t.prototype.value=function(){let t=this._dom.value
return this._number&&t?parseFloat(t):t}
t.prototype.oninput=function(t){let e=this._dom.value
this._localValue=e
if(this._data&&!this.lazy()&&this.type()!="radio"&&this.type()!="checkbox"){this._data.setFormValue(this.value(),this)}return}
t.prototype.onchange=function(t){this._modelValue=this._localValue=undefined
if(!this.data()){return}if(this.type()=="radio"||this.type()=="checkbox"){let t=this.checked()
let e=this._data.getFormValue(this)
let i=this._value!=undefined?this._value:this.value()
if(this.type()=="radio"){return this._data.setFormValue(i,this)}else if(this.dom().value=="on"||this.dom().value==undefined){return this._data.setFormValue(!!t,this)}else if(s(e)){let n=e.indexOf(i)
if(t&&n==-1){return e.push(i)}else if(!t&&n>=0){return e.splice(n,1)}}else{return this._data.setFormValue(i,this)}}else{return this._data.setFormValue(this.value())}}
t.prototype.onblur=function(t){return this._localValue=undefined}
t.prototype.end=function(){if(this._localValue!==undefined||!this._data){return this}let t=this._data.getFormValue(this)
if(t===this._modelValue){return this}if(!s(t)){this._modelValue=t}if(this.type()=="radio"||this.type()=="checkbox"){let e=this._value
let i=s(t)?t.indexOf(e)>=0:this.dom().value=="on"||this.dom().value==undefined?!!t:t==this._value
this.setChecked(i)}else{this._dom.value=t}return this}})
r.extendTag("textarea",function(t){t.prototype.lazy=function(t){return this._lazy}
t.prototype.setLazy=function(t){this._lazy=t
return this}
t.prototype.bindData=function(t,e,i){o.bind(this,t,e,i)
return this}
t.prototype.setValue=function(t,e){if(this._localValue==undefined||e==undefined){this.dom().value=t
this._localValue=undefined}return this}
t.prototype.oninput=function(t){let e=this._dom.value
this._localValue=e
if(this._data&&!this.lazy()){return this._data.setFormValue(this.value(),this)}}
t.prototype.onchange=function(t){this._localValue=undefined
if(this._data){return this._data.setFormValue(this.value(),this)}}
t.prototype.onblur=function(t){return this._localValue=undefined}
t.prototype.render=function(){if(this._localValue!=undefined||!this._data){return}if(this._data){let t=this._data.getFormValue(this)
this._dom.value=t!=undefined?t:""}return this}})
r.extendTag("option",function(t){t.prototype.setValue=function(t){if(t!=this._value){this.dom().value=this._value=t}return this}
t.prototype.value=function(){return this._value||this.dom().value}})
r.extendTag("select",function(t){t.prototype.bindData=function(t,e,i){o.bind(this,t,e,i)
return this}
t.prototype.setValue=function(t,e){let i=this._value
this._value=t
if(!e){this.syncValue(t)}return this}
t.prototype.syncValue=function(t){let e=this._syncValue
if(this.multiple()&&t instanceof Array){if(e instanceof Array&&a(e,t)){return this}t=t.slice()}this._syncValue=t
if(typeof t=="object"){let e=this.multiple()&&t instanceof Array
for(let i=0,r=n(this.dom().options),o=r.length,s;i<o;i++){s=r[i]
let n=s._tag?s._tag.value():s.value
if(e){s.selected=t.indexOf(n)>=0}else if(t==n){this.dom().selectedIndex=i
break}}}else{this.dom().value=t}return this}
t.prototype.value=function(){if(this.multiple()){let t=[]
for(let e=0,i=n(this.dom().selectedOptions),r=i.length,o;e<r;e++){o=i[e]
t.push(o._tag?o._tag.value():o.value)}return t}else{let t=this.dom().selectedOptions[0]
return t?t._tag?t._tag.value():t.value:null}}
t.prototype.onchange=function(t){if(this._data){return this._data.setFormValue(this.value(),this)}}
t.prototype.end=function(){if(this._data){this.setValue(this._data.getFormValue(this),1)}if(this._value!=this._syncValue){this.syncValue(this._value)}return this}})},function(t,e,i){var n=i(8)
i(242)
i(238)
n.TagManager=new n.TagManagerClass
i(244)
i(240)
i(94)
i(245)
i(239)
if(true){i(243)}if(false){}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
r.TagManagerClass=function t(){this._inserts=0
this._removes=0
this._mounted=[]
this._mountables=0
this._unmountables=0
this._unmounting=0
this}
r.TagManagerClass.prototype.mounted=function(){return this._mounted}
r.TagManagerClass.prototype.insert=function(t,e){this._inserts++
if(t&&t.mount){this.regMountable(t)}return}
r.TagManagerClass.prototype.remove=function(t,e){return this._removes++}
r.TagManagerClass.prototype.changes=function(){return this._inserts+this._removes}
r.TagManagerClass.prototype.mount=function(t){return}
r.TagManagerClass.prototype.refresh=function(t){if(t===undefined)t=false
if(false){}if(!t&&this.changes()==0){return}if(this._inserts&&this._mountables>this._mounted.length||t){this.tryMount()}if((this._removes||t)&&this._mounted.length){this.tryUnmount()}this._inserts=0
this._removes=0
return this}
r.TagManagerClass.prototype.unmount=function(t){return this}
r.TagManagerClass.prototype.regMountable=function(t){if(!(t.FLAGS&r.TAG_MOUNTABLE)){t.FLAGS|=r.TAG_MOUNTABLE
return this._mountables++}}
r.TagManagerClass.prototype.tryMount=function(){var t=0
var e=document.body
var i=e.querySelectorAll(".__mount")
for(let t=0,e=n(i),r=e.length,o;t<r;t++){o=e[t]
if(o&&o._tag){if(this._mounted.indexOf(o._tag)==-1){this.mountNode(o._tag)}}}return this}
r.TagManagerClass.prototype.mountNode=function(t){if(this._mounted.indexOf(t)==-1){this.regMountable(t)
this._mounted.push(t)
t.FLAGS|=r.TAG_MOUNTED
if(t.mount){t.mount()}}return}
r.TagManagerClass.prototype.tryUnmount=function(){this._unmounting++
var t=[]
var e=document.body
for(let e=0,i=n(this._mounted),r=i.length,o;e<r;e++){o=i[e]
if(!o){continue}if(!document.documentElement.contains(o._dom)){t.push(o)
this._mounted[e]=null}}this._unmounting--
if(t.length){this._mounted=this._mounted.filter(function(e){return e&&t.indexOf(e)==-1})
for(let e=0,i=t.length,n;e<i;e++){n=t[e]
n.FLAGS=n.FLAGS&~r.TAG_MOUNTED
if(n.unmount&&n._dom){n.unmount()}else if(n._scheduler){n.unschedule()}}}return this}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r={}
var o=i(8)
var s=function(t,e,i){if(e instanceof Array){for(let r=0,o=n(e),a=o.length;r<a;r++){s(t,o[r],i)}}else if(e&&e._slot_){t.removeChild(e)}else if(e!=null){let n=i?i.nextSibling:t._dom.firstChild
if(n instanceof Text&&n.textContent==e){t.removeChild(n)}else{throw"cannot remove string"}}return i}
var a=function(t,e){if(e instanceof Array){let i=0
let n=e.taglen
let r=n!=null?e.domlen=n:e.length
while(i<r){a(t,e[i++])}}else if(e&&e._dom){t.appendChild(e)}else if(e!=null&&e!==false){t.appendChild(o.createTextNode(e))}return}
var u=function(t,e,i){if(e instanceof Array){let n=0
let r=e.taglen
let o=r!=null?e.domlen=r:e.length
while(n<o){u(t,e[n++],i)}}else if(e&&e._dom){t.insertBefore(e,i)}else if(e!=null&&e!==false){t.insertBefore(o.createTextNode(e),i)}return i}
r.insertNestedAfter=function(t,e,i){var n=i?i.nextSibling:t._dom.firstChild
if(n){u(t,e,n)
return n.previousSibling}else{a(t,e)
return t._dom.lastChild}}
var c=function(t,e,i,s){var a=e.length
var u=e[a-1]
var c=[]
var p=[]
var l=[]
var h=0
var d=0
var f=false
var m
for(let r=0,o=n(i),s=o.length,a;r<s;r++){a=o[r]
if(a&&a.nodeType==3){m=e.indexOf(a.textContent)
if(m>=0){e[m]=a}f=true}else{m=e.indexOf(a)}c.push(m)
if(m==-1){t.removeChild(a)
p.push(-1)
l.push(-1)
continue}var y=c.length-2
while(y>=0){if(c[y]==-1){y--}else if(m>c[y]){break}else{y=p[y]}}p.push(y)
var g=y==-1?0:l[y]+1
if(g>h){h=g
d=r}l.push(g)}var v=[]
var _=c.length-1
while(_>=0){if(_==d&&c[_]!=-1){v[c[_]]=true
d=p[d]}_-=1}for(let i=0,a=n(e),u=a.length,c;i<u;i++){c=a[i]
if(!v[i]){if(!(c&&c._dom)){c=e[i]=o.createTextNode(c)}var b=e[i-1]
r.insertNestedAfter(t,c,b&&b._slot_||b||s)}s=c._slot_||(s&&s.nextSibling||t._dom.firstChild)}return u&&u._slot_||s}
var p=function(t,e,i,n){var r=e.length
var o=r
var s=e[r-1]
if(r==i.length&&e[0]===i[0]){while(o--){if(e[o]!==i[o]){break}}}if(o==-1){return s&&s._slot_||s||n}else{return c(t,e,i,n)}}
var l=function(t,e,i,n){var r=e.length
var o=i.length
var s=e.cache.i$
var a=0,u=r-o
while(a<o&&a<r&&e[a]===i[a]){a++}if(s>1e3&&s-r>500){e.cache.$prune(e)}if(u>0&&a==o){while(a<r){t.appendChild(e[a++])}return}else if(u>0){let n=r
while(n>a&&e[n-1]===i[n-1-u]){n--}if(u==n-a){let r=i[a]._slot_
while(a<n){t.insertBefore(e[a++],r)}return}}else if(u<0&&a==r){while(a<o){t.removeChild(i[a++])}return}else if(u<0){let n=o
while(n>a&&e[n-1+u]===i[n-1]){n--}if(u==a-n){while(a<n){t.removeChild(i[a++])}return}}else if(a==r){return}return c(t,e,i,n)}
var h=function(t,e,i,n){var r=e.taglen
var o=e.domlen||0
var s=r?e[r-1]:null
if(o>r){while(o>r){var a=e[--o]
t.removeChild(a._slot_)}}else if(r>o){let i=o?e[o-1]._slot_:n
let s=i?i.nextSibling:t._dom.firstChild
while(o<r){let i=e[o++]
s?t.insertBefore(i._slot_,s):t.appendChild(i._slot_)}}e.domlen=r
return s?s._slot_:n}
var d=function(t,e,i,o){var a=e==null||e===false
var u=i==null||i===false
if(e===i){if(a){return o}else if(e._slot_){return e._slot_}else if(e instanceof Array&&e.taglen!=null){return h(t,e,i,o)}else{return o?o.nextSibling:t._dom.firstChild}}else if(e instanceof Array){if(i instanceof Array){let r=e.static
if(r||i.static){if(r==i.static){for(let r=0,s=n(e),a=s.length;r<a;r++){o=d(t,s[r],i[r],o)}return o}else{s(t,i,o)}}else{return p(t,e,i,o)}}else if(!u){if(i._slot_){t.removeChild(i)}else{t.removeChild(o?o.nextSibling:t._dom.firstChild)}}return r.insertNestedAfter(t,e,o)}else if(!a&&e._slot_){if(!u){s(t,i,o)}return r.insertNestedAfter(t,e,o)}else if(a){if(!u){s(t,i,o)}return o}else{let n
if(i instanceof Array){s(t,i,o)}else if(i&&i._slot_){t.removeChild(i)}else if(!u){n=o?o.nextSibling:t._dom.firstChild
if(n instanceof Text&&n.textContent!=e){n.textContent=e
return n}}return r.insertNestedAfter(t,e,o)}}
o.extendTag("element",function(t){t.prototype.setChildren=function(t,e){var i=this._tree_
if(t===i&&(!t||t.taglen==undefined)){return this}if(!i&&e!=3){this.removeAllChildren()
a(this,t)}else if(e==1){let e=null
for(let r=0,o=n(t),s=o.length;r<s;r++){e=d(this,o[r],i[r],e)}}else if(e==2){return this}else if(e==3){let e=typeof t
if(e!="object"){return this.setText(t)}if(t&&t._dom){this.removeAllChildren()
this.appendChild(t)}else if(t instanceof Array){if(t._type==5&&i&&i._type==5){l(this,t,i,null)}else if(i instanceof Array){d(this,t,i,null)}else{this.removeAllChildren()
a(this,t)}}else{return this.setText(t)}}else if(e==4){h(this,t,i,null)}else if(e==5){l(this,t,i,null)}else if(t instanceof Array&&i instanceof Array){d(this,t,i,null)}else{this.removeAllChildren()
a(this,t)}this._tree_=t
return this}
t.prototype.content=function(){return this._content||this.children().toArray()}
t.prototype.setText=function(t){if(t!=this._tree_){var e=t===null||t===false?"":t;(this._text_||this._dom).textContent=e
this._text_||(this._text_=this._dom.firstChild)
this._tree_=t}return this}})
var f=o.Tag.prototype
f.setContent=f.setChildren
var m=typeof navigator!="undefined"&&(navigator.vendor||"").indexOf("Apple")==0
if(m){f.setText=function(t){if(t!=this._tree_){this._dom.textContent=t===null||t===false?"":t
this._tree_=t}return this}}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
r.CSSKeyMap={}
r.TAG_BUILT=1
r.TAG_SETUP=2
r.TAG_MOUNTING=4
r.TAG_MOUNTED=8
r.TAG_SCHEDULED=16
r.TAG_AWAKENED=32
r.TAG_MOUNTABLE=64
r.TAG_AUTOCLASS_GLOBALS=true
r.TAG_AUTOCLASS_LOCALS=true
r.TAG_AUTOCLASS_SVG=true
r.document=function(){return window.document}
r.root=function(){return r.getTagForDom(r.document().body)}
r.static=function(t,e,i){t._type=e
t.static=i
return t}
r.mount=function(t,e){e||(e=r.document().body)
e.appendChild(t.dom())
r.TagManager.insert(t,e)
t.scheduler().configure({events:true}).activate(false)
r.TagManager.refresh()
return t}
r.createTextNode=function(t){if(t&&t.nodeType==3){return t}return r.document().createTextNode(t)}
r.Tag=function t(e,i){this.setDom(e)
this.$=a.build(this)
this.$up=this._owner_=i
this._tree_=null
this.FLAGS=0
this.build()
this}
r.Tag.buildNode=function(){var t=r.document().createElement(this._nodeType||"div")
if(this._classes){var e=this._classes.join(" ")
if(e){t.className=e}}return t}
r.Tag.createNode=function(){var t=this._protoDom||(this._protoDom=this.buildNode())
return t.cloneNode(false)}
r.Tag.build=function(t){return new this(this.createNode(),t)}
r.Tag.dom=function(){return this._protoDom||(this._protoDom=this.buildNode())}
r.Tag.end=function(){return this.commit(0)}
r.Tag.inherit=function(t){t._protoDom=null
if(this._nodeType){t._nodeType=this._nodeType
t._classes=this._classes.slice()
if(t._flagName){return t._classes.push(t._flagName)}}else{t._nodeType=t._name
t._flagName=null
return t._classes=[]}}
r.Tag.prototype.optimizeTagStructure=function(){if(false){}var t=this.constructor
let e=Object.keys(this)
if(e.indexOf("mount")>=0){if(t._classes&&t._classes.indexOf("__mount")==-1){t._classes.push("__mount")}if(t._protoDom){t._protoDom.classList.add("__mount")}}for(let t=0,i=n(e),o=i.length,s;t<o;t++){s=i[t]
if(/^on/.test(s)){r.EventManager.bind(s.slice(2))}}return this}
r.attr(r.Tag,"accesskey")
r.attr(r.Tag,"autocapitalize")
r.attr(r.Tag,"contenteditable")
r.attr(r.Tag,"contextmenu")
r.attr(r.Tag,"dir")
r.attr(r.Tag,"draggable")
r.attr(r.Tag,"dropzone")
r.attr(r.Tag,"hidden")
r.attr(r.Tag,"inputmode")
r.attr(r.Tag,"itemid")
r.attr(r.Tag,"itemprop")
r.attr(r.Tag,"itemref")
r.attr(r.Tag,"itemscope")
r.attr(r.Tag,"itemtype")
r.attr(r.Tag,"lang")
r.attr(r.Tag,"name")
r.attr(r.Tag,"role")
r.attr(r.Tag,"slot")
r.attr(r.Tag,"spellcheck")
r.attr(r.Tag,"tabindex")
r.Tag.prototype.title=function(t){return this.getAttribute("title")}
r.Tag.prototype.setTitle=function(t){this.setAttribute("title",t)
return this}
r.attr(r.Tag,"translate")
r.Tag.prototype.dom=function(){return this._dom}
r.Tag.prototype.setDom=function(t){t._tag=this
this._dom=this._slot_=t
return this}
r.Tag.prototype.ref=function(){return this._ref}
r.Tag.prototype.root=function(){return this._owner_?this._owner_.root():this}
r.Tag.prototype.ref_=function(t){this.flag(this._ref=t)
return this}
r.Tag.prototype.setData=function(t){this._data=t
return this}
r.Tag.prototype.data=function(){return this._data}
r.Tag.prototype.bindData=function(t,e,i){return this.setData(i?t[e].apply(t,i):t[e])}
r.Tag.prototype.setHtml=function(t){if(this.html()!=t){this._dom.innerHTML=t}return this}
r.Tag.prototype.html=function(){return this._dom.innerHTML}
r.Tag.prototype.on$=function(t,e,i){let n=this._on_||(this._on_=[])
let o=n[t]
if(t<0){if(o==undefined){t=n[t]=n.length}else{t=o}o=n[t]}n[t]=e
if(o){e.state=o.state}else{e.state={context:i}
if(true){r.EventManager.bind(e[0])}}return this}
r.Tag.prototype.setId=function(t){if(t!=null){this.dom().id=t}return this}
r.Tag.prototype.id=function(){return this.dom().id}
r.Tag.prototype.setAttribute=function(t,e){var i=this.dom().getAttribute(t)
if(i==e){e}else if(e!=null&&e!==false){this.dom().setAttribute(t,e)}else{this.dom().removeAttribute(t)}return this}
r.Tag.prototype.setNestedAttr=function(t,e,i,n){if(this[t+"SetAttribute"]){this[t+"SetAttribute"](e,i,n)}else{this.setAttributeNS(t,e,i)}return this}
r.Tag.prototype.setAttributeNS=function(t,e,i){var n=this.getAttributeNS(t,e)
if(n!=i){if(i!=null&&i!==false){this.dom().setAttributeNS(t,e,i)}else{this.dom().removeAttributeNS(t,e)}}return this}
r.Tag.prototype.removeAttribute=function(t){return this.dom().removeAttribute(t)}
r.Tag.prototype.getAttribute=function(t){return this.dom().getAttribute(t)}
r.Tag.prototype.getAttributeNS=function(t,e){return this.dom().getAttributeNS(t,e)}
r.Tag.prototype.set=function(t,e,i){let n=r.toSetter(t)
if(this[n]instanceof Function){this[n](e,i)}else{this._dom.setAttribute(t,e)}return this}
r.Tag.prototype.get=function(t){return this._dom.getAttribute(t)}
r.Tag.prototype.setContent=function(t,e){this.setChildren(t,e)
return this}
r.Tag.prototype.setChildren=function(t,e){this._tree_=t
return this}
r.Tag.prototype.setTemplate=function(t){if(!this._template){if(this.render==r.Tag.prototype.render){this.render=this.renderTemplate}}this.template=this._template=t
return this}
r.Tag.prototype.template=function(){return null}
r.Tag.prototype.renderTemplate=function(){var t=this.template()
if(t!=this){this.setChildren(t)}return this}
r.Tag.prototype.removeChild=function(t){var e=this.dom()
var i=t._slot_||t
if(i&&i.parentNode==e){r.TagManager.remove(i._tag||i,this)
e.removeChild(i)}return this}
r.Tag.prototype.removeAllChildren=function(){if(this._dom.firstChild){var t
while(t=this._dom.firstChild){true&&r.TagManager.remove(t._tag||t,this)
this._dom.removeChild(t)}}this._tree_=this._text_=null
return this}
r.Tag.prototype.appendChild=function(t){if(typeof t=="string"||t instanceof String){this.dom().appendChild(r.document().createTextNode(t))}else if(t){this.dom().appendChild(t._slot_||t)
r.TagManager.insert(t._tag||t,this)}return this}
r.Tag.prototype.insertBefore=function(t,e){if(typeof t=="string"||t instanceof String){t=r.document().createTextNode(t)}if(t&&e){this.dom().insertBefore(t._slot_||t,e._slot_||e)
r.TagManager.insert(t._tag||t,this)}return this}
r.Tag.prototype.detachFromParent=function(){if(this._slot_==this._dom){this._slot_=this._dom._placeholder_||(this._dom._placeholder_=r.document().createComment("node"))
this._slot_._tag||(this._slot_._tag=this)
if(this._dom.parentNode){r.TagManager.remove(this,this._dom.parentNode)
this._dom.parentNode.replaceChild(this._slot_,this._dom)}}return this}
r.Tag.prototype.attachToParent=function(){if(this._slot_!=this._dom){let t=this._slot_
this._slot_=this._dom
if(t&&t.parentNode){r.TagManager.insert(this)
t.parentNode.replaceChild(this._dom,t)}}return this}
r.Tag.prototype.orphanize=function(){var t
if(t=this.parent()){t.removeChild(this)}return this}
r.Tag.prototype.text=function(t){return this._dom.textContent}
r.Tag.prototype.setText=function(t){this._tree_=t
this._dom.textContent=t==null||this.text()===false?"":t
this
return this}
r.Tag.prototype.dataset=function(t,e){if(t instanceof Object){for(let e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.dataset(o,e)}return this}if(arguments.length==2){this.setAttribute("data-"+t,e)
return this}if(t){return this.getAttribute("data-"+t)}var i=this.dom().dataset
if(!i){i={}
for(let t=0,e=n(this.dom().attributes),o=e.length,s;t<o;t++){s=e[t]
if(s.name.substr(0,5)=="data-"){i[r.toCamelCase(s.name.slice(5))]=s.value}}}return i}
r.Tag.prototype.render=function(){return this}
r.Tag.prototype.build=function(){return this}
r.Tag.prototype.setup=function(){return this}
r.Tag.prototype.commit=function(){if(this.beforeRender()!==false)this.render()
return this}
r.Tag.prototype.beforeRender=function(){return this}
r.Tag.prototype.tick=function(){if(this.beforeRender()!==false)this.render()
return this}
r.Tag.prototype.end=function(){this.setup()
this.commit(0)
this.end=r.Tag.end
return this}
r.Tag.prototype.$open=function(t){if(t!=this._context_){this._tree_=null
this._context_=t}return this}
r.Tag.prototype.synced=function(){return this}
r.Tag.prototype.awaken=function(){return this}
r.Tag.prototype.flags=function(){return this._dom.classList}
r.Tag.prototype.flag=function(t,e){if(arguments.length==2){if(this._dom.classList.contains(t)!=!!e){this._dom.classList.toggle(t)}}else{if(!this._dom.classList.contains(t)){this._dom.classList.add(t)}}return this}
r.Tag.prototype.unflag=function(t){this._dom.classList.remove(t)
return this}
r.Tag.prototype.toggleFlag=function(t){this._dom.classList.toggle(t)
return this}
r.Tag.prototype.hasFlag=function(t){return this._dom.classList.contains(t)}
r.Tag.prototype.flagIf=function(t,e){var i=this._flags_||(this._flags_={})
let n=i[t]
if(e&&!n){this._dom.classList.add(t)
i[t]=true}else if(n&&!e){this._dom.classList.remove(t)
i[t]=false}return this}
r.Tag.prototype.setFlag=function(t,e){let i=this._namedFlags_||(this._namedFlags_={})
let n=i[t]
if(n!=e){if(n){this.unflag(n)}if(e){this.flag(e)}i[t]=e}return this}
r.Tag.prototype.scheduler=function(){return this._scheduler==null?this._scheduler=new r.Scheduler(this):this._scheduler}
r.Tag.prototype.schedule=function(t){if(t===undefined)t={events:true}
this.scheduler().configure(t).activate()
return this}
r.Tag.prototype.unschedule=function(){if(this._scheduler){this.scheduler().deactivate()}return this}
r.Tag.prototype.parent=function(){return r.getTagForDom(this.dom().parentNode)}
r.Tag.prototype.children=function(t){let e=[]
for(let t=0,i=n(this._dom.children),o=i.length,s;t<o;t++){s=i[t]
e.push(s._tag||r.getTagForDom(s))}return e}
r.Tag.prototype.querySelector=function(t){return r.getTagForDom(this._dom.querySelector(t))}
r.Tag.prototype.querySelectorAll=function(t){var e=[]
for(let i=0,o=n(this._dom.querySelectorAll(t)),s=o.length;i<s;i++){e.push(r.getTagForDom(o[i]))}return e}
r.Tag.prototype.matches=function(t){var e
if(t instanceof Function){return t(this)}if(t.query instanceof Function){t=t.query()}if(e=this._dom.matches||this._dom.matchesSelector||this._dom.webkitMatchesSelector||this._dom.msMatchesSelector||this._dom.mozMatchesSelector){return e.call(this._dom,t)}}
r.Tag.prototype.closest=function(t){return r.getTagForDom(this._dom.closest(t))}
r.Tag.prototype.contains=function(t){return this.dom().contains(t._dom||t)}
r.Tag.prototype.log=function(){var t=arguments,e=t.length
var i=new Array(e>0?e:0)
while(e>0)i[e-1]=t[--e]
i.unshift(console)
Function.prototype.call.apply(console.log,i)
return this}
r.Tag.prototype.css=function(t,e,i){if(t instanceof Object){for(let e,i=0,n=Object.keys(t),r=n.length,o;i<r;i++){o=n[i]
e=t[o]
this.css(o,e)}return this}var n=r.CSSKeyMap[t]||t
if(e==null){this.dom().style.removeProperty(n)}else if(e==undefined&&arguments.length==1){return this.dom().style[n]}else if(n.match(/^--/)){this.dom().style.setProperty(n,e)}else{if((typeof e=="number"||e instanceof Number)&&(n.match(/width|height|left|right|top|bottom/)||i&&i.px)){this.dom().style[n]=e+"px"}else{this.dom().style[n]=e}}return this}
r.Tag.prototype.setStyle=function(t){return this.setAttribute("style",t)}
r.Tag.prototype.style=function(){return this.getAttribute("style")}
r.Tag.prototype.trigger=function(t,e){if(e===undefined)e={}
return true&&r.Events.trigger(t,this,{data:e})}
r.Tag.prototype.focus=function(){this.dom().focus()
return this}
r.Tag.prototype.blur=function(){this.dom().blur()
return this}
r.Tag.prototype.toString=function(){return this.dom().outerHTML}
r.Tag.prototype.initialize=r.Tag
r.SVGTag=function t(){return r.Tag.apply(this,arguments)}
r.subclass(r.SVGTag,r.Tag)
r.SVGTag.namespaceURI=function(){return"http://www.w3.org/2000/svg"}
r.SVGTag.buildNode=function(){var t=r.document().createElementNS(this.namespaceURI(),this._nodeType)
if(this._classes){var e=this._classes.join(" ")
if(e){t.className.baseVal=e}}return t}
r.SVGTag.inherit=function(t){t._protoDom=null
if(this==r.SVGTag){t._nodeType=t._name
return t._classes=[]}else{t._nodeType=this._nodeType
var e=(this._classes||[]).slice(0)
if(r.TAG_AUTOCLASS_SVG){e.push("_"+t._name.replace(/_/g,"-"))}return t._classes=e}}
r.HTML_TAGS="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr".split(" ")
r.HTML_TAGS_UNSAFE="article aside header section".split(" ")
r.HTML_ATTRS={a:"href target hreflang media download rel type ping referrerpolicy",audio:"autoplay controls crossorigin loop muted preload src",area:"alt coords download href hreflang ping referrerpolicy rel shape target",base:"href target",video:"autoplay buffered controls crossorigin height loop muted preload poster src width playsinline",fieldset:"disabled form name",form:"method action enctype autocomplete target",button:"autofocus type form formaction formenctype formmethod formnovalidate formtarget value name",embed:"height src type width",input:"accept disabled form list max maxlength min minlength pattern required size step type",label:"accesskey for form",img:"alt src srcset crossorigin decoding height importance intrinsicsize ismap referrerpolicy sizes width usemap",link:"rel type href media",iframe:"allow allowfullscreen allowpaymentrequest height importance name referrerpolicy sandbox src srcdoc width frameborder align longdesc scrolling",meta:"property content charset desc http-equiv color-scheme name scheme",map:"name",optgroup:"label",option:"label",output:"for form",object:"type data width height",param:"name type value valuetype",progress:"max",script:"src type async defer crossorigin integrity nonce language nomodule",select:"size form multiple",source:"sizes src srcset type media",textarea:"rows cols minlength maxlength form wrap",track:"default kind label src srclang",td:"colspan rowspan headers",th:"colspan rowspan"}
r.HTML_PROPS={input:"autofocus autocomplete autocapitalize autocorrect value placeholder required disabled multiple checked readOnly spellcheck",textarea:"autofocus autocomplete autocapitalize autocorrect value placeholder required disabled multiple checked readOnly spellcheck",form:"novalidate",fieldset:"disabled",button:"disabled",select:"autofocus disabled required readOnly multiple",option:"disabled selected value",optgroup:"disabled",progress:"value",fieldset:"disabled",canvas:"width height"}
var o=function(t,e){for(let i,n=0,r=Object.keys(e),o=r.length,s;n<o;n++){s=r[n]
i=e[s]
t[s]==null?t[s]=i:t[s]}t.prototype=Object.create(e.prototype)
t.__super__=t.prototype.__super__=e.prototype
t.prototype.constructor=t
if(e.inherit){e.inherit(t)}return t}
function s(){return function(t,e){this.initialize(t,e)
return this}}r.Tags=function t(){this}
r.Tags.prototype.__clone=function(t){var e=Object.create(this)
e._parent=this
return e}
r.Tags.prototype.ns=function(t){return this["_"+t.toUpperCase()]||this.defineNamespace(t)}
r.Tags.prototype.defineNamespace=function(t){var e=Object.create(this)
e._parent=this
e._ns=t
this["_"+t.toUpperCase()]=e
return e}
r.Tags.prototype.baseType=function(t,e){return r.indexOf(t,r.HTML_TAGS)>=0?"element":"div"}
r.Tags.prototype.defineTag=function(t,e,i){if(i==undefined&&typeof e=="function")i=e,e=""
if(e==undefined)e=""
if(i&&i._nodeType){e=i
i=null}if(this[t]){console.log("tag already exists?",t)}var n
var a=t
let u=a.indexOf(":")
if(u>=0){n=t.substr(0,u)
a=t.substr(u+1)
if(n=="svg"&&!e){e="svg:element"}}e||(e=this.baseType(t))
let c=typeof e=="string"||e instanceof String?this.findTagType(e):e
let p=s()
p._name=a
p._flagName=null
if(a[0]=="#"){r.SINGLETONS[a.slice(1)]=p
this[a]=p}else if(a[0]==a[0].toUpperCase()){if(r.TAG_AUTOCLASS_LOCALS){p._flagName=a}}else{if(r.TAG_AUTOCLASS_GLOBALS){p._flagName="_"+t.replace(/[_\:]/g,"-")}this[t]=p}o(p,c)
if(i){i.call(p,p,p.TAGS||this)
if(p.defined){p.defined()}this.optimizeTag(p)}return p}
r.Tags.prototype.defineSingleton=function(t,e,i){return this.defineTag(t,e,i)}
r.Tags.prototype.extendTag=function(t,e,i){if(i==undefined&&typeof e=="function")i=e,e=""
if(e==undefined)e=""
var n=typeof t=="string"||t instanceof String?this.findTagType(t):t
if(i){i&&i.call(n,n,n.prototype)}if(n.extended){n.extended()}this.optimizeTag(n)
return n}
r.Tags.prototype.optimizeTag=function(t){var e
return(e=t.prototype)&&e.optimizeTagStructure&&e.optimizeTagStructure()}
r.Tags.prototype.findTagType=function(t){var e,i
let o=this[t]
if(!o){if(t.substr(0,4)=="svg:"){o=this.defineTag(t,"svg:element")}else if(r.HTML_TAGS.indexOf(t)>=0){o=this.defineTag(t,"element")
if(e=r.HTML_ATTRS[t]){for(let t=0,i=n(e.split(" ")),s=i.length;t<s;t++){r.attr(o,i[t])}}if(i=r.HTML_PROPS[t]){for(let t=0,e=n(i.split(" ")),s=e.length;t<s;t++){r.attr(o,e[t],{dom:true})}}}}return o}
r.createElement=function(t,e,i,n){var o=t
var s
if(t instanceof Function){o=t}else{if(null){}o=r.TAGS.findTagType(t)}if(e instanceof u){s=e.par$}else if(n instanceof r.Tag){s=n}else{s=e&&n!=undefined?e[n]:e&&e._tag||e}var a=o.build(s)
if(e instanceof u){e.i$++
a.$key=i}if(e&&i!=undefined){e[i]=a}return a}
r.createTagCache=function(t){var e=[]
e._tag=t
return e}
r.createTagMap=function(t,e,i){var n=i!=undefined?i:t._tag
var r=new u(t,e,n)
t[e]=r
return r}
r.createTagList=function(t,e,i){var n=[]
n._type=4
n._tag=i!=undefined?i:t._tag
t[e]=n
return n}
r.createTagLoopResult=function(t,e,i){var n=[]
n._type=5
n.cache={i$:0}
return n}
function a(t){this._tag=t
this}a.build=function(t){var e=[]
e._tag=t
return e}
function u(t,e,i){this.cache$=t
this.key$=e
this.par$=i
this.i$=0}u.prototype.$iter=function(){var t=[]
t._type=5
t.cache=this
return t}
u.prototype.$prune=function(t){let e=this.cache$
let i=this.key$
let r=new u(e,i,this.par$)
for(let e=0,i=n(t),o=i.length,s;e<o;e++){s=i[e]
r[s.key$]=s}r.i$=t.length
return e[i]=r}
r.TagMap=u
r.TagCache=a
r.SINGLETONS={}
r.TAGS=new r.Tags
r.TAGS.element=r.TAGS.htmlelement=r.Tag
r.TAGS["svg:element"]=r.SVGTag
r.attr(r.Tag,"is")
r.defineTag=function(t,e,i){if(i==undefined&&typeof e=="function")i=e,e=""
if(e==undefined)e=""
return r.TAGS.defineTag(t,e,i)}
r.defineSingletonTag=function(t,e,i){if(i==undefined&&typeof e=="function")i=e,e="div"
if(e==undefined)e="div"
return r.TAGS.defineTag(this.name(),e,i)}
r.extendTag=function(t,e){return r.TAGS.extendTag(t,e)}
r.getTagSingleton=function(t){var e
var i,n
if(e=r.SINGLETONS[t]){if(e&&e.Instance){return e.Instance}if(i=r.document().getElementById(t)){n=e.Instance=new e(i)
n.awaken(i)
return n}i=e.createNode()
i.id=t
n=e.Instance=new e(i)
n.end().awaken(i)
return n}else if(i=r.document().getElementById(t)){return r.getTagForDom(i)}}
var c=typeof SVGElement!=="undefined"
r.getTagForDom=function(t){if(!t){return null}if(t._dom){return t}if(t._tag){return t._tag}if(!t.nodeName){return null}var e=t.nodeName.toLowerCase()
var i=e
var n=r.TAGS
if(t.id&&r.SINGLETONS[t.id]){return r.getTagSingleton(t.id)}if(c&&t instanceof SVGElement){i=n.findTagType("svg:"+e)}else if(r.HTML_TAGS.indexOf(e)>=0){i=n.findTagType(e)}else{i=r.Tag}return new i(t,null).awaken(t)}
if(false){var p=window.getComputedStyle(document.documentElement,"")
for(let t=0,e=n(p),i=e.length,o;t<i;t++){o=e[t]
var l=o.replace(/^-(webkit|ms|moz|o|blink)-/,"")
var h=l.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})
if(o!=l){if(p.hasOwnProperty(l)){continue}}r.CSSKeyMap[l]=r.CSSKeyMap[h]=o}if(!document.documentElement.classList){r.extendTag("element",function(t){t.prototype.hasFlag=function(t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(this._dom.className)}
t.prototype.addFlag=function(t){if(this.hasFlag(t)){return this}this._dom.className+=(this._dom.className?" ":"")+t
return this}
t.prototype.unflag=function(t){if(!this.hasFlag(t)){return this}var e=new RegExp("(^|\\s)*"+t+"(\\s|$)*","g")
this._dom.className=this._dom.className.replace(e,"")
return this}
t.prototype.toggleFlag=function(t){return this.hasFlag(t)?this.unflag(t):this.flag(t)}
t.prototype.flag=function(t,e){if(arguments.length==2&&!!e===false){return this.unflag(t)}return this.addFlag(t)}})}}r.Tag},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
r.Touch=function t(e,i){this.setEvent(e)
this.setData({})
this.setActive(true)
this._button=e&&e.button||0
this._suppress=false
this._captured=false
this.setBubble(false)
i=i
this.setUpdates(0)
return this}
r.Touch.LastTimestamp=0
r.Touch.TapTimeout=50
var o=[]
var s=0
var a={}
r.Touch.count=function(){return s}
r.Touch.lookup=function(t){return t&&(t.__touch__||a[t.identifier])}
r.Touch.release=function(t,e){var i,n
i=a[t.identifier],delete a[t.identifier],i
n=t.__touch__,delete t.__touch__,n
return}
r.Touch.ontouchstart=function(t){for(let i=0,r=n(t.changedTouches),u=r.length,c;i<u;i++){c=r[i]
if(this.lookup(c)){continue}var e=a[c.identifier]=new this(t)
c.__touch__=e
o.push(e)
s++
e.touchstart(t,c)}return this}
r.Touch.ontouchmove=function(t){var e
for(let i=0,r=n(t.changedTouches),o=r.length,s;i<o;i++){s=r[i]
if(e=this.lookup(s)){e.touchmove(t,s)}}return this}
r.Touch.ontouchend=function(t){var e
for(let i=0,r=n(t.changedTouches),o=r.length,a;i<o;i++){a=r[i]
if(e=this.lookup(a)){e.touchend(t,a)
this.release(a,e)
s--}}return this}
r.Touch.ontouchcancel=function(t){var e
for(let i=0,r=n(t.changedTouches),o=r.length,a;i<o;i++){a=r[i]
if(e=this.lookup(a)){e.touchcancel(t,a)
this.release(a,e)
s--}}return this}
r.Touch.onmousedown=function(t){return this}
r.Touch.onmousemove=function(t){return this}
r.Touch.onmouseup=function(t){return this}
r.Touch.prototype.phase=function(t){return this._phase}
r.Touch.prototype.setPhase=function(t){this._phase=t
return this}
r.Touch.prototype.active=function(t){return this._active}
r.Touch.prototype.setActive=function(t){this._active=t
return this}
r.Touch.prototype.event=function(t){return this._event}
r.Touch.prototype.setEvent=function(t){this._event=t
return this}
r.Touch.prototype.pointer=function(t){return this._pointer}
r.Touch.prototype.setPointer=function(t){this._pointer=t
return this}
r.Touch.prototype.target=function(t){return this._target}
r.Touch.prototype.setTarget=function(t){this._target=t
return this}
r.Touch.prototype.handler=function(t){return this._handler}
r.Touch.prototype.setHandler=function(t){this._handler=t
return this}
r.Touch.prototype.updates=function(t){return this._updates}
r.Touch.prototype.setUpdates=function(t){this._updates=t
return this}
r.Touch.prototype.suppress=function(t){return this._suppress}
r.Touch.prototype.setSuppress=function(t){this._suppress=t
return this}
r.Touch.prototype.data=function(t){return this._data}
r.Touch.prototype.setData=function(t){this._data=t
return this}
r.Touch.prototype.__bubble={chainable:true,name:"bubble"}
r.Touch.prototype.bubble=function(t){return t!==undefined?(this.setBubble(t),this):this._bubble}
r.Touch.prototype.setBubble=function(t){this._bubble=t
return this}
r.Touch.prototype.timestamp=function(t){return this._timestamp}
r.Touch.prototype.setTimestamp=function(t){this._timestamp=t
return this}
r.Touch.prototype.gestures=function(t){return this._gestures}
r.Touch.prototype.setGestures=function(t){this._gestures=t
return this}
r.Touch.prototype.capture=function(){this._captured=true
this._event&&this._event.stopPropagation()
if(!this._selblocker){this._selblocker=function(t){return t.preventDefault()}
r.document().addEventListener("selectstart",this._selblocker,true)}return this}
r.Touch.prototype.isCaptured=function(){return!!this._captured}
r.Touch.prototype.extend=function(t){this._gestures||(this._gestures=[])
this._gestures.push(t)
return this}
r.Touch.prototype.redirect=function(t){this._redirect=t
return this}
r.Touch.prototype.suppress=function(){this._active=false
return this}
r.Touch.prototype.setSuppress=function(t){console.warn("Imba.Touch#suppress= is deprecated")
this._supress=t
this
return this}
r.Touch.prototype.touchstart=function(t,e){this._event=t
this._touch=e
this._button=0
this._x=e.clientX
this._y=e.clientY
this.began()
this.update()
if(t&&this.isCaptured()){t.preventDefault()}return this}
r.Touch.prototype.touchmove=function(t,e){this._event=t
this._x=e.clientX
this._y=e.clientY
this.update()
if(t&&this.isCaptured()){t.preventDefault()}return this}
r.Touch.prototype.touchend=function(t,e){this._event=t
this._x=e.clientX
this._y=e.clientY
this.ended()
r.Touch.LastTimestamp=t.timeStamp
if(this._maxdr<20){var i=new r.Event(t)
i.setType("tap")
i.process()}if(t&&this.isCaptured()){t.preventDefault()}return this}
r.Touch.prototype.touchcancel=function(t,e){return this.cancel()}
r.Touch.prototype.mousedown=function(t,e){var i=this
i._event=t
i._button=t.button
i._x=e.clientX
i._y=e.clientY
i.began()
i.update()
i._mousemove=function(t){return i.mousemove(t,t)}
r.document().addEventListener("mousemove",i._mousemove,true)
return i}
r.Touch.prototype.mousemove=function(t,e){this._x=e.clientX
this._y=e.clientY
this._event=t
if(this.isCaptured()){t.preventDefault()}this.update()
this.move()
return this}
r.Touch.prototype.mouseup=function(t,e){this._x=e.clientX
this._y=e.clientY
this.ended()
return this}
r.Touch.prototype.idle=function(){return this.update()}
r.Touch.prototype.began=function(){this._timestamp=Date.now()
this._maxdr=this._dr=0
this._x0=this._x
this._y0=this._y
var t=this.event().target
var e=null
this._sourceTarget=t&&r.getTagForDom(t)
while(t){e=r.getTagForDom(t)
if(e&&e.ontouchstart){this._bubble=false
this.setTarget(e)
this.target().ontouchstart(this)
if(!this._bubble){break}}t=t.parentNode}this._updates++
return this}
r.Touch.prototype.update=function(){var t
if(!this._active||this._cancelled){return this}var e=Math.sqrt(this.dx()*this.dx()+this.dy()*this.dy())
if(e>this._dr){this._maxdr=e}this._dr=e
if(this._redirect){if(this._target&&this._target.ontouchcancel){this._target.ontouchcancel(this)}this.setTarget(this._redirect)
this._redirect=null
if(this.target().ontouchstart){this.target().ontouchstart(this)}if(this._redirect){return this.update()}}this._updates++
if(this._gestures){for(let t=0,e=n(this._gestures),i=e.length;t<i;t++){e[t].ontouchupdate(this)}}(t=this.target())&&t.ontouchupdate&&t.ontouchupdate(this)
if(this._redirect)this.update()
return this}
r.Touch.prototype.move=function(){var t
if(!this._active||this._cancelled){return this}if(this._gestures){for(let t=0,e=n(this._gestures),i=e.length,r;t<i;t++){r=e[t]
if(r.ontouchmove){r.ontouchmove(this,this._event)}}}(t=this.target())&&t.ontouchmove&&t.ontouchmove(this,this._event)
return this}
r.Touch.prototype.ended=function(){var t
if(!this._active||this._cancelled){return this}this._updates++
if(this._gestures){for(let t=0,e=n(this._gestures),i=e.length;t<i;t++){e[t].ontouchend(this)}}(t=this.target())&&t.ontouchend&&t.ontouchend(this)
this.cleanup_()
return this}
r.Touch.prototype.cancel=function(){if(!this._cancelled){this._cancelled=true
this.cancelled()
this.cleanup_()}return this}
r.Touch.prototype.cancelled=function(){var t
if(!this._active){return this}this._cancelled=true
this._updates++
if(this._gestures){for(let t=0,e=n(this._gestures),i=e.length,r;t<i;t++){r=e[t]
if(r.ontouchcancel){r.ontouchcancel(this)}}}(t=this.target())&&t.ontouchcancel&&t.ontouchcancel(this)
return this}
r.Touch.prototype.cleanup_=function(){if(this._mousemove){r.document().removeEventListener("mousemove",this._mousemove,true)
this._mousemove=null}if(this._selblocker){r.document().removeEventListener("selectstart",this._selblocker,true)
this._selblocker=null}return this}
r.Touch.prototype.dr=function(){return this._dr}
r.Touch.prototype.dx=function(){return this._x-this._x0}
r.Touch.prototype.dy=function(){return this._y-this._y0}
r.Touch.prototype.x0=function(){return this._x0}
r.Touch.prototype.y0=function(){return this._y0}
r.Touch.prototype.x=function(){return this._x}
r.Touch.prototype.y=function(){return this._y}
r.Touch.prototype.tx=function(){this._targetBox||(this._targetBox=this._target.dom().getBoundingClientRect())
return this._x-this._targetBox.left}
r.Touch.prototype.ty=function(){this._targetBox||(this._targetBox=this._target.dom().getBoundingClientRect())
return this._y-this._targetBox.top}
r.Touch.prototype.button=function(){return this._button}
r.Touch.prototype.sourceTarget=function(){return this._sourceTarget}
r.Touch.prototype.elapsed=function(){return Date.now()-this._timestamp}
r.TouchGesture=function t(){}
r.TouchGesture.prototype.__active={default:false,name:"active"}
r.TouchGesture.prototype.active=function(t){return this._active}
r.TouchGesture.prototype.setActive=function(t){this._active=t
return this}
r.TouchGesture.prototype._active=false
r.TouchGesture.prototype.ontouchstart=function(t){return this}
r.TouchGesture.prototype.ontouchupdate=function(t){return this}
r.TouchGesture.prototype.ontouchend=function(t){return this}},function(t,e,i){(function(e){var n=i(8)
var r=false
var o=typeof window!=="undefined"?window:typeof e!=="undefined"?e:null
if(o&&o.Imba){console.warn("Imba v"+o.Imba.VERSION+" is already loaded.")
n=o.Imba}else if(o){o.Imba=n
r=true
if(o.define&&o.define.amd){o.define("imba",[],function(){return n})}}t.exports=n
if(true){i(247)
i(241)
if(r){n.EventManager.activate()}}if(false){}}).call(e,i(62))},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(8)
var o
var s
if(false){}if(true){s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitRequestAnimationFrame
o=window.requestAnimationFrame
o||(o=window.webkitRequestAnimationFrame)
o||(o=window.mozRequestAnimationFrame)
o||(o=function(t){return setTimeout(t,1e3/60)})}function a(){var t=this
t._queue=[]
t._stage=-1
t._scheduled=false
t._ticker=function(e){t._scheduled=false
return t.tick(e)}
t}a.prototype.stage=function(t){return this._stage}
a.prototype.setStage=function(t){this._stage=t
return this}
a.prototype.queue=function(t){return this._queue}
a.prototype.setQueue=function(t){this._queue=t
return this}
a.prototype.add=function(t,e){if(e||this._queue.indexOf(t)==-1){this._queue.push(t)}if(!this._scheduled){return this.schedule()}}
a.prototype.tick=function(t){var e=this._queue
if(!this._ts){this._ts=t}this._dt=t-this._ts
this._ts=t
this._queue=[]
this._stage=1
this.before()
if(e.length){for(let t=0,i=n(e),r=i.length,o;t<r;t++){o=i[t]
if(o instanceof Function){o(this._dt,this)}else if(o.tick){o.tick(this._dt,this)}}}this._stage=2
this.after()
this._stage=this._scheduled?0:-1
return this}
a.prototype.schedule=function(){if(!this._scheduled){this._scheduled=true
if(this._stage==-1){this._stage=0}o(this._ticker)}return this}
a.prototype.before=function(){return this}
a.prototype.after=function(){if(r.TagManager){r.TagManager.refresh()}return this}
r.TICKER=new a
r.SCHEDULERS=[]
r.ticker=function(){return r.TICKER}
r.requestAnimationFrame=function(t){return o(t)}
r.cancelAnimationFrame=function(t){return s(t)}
var u=0
r.commit=function(t){u++
r.emit(r,"commit",t!=undefined?[t]:undefined)
if(--u==0){r.TagManager&&r.TagManager.refresh()}return}
r.Scheduler=function t(e){var i=this
i._id=c++
i._target=e
i._marked=false
i._active=false
i._marker=function(){return i.mark()}
i._ticker=function(t){return i.tick(t)}
i._dt=0
i._frame={}
i._scheduled=false
i._timestamp=0
i._ticks=0
i._flushes=0
i.onevent=i.onevent.bind(i)
i}
var c=0
r.Scheduler.event=function(t){return r.emit(r,"event",t)}
r.Scheduler.prototype.__raf={watch:"rafDidSet",name:"raf"}
r.Scheduler.prototype.raf=function(t){return this._raf}
r.Scheduler.prototype.setRaf=function(t){var e=this.raf()
if(t!=e){this._raf=t}if(t!=e){this.rafDidSet&&this.rafDidSet(t,e,this.__raf)}return this}
r.Scheduler.prototype.__interval={watch:"intervalDidSet",name:"interval"}
r.Scheduler.prototype.interval=function(t){return this._interval}
r.Scheduler.prototype.setInterval=function(t){var e=this.interval()
if(t!=e){this._interval=t}if(t!=e){this.intervalDidSet&&this.intervalDidSet(t,e,this.__interval)}return this}
r.Scheduler.prototype.__events={watch:"eventsDidSet",name:"events"}
r.Scheduler.prototype.events=function(t){return this._events}
r.Scheduler.prototype.setEvents=function(t){var e=this.events()
if(t!=e){this._events=t}if(t!=e){this.eventsDidSet&&this.eventsDidSet(t,e,this.__events)}return this}
r.Scheduler.prototype.marked=function(t){return this._marked}
r.Scheduler.prototype.setMarked=function(t){this._marked=t
return this}
r.Scheduler.prototype.rafDidSet=function(t){if(t&&this._active)this.requestTick()
return this}
r.Scheduler.prototype.intervalDidSet=function(t){clearInterval(this._intervalId)
this._intervalId=null
if(t&&this._active){this._intervalId=setInterval(this.oninterval.bind(this),t)}return this}
r.Scheduler.prototype.eventsDidSet=function(t,e){if(this._active&&t&&!e){return r.listen(r,"commit",this,"onevent")}else if(!t&&e){return r.unlisten(r,"commit",this,"onevent")}}
r.Scheduler.prototype.active=function(){return this._active}
r.Scheduler.prototype.dt=function(){return this._dt}
r.Scheduler.prototype.configure=function(t){var e
if(t===undefined)t={}
if(t.raf!=undefined){this.setRaf(e=t.raf),e}if(t.interval!=undefined){this.setInterval(e=t.interval),e}if(t.events!=undefined){this.setEvents(e=t.events),e}return this}
r.Scheduler.prototype.mark=function(){this._marked=true
if(!this._scheduled){this.requestTick()}return this}
r.Scheduler.prototype.flush=function(){this._flushes++
this._target.tick(this)
this._marked=false
return this}
r.Scheduler.prototype.tick=function(t,e){this._ticks++
this._dt=t
if(e){this._scheduled=false}this.flush()
if(this._raf&&this._active){this.requestTick()}return this}
r.Scheduler.prototype.requestTick=function(){if(!this._scheduled){this._scheduled=true
r.TICKER.add(this)}return this}
r.Scheduler.prototype.activate=function(t){if(t===undefined)t=true
if(!this._active){this._active=true
this._commit=this._target.commit
this._target.commit=function(){return this}
this._target&&this._target.flag&&this._target.flag("scheduled_")
r.SCHEDULERS.push(this)
if(this._events){r.listen(r,"commit",this,"onevent")}if(this._interval&&!this._intervalId){this._intervalId=setInterval(this.oninterval.bind(this),this._interval)}if(t){this.tick(0)}else if(this._raf){this.requestTick()}}return this}
r.Scheduler.prototype.deactivate=function(){if(this._active){this._active=false
this._target.commit=this._commit
let t=r.SCHEDULERS.indexOf(this)
if(t>=0){r.SCHEDULERS.splice(t,1)}if(this._events){r.unlisten(r,"commit",this,"onevent")}if(this._intervalId){clearInterval(this._intervalId)
this._intervalId=null}this._target&&this._target.unflag&&this._target.unflag("scheduled_")}return this}
r.Scheduler.prototype.track=function(){return this._marker}
r.Scheduler.prototype.oninterval=function(){this.tick()
r.TagManager.refresh()
return this}
r.Scheduler.prototype.onevent=function(t){if(!this._events||this._marked){return this}if(this._events instanceof Function){if(this._events(t,this))this.mark()}else if(this._events instanceof Array){if(this._events.indexOf(t&&t.type||t)>=0){this.mark()}}else{this.mark()}return this}},function(t,e,i){var n=i(0)
var r=n.defineTag("Actionable",function(t){t._flagName=null
t.prototype.action=function(t){return this._action}
t.prototype.setAction=function(t){this._action=t
return this}
t.prototype.contextData=function(){var t=null
var e=this
while(e){if(t=e.data()){return t}e=e.parent()}return null}
t.prototype.ontap=function(t){var e=this.action()
if(e){this.trigger("uxa:action",e)}if(typeof e=="string"||e instanceof String){t.halt().silence()
this.trigger(e,this.contextData())}else if(e instanceof Array){t.halt().silence()
this.trigger(e[0],e.slice(1))}else{t._responder=null}return this}})
e.Actionable=r},function(t,e,i){var n=i(0),r=n.createElement
var o=i(95).Form
var s=i(54).Button
var a=i(96).Indicator
var u=n.defineTag("Dialog",o,function(t){t.prototype.type=function(t){return this._type}
t.prototype.setType=function(t){this._type=t
return this}
t.prototype.__submitLabel={default:"confirm",name:"submitLabel"}
t.prototype.submitLabel=function(t){return this._submitLabel}
t.prototype.setSubmitLabel=function(t){this._submitLabel=t
return this}
t.prototype._submitLabel="confirm"
t.prototype.__cancelLabel={default:"dismiss",name:"cancelLabel"}
t.prototype.cancelLabel=function(t){return this._cancelLabel}
t.prototype.setCancelLabel=function(t){this._cancelLabel=t
return this}
t.prototype._cancelLabel="dismiss"
t.prototype.setContent=function(t,e){this.log("setting content for dialog")
this._content=n.static(t,e)
return this}
t.prototype.onsubmit=async function(t){var e=this
t.cancel().halt()
if(e.uxa().queue().busy()){return}var i=e.trigger("uxa:submit",e.formData())
await e.uxa().queue()
if(e.uxa().queue().failed()){e.log("failed?!?!",e.uxa().queue().error())
e.uxa().flash(e.uxa().queue().error())
return e.uxa().queue().reset()}else if(!i.isPrevented()){return setTimeout(function(){return e.hide()},200)}}
t.prototype.show=function(){return this.uxa().open(this)}
t.prototype.hide=function(){return this.trigger("uxa:hide")}
t.prototype.submit=function(){return this}
t.prototype.tapDismiss=async function(t){var e=this
t.prevent().stop()
e.trigger("uxa:dismiss")
if(e.uxa().queue().idle()){return e.hide()}await e.uxa().queue()
return setTimeout(function(){return e.hide()},200)}
t.prototype.header=function(){let t=this.$$||(this.$$={})
return this._header=this._header||r("header",this).flag("header")}
t.prototype.indicator=function(){let t=this.$$||(this.$$={})
return(this._indicator=this._indicator||r(a,this).flag("indicator").setType("forward")).bindData(this.uxa(),"queue",[]).end()}
t.prototype.body=function(){let t=this.$$||(this.$$={})
return(this._body=this._body||r("section",this).flag("body")).setContent(this._content?this._content:this._template?this.renderTemplate():void 0,3)}
t.prototype.footer=function(){let t=this.$$||(this.$$={}),e
return(e=this._footer=this._footer||(e=r("footer",this)).flag("footer").flag("flat").setContent([r(s,e.$,"A",e).setType("button").on$(0,["tap","tapDismiss"],this),r(s,e.$,"B",e).flag("primary").setType("submit")],2)).end((e.$.A.setLabel(this.cancelLabel()).end(),e.$.B.setLabel(this.submitLabel()).end(),true))}
t.prototype.render=function(){return this.$open(0).flag("uxa").setChildren([this.header(),this.body(),this.footer(),this.indicator()],1).synced()}})
e.Dialog=u},function(t,e,i){var n=i(0),r=n.createElement
var o=i(35).Icon
var s=n.defineTag("ListItem",function(t){t.prototype.icon=function(t){return this._icon}
t.prototype.setIcon=function(t){this._icon=t
return this}
t.prototype.rightIcon=function(t){return this._rightIcon}
t.prototype.setRightIcon=function(t){this._rightIcon=t
return this}
t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.subtext=function(t){return this._subtext}
t.prototype.setSubtext=function(t){this._subtext=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([(t[0]||r("div",t,0,this).flag("gutter")).setContent(this.icon()?(t[1]||r(o,t,1,0).flag("left")).bindData(this,"icon",[]).end():void 0,3),(t[2]||r("div",t,2,this).flag("main")).setContent([this.label()?(t[3]||r("div",t,3,2).flag("h3").flag("text")).setNestedAttr("uxa","md",this.label()).end():void 0,this.subtext()?(t[4]||r("div",t,4,2).flag("p1").flag("muted")).setNestedAttr("uxa","md",this.subtext()).end():void 0],1),this.rightIcon()?(t[5]||r(o,t,5,this).flag("right")).bindData(this,"rightIcon",[]).end():void 0],1).synced()}})
e.ListItem=s},function(t,e,i){var n=i(0),r=n.createElement
var o=i(35).Icon
var s=n.defineTag("MenuItem","a",function(t){t.prototype.action=function(t){return this._action}
t.prototype.setAction=function(t){this._action=t
return this}
t.prototype.icon=function(t){return this._icon}
t.prototype.setIcon=function(t){this._icon=t
return this}
t.prototype.rightIcon=function(t){return this._rightIcon}
t.prototype.setRightIcon=function(t){this._rightIcon=t
return this}
t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.subtext=function(t){return this._subtext}
t.prototype.setSubtext=function(t){this._subtext=t
return this}
t.prototype.disabled=function(t){return this.getAttribute("disabled")}
t.prototype.setDisabled=function(t){this.setAttribute("disabled",t)
return this}
t.prototype.contextData=function(){var t=null
var e=this
while(e){if(t=e.data()){return t}e=e.parent()}return null}
t.prototype.ontap=function(e){if(this.href()){this.trigger("uxa:hide")
return t.prototype.__super__.ontap.call(this,e)}e.cancel().halt().silence()
var i=this.action()
if(typeof i=="string"||i instanceof String){this.trigger(i,this.contextData())}else if(i instanceof Array){this.trigger(i[0],i.slice(1))}else{this.trigger("activate")}return this.trigger("uxa:hide")}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([this.icon()?(t[0]||r(o,t,0,this).flag("left")).bindData(this,"icon",[]).end():void 0,this.label()?(t[1]||r("div",t,1,this).flag("text")).setNestedAttr("uxa","md",this.label()).end():void 0,this.subtext()?(t[2]||r("div",t,2,this).flag("subtext").flag("muted")).setNestedAttr("uxa","md",this.subtext()).end():void 0,this.rightIcon()?(t[3]||r(o,t,3,this).flag("right")).bindData(this,"rightIcon",[]).end():void 0],1).synced()}})
e.MenuItem=s},function(t,e,i){var n=i(0),r=n.createElement
var o=i(97).Menu
var s=i(98).Popover
var a=i(100).Snackbar
var u=n.defineTag("Overlay",function(t){t.prototype.component=function(t){return this._component}
t.prototype.setComponent=function(t){this._component=t
return this}
t.prototype.target=function(t){return this._target}
t.prototype.setTarget=function(t){this._target=t
return this}
t.prototype.options=function(t){return this._options}
t.prototype.setOptions=function(t){this._options=t
return this}
t.prototype.isModal=function(t){return this._isModal}
t.prototype.setIsModal=function(t){this._isModal=t
return this}
t.prototype.isMenu=function(t){return this._isMenu}
t.prototype.setIsMenu=function(t){this._isMenu=t
return this}
t.prototype.render=function(){var t=this.$
return this.$open(0).setChildren([this.component().flag("floating").flag("paper").end(),t[0]||r("div",t,0,this).flag("backdrop").on$(0,["tap","autohide"],this)],1).synced()}
t.prototype.show=function(){var t
document.body.appendChild(this.dom())
this.component().trigger("uxashow")
if(this._isMenu)this.reflow()
this.dom().offsetWidth
n.TagManager.insert(this,this.dom().parentNode)
this.flag("uxa-show")
this.component().flag("uxa-show")
n.TagManager.refresh()
if(this.target()){(t=this.target())&&t.flag&&t.flag("uxa-overlay-active")}return this}
t.prototype.hide=function(){var t=this,e
if(t.hasFlag("uxa-hide")){return}t.flag("uxa-hide")
t.component().flag("uxa-hide")
t.unflag("uxa-show")
t.component().unflag("uxa-show")
if(t.target()){(e=t.target())&&e.unflag&&e.unflag("uxa-overlay-active")}setTimeout(function(){var e=t.dom().parentNode
e.removeChild(t.dom())
n.TagManager.remove(t,e)
t.component().unflag("uxa-hide")
return n.TagManager.refresh()},200)
return t}
t.prototype.onevent=function(t){if(this._eventResponder&&t.bubble()&&!this.contains(this._eventResponder)&&!(t.event()instanceof Event)){t.redirect(this._eventResponder)}return this}
t.prototype.autohide=function(){if(!this._isModal){return this.component().trigger("uxa:hide")}}
t.prototype.onuxahide=function(t){t.stop()
return this.hide()}
t.prototype.onuxashow=function(t){return t.stop()}
t.prototype.setup=function(){this._isMenu=this.component()instanceof o||this.component()instanceof s
this._isModal=this.component().hasFlag("modal")
return this._eventResponder=this._options&&this._options.responder||this.target()}
t.prototype.reflow=function(){if(!this.target().dom().offsetParent){if(!this.hasFlag("hide"))this.hide()
return this}var t=this.target().dom().getBoundingClientRect()
var e=this.component().dom().offsetWidth
var i=this.component().dom().offsetHeight
var n=window.innerWidth
var r=window.innerHeight
var o=0
var s=0
var a=Math.round(t.left+o+t.width*.5)
var u=Math.round(t.top+s+t.height*.5)
var c=a>n*.5?1:0
var p=u>r*.5?1:0
var l=n-10
var h=10
this.setFlag("ay",p?"below":"above")
this.setFlag("ax",a>n*.5?null:"lft")
var d={maxWidth:400}
this.component().flag("abs")
if(p<.5){d.top=t.bottom
d.maxHeight=r-d.top}else{d.bottom=r-t.top
d.maxHeight=r-d.bottom}if(c<.5){d.left=Math.max(t.left,10)}else{d.right=Math.max(n-t.right,10)}console.log(a,n,u,r,c,p)
return this.component().css(d)}})
e.Overlay=u
function c(){}e.Stack=c
c.show=function(t,e,i){if(i===undefined)i={}
var n=r(u).setComponent(t).setTarget(e).setOptions(i).end()
return n.show()}},function(t,e,i){function n(t){return t?t.toArray?t.toArray():t:[]}var r=i(0),o=r.createTagList,s=r.createElement
var a=r.defineTag("TextField",function(t){t.prototype.label=function(t){return this._label}
t.prototype.setLabel=function(t){this._label=t
return this}
t.prototype.desc=function(t){return this._desc}
t.prototype.setDesc=function(t){this._desc=t
return this}
t.prototype.multiline=function(t){return this._multiline}
t.prototype.setMultiline=function(t){this._multiline=t
return this};["disabled","placeholder","type","name","value","required","pattern","minlength","maxlength","autocomplete"].map(function(e){var i=r.toCamelCase("set-"+e)
t.prototype[e]=function(t){return this.input()[e]()}
return t.prototype[i]=function(t){this.input()[i](t)
return this}})
t.prototype.input=function(){let t=this.$$||(this.$$={})
return(this._input=this._input||s("input",this).flag("input").setPlaceholder(" ").setType("text")).end()}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("uxa").setChildren([this.input(),t[0]||s("span",t,0,this).flag("after"),t[1]||s("hr",t,1,this).flag("static"),t[2]||s("hr",t,2,this).flag("anim"),t[3]||s("label",t,3,this),t[4]||s("span",t,4,this).flag("helper").flag("desc")],1).synced((t[3].setContent(this.label(),3),t[4].dataset("desc",this.desc()).setContent(this.desc(),3).end(),true))}})
e.TextField=a
var u=r.defineTag("TextAreaProxy","textarea",function(t){t.prototype.owner=function(t){return this._owner}
t.prototype.setOwner=function(t){this._owner=t
return this}
t.prototype.onfocus=function(t){return this.owner().dom().focus()}
t.prototype.oninput=function(t){this.owner().dom().innerText=this.dom().value
return this.owner().dom().focus()}})
var c=r.defineTag("Editable",function(t){t.prototype.placeholder=function(t){return this.getAttribute("placeholder")}
t.prototype.setPlaceholder=function(t){this.setAttribute("placeholder",t)
return this}
t.prototype.minlength=function(t){return this.getAttribute("minlength")}
t.prototype.setMinlength=function(t){this.setAttribute("minlength",t)
return this}
t.prototype.maxlength=function(t){return this.getAttribute("maxlength")}
t.prototype.setMaxlength=function(t){this.setAttribute("maxlength",t)
return this}
t.prototype.required=function(t){return this.getAttribute("required")}
t.prototype.setRequired=function(t){this.setAttribute("required",t)
return this}
t.prototype.name=function(t){return this.getAttribute("name")}
t.prototype.setName=function(t){this.setAttribute("name",t)
return this}
t.prototype.build=function(){var t=this
t.setTabindex(0)
try{t.dom().contentEditable="plaintext-only"}catch(e){t.dom().contentEditable=true}t._raw=s(u).flag("input").setTabindex("-1").setOwner(t).end()
t._raw.setValue=function(e){return t.setValue(e)}
return t}
t.prototype.raw=function(){return this._raw}
t.prototype.setAttribute=function(e,i){if(this._raw){this.raw().setAttribute(e,i)}t.prototype.__super__.setAttribute.apply(this,arguments)
return this}
t.prototype.setValue=function(t){this.dom().innerText=t
this.raw().dom().value=t
return this}
t.prototype.value=function(){return this.dom().innerText}
t.prototype.oninput=function(){this.raw().dom().value=this.value()
return this}})
var p=r.defineTag("TextArea",a,function(t){t.prototype.input=function(){let t=this.$$||(this.$$={})
return(this._input=this._input||s(c,this).flag("input")).end()}
t.prototype.render=function(){var t=this.$
return this.$open(0).flag("uxa").setChildren([this.input().raw(),this.input(),t[0]||s("span",t,0,this).flag("after"),t[1]||s("hr",t,1,this).flag("static"),t[2]||s("hr",t,2,this).flag("anim"),t[3]||s("label",t,3,this),t[4]||s("span",t,4,this).flag("helper").flag("desc")],1).synced((t[3].setContent(this.label(),3),t[4].dataset("desc",this.desc()).setContent(this.desc(),3).end(),true))}})
e.TextArea=p
var l=r.defineTag("SelectField",a,function(t){t.prototype.setOptions=function(t){let e=this.$$||(this.$$={}),i
var r=this.input();(i=this._input=this._input||(i=s("select",this)).flag("input")).setContent(function e(i){for(let e=0,r=n(t),o=i.taglen=r.length,a;e<o;e++){a=r[e];(i[e]||s("option",i,e)).setValue(a[0],1).setContent(a[1]||a[0],3).end()}return i}(i.$["A"]||o(i.$,"A",this._input)),4).end()
this
return this}
t.prototype.input=function(){let t=this.$$||(this.$$={})
return(this._input=this._input||s("select",this).flag("input")).end()}})
e.SelectField=l},function(t,e,i){var n=i(0),r=n.createElement
var o=i(54).IconButton
var s=n.defineTag("Tile",function(t){t.prototype.actions=function(t){return this._actions}
t.prototype.setActions=function(t){this._actions=t
return this}
t.prototype.__md={default:"# Hello\n## Subtitle\nSome random text right here",name:"md"}
t.prototype.md=function(t){return this._md}
t.prototype.setMd=function(t){this._md=t
return this}
t.prototype._md="# Hello\n## Subtitle\nSome random text right here"
t.prototype.main=function(){let t=this.$$||(this.$$={}),e
return(e=this._main=this._main||(e=r("div",this)).flag("main").setContent([r("div",e.$,"A",e).flag("actions").setContent(e.$.B||r(o,e.$,"B","A").setIcon("*"),2),r("span",e.$,"C",e).flag("p1")],2)).end((e.$.B.end(),e.$.C.setNestedAttr("uxa","md",this.md()).end(),true))}
t.prototype.footer=function(){let t=this.$$||(this.$$={}),e
return e=this._footer=this._footer||(e=r("div",this)).flag("footer").setContent([r("div",e.$,"A",e).flag("p1").setText("By Some author"),r("div",e.$,"B",e).flag("c1").setText("This is the footer")],2)}
t.prototype.render=function(){return this.$open(0).setChildren([this.main(),this.footer()],1).synced()}})
e.Tile=s},function(t,e){t.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana"},"application/3gpp-ims+xml":{source:"iana"},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/alto-costmap+json":{source:"iana",compressible:true},"application/alto-costmapfilter+json":{source:"iana",compressible:true},"application/alto-directory+json":{source:"iana",compressible:true},"application/alto-endpointcost+json":{source:"iana",compressible:true},"application/alto-endpointcostparams+json":{source:"iana",compressible:true},"application/alto-endpointprop+json":{source:"iana",compressible:true},"application/alto-endpointpropparams+json":{source:"iana",compressible:true},"application/alto-error+json":{source:"iana",compressible:true},"application/alto-networkmap+json":{source:"iana",compressible:true},"application/alto-networkmapfilter+json":{source:"iana",compressible:true},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:true,extensions:["atom"]},"application/atomcat+xml":{source:"iana",extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana"},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",extensions:["atomsvc"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana"},"application/bacnet-xdd+zip":{source:"iana"},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:false,extensions:["bdoc"]},"application/beep+xml":{source:"iana"},"application/calendar+json":{source:"iana",compressible:true},"application/calendar+xml":{source:"iana"},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/cbor":{source:"iana"},"application/ccmp+xml":{source:"iana"},"application/ccxml+xml":{source:"iana",extensions:["ccxml"]},"application/cdfx+xml":{source:"iana"},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana"},"application/cellml+xml":{source:"iana"},"application/cfw":{source:"iana"},"application/clue_info+xml":{source:"iana"},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana"},"application/coap-group+json":{source:"iana",compressible:true},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana"},"application/cpl+xml":{source:"iana"},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana"},"application/cstadata+xml":{source:"iana"},"application/csvm+json":{source:"iana",compressible:true},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cybercash":{source:"iana"},"application/dart":{compressible:true},"application/dash+xml":{source:"iana",extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana"},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:true},"application/dicom+xml":{source:"iana"},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/docbook+xml":{source:"apache",extensions:["dbk"]},"application/dskpp+xml":{source:"iana"},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:true,extensions:["ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:false},"application/edifact":{source:"iana",compressible:false},"application/efi":{source:"iana"},"application/emergencycalldata.comment+xml":{source:"iana"},"application/emergencycalldata.deviceinfo+xml":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana"},"application/emergencycalldata.serviceinfo+xml":{source:"iana"},"application/emergencycalldata.subscriberinfo+xml":{source:"iana"},"application/emma+xml":{source:"iana",extensions:["emma"]},"application/emotionml+xml":{source:"iana"},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana"},"application/epub+zip":{source:"iana",extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana"},"application/fits":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:false,extensions:["woff"]},"application/font-woff2":{compressible:false,extensions:["woff2"]},"application/framework-attributes+xml":{source:"iana"},"application/geo+json":{source:"iana",compressible:true},"application/gml+xml":{source:"apache",extensions:["gml"]},"application/gpx+xml":{source:"apache",extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:false},"application/h224":{source:"iana"},"application/held+xml":{source:"iana"},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana"},"application/ibe-pkg-reply+xml":{source:"iana"},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana"},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana"},"application/java-archive":{source:"apache",compressible:false,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:false,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:false,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:true,extensions:["js"]},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:true},"application/jrd+json":{source:"iana",compressible:true},"application/json":{source:"iana",charset:"UTF-8",compressible:true,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:true},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:true,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:true},"application/jwk-set+json":{source:"iana",compressible:true},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana"},"application/kpml-response+xml":{source:"iana"},"application/ld+json":{source:"iana",compressible:true,extensions:["jsonld"]},"application/lgr+xml":{source:"iana"},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana"},"application/lost+xml":{source:"iana",extensions:["lostxml"]},"application/lostsync+xml":{source:"iana"},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",extensions:["mads"]},"application/manifest+json":{charset:"UTF-8",compressible:true,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",extensions:["mathml"]},"application/mathml-content+xml":{source:"iana"},"application/mathml-presentation+xml":{source:"iana"},"application/mbms-associated-procedure-description+xml":{source:"iana"},"application/mbms-deregister+xml":{source:"iana"},"application/mbms-envelope+xml":{source:"iana"},"application/mbms-msk+xml":{source:"iana"},"application/mbms-msk-response+xml":{source:"iana"},"application/mbms-protection-description+xml":{source:"iana"},"application/mbms-reception-report+xml":{source:"iana"},"application/mbms-register+xml":{source:"iana"},"application/mbms-register-response+xml":{source:"iana"},"application/mbms-schedule+xml":{source:"iana"},"application/mbms-user-service-description+xml":{source:"iana"},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana"},"application/media_control+xml":{source:"iana"},"application/mediaservercontrol+xml":{source:"iana",extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:true},"application/metalink+xml":{source:"apache",extensions:["metalink"]},"application/metalink4+xml":{source:"iana",extensions:["meta4"]},"application/mets+xml":{source:"iana",extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mods+xml":{source:"iana",extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana"},"application/mrb-publish+xml":{source:"iana"},"application/msc-ivr+xml":{source:"iana"},"application/msc-mixer+xml":{source:"iana"},"application/msword":{source:"iana",compressible:false,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana"},"application/news-groupinfo":{source:"iana"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana"},"application/nss":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:false,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",extensions:["opf"]},"application/ogg":{source:"iana",compressible:false,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana"},"application/parityfec":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",extensions:["xer"]},"application/pdf":{source:"iana",compressible:false,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:false,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana"},"application/pidf-diff+xml":{source:"iana"},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",extensions:["pls"]},"application/poc-settings+xml":{source:"iana"},"application/postscript":{source:"iana",compressible:true,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:true},"application/problem+json":{source:"iana",compressible:true},"application/problem+xml":{source:"iana"},"application/provenance+xml":{source:"iana"},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.hpub+zip":{source:"iana"},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana"},"application/pskc+xml":{source:"iana",extensions:["pskcxml"]},"application/qsig":{source:"iana"},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:true},"application/rdf+xml":{source:"iana",compressible:true,extensions:["rdf"]},"application/reginfo+xml":{source:"iana",extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:true},"application/resource-lists+xml":{source:"iana",extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",extensions:["rld"]},"application/rfc+xml":{source:"iana"},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana"},"application/rls-services+xml":{source:"iana",extensions:["rs"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:true,extensions:["rss"]},"application/rtf":{source:"iana",compressible:true,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana"},"application/samlmetadata+xml":{source:"iana"},"application/sbml+xml":{source:"iana",extensions:["sbml"]},"application/scaip+xml":{source:"iana"},"application/scim+json":{source:"iana",compressible:true},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/sep+xml":{source:"iana"},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",extensions:["shf"]},"application/sieve":{source:"iana"},"application/simple-filter+xml":{source:"iana"},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:true},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",extensions:["srx"]},"application/spirits-event+xml":{source:"iana"},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",extensions:["grxml"]},"application/sru+xml":{source:"iana",extensions:["sru"]},"application/ssdl+xml":{source:"apache",extensions:["ssdl"]},"application/ssml+xml":{source:"iana",extensions:["ssml"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:true},"application/tei+xml":{source:"iana",extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/ttml+xml":{source:"iana"},"application/tve-trigger":{source:"iana"},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana"},"application/urc-ressheet+xml":{source:"iana"},"application/urc-targetdesc+xml":{source:"iana"},"application/urc-uisocketdesc+xml":{source:"iana"},"application/vcard+json":{source:"iana",compressible:true},"application/vcard+xml":{source:"iana"},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.3gpp-prose+xml":{source:"iana"},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana"},"application/vnd.3gpp.bsf+xml":{source:"iana"},"application/vnd.3gpp.mid-call+xml":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana"},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana"},"application/vnd.3gpp.srvcc-info+xml":{source:"iana"},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana"},"application/vnd.3gpp.ussd+xml":{source:"iana"},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana"},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:false,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:true},"application/vnd.apple.installer+xml":{source:"iana",extensions:["mpkg"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.pkpass":{compressible:false,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avistar+xml":{source:"iana"},"application/vnd.balsamiq.bmml+xml":{source:"iana"},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:true},"application/vnd.biopax.rdf+xml":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana"},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:true},"application/vnd.collection.doc+json":{source:"iana",compressible:true},"application/vnd.collection.next+json":{source:"iana",compressible:true},"application/vnd.comicbook+zip":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:true},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana"},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana"},"application/vnd.cybank":{source:"iana"},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:true,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume-movie":{source:"iana"},"application/vnd.desmume.movie":{source:"apache"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana"},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:true},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:true},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana"},"application/vnd.dvb.notif-container+xml":{source:"iana"},"application/vnd.dvb.notif-generic+xml":{source:"iana"},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana"},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana"},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana"},"application/vnd.dvb.notif-init+xml":{source:"iana"},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana"},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana"},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana"},"application/vnd.eszigno3+xml":{source:"iana",extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana"},"application/vnd.etsi.asic-e+zip":{source:"iana"},"application/vnd.etsi.asic-s+zip":{source:"iana"},"application/vnd.etsi.cug+xml":{source:"iana"},"application/vnd.etsi.iptvcommand+xml":{source:"iana"},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana"},"application/vnd.etsi.iptvprofile+xml":{source:"iana"},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana"},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana"},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana"},"application/vnd.etsi.iptvservice+xml":{source:"iana"},"application/vnd.etsi.iptvsync+xml":{source:"iana"},"application/vnd.etsi.iptvueprofile+xml":{source:"iana"},"application/vnd.etsi.mcid+xml":{source:"iana"},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana"},"application/vnd.etsi.pstn+xml":{source:"iana"},"application/vnd.etsi.sci+xml":{source:"iana"},"application/vnd.etsi.simservs+xml":{source:"iana"},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana"},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geo+json":{source:"iana",compressible:true},"application/vnd.geocube+xml":{source:"iana"},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:false,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:false,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:false,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:true,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:false,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana"},"application/vnd.gov.sk.e-form+zip":{source:"iana"},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana"},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:true},"application/vnd.hal+xml":{source:"iana",extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:true},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyperdrive+json":{source:"iana",compressible:true},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:true},"application/vnd.informedcontrol.rms+xml":{source:"iana"},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana"},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana"},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana"},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana"},"application/vnd.iptc.g2.newsitem+xml":{source:"iana"},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana"},"application/vnd.iptc.g2.packageitem+xml":{source:"iana"},"application/vnd.iptc.g2.planningitem+xml":{source:"iana"},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+xml":{source:"iana",extensions:["lasxml"]},"application/vnd.liberty-request+xml":{source:"iana"},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana"},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana"},"application/vnd.marlin.drm.conftoken+xml":{source:"iana"},"application/vnd.marlin.drm.license+xml":{source:"iana"},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:true},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:true},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:true},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:true,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:false,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:true,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana"},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:true},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana"},"application/vnd.ms-powerpoint":{source:"iana",compressible:false,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana"},"application/vnd.ms-printing.printticket+xml":{source:"apache"},"application/vnd.ms-printschematicket+xml":{source:"iana"},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:false,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:true},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana"},"application/vnd.nokia.iptv.config+xml":{source:"iana"},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana"},"application/vnd.nokia.landmarkcollection+xml":{source:"iana"},"application/vnd.nokia.n-gage.ac+xml":{source:"iana"},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana"},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:false,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:false,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:false,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:false,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.oftn.l10n+json":{source:"iana",compressible:true},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana"},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana"},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana"},"application/vnd.oipf.dae.xhtml+xml":{source:"iana"},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana"},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana"},"application/vnd.oipf.spdlist+xml":{source:"iana"},"application/vnd.oipf.ueprofile+xml":{source:"iana"},"application/vnd.oipf.userprofile+xml":{source:"iana"},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana"},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana"},"application/vnd.oma.bcast.imd+xml":{source:"iana"},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana"},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana"},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana"},"application/vnd.oma.bcast.sprov+xml":{source:"iana"},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana"},"application/vnd.oma.cab-feature-handler+xml":{source:"iana"},"application/vnd.oma.cab-pcc+xml":{source:"iana"},"application/vnd.oma.cab-subs-invite+xml":{source:"iana"},"application/vnd.oma.cab-user-prefs+xml":{source:"iana"},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana"},"application/vnd.oma.group-usage-list+xml":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:true},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana"},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana"},"application/vnd.oma.poc.final-report+xml":{source:"iana"},"application/vnd.oma.poc.groups+xml":{source:"iana"},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana"},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana"},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana"},"application/vnd.oma.xcap-directory+xml":{source:"iana"},"application/vnd.omads-email+xml":{source:"iana"},"application/vnd.omads-file+xml":{source:"iana"},"application/vnd.omads-folder+xml":{source:"iana"},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana"},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml-template":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:false,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"apache",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml-template":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:false,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"apache",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml-template":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:false,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"apache",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana"},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana"},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana"},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana"},"application/vnd.oracle.resource+json":{source:"iana",compressible:true},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana"},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:true},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos+xml":{source:"iana"},"application/vnd.paos.xml":{source:"apache"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana"},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana"},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana"},"application/vnd.radisys.msml+xml":{source:"iana"},"application/vnd.radisys.msml-audit+xml":{source:"iana"},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana"},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana"},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana"},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana"},"application/vnd.radisys.msml-conf+xml":{source:"iana"},"application/vnd.radisys.msml-dialog+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana"},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana"},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:true},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana"},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana"},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana"},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana"},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.tmd.mediaflex.api+xml":{source:"iana"},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:true},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana"},"application/vnd.wv.ssp+xml":{source:"iana"},"application/vnd.xacml+json":{source:"iana",compressible:true},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana"},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",extensions:["zaz"]},"application/voicexml+xml":{source:"iana",extensions:["vxml"]},"application/vq-rtcpxr":{source:"iana"},"application/watcherinfo+xml":{source:"iana"},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:false,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:false,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:false,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:false,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:false},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",extensions:["res"]},"application/x-dvi":{source:"apache",compressible:false,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-otf":{source:"apache",compressible:true,extensions:["otf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-ttf":{source:"apache",compressible:true,extensions:["ttf","ttc"]},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:true,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:false,extensions:["jnlp"]},"application/x-javascript":{compressible:true},"application/x-latex":{source:"apache",compressible:false,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:false},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:true,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:false,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",compressible:false,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:true,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:false,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:false,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:true,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:true,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:true},"application/x-x509-ca-cert":{source:"apache",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:false,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana"},"application/xaml+xml":{source:"apache",extensions:["xaml"]},"application/xcap-att+xml":{source:"iana"},"application/xcap-caps+xml":{source:"iana"},"application/xcap-diff+xml":{source:"iana",extensions:["xdf"]},"application/xcap-el+xml":{source:"iana"},"application/xcap-error+xml":{source:"iana"},"application/xcap-ns+xml":{source:"iana"},"application/xcon-conference-info+xml":{source:"iana"},"application/xcon-conference-info-diff+xml":{source:"iana"},"application/xenc+xml":{source:"iana",extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:true,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache"},"application/xml":{source:"iana",compressible:true,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:true,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana"},"application/xmpp+xml":{source:"iana"},"application/xop+xml":{source:"iana",compressible:true,extensions:["xop"]},"application/xproc+xml":{source:"apache",extensions:["xpl"]},"application/xslt+xml":{source:"iana",extensions:["xslt"]},"application/xspf+xml":{source:"apache",extensions:["xspf"]},"application/xv+xml":{source:"iana",extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:true},"application/yang-data+xml":{source:"iana"},"application/yin+xml":{source:"iana",extensions:["yin"]},"application/zip":{source:"iana",compressible:false,extensions:["zip"]},"application/zlib":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:false,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana"},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:false,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:false},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana"},"audio/mp3":{compressible:false,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:false,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:false,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:false,extensions:["oga","ogg","spx"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tone":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:false},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:false},"audio/vorbis":{source:"iana",compressible:false},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:false,extensions:["wav"]},"audio/wave":{compressible:false,extensions:["wav"]},"audio/webm":{source:"apache",compressible:false,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:false,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:false,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/opentype":{compressible:true,extensions:["otf"]},"image/bmp":{source:"iana",compressible:true,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana"},"image/emf":{source:"iana"},"image/fits":{source:"iana"},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:false,extensions:["gif"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana"},"image/jp2":{source:"iana"},"image/jpeg":{source:"iana",compressible:false,extensions:["jpeg","jpg","jpe"]},"image/jpm":{source:"iana"},"image/jpx":{source:"iana"},"image/ktx":{source:"iana",extensions:["ktx"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:false},"image/png":{source:"iana",compressible:false,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana"},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:true,extensions:["svg","svgz"]},"image/t38":{source:"iana"},"image/tiff":{source:"iana",compressible:false,extensions:["tiff","tif"]},"image/tiff-fx":{source:"iana"},"image/vnd.adobe.photoshop":{source:"iana",compressible:true,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana"},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana"},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana"},"image/vnd.valve.source.texture":{source:"iana"},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana"},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana"},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:true,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:true,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:false},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana"},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana"},"message/global-delivery-status":{source:"iana"},"message/global-disposition-notification":{source:"iana"},"message/global-headers":{source:"iana"},"message/http":{source:"iana",compressible:false},"message/imdn+xml":{source:"iana",compressible:true},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:false},"message/rfc822":{source:"iana",compressible:true,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana"},"model/gltf+json":{source:"iana",compressible:true},"model/iges":{source:"iana",compressible:false,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:false,extensions:["msh","mesh","silo"]},"model/vnd.collada+xml":{source:"iana",extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana"},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana"},"model/vnd.parasolid.transmit.binary":{source:"iana"},"model/vnd.parasolid.transmit.text":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.valve.source.compiled-map":{source:"iana"},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:false,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:false,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana"},"model/x3d+vrml":{source:"apache",compressible:false,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:true,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana"},"multipart/alternative":{source:"iana",compressible:false},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:false},"multipart/form-data":{source:"iana",compressible:false},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana",compressible:false},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:false},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:false},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:true,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:true},"text/cmd":{compressible:true},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/css":{source:"iana",compressible:true,extensions:["css"]},"text/csv":{source:"iana",compressible:true,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fwdred":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/hjson":{extensions:["hjson"]},"text/html":{source:"iana",compressible:true,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:true},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:true,extensions:["jsx"]},"text/less":{extensions:["less"]},"text/markdown":{source:"iana"},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",compressible:true,extensions:["n3"]},"text/parameters":{source:"iana"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:true,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:true,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:true,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/slim":{extensions:["slim","slm"]},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:true,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:true,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:true,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{charset:"UTF-8",compressible:true,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:true},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:true},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:true,extensions:["markdown","md","mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:true,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:true,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:true,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"apache"},"video/3gpp":{source:"apache",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"apache"},"video/3gpp2":{source:"apache",extensions:["3g2"]},"video/bmpeg":{source:"apache"},"video/bt656":{source:"apache"},"video/celb":{source:"apache"},"video/dv":{source:"apache"},"video/encaprtp":{source:"apache"},"video/h261":{source:"apache",extensions:["h261"]},"video/h263":{source:"apache",extensions:["h263"]},"video/h263-1998":{source:"apache"},"video/h263-2000":{source:"apache"},"video/h264":{source:"apache",extensions:["h264"]},"video/h264-rcdo":{source:"apache"},"video/h264-svc":{source:"apache"},"video/h265":{source:"apache"},"video/iso.segment":{source:"apache"},"video/jpeg":{source:"apache",extensions:["jpgv"]},"video/jpeg2000":{source:"apache"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"apache",extensions:["mj2","mjp2"]},"video/mp1s":{source:"apache"},"video/mp2p":{source:"apache"},"video/mp2t":{source:"apache",extensions:["ts"]},"video/mp4":{source:"apache",compressible:false,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"apache"},"video/mpeg":{source:"apache",compressible:false,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"apache"},"video/mpv":{source:"apache"},"video/nv":{source:"apache"},"video/ogg":{source:"apache",compressible:false,extensions:["ogv"]},"video/parityfec":{source:"apache"},"video/pointer":{source:"apache"},"video/quicktime":{source:"apache",compressible:false,extensions:["qt","mov"]},"video/raptorfec":{source:"apache"},"video/raw":{source:"apache"},"video/rtp-enc-aescm128":{source:"apache"},"video/rtploopback":{source:"apache"},"video/rtx":{source:"apache"},"video/smpte292m":{source:"apache"},"video/ulpfec":{source:"apache"},"video/vc1":{source:"apache"},"video/vnd.cctv":{source:"apache"},"video/vnd.dece.hd":{source:"apache",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"apache",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"apache"},"video/vnd.dece.pd":{source:"apache",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"apache",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"apache",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"apache"},"video/vnd.directv.mpeg-tts":{source:"apache"},"video/vnd.dlna.mpeg-tts":{source:"apache"},"video/vnd.dvb.file":{source:"apache",extensions:["dvb"]},"video/vnd.fvt":{source:"apache",extensions:["fvt"]},"video/vnd.hns.video":{source:"apache"},"video/vnd.iptvforum.1dparityfec-1010":{source:"apache"},"video/vnd.iptvforum.1dparityfec-2005":{source:"apache"},"video/vnd.iptvforum.2dparityfec-1010":{source:"apache"},"video/vnd.iptvforum.2dparityfec-2005":{source:"apache"},"video/vnd.iptvforum.ttsavc":{source:"apache"},"video/vnd.iptvforum.ttsmpeg2":{source:"apache"},"video/vnd.motorola.video":{source:"apache"},"video/vnd.motorola.videop":{source:"apache"},"video/vnd.mpegurl":{source:"apache",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"apache",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"apache"},"video/vnd.nokia.videovoip":{source:"apache"},"video/vnd.objectvideo":{source:"apache"},"video/vnd.radgamettools.bink":{source:"apache"},"video/vnd.radgamettools.smacker":{source:"apache"},"video/vnd.sealed.mpeg1":{source:"apache"},"video/vnd.sealed.mpeg4":{source:"apache"},"video/vnd.sealed.swf":{source:"apache"},"video/vnd.sealedmedia.softseal.mov":{source:"apache"},"video/vnd.uvvu.mp4":{source:"apache",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"apache",extensions:["viv"]},"video/vp8":{source:"apache"},"video/webm":{source:"apache",compressible:false,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:false,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:false,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:false,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:true},"x-shader/x-vertex":{compressible:true}}},function(t,e,i){
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
t.exports=i(255)},function(t,e,i){"use strict"

;/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n=i(256)
var r=i(273).extname
var o=/^\s*([^;\s]*)(?:;|\s|$)/
var s=/^text\//i
e.charset=a
e.charsets={lookup:a}
e.contentType=u
e.extension=c
e.extensions=Object.create(null)
e.lookup=p
e.types=Object.create(null)
l(e.extensions,e.types)
function a(t){if(!t||typeof t!=="string"){return false}var e=o.exec(t)
var i=e&&n[e[1].toLowerCase()]
if(i&&i.charset){return i.charset}if(e&&s.test(e[1])){return"UTF-8"}return false}function u(t){if(!t||typeof t!=="string"){return false}var i=t.indexOf("/")===-1?e.lookup(t):t
if(!i){return false}if(i.indexOf("charset")===-1){var n=e.charset(i)
if(n)i+="; charset="+n.toLowerCase()}return i}function c(t){if(!t||typeof t!=="string"){return false}var i=o.exec(t)
var n=i&&e.extensions[i[1].toLowerCase()]
if(!n||!n.length){return false}return n[0]}function p(t){if(!t||typeof t!=="string"){return false}var i=r("x."+t).toLowerCase().substr(1)
if(!i){return false}return e.types[i]||false}function l(t,e){var i=["nginx","apache",undefined,"iana"]
Object.keys(n).forEach(function r(o){var s=n[o]
var a=s.extensions
if(!a||!a.length){return}t[o]=a
for(var u=0;u<a.length;u++){var c=a[u]
if(e[c]){var p=i.indexOf(n[e[c]].source)
var l=i.indexOf(s.source)
if(e[c]!=="application/octet-stream"&&p>l||p===l&&e[c].substr(0,12)==="application/"){continue}}e[c]=o}})}},function(t,e){var i=1e3
var n=i*60
var r=n*60
var o=r*24
var s=o*365.25
t.exports=function(t,e){e=e||{}
var i=typeof t
if(i==="string"&&t.length>0){return a(t)}else if(i==="number"&&isNaN(t)===false){return e.long?c(t):u(t)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}
function a(t){t=String(t)
if(t.length>100){return}var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t)
if(!e){return}var a=parseFloat(e[1])
var u=(e[2]||"ms").toLowerCase()
switch(u){case"years":case"year":case"yrs":case"yr":case"y":return a*s
case"days":case"day":case"d":return a*o
case"hours":case"hour":case"hrs":case"hr":case"h":return a*r
case"minutes":case"minute":case"mins":case"min":case"m":return a*n
case"seconds":case"second":case"secs":case"sec":case"s":return a*i
case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a
default:return undefined}}function u(t){if(t>=o){return Math.round(t/o)+"d"}if(t>=r){return Math.round(t/r)+"h"}if(t>=n){return Math.round(t/n)+"m"}if(t>=i){return Math.round(t/i)+"s"}return t+"ms"}function c(t){return p(t,o,"day")||p(t,r,"hour")||p(t,n,"minute")||p(t,i,"second")||t+" ms"}function p(t,e,i){if(t<e){return}if(t<e*1.5){return Math.floor(t/e)+" "+i}return Math.ceil(t/e)+" "+i+"s"}},function(t,e,i){(function(e){t.exports=i("undefined"!==typeof e&&e)||i(this.Buffer)||i("undefined"!==typeof window&&window.Buffer)||this.Buffer
function i(t){return t&&t.isBuffer&&t}}).call(e,i(65).Buffer)},function(t,e){var i=8192
e.copy=o
e.toString=r
e.write=n
function n(t,e){var i=this
var n=e||(e|=0)
var r=t.length
var o=0
var s=0
while(s<r){o=t.charCodeAt(s++)
if(o<128){i[n++]=o}else if(o<2048){i[n++]=192|o>>>6
i[n++]=128|o&63}else if(o<55296||o>57343){i[n++]=224|o>>>12
i[n++]=128|o>>>6&63
i[n++]=128|o&63}else{o=(o-55296<<10|t.charCodeAt(s++)-56320)+65536
i[n++]=240|o>>>18
i[n++]=128|o>>>12&63
i[n++]=128|o>>>6&63
i[n++]=128|o&63}}return n-e}function r(t,e,i){var n=this
var r=e|0
if(!i)i=n.length
var o=""
var s=0
while(r<i){s=n[r++]
if(s<128){o+=String.fromCharCode(s)
continue}if((s&224)===192){s=(s&31)<<6|n[r++]&63}else if((s&240)===224){s=(s&15)<<12|(n[r++]&63)<<6|n[r++]&63}else if((s&248)===240){s=(s&7)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63}if(s>=65536){s-=65536
o+=String.fromCharCode((s>>>10)+55296,(s&1023)+56320)}else{o+=String.fromCharCode(s)}}return o}function o(t,e,i,n){var r
if(!i)i=0
if(!n&&n!==0)n=this.length
if(!e)e=0
var o=n-i
if(t===this&&i<e&&e<n){for(r=o-1;r>=0;r--){t[r+e]=this[r+i]}}else{for(r=0;r<o;r++){t[r+e]=this[r+i]}}return o}},function(t,e,i){var n=i(7)
var e=t.exports=r(0)
e.alloc=r
e.concat=n.concat
e.from=o
function r(t){return new Array(t)}function o(t){if(!n.isBuffer(t)&&n.isView(t)){t=n.Uint8Array.from(t)}else if(n.isArrayBuffer(t)){t=new Uint8Array(t)}else if(typeof t==="string"){return n.from.call(e,t)}else if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},function(t,e,i){var n=i(7)
var r=n.global
var e=t.exports=n.hasBuffer?o(0):[]
e.alloc=n.hasBuffer&&r.alloc||o
e.concat=n.concat
e.from=s
function o(t){return new r(t)}function s(t){if(!n.isBuffer(t)&&n.isView(t)){t=n.Uint8Array.from(t)}else if(n.isArrayBuffer(t)){t=new Uint8Array(t)}else if(typeof t==="string"){return n.from.call(e,t)}else if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(r.from&&r.from.length!==1){return r.from(t)}else{return new r(t)}}},function(t,e,i){var n=i(7)
var e=t.exports=n.hasArrayBuffer?r(0):[]
e.alloc=r
e.concat=n.concat
e.from=o
function r(t){return new Uint8Array(t)}function o(t){if(n.isView(t)){var i=t.byteOffset
var r=t.byteLength
t=t.buffer
if(t.byteLength!==r){if(t.slice){t=t.slice(i,i+r)}else{t=new Uint8Array(t)
if(t.byteLength!==r){t=Array.prototype.slice.call(t,i,i+r)}}}}else if(typeof t==="string"){return n.from.call(e,t)}else if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},function(t,e,i){i(59)
i(60)
e.codec={preset:i(37).preset}},function(t,e,i){e.Decoder=o
var n=i(66)
var r=i(101).DecodeBuffer
function o(t){if(!(this instanceof o))return new o(t)
r.call(this,t)}o.prototype=new r
n.mixin(o.prototype)
o.prototype.decode=function(t){if(arguments.length)this.write(t)
this.flush()}
o.prototype.push=function(t){this.emit("data",t)}
o.prototype.end=function(t){this.decode(t)
this.emit("end")}},function(t,e,i){e.Encoder=o
var n=i(66)
var r=i(103).EncodeBuffer
function o(t){if(!(this instanceof o))return new o(t)
r.call(this,t)}o.prototype=new r
n.mixin(o.prototype)
o.prototype.encode=function(t){this.write(t)
this.emit("data",this.read())}
o.prototype.end=function(t){if(arguments.length)this.encode(t)
this.flush()
this.emit("end")}},function(t,e,i){e.setExtPackers=u
var n=i(7)
var r=n.global
var o=n.Uint8Array.from
var s
var a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}
function u(t){t.addExtPacker(14,Error,[h,c])
t.addExtPacker(1,EvalError,[h,c])
t.addExtPacker(2,RangeError,[h,c])
t.addExtPacker(3,ReferenceError,[h,c])
t.addExtPacker(4,SyntaxError,[h,c])
t.addExtPacker(5,TypeError,[h,c])
t.addExtPacker(6,URIError,[h,c])
t.addExtPacker(10,RegExp,[l,c])
t.addExtPacker(11,Boolean,[p,c])
t.addExtPacker(12,String,[p,c])
t.addExtPacker(13,Date,[Number,c])
t.addExtPacker(15,Number,[p,c])
if("undefined"!==typeof Uint8Array){t.addExtPacker(17,Int8Array,o)
t.addExtPacker(18,Uint8Array,o)
t.addExtPacker(19,Int16Array,o)
t.addExtPacker(20,Uint16Array,o)
t.addExtPacker(21,Int32Array,o)
t.addExtPacker(22,Uint32Array,o)
t.addExtPacker(23,Float32Array,o)
if("undefined"!==typeof Float64Array){t.addExtPacker(24,Float64Array,o)}if("undefined"!==typeof Uint8ClampedArray){t.addExtPacker(25,Uint8ClampedArray,o)}t.addExtPacker(26,ArrayBuffer,o)
t.addExtPacker(29,DataView,o)}if(n.hasBuffer){t.addExtPacker(27,r,n.from)}}function c(t){if(!s)s=i(104).encode
return s(t)}function p(t){return t.valueOf()}function l(t){t=RegExp.prototype.toString.call(t).split("/")
t.shift()
var e=[t.pop()]
e.unshift(t.join("/"))
return e}function h(t){var e={}
for(var i in a){e[i]=t[i]}return e}},function(t,e,i){e.setExtUnpackers=a
var n=i(7)
var r=n.global
var o
var s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}
function a(t){t.addExtUnpacker(14,[u,p(Error)])
t.addExtUnpacker(1,[u,p(EvalError)])
t.addExtUnpacker(2,[u,p(RangeError)])
t.addExtUnpacker(3,[u,p(ReferenceError)])
t.addExtUnpacker(4,[u,p(SyntaxError)])
t.addExtUnpacker(5,[u,p(TypeError)])
t.addExtUnpacker(6,[u,p(URIError)])
t.addExtUnpacker(10,[u,c])
t.addExtUnpacker(11,[u,l(Boolean)])
t.addExtUnpacker(12,[u,l(String)])
t.addExtUnpacker(13,[u,l(Date)])
t.addExtUnpacker(15,[u,l(Number)])
if("undefined"!==typeof Uint8Array){t.addExtUnpacker(17,l(Int8Array))
t.addExtUnpacker(18,l(Uint8Array))
t.addExtUnpacker(19,[h,l(Int16Array)])
t.addExtUnpacker(20,[h,l(Uint16Array)])
t.addExtUnpacker(21,[h,l(Int32Array)])
t.addExtUnpacker(22,[h,l(Uint32Array)])
t.addExtUnpacker(23,[h,l(Float32Array)])
if("undefined"!==typeof Float64Array){t.addExtUnpacker(24,[h,l(Float64Array)])}if("undefined"!==typeof Uint8ClampedArray){t.addExtUnpacker(25,l(Uint8ClampedArray))}t.addExtUnpacker(26,h)
t.addExtUnpacker(29,[h,l(DataView)])}if(n.hasBuffer){t.addExtUnpacker(27,l(r))}}function u(t){if(!o)o=i(102).decode
return o(t)}function c(t){return RegExp.apply(null,t)}function p(t){return function(e){var i=new t
for(var n in s){i[n]=e[n]}return i}}function l(t){return function(e){return new t(e)}}function h(t){return new Uint8Array(t).buffer}},function(t,e,i){i(59)
i(60)
e.createCodec=i(37).createCodec},function(t,e,i){var n=i(106)
e.getReadToken=r
function r(t){var e=n.getReadFormat(t)
if(t&&t.useraw){return s(e)}else{return o(e)}}function o(t){var e
var i=new Array(256)
for(e=0;e<=127;e++){i[e]=a(e)}for(e=128;e<=143;e++){i[e]=c(e-128,t.map)}for(e=144;e<=159;e++){i[e]=c(e-144,t.array)}for(e=160;e<=191;e++){i[e]=c(e-160,t.str)}i[192]=a(null)
i[193]=null
i[194]=a(false)
i[195]=a(true)
i[196]=u(t.uint8,t.bin)
i[197]=u(t.uint16,t.bin)
i[198]=u(t.uint32,t.bin)
i[199]=u(t.uint8,t.ext)
i[200]=u(t.uint16,t.ext)
i[201]=u(t.uint32,t.ext)
i[202]=t.float32
i[203]=t.float64
i[204]=t.uint8
i[205]=t.uint16
i[206]=t.uint32
i[207]=t.uint64
i[208]=t.int8
i[209]=t.int16
i[210]=t.int32
i[211]=t.int64
i[212]=c(1,t.ext)
i[213]=c(2,t.ext)
i[214]=c(4,t.ext)
i[215]=c(8,t.ext)
i[216]=c(16,t.ext)
i[217]=u(t.uint8,t.str)
i[218]=u(t.uint16,t.str)
i[219]=u(t.uint32,t.str)
i[220]=u(t.uint16,t.array)
i[221]=u(t.uint32,t.array)
i[222]=u(t.uint16,t.map)
i[223]=u(t.uint32,t.map)
for(e=224;e<=255;e++){i[e]=a(e-256)}return i}function s(t){var e
var i=o(t).slice()
i[217]=i[196]
i[218]=i[197]
i[219]=i[198]
for(e=160;e<=191;e++){i[e]=c(e-160,t.bin)}return i}function a(t){return function(){return t}}function u(t,e){return function(i){var n=t(i)
return e(i,n)}}function c(t,e){return function(i){return e(i,t)}}},function(t,e,i){var n=i(40)
var r=i(55)
var o=r.Uint64BE
var s=r.Int64BE
var a=i(107).uint8
var u=i(7)
var c=u.global
var p=u.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c
var l=p&&!c.TYPED_ARRAY_SUPPORT
var h=u.hasBuffer&&c.prototype||{}
e.getWriteToken=d
function d(t){if(t&&t.uint8array){return f()}else if(l||u.hasBuffer&&t&&t.safe){return y()}else{return m()}}function f(){var t=m()
t[202]=b(202,4,T)
t[203]=b(203,8,S)
return t}function m(){var t=a.slice()
t[196]=g(196)
t[197]=v(197)
t[198]=_(198)
t[199]=g(199)
t[200]=v(200)
t[201]=_(201)
t[202]=b(202,4,h.writeFloatBE||T,true)
t[203]=b(203,8,h.writeDoubleBE||S,true)
t[204]=g(204)
t[205]=v(205)
t[206]=_(206)
t[207]=b(207,8,x)
t[208]=g(208)
t[209]=v(209)
t[210]=_(210)
t[211]=b(211,8,w)
t[217]=g(217)
t[218]=v(218)
t[219]=_(219)
t[220]=v(220)
t[221]=_(221)
t[222]=v(222)
t[223]=_(223)
return t}function y(){var t=a.slice()
t[196]=b(196,1,c.prototype.writeUInt8)
t[197]=b(197,2,c.prototype.writeUInt16BE)
t[198]=b(198,4,c.prototype.writeUInt32BE)
t[199]=b(199,1,c.prototype.writeUInt8)
t[200]=b(200,2,c.prototype.writeUInt16BE)
t[201]=b(201,4,c.prototype.writeUInt32BE)
t[202]=b(202,4,c.prototype.writeFloatBE)
t[203]=b(203,8,c.prototype.writeDoubleBE)
t[204]=b(204,1,c.prototype.writeUInt8)
t[205]=b(205,2,c.prototype.writeUInt16BE)
t[206]=b(206,4,c.prototype.writeUInt32BE)
t[207]=b(207,8,x)
t[208]=b(208,1,c.prototype.writeInt8)
t[209]=b(209,2,c.prototype.writeInt16BE)
t[210]=b(210,4,c.prototype.writeInt32BE)
t[211]=b(211,8,w)
t[217]=b(217,1,c.prototype.writeUInt8)
t[218]=b(218,2,c.prototype.writeUInt16BE)
t[219]=b(219,4,c.prototype.writeUInt32BE)
t[220]=b(220,2,c.prototype.writeUInt16BE)
t[221]=b(221,4,c.prototype.writeUInt32BE)
t[222]=b(222,2,c.prototype.writeUInt16BE)
t[223]=b(223,4,c.prototype.writeUInt32BE)
return t}function g(t){return function(e,i){var n=e.reserve(2)
var r=e.buffer
r[n++]=t
r[n]=i}}function v(t){return function(e,i){var n=e.reserve(3)
var r=e.buffer
r[n++]=t
r[n++]=i>>>8
r[n]=i}}function _(t){return function(e,i){var n=e.reserve(5)
var r=e.buffer
r[n++]=t
r[n++]=i>>>24
r[n++]=i>>>16
r[n++]=i>>>8
r[n]=i}}function b(t,e,i,n){return function(r,o){var s=r.reserve(e+1)
r.buffer[s++]=t
i.call(r.buffer,o,s,n)}}function x(t,e){new o(this,e,t)}function w(t,e){new s(this,e,t)}function T(t,e){n.write(this,t,e,false,23,4)}function S(t,e){n.write(this,t,e,false,52,8)}},function(t,e,i){var n=i(36)
var r=i(55)
var o=r.Uint64BE
var s=r.Int64BE
var a=i(7)
var u=i(57)
var c=i(271)
var p=i(107).uint8
var l=i(58).ExtBuffer
var h="undefined"!==typeof Uint8Array
var d="undefined"!==typeof Map
var f=[]
f[1]=212
f[2]=213
f[4]=214
f[8]=215
f[16]=216
e.getWriteType=m
function m(t){var e=c.getWriteToken(t)
var i=t&&t.useraw
var r=h&&t&&t.binarraybuffer
var m=r?a.isArrayBuffer:a.isBuffer
var y=r?L:$
var g=d&&t&&t.usemap
var v=g?I:M
var _={boolean:b,function:D,number:x,object:i?E:C,string:A(i?k:S),symbol:D,undefined:D}
return _
function b(t,i){var n=i?195:194
e[n](t,i)}function x(t,i){var n=i|0
var r
if(i!==n){r=203
e[r](t,i)
return}else if(-32<=n&&n<=127){r=n&255}else if(0<=n){r=n<=255?204:n<=65535?205:206}else{r=-128<=n?208:-32768<=n?209:210}e[r](t,n)}function w(t,i){var n=207
e[n](t,i.toArray())}function T(t,i){var n=211
e[n](t,i.toArray())}function S(t){return t<32?1:t<=255?2:t<=65535?3:5}function k(t){return t<32?1:t<=65535?3:5}function A(t){return i
function i(i,n){var r=n.length
var o=5+r*3
i.offset=i.reserve(o)
var s=i.buffer
var a=t(r)
var c=i.offset+a
r=u.write.call(s,n,c)
var p=t(r)
if(a!==p){var l=c+p-a
var h=c+r
u.copy.call(s,s,l,c,h)}var d=p===1?160+r:p<=3?215+p:219
e[d](i,r)
i.offset+=r}}function C(t,e){if(e===null)return D(t,e)
if(m(e))return y(t,e)
if(n(e))return P(t,e)
if(o.isUint64BE(e))return w(t,e)
if(s.isInt64BE(e))return T(t,e)
var i=t.codec.getExtPacker(e)
if(i)e=i(e)
if(e instanceof l)return O(t,e)
v(t,e)}function E(t,e){if(m(e))return R(t,e)
C(t,e)}function D(t,i){var n=192
e[n](t,i)}function P(t,i){var n=i.length
var r=n<16?144+n:n<=65535?220:221
e[r](t,n)
var o=t.codec.encode
for(var s=0;s<n;s++){o(t,i[s])}}function $(t,i){var n=i.length
var r=n<255?196:n<=65535?197:198
e[r](t,n)
t.send(i)}function L(t,e){$(t,new Uint8Array(e))}function O(t,i){var n=i.buffer
var r=n.length
var o=f[r]||(r<255?199:r<=65535?200:201)
e[o](t,r)
p[i.type](t)
t.send(n)}function M(t,i){var n=Object.keys(i)
var r=n.length
var o=r<16?128+r:r<=65535?222:223
e[o](t,r)
var s=t.codec.encode
n.forEach(function(e){s(t,e)
s(t,i[e])})}function I(t,i){if(!(i instanceof Map))return M(t,i)
var n=i.size
var r=n<16?128+n:n<=65535?222:223
e[r](t,n)
var o=t.codec.encode
i.forEach(function(e,i,n){o(t,i)
o(t,e)})}function R(t,i){var n=i.length
var r=n<32?160+n:n<=65535?218:219
e[r](t,n)
t.send(i)}}},function(t,e,i){(function(t){function i(t,e){var i=0
for(var n=t.length-1;n>=0;n--){var r=t[n]
if(r==="."){t.splice(n,1)}else if(r===".."){t.splice(n,1)
i++}else if(i){t.splice(n,1)
i--}}if(e){for(;i--;i){t.unshift("..")}}return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/
var r=function(t){return n.exec(t).slice(1)}
e.resolve=function(){var e="",n=false
for(var r=arguments.length-1;r>=-1&&!n;r--){var s=r>=0?arguments[r]:t.cwd()
if(typeof s!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!s){continue}e=s+"/"+e
n=s.charAt(0)==="/"}e=i(o(e.split("/"),function(t){return!!t}),!n).join("/")
return(n?"/":"")+e||"."}
e.normalize=function(t){var n=e.isAbsolute(t),r=s(t,-1)==="/"
t=i(o(t.split("/"),function(t){return!!t}),!n).join("/")
if(!t&&!n){t="."}if(t&&r){t+="/"}return(n?"/":"")+t}
e.isAbsolute=function(t){return t.charAt(0)==="/"}
e.join=function(){var t=Array.prototype.slice.call(arguments,0)
return e.normalize(o(t,function(t,e){if(typeof t!=="string"){throw new TypeError("Arguments to path.join must be strings")}return t}).join("/"))}
e.relative=function(t,i){t=e.resolve(t).substr(1)
i=e.resolve(i).substr(1)
function n(t){var e=0
for(;e<t.length;e++){if(t[e]!=="")break}var i=t.length-1
for(;i>=0;i--){if(t[i]!=="")break}if(e>i)return[]
return t.slice(e,i-e+1)}var r=n(t.split("/"))
var o=n(i.split("/"))
var s=Math.min(r.length,o.length)
var a=s
for(var u=0;u<s;u++){if(r[u]!==o[u]){a=u
break}}var c=[]
for(var u=a;u<r.length;u++){c.push("..")}c=c.concat(o.slice(a))
return c.join("/")}
e.sep="/"
e.delimiter=":"
e.dirname=function(t){var e=r(t),i=e[0],n=e[1]
if(!i&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return i+n}
e.basename=function(t,e){var i=r(t)[2]
if(e&&i.substr(-1*e.length)===e){i=i.substr(0,i.length-e.length)}return i}
e.extname=function(t){return r(t)[3]}
function o(t,e){if(t.filter)return t.filter(e)
var i=[]
for(var n=0;n<t.length;n++){if(e(t[n],n,t))i.push(t[n])}return i}var s="ab".substr(-1)==="b"?function(t,e,i){return t.substr(e,i)}:function(t,e,i){if(e<0)e=t.length+e
return t.substr(e,i)}}).call(e,i(61))},function(t,e,i){var n

;/*! Player.js - v0.0.12 - 2017-05-25
* http://github.com/embedly/player.js
* Copyright (c) 2017 Embedly; Licensed BSD */
/*! Player.js - v0.0.12 - 2017-05-25
* http://github.com/embedly/player.js
* Copyright (c) 2017 Embedly; Licensed BSD */
(function(r,o){var s={}
s.DEBUG=false
s.VERSION="0.0.11"
s.CONTEXT="player.js"
s.POST_MESSAGE=!!r.postMessage
s.origin=function(t){if(t.substr(0,2)==="//"){t=r.location.protocol+t}return t.split("/").slice(0,3).join("/")}
s.addEvent=function(t,e,i){if(!t){return}if(t.addEventListener){t.addEventListener(e,i,false)}else if(t.attachEvent){t.attachEvent("on"+e,i)}else{t["on"+e]=i}}
s.log=function(){s.log.history=s.log.history||[]
s.log.history.push(arguments)
if(r.console&&s.DEBUG){r.console.log(Array.prototype.slice.call(arguments))}}
s.isString=function(t){return Object.prototype.toString.call(t)==="[object String]"}
s.isObject=function(t){return Object.prototype.toString.call(t)==="[object Object]"}
s.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}
s.isNone=function(t){return t===null||t===undefined}
s.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
s.indexOf=function(t,e){if(t==null){return-1}var i=0,n=t.length
if(Array.prototype.IndexOf&&t.indexOf===Array.prototype.IndexOf){return t.indexOf(e)}for(;i<n;i++){if(t[i]===e){return i}}return-1}
s.assert=function(t,e){if(!t){throw e||"Player.js Assert Failed"}}
s.Keeper=function(){this.init()}
s.Keeper.prototype.init=function(){this.data={}}
s.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,i=t==="x"?e:e&3|8
return i.toString(16)})}
s.Keeper.prototype.has=function(t,e){if(!this.data.hasOwnProperty(t)){return false}if(s.isNone(e)){return true}var i=this.data[t]
for(var n=0;n<i.length;n++){if(i[n].id===e){return true}}return false}
s.Keeper.prototype.add=function(t,e,i,n,r){var o={id:t,event:e,cb:i,ctx:n,one:r}
if(this.has(e)){this.data[e].push(o)}else{this.data[e]=[o]}}
s.Keeper.prototype.execute=function(t,e,i,n){if(!this.has(t,e)){return false}var r=[],o=[]
for(var a=0;a<this.data[t].length;a++){var u=this.data[t][a]
if(s.isNone(e)||!s.isNone(e)&&u.id===e){o.push({cb:u.cb,ctx:u.ctx?u.ctx:n,data:i})
if(u.one===false){r.push(u)}}else{r.push(u)}}if(r.length===0){delete this.data[t]}else{this.data[t]=r}for(var c=0;c<o.length;c++){var p=o[c]
p.cb.call(p.ctx,p.data)}}
s.Keeper.prototype.on=function(t,e,i,n){this.add(t,e,i,n,false)}
s.Keeper.prototype.one=function(t,e,i,n){this.add(t,e,i,n,true)}
s.Keeper.prototype.off=function(t,e){var i=[]
if(!this.data.hasOwnProperty(t)){return i}var n=[]
for(var r=0;r<this.data[t].length;r++){var o=this.data[t][r]
if(!s.isNone(e)&&o.cb!==e){n.push(o)}else if(!s.isNone(o.id)){i.push(o.id)}}if(n.length===0){delete this.data[t]}else{this.data[t]=n}return i}
s.Player=function(t,e){if(!(this instanceof s.Player)){return new s.Player(t,e)}this.init(t,e)}
s.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"}
s.EVENTS.all=function(){var t=[]
for(var e in s.EVENTS){if(s.has(s.EVENTS,e)&&s.isString(s.EVENTS[e])){t.push(s.EVENTS[e])}}return t}
s.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"}
s.METHODS.all=function(){var t=[]
for(var e in s.METHODS){if(s.has(s.METHODS,e)&&s.isString(s.METHODS[e])){t.push(s.METHODS[e])}}return t}
s.READIED=[]
s.Player.prototype.init=function(t,e){var i=this
if(s.isString(t)){t=o.getElementById(t)}this.elem=t
this.origin=s.origin(t.src)
this.keeper=new s.Keeper
this.isReady=false
this.queue=[]
this.events=s.EVENTS.all()
this.methods=s.METHODS.all()
if(s.POST_MESSAGE){s.addEvent(r,"message",function(t){i.receive(t)})}else{s.log("Post Message is not Available.")}if(s.indexOf(s.READIED,t.src)>-1){i.loaded=true}else{this.elem.onload=function(){i.loaded=true}}}
s.Player.prototype.send=function(t,e,i){t.context=s.CONTEXT
t.version=s.VERSION
if(e){var n=this.keeper.getUUID()
t.listener=n
this.keeper.one(n,t.method,e,i)}if(!this.isReady&&t.value!=="ready"){s.log("Player.queue",t)
this.queue.push(t)
return false}s.log("Player.send",t,this.origin)
if(this.loaded===true){this.elem.contentWindow.postMessage(JSON.stringify(t),this.origin)}return true}
s.Player.prototype.receive=function(t){s.log("Player.receive",t)
if(t.origin!==this.origin){return false}var e
try{e=JSON.parse(t.data)}catch(t){return false}if(e.context!==s.CONTEXT){return false}if(e.event==="ready"&&e.value&&e.value.src===this.elem.src){this.ready(e)}if(this.keeper.has(e.event,e.listener)){this.keeper.execute(e.event,e.listener,e.value,this)}}
s.Player.prototype.ready=function(t){if(this.isReady===true){return false}if(t.value.events){this.events=t.value.events}if(t.value.methods){this.methods=t.value.methods}this.isReady=true
this.loaded=true
for(var e=0;e<this.queue.length;e++){var i=this.queue[e]
s.log("Player.dequeue",i)
if(t.event==="ready"){this.keeper.execute(i.event,i.listener,true,this)}this.send(i)}this.queue=[]}
s.Player.prototype.on=function(t,e,i){var n=this.keeper.getUUID()
if(t==="ready"){this.keeper.one(n,t,e,i)}else{this.keeper.on(n,t,e,i)}this.send({method:"addEventListener",value:t,listener:n})
return true}
s.Player.prototype.off=function(t,e){var i=this.keeper.off(t,e)
s.log("Player.off",i)
if(i.length>0){for(var n in i){this.send({method:"removeEventListener",value:t,listener:i[n]})
return true}}return false}
s.Player.prototype.supports=function(t,e){s.assert(s.indexOf(["method","event"],t)>-1,'evtOrMethod needs to be either "event" or "method" got '+t)
e=s.isArray(e)?e:[e]
var i=t==="event"?this.events:this.methods
for(var n=0;n<e.length;n++){if(s.indexOf(i,e[n])===-1){return false}}return true}
function a(t){return function(){var e={method:t}
var i=Array.prototype.slice.call(arguments)
if(/^get/.test(t)){s.assert(i.length>0,"Get methods require a callback.")
i.unshift(e)}else{if(/^set/.test(t)){s.assert(i.length!==0,"Set methods require a value.")
e.value=i[0]}i=[e]}this.send.apply(this,i)}}for(var u=0,c=s.METHODS.all().length;u<c;u++){var p=s.METHODS.all()[u]
if(!s.Player.prototype.hasOwnProperty(p)){s.Player.prototype[p]=a(p)}}s.addEvent(r,"message",function(t){var e
try{e=JSON.parse(t.data)}catch(t){return false}if(e.context!==s.CONTEXT){return false}if(e.event==="ready"&&e.value&&e.value.src){s.READIED.push(e.value.src)}})
s.Receiver=function(t,e){this.init(t,e)}
s.Receiver.prototype.init=function(t,e){var i=this
this.isReady=false
this.origin=s.origin(o.referrer)
this.methods={}
this.supported={events:t?t:s.EVENTS.all(),methods:e?e:s.METHODS.all()}
this.eventListeners={}
this.reject=!(r.self!==r.top&&s.POST_MESSAGE)
if(!this.reject){s.addEvent(r,"message",function(t){i.receive(t)})}}
s.Receiver.prototype.receive=function(t){if(t.origin!==this.origin){return false}var e={}
if(s.isObject(t.data)){e=t.data}else{try{e=r.JSON.parse(t.data)}catch(t){s.log("JSON Parse Error",t)}}s.log("Receiver.receive",t,e)
if(!e.method){return false}if(e.context!==s.CONTEXT){return false}if(s.indexOf(s.METHODS.all(),e.method)===-1){this.emit("error",{code:2,msg:'Invalid Method "'+e.method+'"'})
return false}var i=!s.isNone(e.listener)?e.listener:null
if(e.method==="addEventListener"){if(this.eventListeners.hasOwnProperty(e.value)){if(s.indexOf(this.eventListeners[e.value],i)===-1){this.eventListeners[e.value].push(i)}}else{this.eventListeners[e.value]=[i]}if(e.value==="ready"&&this.isReady){this.ready()}}else if(e.method==="removeEventListener"){if(this.eventListeners.hasOwnProperty(e.value)){var n=s.indexOf(this.eventListeners[e.value],i)
if(n>-1){this.eventListeners[e.value].splice(n,1)}if(this.eventListeners[e.value].length===0){delete this.eventListeners[e.value]}}}else{this.get(e.method,e.value,i)}}
s.Receiver.prototype.get=function(t,e,i){var n=this
if(!this.methods.hasOwnProperty(t)){this.emit("error",{code:3,msg:'Method Not Supported"'+t+'"'})
return false}var r=this.methods[t]
if(t.substr(0,3)==="get"){var o=function(e){n.send(t,e,i)}
r.call(this,o)}else{r.call(this,e)}}
s.Receiver.prototype.on=function(t,e){this.methods[t]=e}
s.Receiver.prototype.send=function(t,e,i){s.log("Receiver.send",t,e,i)
if(this.reject){s.log("Receiver.send.reject",t,e,i)
return false}var n={context:s.CONTEXT,version:s.VERSION,event:t}
if(!s.isNone(e)){n.value=e}if(!s.isNone(i)){n.listener=i}var o=JSON.stringify(n)
r.parent.postMessage(o,this.origin===""?"*":this.origin)}
s.Receiver.prototype.emit=function(t,e){if(!this.eventListeners.hasOwnProperty(t)){return false}s.log("Instance.emit",t,e,this.eventListeners[t])
for(var i=0;i<this.eventListeners[t].length;i++){var n=this.eventListeners[t][i]
this.send(t,e,n)}return true}
s.Receiver.prototype.ready=function(){s.log("Receiver.ready")
this.isReady=true
var t={src:r.location.toString(),events:this.supported.events,methods:this.supported.methods}
if(!this.emit("ready",t)){this.send("ready",t)}}
s.HTML5Adapter=function(t){if(!(this instanceof s.HTML5Adapter)){return new s.HTML5Adapter(t)}this.init(t)}
s.HTML5Adapter.prototype.init=function(t){s.assert(t,"playerjs.VideoJSReceiver requires a video element")
var e=this.receiver=new s.Receiver
t.addEventListener("playing",function(){e.emit("play")})
t.addEventListener("pause",function(){e.emit("pause")})
t.addEventListener("ended",function(){e.emit("ended")})
t.addEventListener("timeupdate",function(){e.emit("timeupdate",{seconds:t.currentTime,duration:t.duration})})
t.addEventListener("progress",function(){e.emit("buffered",{percent:t.buffered.length})})
e.on("play",function(){t.play()})
e.on("pause",function(){t.pause()})
e.on("getPaused",function(e){e(t.paused)})
e.on("getCurrentTime",function(e){e(t.currentTime)})
e.on("setCurrentTime",function(e){t.currentTime=e})
e.on("getDuration",function(e){e(t.duration)})
e.on("getVolume",function(e){e(t.volume*100)})
e.on("setVolume",function(e){t.volume=e/100})
e.on("mute",function(){t.muted=true})
e.on("unmute",function(){t.muted=false})
e.on("getMuted",function(e){e(t.muted)})
e.on("getLoop",function(e){e(t.loop)})
e.on("setLoop",function(e){t.loop=e})}
s.HTML5Adapter.prototype.ready=function(){this.receiver.ready()}
s.JWPlayerAdapter=function(t){if(!(this instanceof s.JWPlayerAdapter)){return new s.JWPlayerAdapter(t)}this.init(t)}
s.JWPlayerAdapter.prototype.init=function(t){s.assert(t,"playerjs.JWPlayerAdapter requires a player object")
var e=this.receiver=new s.Receiver
this.looped=false
t.onPause(function(){e.emit("pause")})
t.onPlay(function(){e.emit("play")})
t.onTime(function(t){var i=t.position,n=t.duration
if(!i||!n){return false}var r={seconds:i,duration:n}
e.emit("timeupdate",r)})
var i=this
t.onComplete(function(){if(i.looped===true){t.seek(0)}else{e.emit("ended")}})
t.onError(function(){e.emit("error")})
e.on("play",function(){t.play(true)})
e.on("pause",function(){t.pause(true)})
e.on("getPaused",function(e){e(t.getState().toLowerCase()!=="PLAYING".toLowerCase())})
e.on("getCurrentTime",function(e){e(t.getPosition())})
e.on("setCurrentTime",function(e){t.seek(e)})
e.on("getDuration",function(e){e(t.getDuration())})
e.on("getVolume",function(e){e(t.getVolume())})
e.on("setVolume",function(e){t.setVolume(e)})
e.on("mute",function(){t.setMute(true)})
e.on("unmute",function(){t.setMute(false)})
e.on("getMuted",function(e){e(t.getMute()===true)})
e.on("getLoop",function(t){t(this.looped)},this)
e.on("setLoop",function(t){this.looped=t},this)}
s.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()}
s.MockAdapter=function(){if(!(this instanceof s.MockAdapter)){return new s.MockAdapter}this.init()}
s.MockAdapter.prototype.init=function(){var t={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:false,playing:false,loop:false,play:function(){t.interval=setInterval(function(){t.currentTime+=.25
t.timeupdate({seconds:t.currentTime,duration:t.duration})},250)
t.playing=true},pause:function(){clearInterval(t.interval)
t.playing=false}}
var e=this.receiver=new s.Receiver
e.on("play",function(){var e=this
t.play()
this.emit("play")
t.timeupdate=function(t){e.emit("timeupdate",t)}})
e.on("pause",function(){t.pause()
this.emit("pause")})
e.on("getPaused",function(e){e(!t.playing)})
e.on("getCurrentTime",function(e){e(t.currentTime)})
e.on("setCurrentTime",function(e){t.currentTime=e})
e.on("getDuration",function(e){e(t.duration)})
e.on("getVolume",function(e){e(t.volume)})
e.on("setVolume",function(e){t.volume=e})
e.on("mute",function(){t.mute=true})
e.on("unmute",function(){t.mute=false})
e.on("getMuted",function(e){e(t.mute)})
e.on("getLoop",function(e){e(t.loop)})
e.on("setLoop",function(e){t.loop=e})}
s.MockAdapter.prototype.ready=function(){this.receiver.ready()}
s.VideoJSAdapter=function(t){if(!(this instanceof s.VideoJSAdapter)){return new s.VideoJSAdapter(t)}this.init(t)}
s.VideoJSAdapter.prototype.init=function(t){s.assert(t,"playerjs.VideoJSReceiver requires a player object")
var e=this.receiver=new s.Receiver
t.on("pause",function(){e.emit("pause")})
t.on("play",function(){e.emit("play")})
t.on("timeupdate",function(i){var n=t.currentTime(),r=t.duration()
if(!n||!r){return false}var o={seconds:n,duration:r}
e.emit("timeupdate",o)})
t.on("ended",function(){e.emit("ended")})
t.on("error",function(){e.emit("error")})
e.on("play",function(){t.play()})
e.on("pause",function(){t.pause()})
e.on("getPaused",function(e){e(t.paused())})
e.on("getCurrentTime",function(e){e(t.currentTime())})
e.on("setCurrentTime",function(e){t.currentTime(e)})
e.on("getDuration",function(e){e(t.duration())})
e.on("getVolume",function(e){e(t.volume()*100)})
e.on("setVolume",function(e){t.volume(e/100)})
e.on("mute",function(){t.volume(0)})
e.on("unmute",function(){t.volume(1)})
e.on("getMuted",function(e){e(t.volume()===0)})
e.on("getLoop",function(e){e(t.loop())})
e.on("setLoop",function(e){t.loop(e)})}
s.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}
if(true){!(n=function(){return s}.call(e,i,e,t),n!==undefined&&(t.exports=n))}else if(typeof t==="object"&&t.exports){t.exports=s}else{r.playerjs=s}})(window,document)},function(t,e){t.exports='/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\nbody {\n  background-color: white;\n  cursor: default;\n  box-sizing: border-box;\n}\n/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */\n\n\nhtml {\n  font-family: sans-serif;\n\n  line-height: 1.15;\n\n  -ms-text-size-adjust: 100%;\n\n  -webkit-text-size-adjust: 100%;\n\n}\n\narticle,\naside,\nfooter,\nheader,\nnav,\nsection {\n  display: block;\n}\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n\nfigcaption,\nfigure,\nmain {\n\n  display: block;\n}\n\nfigure {\n  margin: 1em 40px;\n}\n\nhr {\n  box-sizing: content-box;\n\n  height: 0;\n\n  overflow: visible;\n\n}\n\npre {\n  font-family: monospace, monospace;\n\n  font-size: 1em;\n\n}\n\n\na {\n  background-color: transparent;\n\n  -webkit-text-decoration-skip: objects;\n\n}\n\na:active,\na:hover {\n  outline-width: 0;\n}\n\nabbr[title] {\n  border-bottom: none;\n\n  text-decoration: underline;\n\n  text-decoration: underline dotted;\n\n}\n\nb,\nstrong {\n  font-weight: inherit;\n}\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace;\n\n  font-size: 1em;\n\n}\n\ndfn {\n  font-style: italic;\n}\n\nmark {\n  background-color: #ff0;\n  color: #000;\n}\n\nsmall {\n  font-size: 80%;\n}\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\nsub {\n  bottom: -0.25em;\n}\nsup {\n  top: -0.5em;\n}\n\n\naudio,\nvideo {\n  display: inline-block;\n}\n\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n\nimg {\n  border-style: none;\n}\n\nsvg:not(:root) {\n  overflow: hidden;\n}\n\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: sans-serif;\n\n  font-size: 100%;\n\n  line-height: 1.15;\n\n  margin: 0;\n\n}\n\nbutton,\ninput {\n\n  overflow: visible;\n}\n\nbutton,\nselect {\n\n  text-transform: none;\n}\n\nbutton,\nhtml [type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n\n}\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\nlegend {\n  box-sizing: border-box;\n\n  color: inherit;\n\n  display: table;\n\n  max-width: 100%;\n\n  padding: 0;\n\n  white-space: normal;\n\n}\n\nprogress {\n  display: inline-block;\n\n  vertical-align: baseline;\n\n}\n\ntextarea {\n  overflow: auto;\n}\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box;\n\n  padding: 0;\n\n}\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n[type="search"] {\n  -webkit-appearance: textfield;\n\n  outline-offset: -2px;\n\n}\n\n[type="search"]::-webkit-search-cancel-button,\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button;\n\n  font: inherit;\n\n}\n\n\ndetails,\nmenu {\n  display: block;\n}\n\nsummary {\n  display: list-item;\n}\n\n\ncanvas {\n  display: inline-block;\n}\n\ntemplate {\n  display: none;\n}\n\n\n[hidden] {\n  display: none;\n}\ninput:focus,\ninput.__focus {\n  outline: 4px solid rgba(117, 170, 255, 0.5);\n}\nbutton:focus,\nbutton.__focus {\n  outline: 4px solid rgba(117, 170, 255, 0.5);\n}\nbutton:active,\nbutton.__active {\n  -ms-transform: scale(0.97);\n      transform: scale(0.97);\n}\n::-moz-selection {\n  background-color: #75aaff;\n}\n::selection {\n  background-color: #75aaff;\n}\n'},function(t,e,i){"use strict"
var n=t.exports=function t(e){this.data=e}
n.isCompatible=function t(e){return e&&typeof e==="object"&&"byteLength"in e}
n.fromResponseData=function t(e){return new n(new DataView(e))}
n.prototype={get version(){return this.data.getInt32(0,true)},get is_8_bit(){return!!this.data.getUint32(4,true)},get is_16_bit(){return!this.is_8_bit},get sample_rate(){return this.data.getInt32(8,true)},get scale(){return this.data.getInt32(12,true)},get length(){return this.data.getUint32(16,true)},at:function t(e){return Math.round(this.data.getInt8(20+e))}}},function(t,e,i){"use strict"
t.exports={arraybuffer:i(276),object:i(278)}},function(t,e,i){"use strict"
var n=t.exports=function t(e){this.data=e}
n.isCompatible=function t(e){return e&&(typeof e==="object"&&"sample_rate"in e)||typeof e==="string"&&"sample_rate"in JSON.parse(e)}
n.fromResponseData=function t(e){if(typeof e==="string"){return new n(JSON.parse(e))}else{return new n(e)}}
n.prototype={get version(){return this.data.version||1},get is_8_bit(){return this.data.bits===8},get is_16_bit(){return!this.is_8_bit},get sample_rate(){return this.data.sample_rate},get scale(){return this.data.samples_per_pixel},get length(){return this.data.length},at:function t(e){return Math.round(this.data.data[e])}}},function(t,e,i){"use strict"
var n=i(108)
function r(t,e,i,r){var o=window.AudioContext||window.webkitAudioContext
var s={scale:512,amplitude_scale:1}
if(t instanceof o===false){throw new TypeError("First argument should be an instance of window.AudioContext")}if(typeof i==="function"){r=i
i={}}else{i=i||{}}i.scale=i.scale||s.scale
i.amplitude_scale=i.amplitude_scale||s.amplitude_scale
if(i.hasOwnProperty("scale_adjuster")){throw new Error("Please rename the 'scale_adjuster' option to 'amplitude_scale'")}return t.decodeAudioData(e,n(i,r),r)}t.exports=r},function(t,e,i){"use strict"
var n=i(282)
var r=i(281)
var o=t.exports=function t(e,i){this.adapter=i.fromResponseData(e)
this.segments={}
this.points={}
this.offset(0,this.adapter.length)}
o.create=function t(e){var i=null
var n=null
if(e&&typeof e==="object"&&("responseText"in e||"response"in e)){n="responseType"in e?e.response:e.responseText||e.response}Object.keys(o.adapters).some(function(t){if(o.adapters[t].isCompatible(n||e)){i=o.adapters[t]
return true}})
if(i===null){throw new TypeError("Could not detect a WaveformData adapter from the input.")}return new o(n||e,i)}
o.prototype={offset:function(t,e){var i=this.adapter.length
if(e<0){throw new RangeError("End point must be non-negative ["+Number(e)+" < 0]")}if(e<=t){throw new RangeError("We can't end prior to the starting point ["+Number(e)+" <= "+Number(t)+"]")}if(t<0){throw new RangeError("Start point must be non-negative ["+Number(t)+" < 0]")}if(t>=i){throw new RangeError("Start point must be within range ["+Number(t)+" >= "+i+"]")}if(e>i){e=i}this.offset_start=t
this.offset_end=e
this.offset_length=e-t},set_segment:function t(e,i,r){if(r===undefined||r===null||r.length===0){r="default"}this.segments[r]=new n(this,e,i)
return this.segments[r]},set_point:function t(e,i){if(i===undefined||i===null||i.length===0){i="default"}this.points[i]=new r(this,e)
return this.points[i]},remove_point:function t(e){if(this.points[e]){delete this.points[e]}},resample:function(t){if(typeof t==="number"){t={width:t}}t.input_index=typeof t.input_index==="number"?t.input_index:null
t.output_index=typeof t.output_index==="number"?t.output_index:null
t.scale=typeof t.scale==="number"?t.scale:null
t.width=typeof t.width==="number"?t.width:null
var e=Boolean(t.input_index)||Boolean(t.output_index)
if(t.input_index!==null&&t.input_index>=0===false){throw new RangeError("options.input_index should be a positive integer value. ["+t.input_index+"]")}if(t.output_index!==null&&t.output_index>=0===false){throw new RangeError("options.output_index should be a positive integer value. ["+t.output_index+"]")}if(t.width!==null&&t.width>0===false){throw new RangeError("options.width should be a strictly positive integer value. ["+t.width+"]")}if(t.scale!==null&&t.scale>0===false){throw new RangeError("options.scale should be a strictly positive integer value. ["+t.scale+"]")}if(!t.scale&&!t.width){throw new RangeError("You should provide either a resampling scale or a width in pixel the data should fit in.")}var i=["width","scale","output_index","input_index"].reduce(function(e,i){return e+(t[i]===null?0:1)},0)
if(e&&i!==4){throw new Error("Some partial resampling options are missing. You provided "+i+" of them over 4.")}var n=[]
var r=t.scale||Math.floor(this.duration*this.adapter.sample_rate/t.width)
var s=this.adapter.scale
var a=2
var u=this.adapter.length
var c=t.input_index||0
var p=t.output_index||0
var l=u?this.min_sample(c):0
var h=u?this.max_sample(c):0
var d=-128
var f=127
if(r<s){throw new Error("Zoom level "+r+" too low, minimum: "+s)}var m,y,g,v,_
var b=function t(e){return Math.floor(e*r)}
var x=function t(e,i){n.push(e,i)}
while(c<u){while(Math.floor(b(p)/s)<=c){if(p){x(l,h)}_=c
p++
m=b(p)
y=b(p-1)
if(m!==y){l=f
h=d}}m=b(p)
g=Math.floor(m/s)
if(g>u){g=u}while(c<g){v=this.min_sample(c)
if(v<l){l=v}v=this.max_sample(c)
if(v>h){h=v}c++}if(e&&n.length/a>=t.width){break}}if(e){if(n.length/a>t.width&&c!==_){x(l,h)}}else if(c!==_){x(l,h)}return new o({version:this.adapter.version,samples_per_pixel:r,length:n.length/a,data:n,sample_rate:this.adapter.sample_rate},o.adapters.object)},get min(){return this.offsetValues(this.offset_start,this.offset_length,0)},get max(){return this.offsetValues(this.offset_start,this.offset_length,1)},offsetValues:function t(e,i,n){var r=this.adapter
var o=[]
n+=e*2
for(var s=0;s<i;s++){o.push(r.at(s*2+n))}return o},get duration(){return this.adapter.length*this.adapter.scale/this.adapter.sample_rate},get offset_duration(){return this.offset_length*this.adapter.scale/this.adapter.sample_rate},get pixels_per_second(){return this.adapter.sample_rate/this.adapter.scale},get seconds_per_pixel(){return this.adapter.scale/this.adapter.sample_rate},at:function t(e){return this.adapter.at(e)},at_time:function t(e){return Math.floor(e*this.adapter.sample_rate/this.adapter.scale)},time:function t(e){return e*this.seconds_per_pixel},in_offset:function t(e){return e>=this.offset_start&&e<this.offset_end},min_sample:function t(e){return this.adapter.at(e*2)},max_sample:function t(e){return this.adapter.at(e*2+1)}}
o.adapters={}
o.adapter=function t(e){this.data=e}},function(t,e,i){"use strict"
var n=t.exports=function t(e,i){this.context=e
this.timeStamp=i}
n.prototype={get visible(){return this.context.in_offset(this.timeStamp)}}},function(t,e,i){"use strict"
var n=t.exports=function t(e,i,n){this.context=e
this.start=i
this.end=n}
n.prototype={get offset_start(){if(this.start<this.context.offset_start&&this.end>this.context.offset_start){return this.context.offset_start}if(this.start>=this.context.offset_start&&this.start<this.context.offset_end){return this.start}return null},get offset_end(){if(this.end>this.context.offset_start&&this.end<=this.context.offset_end){return this.end}if(this.end>this.context.offset_end&&this.start<this.context.offset_end){return this.context.offset_end}return null},get offset_length(){return this.offset_end-this.offset_start},get length(){return this.end-this.start},get visible(){return this.context.in_offset(this.start)||this.context.in_offset(this.end)||this.context.offset_start>this.start&&this.context.offset_start<this.end},get min(){return this.visible?this.context.offsetValues(this.offset_start,this.offset_length,0):[]},get max(){return this.visible?this.context.offsetValues(this.offset_start,this.offset_length,1):[]}}},function(t,e,i){"use strict"
var n=i(279)
t.exports=n},function(t,e){t.exports=i
function i(){}i.mixin=function(t){var e=t.prototype||t
e.isWildEmitter=true
e.on=function(t,e,i){this.callbacks=this.callbacks||{}
var n=arguments.length===3,r=n?arguments[1]:undefined,o=n?arguments[2]:arguments[1]
o._groupName=r;(this.callbacks[t]=this.callbacks[t]||[]).push(o)
return this}
e.once=function(t,e,i){var n=this,r=arguments.length===3,o=r?arguments[1]:undefined,s=r?arguments[2]:arguments[1]
function a(){n.off(t,a)
s.apply(this,arguments)}this.on(t,o,a)
return this}
e.releaseGroup=function(t){this.callbacks=this.callbacks||{}
var e,i,n,r
for(e in this.callbacks){r=this.callbacks[e]
for(i=0,n=r.length;i<n;i++){if(r[i]._groupName===t){r.splice(i,1)
i--
n--}}}return this}
e.off=function(t,e){this.callbacks=this.callbacks||{}
var i=this.callbacks[t],n
if(!i)return this
if(arguments.length===1){delete this.callbacks[t]
return this}n=i.indexOf(e)
i.splice(n,1)
if(i.length===0){delete this.callbacks[t]}return this}
e.emit=function(t){this.callbacks=this.callbacks||{}
var e=[].slice.call(arguments,1),i=this.callbacks[t],n=this.getWildcardCallbacks(t),r,o,s,a
if(i){a=i.slice()
for(r=0,o=a.length;r<o;++r){if(!a[r]){break}a[r].apply(this,e)}}if(n){o=n.length
a=n.slice()
for(r=0,o=a.length;r<o;++r){if(!a[r]){break}a[r].apply(this,[t].concat(e))}}return this}
e.getWildcardCallbacks=function(t){this.callbacks=this.callbacks||{}
var e,i,n=[]
for(e in this.callbacks){i=e.split("*")
if(e==="*"||i.length===2&&t.slice(0,i[0].length)===i[0]){n=n.concat(this.callbacks[e])}}return n}}
i.mixin(i)},function(t,e,i){i(111)
t.exports=i(110)}])
